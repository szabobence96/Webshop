"use strict";(self.webpackChunkwebshop=self.webpackChunkwebshop||[]).push([[179],{6304:(en,Ae,Q)=>{Q.d(Ae,{Dh:()=>ut,GT:()=>Re,cc:()=>me,hO:()=>Ne,on:()=>z,pX:()=>ce,xv:()=>Ve});var c=Q(5879),U=Q(120),K=Q(2793);en=Q.hmd(en);const pe=["ngOnDestroy"],ce=(ke,at,Ze,Ce={})=>new Proxy(ke,{get:(nt,$e)=>Ze.runOutsideAngular(()=>{var it;if(ke[$e])return!(null===(it=Ce?.spy)||void 0===it)&&it.get&&Ce.spy.get($e,ke[$e]),ke[$e];if(pe.indexOf($e)>-1)return()=>{};const he=at.toPromise().then(ue=>{const Ge=ue&&ue[$e];return"function"==typeof Ge?Ge.bind(ue):Ge&&Ge.then?Ge.then(Le=>Ze.run(()=>Le)):Ze.run(()=>Ge)});return new Proxy(()=>{},{get:(ue,Ge)=>he[Ge],apply:(ue,Ge,Le)=>he.then(Et=>{var ot;const Kt=Et&&Et(...Le);return!(null===(ot=Ce?.spy)||void 0===ot)&&ot.apply&&Ce.spy.apply($e,Le,Kt),Kt})})})}),Re=(ke,at)=>{at.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Ce=>{Object.defineProperty(ke.prototype,Ce,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Ce))})})};class Oe{constructor(at){return at}}const ut=new c.OlP("angularfire2.app.options"),Ve=new c.OlP("angularfire2.app.name");function z(ke,at,Ze){const nt="object"==typeof Ze&&Ze||{};nt.name=nt.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const it=U.Z.apps.filter(he=>he&&he.name===nt.name)[0]||at.runOutsideAngular(()=>U.Z.initializeApp(ke,nt));try{JSON.stringify(ke)!==JSON.stringify(it.options)&&G("error",`${it.name} Firebase App already initialized with different options${en.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Oe(it)}const G=(ke,...at)=>{(0,c.X6Q)()&&typeof console<"u"&&console[ke](...at)},de={provide:Oe,useFactory:z,deps:[ut,c.R0b,[new c.FiY,Ve]]};let Ne=(()=>{class ke{constructor(Ze){U.Z.registerVersion("angularfire",K.q4.full,"core"),U.Z.registerVersion("angularfire",K.q4.full,"app-compat"),U.Z.registerVersion("angular",c.q4F.full,Ze.toString())}static initializeApp(Ze,Ce){return{ngModule:ke,providers:[{provide:ut,useValue:Ze},{provide:Ve,useValue:Ce}]}}}return ke.\u0275fac=function(Ze){return new(Ze||ke)(c.LFG(c.Lbi))},ke.\u0275mod=c.oAB({type:ke}),ke.\u0275inj=c.cJS({providers:[de]}),ke})();function me(ke,at,Ze,Ce,nt){const[,$e,it]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===ke)||[];if($e)return function lt(ke,at){try{return ke.toString()===at.toString()}catch{return ke===at}}(nt,it)||(mt("error",`${at} was already initialized on the ${Ze} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),mt("warn",{is:nt,was:it})),$e;{const he=Ce();return globalThis.\u0275AngularfireInstanceCache.push([ke,he,nt]),he}}const st=!!en.hot,mt=(ke,...at)=>{(0,c.X6Q)()&&typeof console<"u"&&console[ke](...at)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(en,Ae,Q)=>{Q.d(Ae,{q4:()=>Cu,iC:()=>qs,HU:()=>sr,vb:()=>rh,JM:()=>ih,u3:()=>Bc});var c=Q(5879),U=Q(4097),K=Q(5861),pe=Q(534),ce=Q(9058),Re=Q(4537),Oe=Q(7879);const ut=(O,F)=>F.some(H=>O instanceof H);let Ve,z;const Ne=new WeakMap,me=new WeakMap,lt=new WeakMap,st=new WeakMap,mt=new WeakMap;let Ze={get(O,F,H){if(O instanceof IDBTransaction){if("done"===F)return me.get(O);if("objectStoreNames"===F)return O.objectStoreNames||lt.get(O);if("store"===F)return H.objectStoreNames[1]?void 0:H.objectStore(H.objectStoreNames[0])}return it(O[F])},set:(O,F,H)=>(O[F]=H,!0),has:(O,F)=>O instanceof IDBTransaction&&("done"===F||"store"===F)||F in O};function $e(O){return"function"==typeof O?function nt(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...F){return O.apply(he(this),F),it(Ne.get(this))}:function(...F){return it(O.apply(he(this),F))}:function(F,...H){const oe=O.call(he(this),F,...H);return lt.set(oe,F.sort?F.sort():[F]),it(oe)}}(O):(O instanceof IDBTransaction&&function at(O){if(me.has(O))return;const F=new Promise((H,oe)=>{const be=()=>{O.removeEventListener("complete",Ue),O.removeEventListener("error",rt),O.removeEventListener("abort",rt)},Ue=()=>{H(),be()},rt=()=>{oe(O.error||new DOMException("AbortError","AbortError")),be()};O.addEventListener("complete",Ue),O.addEventListener("error",rt),O.addEventListener("abort",rt)});me.set(O,F)}(O),ut(O,function G(){return Ve||(Ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,Ze):O)}function it(O){if(O instanceof IDBRequest)return function ke(O){const F=new Promise((H,oe)=>{const be=()=>{O.removeEventListener("success",Ue),O.removeEventListener("error",rt)},Ue=()=>{H(it(O.result)),be()},rt=()=>{oe(O.error),be()};O.addEventListener("success",Ue),O.addEventListener("error",rt)});return F.then(H=>{H instanceof IDBCursor&&Ne.set(H,O)}).catch(()=>{}),mt.set(F,O),F}(O);if(st.has(O))return st.get(O);const F=$e(O);return F!==O&&(st.set(O,F),mt.set(F,O)),F}const he=O=>mt.get(O),Le=["get","getKey","getAll","getAllKeys","count"],Et=["put","add","delete","clear"],ot=new Map;function Kt(O,F){if(!(O instanceof IDBDatabase)||F in O||"string"!=typeof F)return;if(ot.get(F))return ot.get(F);const H=F.replace(/FromIndex$/,""),oe=F!==H,be=Et.includes(H);if(!(H in(oe?IDBIndex:IDBObjectStore).prototype)||!be&&!Le.includes(H))return;const Ue=function(){var rt=(0,K.Z)(function*(Bt,...Ft){const hn=this.transaction(Bt,be?"readwrite":"readonly");let Ln=hn.store;return oe&&(Ln=Ln.index(Ft.shift())),(yield Promise.all([Ln[H](...Ft),be&&hn.done]))[0]});return function(Ft){return rt.apply(this,arguments)}}();return ot.set(F,Ue),Ue}!function Ce(O){Ze=O(Ze)}(O=>({...O,get:(F,H,oe)=>Kt(F,H)||O.get(F,H,oe),has:(F,H)=>!!Kt(F,H)||O.has(F,H)}));const nn="@firebase/installations",un="0.6.4",rn=1e4,fi=`w:${un}`,De="FIS_v2",Ee="https://firebaseinstallations.googleapis.com/v1",He=36e5,At=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bt(O){return O instanceof ce.ZR&&O.code.includes("request-failed")}function Tn({projectId:O}){return`${Ee}/projects/${O}/installations`}function dn(O){return{token:O.token,requestStatus:2,expiresIn:Fn(O.expiresIn),creationTime:Date.now()}}function Nn(O,F){return fn.apply(this,arguments)}function fn(){return(fn=(0,K.Z)(function*(O,F){const oe=(yield F.json()).error;return At.create("request-failed",{requestName:O,serverCode:oe.code,serverMessage:oe.message,serverStatus:oe.status})})).apply(this,arguments)}function tn({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function Ut(O){return cn.apply(this,arguments)}function cn(){return(cn=(0,K.Z)(function*(O){const F=yield O();return F.status>=500&&F.status<600?O():F})).apply(this,arguments)}function Fn(O){return Number(O.replace("s","000"))}function Si(){return(Si=(0,K.Z)(function*({appConfig:O,heartbeatServiceProvider:F},{fid:H}){const oe=Tn(O),be=tn(O),Ue=F.getImmediate({optional:!0});if(Ue){const hn=yield Ue.getHeartbeatsHeader();hn&&be.append("x-firebase-client",hn)}const Bt={method:"POST",headers:be,body:JSON.stringify({fid:H,authVersion:De,appId:O.appId,sdkVersion:fi})},Ft=yield Ut(()=>fetch(oe,Bt));if(Ft.ok){const hn=yield Ft.json();return{fid:hn.fid||H,registrationStatus:2,refreshToken:hn.refreshToken,authToken:dn(hn.authToken)}}throw yield Nn("Create Installation",Ft)})).apply(this,arguments)}function ti(O){return new Promise(F=>{setTimeout(F,O)})}const Ro=/^[cdef][\w-]{21}$/,sn="";function Yt(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const H=function Qt(O){return function Vi(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return Ro.test(H)?H:sn}catch{return sn}}function zt(O){return`${O.appName}!${O.appId}`}const Te=new Map;function we(O,F){const H=zt(O);Fe(H,F),function Ct(O,F){const H=function jt(){return!mn&&"BroadcastChannel"in self&&(mn=new BroadcastChannel("[Firebase] FID Change"),mn.onmessage=O=>{Fe(O.data.key,O.data.fid)}),mn}();H&&H.postMessage({key:O,fid:F}),function Jt(){0===Te.size&&mn&&(mn.close(),mn=null)}()}(H,F)}function Fe(O,F){const H=Te.get(O);if(H)for(const oe of H)oe(F)}let mn=null;const Ht="firebase-installations-database",Ei=1,vi="firebase-installations-store";let zn=null;function ki(){return zn||(zn=function ue(O,F,{blocked:H,upgrade:oe,blocking:be,terminated:Ue}={}){const rt=indexedDB.open(O,F),Bt=it(rt);return oe&&rt.addEventListener("upgradeneeded",Ft=>{oe(it(rt.result),Ft.oldVersion,Ft.newVersion,it(rt.transaction))}),H&&rt.addEventListener("blocked",()=>H()),Bt.then(Ft=>{Ue&&Ft.addEventListener("close",()=>Ue()),be&&Ft.addEventListener("versionchange",()=>be())}).catch(()=>{}),Bt}(Ht,Ei,{upgrade:(O,F)=>{0===F&&O.createObjectStore(vi)}})),zn}function Hn(O,F){return mr.apply(this,arguments)}function mr(){return(mr=(0,K.Z)(function*(O,F){const H=zt(O),be=(yield ki()).transaction(vi,"readwrite"),Ue=be.objectStore(vi),rt=yield Ue.get(H);return yield Ue.put(F,H),yield be.done,(!rt||rt.fid!==F.fid)&&we(O,F.fid),F})).apply(this,arguments)}function pi(O){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,K.Z)(function*(O){const F=zt(O),oe=(yield ki()).transaction(vi,"readwrite");yield oe.objectStore(vi).delete(F),yield oe.done})).apply(this,arguments)}function gr(O,F){return mo.apply(this,arguments)}function mo(){return(mo=(0,K.Z)(function*(O,F){const H=zt(O),be=(yield ki()).transaction(vi,"readwrite"),Ue=be.objectStore(vi),rt=yield Ue.get(H),Bt=F(rt);return void 0===Bt?yield Ue.delete(H):yield Ue.put(Bt,H),yield be.done,Bt&&(!rt||rt.fid!==Bt.fid)&&we(O,Bt.fid),Bt})).apply(this,arguments)}function fe(O){return le.apply(this,arguments)}function le(){return le=(0,K.Z)(function*(O){let F;const H=yield gr(O.appConfig,oe=>{const be=function J(O){return Vt(O||{fid:Yt(),registrationStatus:0})}(oe),Ue=function te(O,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(At.create("app-offline"))};const H={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},oe=function Y(O,F){return Me.apply(this,arguments)}(O,H);return{installationEntry:H,registrationPromise:oe}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:Qe(O)}:{installationEntry:F}}(O,be);return F=Ue.registrationPromise,Ue.installationEntry});return H.fid===sn?{installationEntry:yield F}:{installationEntry:H,registrationPromise:F}}),le.apply(this,arguments)}function Me(){return Me=(0,K.Z)(function*(O,F){try{const H=yield function wi(O,F){return Si.apply(this,arguments)}(O,F);return Hn(O.appConfig,H)}catch(H){throw bt(H)&&409===H.customData.serverCode?yield pi(O.appConfig):yield Hn(O.appConfig,{fid:F.fid,registrationStatus:0}),H}}),Me.apply(this,arguments)}function Qe(O){return St.apply(this,arguments)}function St(){return(St=(0,K.Z)(function*(O){let F=yield yn(O.appConfig);for(;1===F.registrationStatus;)yield ti(100),F=yield yn(O.appConfig);if(0===F.registrationStatus){const{installationEntry:H,registrationPromise:oe}=yield fe(O);return oe||H}return F})).apply(this,arguments)}function yn(O){return gr(O,F=>{if(!F)throw At.create("installation-not-found");return Vt(F)})}function Vt(O){return function Xn(O){return 1===O.registrationStatus&&O.registrationTime+rn<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function ai(){return(ai=(0,K.Z)(function*({appConfig:O,heartbeatServiceProvider:F},H){const oe=function kn(O,{fid:F}){return`${Tn(O)}/${F}/authTokens:generate`}(O,H),be=function Dn(O,{refreshToken:F}){const H=tn(O);return H.append("Authorization",function Un(O){return`${De} ${O}`}(F)),H}(O,H),Ue=F.getImmediate({optional:!0});if(Ue){const hn=yield Ue.getHeartbeatsHeader();hn&&be.append("x-firebase-client",hn)}const Bt={method:"POST",headers:be,body:JSON.stringify({installation:{sdkVersion:fi,appId:O.appId}})},Ft=yield Ut(()=>fetch(oe,Bt));if(Ft.ok)return dn(yield Ft.json());throw yield Nn("Generate Auth Token",Ft)})).apply(this,arguments)}function _r(O){return Zo.apply(this,arguments)}function Zo(){return Zo=(0,K.Z)(function*(O,F=!1){let H;const oe=yield gr(O.appConfig,Ue=>{if(!On(Ue))throw At.create("not-registered");const rt=Ue.authToken;if(!F&&function ri(O){return 2===O.requestStatus&&!function Hi(O){const F=Date.now();return F<O.creationTime||O.creationTime+O.expiresIn<F+He}(O)}(rt))return Ue;if(1===rt.requestStatus)return H=function Xe(O,F){return ze.apply(this,arguments)}(O,F),Ue;{if(!navigator.onLine)throw At.create("app-offline");const Bt=function qi(O){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:F})}(Ue);return H=function Zt(O,F){return Rt.apply(this,arguments)}(O,Bt),Bt}});return H?yield H:oe.authToken}),Zo.apply(this,arguments)}function ze(){return(ze=(0,K.Z)(function*(O,F){let H=yield _t(O.appConfig);for(;1===H.authToken.requestStatus;)yield ti(100),H=yield _t(O.appConfig);const oe=H.authToken;return 0===oe.requestStatus?_r(O,F):oe})).apply(this,arguments)}function _t(O){return gr(O,F=>{if(!On(F))throw At.create("not-registered");return function Yi(O){return 1===O.requestStatus&&O.requestTime+rn<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function Rt(){return Rt=(0,K.Z)(function*(O,F){try{const H=yield function En(O,F){return ai.apply(this,arguments)}(O,F),oe=Object.assign(Object.assign({},F),{authToken:H});return yield Hn(O.appConfig,oe),H}catch(H){if(!bt(H)||401!==H.customData.serverCode&&404!==H.customData.serverCode){const oe=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Hn(O.appConfig,oe)}else yield pi(O.appConfig);throw H}}),Rt.apply(this,arguments)}function On(O){return void 0!==O&&2===O.registrationStatus}function go(){return(go=(0,K.Z)(function*(O){const F=O,{installationEntry:H,registrationPromise:oe}=yield fe(F);return oe?oe.catch(console.error):_r(F).catch(console.error),H.fid})).apply(this,arguments)}function Ko(){return Ko=(0,K.Z)(function*(O,F=!1){const H=O;return yield function cs(O){return ms.apply(this,arguments)}(H),(yield _r(H,F)).token}),Ko.apply(this,arguments)}function ms(){return(ms=(0,K.Z)(function*(O){const{registrationPromise:F}=yield fe(O);F&&(yield F)})).apply(this,arguments)}function ks(O){return At.create("missing-app-config-values",{valueName:O})}const Ya="installations",ea=O=>{const F=O.getProvider("app").getImmediate(),H=function $r(O){if(!O||!O.options)throw ks("App Configuration");if(!O.name)throw ks("App Name");const F=["projectId","apiKey","appId"];for(const H of F)if(!O.options[H])throw ks(H);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(F);return{app:F,appConfig:H,heartbeatServiceProvider:(0,pe._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},vc=O=>{const F=O.getProvider("app").getImmediate(),H=(0,pe._getProvider)(F,Ya).getImmediate();return{getId:()=>function Ur(O){return go.apply(this,arguments)}(H),getToken:be=>function Ia(O){return Ko.apply(this,arguments)}(H,be)}};(function yc(){(0,pe._registerComponent)(new Re.wA(Ya,ea,"PUBLIC")),(0,pe._registerComponent)(new Re.wA("installations-internal",vc,"PRIVATE"))})(),(0,pe.registerVersion)(nn,un),(0,pe.registerVersion)(nn,un,"esm2017");const Ns="@firebase/remote-config",vr=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cn{constructor(F,H,oe,be){this.client=F,this.storage=H,this.storageCache=oe,this.logger=be}isCachedDataFresh(F,H){if(!H)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-H,be=oe<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${be}.`),be}fetch(F){var H=this;return(0,K.Z)(function*(){const[oe,be]=yield Promise.all([H.storage.getLastSuccessfulFetchTimestampMillis(),H.storage.getLastSuccessfulFetchResponse()]);if(be&&H.isCachedDataFresh(F.cacheMaxAgeMillis,oe))return be;F.eTag=be&&be.eTag;const Ue=yield H.client.fetch(F),rt=[H.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ue.status&&rt.push(H.storage.setLastSuccessfulFetchResponse(Ue)),yield Promise.all(rt),Ue})()}}function Ii(O=navigator){return O.languages&&O.languages[0]||O.language}class so{constructor(F,H,oe,be,Ue,rt){this.firebaseInstallations=F,this.sdkVersion=H,this.namespace=oe,this.projectId=be,this.apiKey=Ue,this.appId=rt}fetch(F){var H=this;return(0,K.Z)(function*(){const[oe,be]=yield Promise.all([H.firebaseInstallations.getId(),H.firebaseInstallations.getToken()]),rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${H.projectId}/namespaces/${H.namespace}:fetch?key=${H.apiKey}`,Bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Ft={sdk_version:H.sdkVersion,app_instance_id:oe,app_instance_id_token:be,app_id:H.appId,language_code:Ii()},hn={method:"POST",headers:Bt,body:JSON.stringify(Ft)},Ln=fetch(rt,hn),Sn=new Promise((Ua,Fr)=>{F.signal.addEventListener(()=>{const gl=new Error("The operation was aborted.");gl.name="AbortError",Fr(gl)})});let ds;try{yield Promise.race([Ln,Sn]),ds=yield Ln}catch(Ua){let Fr="fetch-client-network";throw"AbortError"===Ua?.name&&(Fr="fetch-timeout"),vr.create(Fr,{originalErrorMessage:Ua?.message})}let Ao=ds.status;const Ki=ds.headers.get("ETag")||void 0;let Iu,La;if(200===ds.status){let Ua;try{Ua=yield ds.json()}catch(Fr){throw vr.create("fetch-client-parse",{originalErrorMessage:Fr?.message})}Iu=Ua.entries,La=Ua.state}if("INSTANCE_STATE_UNSPECIFIED"===La?Ao=500:"NO_CHANGE"===La?Ao=304:("NO_TEMPLATE"===La||"EMPTY_CONFIG"===La)&&(Iu={}),304!==Ao&&200!==Ao)throw vr.create("fetch-status",{httpStatus:Ao});return{status:Ao,eTag:Ki,config:Iu}})()}}class Qo{constructor(F,H){this.client=F,this.storage=H}fetch(F){var H=this;return(0,K.Z)(function*(){const oe=(yield H.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return H.attemptFetch(F,oe)})()}attemptFetch(F,{throttleEndTimeMillis:H,backoffCount:oe}){var be=this;return(0,K.Z)(function*(){yield function Ls(O,F){return new Promise((H,oe)=>{const be=Math.max(F-Date.now(),0),Ue=setTimeout(H,be);O.addEventListener(()=>{clearTimeout(Ue),oe(vr.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,H);try{const Ue=yield be.client.fetch(F);return yield be.storage.deleteThrottleMetadata(),Ue}catch(Ue){if(!function $n(O){if(!(O instanceof ce.ZR&&O.customData))return!1;const F=Number(O.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Ue))throw Ue;const rt={throttleEndTimeMillis:Date.now()+(0,ce.$s)(oe),backoffCount:oe+1};return yield be.storage.setThrottleMetadata(rt),be.attemptFetch(F,rt)}})()}}class Xo{constructor(F,H,oe,be,Ue){this.app=F,this._client=H,this._storageCache=oe,this._storage=be,this._logger=Ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function on(O,F){const H=O.target.error||void 0;return vr.create(F,{originalErrorMessage:H&&H?.message})}const qr="app_namespace_store";class _s{constructor(F,H,oe,be=function Er(){return new Promise((O,F)=>{try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=oe=>{F(on(oe,"storage-open"))},H.onsuccess=oe=>{O(oe.target.result)},H.onupgradeneeded=oe=>{0===oe.oldVersion&&oe.target.result.createObjectStore(qr,{keyPath:"compositeKey"})}}catch(H){F(vr.create("storage-open",{originalErrorMessage:H?.message}))}})}()){this.appId=F,this.appName=H,this.namespace=oe,this.openDbPromise=be}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var H=this;return(0,K.Z)(function*(){const oe=yield H.openDbPromise;return new Promise((be,Ue)=>{const Bt=oe.transaction([qr],"readonly").objectStore(qr),Ft=H.createCompositeKey(F);try{const hn=Bt.get(Ft);hn.onerror=Ln=>{Ue(on(Ln,"storage-get"))},hn.onsuccess=Ln=>{const Sn=Ln.target.result;be(Sn?Sn.value:void 0)}}catch(hn){Ue(vr.create("storage-get",{originalErrorMessage:hn?.message}))}})})()}set(F,H){var oe=this;return(0,K.Z)(function*(){const be=yield oe.openDbPromise;return new Promise((Ue,rt)=>{const Ft=be.transaction([qr],"readwrite").objectStore(qr),hn=oe.createCompositeKey(F);try{const Ln=Ft.put({compositeKey:hn,value:H});Ln.onerror=Sn=>{rt(on(Sn,"storage-set"))},Ln.onsuccess=()=>{Ue()}}catch(Ln){rt(vr.create("storage-set",{originalErrorMessage:Ln?.message}))}})})()}delete(F){var H=this;return(0,K.Z)(function*(){const oe=yield H.openDbPromise;return new Promise((be,Ue)=>{const Bt=oe.transaction([qr],"readwrite").objectStore(qr),Ft=H.createCompositeKey(F);try{const hn=Bt.delete(Ft);hn.onerror=Ln=>{Ue(on(Ln,"storage-delete"))},hn.onsuccess=()=>{be()}}catch(hn){Ue(vr.create("storage-delete",{originalErrorMessage:hn?.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Fo{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,K.Z)(function*(){const H=F.storage.getLastFetchStatus(),oe=F.storage.getLastSuccessfulFetchTimestampMillis(),be=F.storage.getActiveConfig(),Ue=yield H;Ue&&(F.lastFetchStatus=Ue);const rt=yield oe;rt&&(F.lastSuccessfulFetchTimestampMillis=rt);const Bt=yield be;Bt&&(F.activeConfig=Bt)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function Ta(){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,K.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function Cr(){(0,pe._registerComponent)(new Re.wA("remote-config",function O(F,{instanceIdentifier:H}){const oe=F.getProvider("app").getImmediate(),be=F.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vr.create("registration-window");if(!(0,ce.hl)())throw vr.create("indexed-db-unavailable");const{projectId:Ue,apiKey:rt,appId:Bt}=oe.options;if(!Ue)throw vr.create("registration-project-id");if(!rt)throw vr.create("registration-api-key");if(!Bt)throw vr.create("registration-app-id");const Ft=new _s(Bt,oe.name,H=H||"firebase"),hn=new Fo(Ft),Ln=new Oe.Yd(Ns);Ln.logLevel=Oe.in.ERROR;const Sn=new so(be,pe.SDK_VERSION,H,Ue,rt,Bt),ds=new Qo(Sn,Ft),Ao=new Cn(ds,Ft,hn,Ln),Ki=new Xo(oe,Ao,hn,Ft,Ln);return function yr(O){const F=(0,ce.m9)(O);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(Ki),Ki},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(Ns,"0.4.4"),(0,pe.registerVersion)(Ns,"0.4.4","esm2017")}();const Lo=(O,F)=>F.some(H=>O instanceof H);let Gr,Jn;const Da=new WeakMap,Or=new WeakMap,tr=new WeakMap,Wr=new WeakMap,sa=new WeakMap;let Zr={get(O,F,H){if(O instanceof IDBTransaction){if("done"===F)return Or.get(O);if("objectStoreNames"===F)return O.objectStoreNames||tr.get(O);if("store"===F)return H.objectStoreNames[1]?void 0:H.objectStore(H.objectStoreNames[0])}return Kr(O[F])},set:(O,F,H)=>(O[F]=H,!0),has:(O,F)=>O instanceof IDBTransaction&&("done"===F||"store"===F)||F in O};function Pr(O){return"function"==typeof O?function nl(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function hu(){return Jn||(Jn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...F){return O.apply(di(this),F),Kr(Da.get(this))}:function(...F){return Kr(O.apply(di(this),F))}:function(F,...H){const oe=O.call(di(this),F,...H);return tr.set(oe,F.sort?F.sort():[F]),Kr(oe)}}(O):(O instanceof IDBTransaction&&function tl(O){if(Or.has(O))return;const F=new Promise((H,oe)=>{const be=()=>{O.removeEventListener("complete",Ue),O.removeEventListener("error",rt),O.removeEventListener("abort",rt)},Ue=()=>{H(),be()},rt=()=>{oe(O.error||new DOMException("AbortError","AbortError")),be()};O.addEventListener("complete",Ue),O.addEventListener("error",rt),O.addEventListener("abort",rt)});Or.set(O,F)}(O),Lo(O,function Ic(){return Gr||(Gr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,Zr):O)}function Kr(O){if(O instanceof IDBRequest)return function Bi(O){const F=new Promise((H,oe)=>{const be=()=>{O.removeEventListener("success",Ue),O.removeEventListener("error",rt)},Ue=()=>{H(Kr(O.result)),be()},rt=()=>{oe(O.error),be()};O.addEventListener("success",Ue),O.addEventListener("error",rt)});return F.then(H=>{H instanceof IDBCursor&&Da.set(H,O)}).catch(()=>{}),sa.set(F,O),F}(O);if(Wr.has(O))return Wr.get(O);const F=Pr(O);return F!==O&&(Wr.set(O,F),sa.set(F,O)),F}const di=O=>sa.get(O);function aa(O,F,{blocked:H,upgrade:oe,blocking:be,terminated:Ue}={}){const rt=indexedDB.open(O,F),Bt=Kr(rt);return oe&&rt.addEventListener("upgradeneeded",Ft=>{oe(Kr(rt.result),Ft.oldVersion,Ft.newVersion,Kr(rt.transaction))}),H&&rt.addEventListener("blocked",()=>H()),Bt.then(Ft=>{Ue&&Ft.addEventListener("close",()=>Ue()),be&&Ft.addEventListener("versionchange",()=>be())}).catch(()=>{}),Bt}function oi(O,{blocked:F}={}){const H=indexedDB.deleteDatabase(O);return F&&H.addEventListener("blocked",()=>F()),Kr(H).then(()=>{})}const Rr=["get","getKey","getAll","getAllKeys","count"],kl=["put","add","delete","clear"],vs=new Map;function xc(O,F){if(!(O instanceof IDBDatabase)||F in O||"string"!=typeof F)return;if(vs.get(F))return vs.get(F);const H=F.replace(/FromIndex$/,""),oe=F!==H,be=kl.includes(H);if(!(H in(oe?IDBIndex:IDBObjectStore).prototype)||!be&&!Rr.includes(H))return;const Ue=function(){var rt=(0,K.Z)(function*(Bt,...Ft){const hn=this.transaction(Bt,be?"readwrite":"readonly");let Ln=hn.store;return oe&&(Ln=Ln.index(Ft.shift())),(yield Promise.all([Ln[H](...Ft),be&&hn.done]))[0]});return function(Ft){return rt.apply(this,arguments)}}();return vs.set(F,Ue),Ue}!function xr(O){Zr=O(Zr)}(O=>({...O,get:(F,H,oe)=>xc(F,H)||O.get(F,H,oe),has:(F,H)=>!!xc(F,H)||O.has(F,H)}));const Sa="/firebase-messaging-sw.js",Tc="/firebase-cloud-messaging-push-scope",Ja="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Nl="https://fcmregistrations.googleapis.com/v1",mi="google.c.a.c_id",fu="google.c.a.c_l",Dc="google.c.a.ts";var ec=function(O){return O.PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",O}(ec||{});function yo(O){const F=new Uint8Array(O);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tc(O){const H=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(H),be=new Uint8Array(oe.length);for(let Ue=0;Ue<oe.length;++Ue)be[Ue]=oe.charCodeAt(Ue);return be}const ca="fcm_token_details_db",ys=5,Fl="fcm_token_object_Store";function kr(){return kr=(0,K.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ue=>Ue.name).includes(ca))return null;let F=null;return(yield aa(ca,ys,{upgrade:(oe=(0,K.Z)(function*(be,Ue,rt,Bt){var Ft;if(Ue<2||!be.objectStoreNames.contains(Fl))return;const hn=Bt.objectStore(Fl),Ln=yield hn.index("fcmSenderId").get(O);if(yield hn.clear(),Ln)if(2===Ue){const Sn=Ln;if(!Sn.auth||!Sn.p256dh||!Sn.endpoint)return;F={token:Sn.fcmToken,createTime:null!==(Ft=Sn.createTime)&&void 0!==Ft?Ft:Date.now(),subscriptionOptions:{auth:Sn.auth,p256dh:Sn.p256dh,endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:"string"==typeof Sn.vapidKey?Sn.vapidKey:yo(Sn.vapidKey)}}}else if(3===Ue){const Sn=Ln;F={token:Sn.fcmToken,createTime:Sn.createTime,subscriptionOptions:{auth:yo(Sn.auth),p256dh:yo(Sn.p256dh),endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:yo(Sn.vapidKey)}}}else if(4===Ue){const Sn=Ln;F={token:Sn.fcmToken,createTime:Sn.createTime,subscriptionOptions:{auth:yo(Sn.auth),p256dh:yo(Sn.p256dh),endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:yo(Sn.vapidKey)}}}}),function(Ue,rt,Bt,Ft){return oe.apply(this,arguments)})})).close(),yield oi(ca),yield oi("fcm_vapid_details_db"),yield oi("undefined"),function Us(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:F}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}(F)?F:null;var oe}),kr.apply(this,arguments)}const la="firebase-messaging-database",Sc=1,Vo="firebase-messaging-store";let cr=null;function Aa(){return cr||(cr=aa(la,Sc,{upgrade:(O,F)=>{0===F&&O.createObjectStore(Vo)}})),cr}function Yr(O){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,K.Z)(function*(O){const F=ua(O),oe=yield(yield Aa()).transaction(Vo).objectStore(Vo).get(F);if(oe)return oe;{const be=yield function pu(O){return kr.apply(this,arguments)}(O.appConfig.senderId);if(be)return yield bo(O,be),be}}),Ac.apply(this,arguments)}function bo(O,F){return nc.apply(this,arguments)}function nc(){return(nc=(0,K.Z)(function*(O,F){const H=ua(O),be=(yield Aa()).transaction(Vo,"readwrite");return yield be.objectStore(Vo).put(F,H),yield be.done,F})).apply(this,arguments)}function Vs(){return(Vs=(0,K.Z)(function*(O){const F=ua(O),oe=(yield Aa()).transaction(Vo,"readwrite");yield oe.objectStore(Vo).delete(F),yield oe.done})).apply(this,arguments)}function ua({appConfig:O}){return O.appId}const yi=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Bo(O,F){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,K.Z)(function*(O,F){const H=yield Oc(O),oe=Oa(F),be={method:"POST",headers:H,body:JSON.stringify(oe)};let Ue;try{Ue=yield(yield fetch(Bs(O.appConfig),be)).json()}catch(rt){throw yi.create("token-subscribe-failed",{errorInfo:rt?.toString()})}if(Ue.error)throw yi.create("token-subscribe-failed",{errorInfo:Ue.error.message});if(!Ue.token)throw yi.create("token-subscribe-no-token");return Ue.token})).apply(this,arguments)}function Jo(){return(Jo=(0,K.Z)(function*(O,F){const H=yield Oc(O),oe=Oa(F.subscriptionOptions),be={method:"PATCH",headers:H,body:JSON.stringify(oe)};let Ue;try{Ue=yield(yield fetch(`${Bs(O.appConfig)}/${F.token}`,be)).json()}catch(rt){throw yi.create("token-update-failed",{errorInfo:rt?.toString()})}if(Ue.error)throw yi.create("token-update-failed",{errorInfo:Ue.error.message});if(!Ue.token)throw yi.create("token-update-no-token");return Ue.token})).apply(this,arguments)}function Mc(O,F){return wo.apply(this,arguments)}function wo(){return(wo=(0,K.Z)(function*(O,F){const oe={method:"DELETE",headers:yield Oc(O)};try{const Ue=yield(yield fetch(`${Bs(O.appConfig)}/${F}`,oe)).json();if(Ue.error)throw yi.create("token-unsubscribe-failed",{errorInfo:Ue.error.message})}catch(be){throw yi.create("token-unsubscribe-failed",{errorInfo:be?.toString()})}})).apply(this,arguments)}function Bs({projectId:O}){return`${Nl}/projects/${O}/registrations`}function Oc(O){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,K.Z)(function*({appConfig:O,installations:F}){const H=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${H}`})})).apply(this,arguments)}function Oa({p256dh:O,auth:F,endpoint:H,vapidKey:oe}){const be={web:{endpoint:H,auth:F,p256dh:O}};return oe!==Ja&&(be.web.applicationPubKey=oe),be}const E=6048e5;function j(){return j=(0,K.Z)(function*(O){const F=yield function lr(O,F){return Eo.apply(this,arguments)}(O.swRegistration,O.vapidKey),H={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:F.endpoint,auth:yo(F.getKey("auth")),p256dh:yo(F.getKey("p256dh"))},oe=yield Yr(O.firebaseDependencies);if(oe){if(function es(O,F){return F.vapidKey===O.vapidKey&&F.endpoint===O.endpoint&&F.auth===O.auth&&F.p256dh===O.p256dh}(oe.subscriptionOptions,H))return Date.now()>=oe.createTime+E?function Ye(O,F){return kt.apply(this,arguments)}(O,{token:oe.token,createTime:Date.now(),subscriptionOptions:H}):oe.token;try{yield Mc(O.firebaseDependencies,oe.token)}catch(be){console.warn(be)}return qn(O.firebaseDependencies,H)}return qn(O.firebaseDependencies,H)}),j.apply(this,arguments)}function ve(){return ve=(0,K.Z)(function*(O){const F=yield Yr(O.firebaseDependencies);F&&(yield Mc(O.firebaseDependencies,F.token),yield function Ll(O){return Vs.apply(this,arguments)}(O.firebaseDependencies));const H=yield O.swRegistration.pushManager.getSubscription();return!H||H.unsubscribe()}),ve.apply(this,arguments)}function kt(){return kt=(0,K.Z)(function*(O,F){try{const H=yield function xt(O,F){return Jo.apply(this,arguments)}(O.firebaseDependencies,F),oe=Object.assign(Object.assign({},F),{token:H,createTime:Date.now()});return yield bo(O.firebaseDependencies,oe),H}catch(H){throw yield function ee(O){return ve.apply(this,arguments)}(O),H}}),kt.apply(this,arguments)}function qn(O,F){return ei.apply(this,arguments)}function ei(){return(ei=(0,K.Z)(function*(O,F){const oe={token:yield Bo(O,F),createTime:Date.now(),subscriptionOptions:F};return yield bo(O,oe),oe.token})).apply(this,arguments)}function Eo(){return(Eo=(0,K.Z)(function*(O,F){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tc(F)})})).apply(this,arguments)}function Pc(O){const F={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function js(O,F){if(!F.notification)return;O.notification={};const H=F.notification.title;H&&(O.notification.title=H);const oe=F.notification.body;oe&&(O.notification.body=oe);const be=F.notification.image;be&&(O.notification.image=be);const Ue=F.notification.icon;Ue&&(O.notification.icon=Ue)}(F,O),function rl(O,F){F.data&&(O.data=F.data)}(F,O),function Co(O,F){var H,oe,be,Ue,rt;if(!(F.fcmOptions||null!==(H=F.notification)&&void 0!==H&&H.click_action))return;O.fcmOptions={};const Bt=null!==(be=null===(oe=F.fcmOptions)||void 0===oe?void 0:oe.link)&&void 0!==be?be:null===(Ue=F.notification)||void 0===Ue?void 0:Ue.click_action;Bt&&(O.fcmOptions.link=Bt);const Ft=null===(rt=F.fcmOptions)||void 0===rt?void 0:rt.analytics_label;Ft&&(O.fcmOptions.analyticsLabel=Ft)}(F,O),F}function Yu(O,F){const H=[];for(let oe=0;oe<O.length;oe++)H.push(O.charAt(oe)),oe<F.length&&H.push(F.charAt(oe));return H.join("")}function mu(O){return yi.create("missing-app-config-values",{valueName:O})}Yu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lh{constructor(F,H,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const be=function Fh(O){if(!O||!O.options)throw mu("App Configuration Object");if(!O.name)throw mu("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:H}=O;for(const oe of F)if(!H[oe])throw mu(oe);return{appName:O.name,projectId:H.projectId,apiKey:H.apiKey,appId:H.appId,senderId:H.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:be,installations:H,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function Vl(){return(Vl=(0,K.Z)(function*(O){try{O.swRegistration=yield navigator.serviceWorker.register(Sa,{scope:Tc}),O.swRegistration.update().catch(()=>{})}catch(F){throw yi.create("failed-service-worker-registration",{browserErrorMessage:F?.message})}})).apply(this,arguments)}function bs(){return(bs=(0,K.Z)(function*(O,F){if(!F&&!O.swRegistration&&(yield function Ul(O){return Vl.apply(this,arguments)}(O)),F||!O.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw yi.create("invalid-sw-registration");O.swRegistration=F}})).apply(this,arguments)}function ol(){return(ol=(0,K.Z)(function*(O,F){F?O.vapidKey=F:O.vapidKey||(O.vapidKey=Ja)})).apply(this,arguments)}function gu(){return gu=(0,K.Z)(function*(O,F){if(!navigator)throw yi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw yi.create("permission-blocked");return yield function Rc(O,F){return ol.apply(this,arguments)}(O,F?.vapidKey),yield function Qu(O,F){return bs.apply(this,arguments)}(O,F?.serviceWorkerRegistration),function N(O){return j.apply(this,arguments)}(O)}),gu.apply(this,arguments)}function ws(){return(ws=(0,K.Z)(function*(O,F,H){const oe=function qd(O){switch(O){case ec.NOTIFICATION_CLICKED:return"notification_open";case ec.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(F);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:H[mi],message_name:H[fu],message_time:H[Dc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xi(){return xi=(0,K.Z)(function*(O,F){const H=F.data;if(!H.isFirebaseMessaging)return;O.onMessageHandler&&H.messageType===ec.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(Pc(H)):O.onMessageHandler.next(Pc(H)));const oe=H.data;(function Io(O){return"object"==typeof O&&!!O&&mi in O})(oe)&&"1"===oe["google.c.a.e"]&&(yield function Gf(O,F,H){return ws.apply(this,arguments)}(O,H.messageType,oe))}),xi.apply(this,arguments)}const sl="@firebase/messaging",jo=O=>{const F=new Lh(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",H=>function _u(O,F){return xi.apply(this,arguments)}(F,H)),F},Qr=O=>{const F=O.getProvider("messaging").getImmediate();return{getToken:oe=>function Xu(O,F){return gu.apply(this,arguments)}(F,oe)}};function al(){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,K.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Gd(){(0,pe._registerComponent)(new Re.wA("messaging",jo,"PUBLIC")),(0,pe._registerComponent)(new Re.wA("messaging-internal",Qr,"PRIVATE")),(0,pe.registerVersion)(sl,"0.12.4"),(0,pe.registerVersion)(sl,"0.12.4","esm2017")}();const ic="analytics",vu="firebase_id",In="origin",Nc=6e4,Wf="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ju="https://www.googletagmanager.com/gtag/js",Br=new Oe.Yd("@firebase/analytics"),$i=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Es(O){if(!O.startsWith(Ju)){const F=$i.create("invalid-gtag-resource",{gtagURL:O});return Br.warn(F.message),""}return O}function Fc(O){return Promise.all(O.map(F=>F.catch(H=>H)))}function pt(){return(pt=(0,K.Z)(function*(O,F,H,oe,be,Ue){const rt=oe[be];try{if(rt)yield F[rt];else{const Ft=(yield Fc(H)).find(hn=>hn.measurementId===be);Ft&&(yield F[Ft.appId])}}catch(Bt){Br.error(Bt)}O("config",be,Ue)})).apply(this,arguments)}function Cs(){return(Cs=(0,K.Z)(function*(O,F,H,oe,be){try{let Ue=[];if(be&&be.send_to){let rt=be.send_to;Array.isArray(rt)||(rt=[rt]);const Bt=yield Fc(H);for(const Ft of rt){const hn=Bt.find(Sn=>Sn.measurementId===Ft),Ln=hn&&F[hn.appId];if(!Ln){Ue=[];break}Ue.push(Ln)}}0===Ue.length&&(Ue=Object.values(F)),yield Promise.all(Ue),O("event",oe,be||{})}catch(Ue){Br.error(Ue)}})).apply(this,arguments)}const To=30,ao=new class Wi{constructor(F={},H=1e3){this.throttleMetadata=F,this.intervalMillis=H}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,H){this.throttleMetadata[F]=H}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function Kf(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function nr(){return(nr=(0,K.Z)(function*(O){var F;const{appId:H,apiKey:oe}=O,be={method:"GET",headers:Kf(oe)},Ue=Wf.replace("{app-id}",H),rt=yield fetch(Ue,be);if(200!==rt.status&&304!==rt.status){let Bt="";try{const Ft=yield rt.json();null!==(F=Ft.error)&&void 0!==F&&F.message&&(Bt=Ft.error.message)}catch{}throw $i.create("config-fetch-failed",{httpStatus:rt.status,responseMessage:Bt})}return rt.json()})).apply(this,arguments)}function ur(){return(ur=(0,K.Z)(function*(O,F=ao,H){const{appId:oe,apiKey:be,measurementId:Ue}=O.options;if(!oe)throw $i.create("no-app-id");if(!be){if(Ue)return{measurementId:Ue,appId:oe};throw $i.create("no-api-key")}const rt=F.getThrottleMetadata(oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Bt=new da;return setTimeout((0,K.Z)(function*(){Bt.abort()}),void 0!==H?H:Nc),co({appId:oe,apiKey:be,measurementId:Ue},rt,Bt,F)})).apply(this,arguments)}function co(O,F,H){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,K.Z)(function*(O,{throttleEndTimeMillis:F,backoffCount:H},oe,be=ao){var Ue;const{appId:rt,measurementId:Bt}=O;try{yield function Jr(O,F){return new Promise((H,oe)=>{const be=Math.max(F-Date.now(),0),Ue=setTimeout(H,be);O.addEventListener(()=>{clearTimeout(Ue),oe($i.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(oe,F)}catch(Ft){if(Bt)return Br.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Bt} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:rt,measurementId:Bt};throw Ft}try{const Ft=yield function e_(O){return nr.apply(this,arguments)}(O);return be.deleteThrottleMetadata(rt),Ft}catch(Ft){const hn=Ft;if(!function Bh(O){if(!(O instanceof ce.ZR&&O.customData))return!1;const F=Number(O.customData.httpStatus);return 429===F||500===F||503===F||504===F}(hn)){if(be.deleteThrottleMetadata(rt),Bt)return Br.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Bt} provided in the "measurementId" field in the local Firebase config. [${hn?.message}]`),{appId:rt,measurementId:Bt};throw Ft}const Ln=503===Number(null===(Ue=hn?.customData)||void 0===Ue?void 0:Ue.httpStatus)?(0,ce.$s)(H,be.intervalMillis,To):(0,ce.$s)(H,be.intervalMillis),Sn={throttleEndTimeMillis:Date.now()+Ln,backoffCount:H+1};return be.setThrottleMetadata(rt,Sn),Br.debug(`Calling attemptFetch again in ${Ln} millis`),co(O,Sn,oe,be)}}),Xr.apply(this,arguments)}class da{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let td,sc;function bu(){return(bu=(0,K.Z)(function*(O,F,H,oe,be){if(be&&be.global)O("event",H,oe);else{const Ue=yield F;O("event",H,Object.assign(Object.assign({},oe),{send_to:Ue}))}})).apply(this,arguments)}function ha(){return(ha=(0,K.Z)(function*(){if(!(0,ce.hl)())return Br.warn($i.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(O){return Br.warn($i.create("indexeddb-unavailable",{errorInfo:O?.toString()}).message),!1}return!0})).apply(this,arguments)}function fa(){return fa=(0,K.Z)(function*(O,F,H,oe,be,Ue,rt){var Bt;const Ft=function Zi(O){return ur.apply(this,arguments)}(O);Ft.then(Ao=>{H[Ao.measurementId]=Ao.appId,O.options.measurementId&&Ao.measurementId!==O.options.measurementId&&Br.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${Ao.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ao=>Br.error(Ao)),F.push(Ft);const hn=function ts(){return ha.apply(this,arguments)}().then(Ao=>{if(Ao)return oe.getId()}),[Ln,Sn]=yield Promise.all([Ft,hn]);(function ed(O){const F=window.document.getElementsByTagName("script");for(const H of Object.values(F))if(H.src&&H.src.includes(Ju)&&H.src.includes(O))return H;return null})(Ue)||function Zf(O,F){const H=function Yd(O,F){let H;return window.trustedTypes&&(H=window.trustedTypes.createPolicy(O,F)),H}("firebase-js-sdk-policy",{createScriptURL:Es}),oe=document.createElement("script"),be=`${Ju}?l=${O}&id=${F}`;oe.src=H?H?.createScriptURL(be):be,oe.async=!0,document.head.appendChild(oe)}(Ue,Ln.measurementId),sc&&(be("consent","default",sc),function ac(O){sc=O}(void 0)),be("js",new Date);const ds=null!==(Bt=rt?.config)&&void 0!==Bt?Bt:{};return ds[In]="firebase",ds.update=!0,null!=Sn&&(ds[vu]=Sn),be("config",Ln.measurementId,ds),td&&(be("set",td),function zl(O){td=O}(void 0)),Ln.measurementId}),fa.apply(this,arguments)}class eh{constructor(F){this.app=F}_delete(){return delete Is[this.app.options.appId],Promise.resolve()}}let Is={},jn=[];const rr={};let cc,ci,So="dataLayer",ka=!1;function Nr(O,F,H){!function Lc(){const O=[];if((0,ce.ru)()&&O.push("This is a browser extension environment."),(0,ce.zI)()||O.push("Cookies are not available."),O.length>0){const F=O.map((oe,be)=>`(${be+1}) ${oe}`).join(" "),H=$i.create("invalid-analytics-context",{errorInfo:F});Br.warn(H.message)}}();const oe=O.options.appId;if(!oe)throw $i.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw $i.create("no-api-key");Br.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Is[oe])throw $i.create("already-exists",{id:oe});if(!ka){!function Qd(O){let F=[];Array.isArray(window[O])?F=window[O]:window[O]=F}(So);const{wrappedGtag:Ue,gtagCore:rt}=function xo(O,F,H,oe,be){let Ue=function(...rt){window[oe].push(arguments)};return window[be]&&"function"==typeof window[be]&&(Ue=window[be]),window[be]=function yu(O,F,H,oe){function Ue(){return Ue=(0,K.Z)(function*(rt,...Bt){try{if("event"===rt){const[Ft,hn]=Bt;yield function ii(O,F,H,oe,be){return Cs.apply(this,arguments)}(O,F,H,Ft,hn)}else if("config"===rt){const[Ft,hn]=Bt;yield function rc(O,F,H,oe,be,Ue){return pt.apply(this,arguments)}(O,F,H,oe,Ft,hn)}else if("consent"===rt){const[Ft]=Bt;O("consent","update",Ft)}else if("get"===rt){const[Ft,hn,Ln]=Bt;O("get",Ft,hn,Ln)}else if("set"===rt){const[Ft]=Bt;O("set",Ft)}else O(rt,...Bt)}catch(Ft){Br.error(Ft)}}),Ue.apply(this,arguments)}return function be(rt){return Ue.apply(this,arguments)}}(Ue,O,F,H),{gtagCore:Ue,wrappedGtag:window[be]}}(Is,jn,rr,So,"gtag");ci=Ue,cc=rt,ka=!0}return Is[oe]=function ir(O,F,H,oe,be,Ue,rt){return fa.apply(this,arguments)}(O,jn,rr,F,cc,So,H),new eh(O)}function Yf(){return xs.apply(this,arguments)}function xs(){return(xs=(0,K.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const Uc="@firebase/analytics";!function sd(){(0,pe._registerComponent)(new Re.wA(ic,(F,{options:H})=>Nr(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),H),"PUBLIC")),(0,pe._registerComponent)(new Re.wA("analytics-internal",function O(F){try{const H=F.getProvider(ic).getImmediate();return{logEvent:(oe,be,Ue)=>function jh(O,F,H,oe){O=(0,ce.m9)(O),function um(O,F,H,oe,be){return bu.apply(this,arguments)}(ci,Is[O.app.options.appId],F,H,oe).catch(be=>Br.error(be))}(H,oe,be,Ue)}}catch(H){throw $i.create("interop-component-reg-failed",{reason:H})}},"PRIVATE")),(0,pe.registerVersion)(Uc,"0.10.0"),(0,pe.registerVersion)(Uc,"0.10.0","esm2017")}();var dl=Q(1954),us=Q(2631);const Hh=new class zh extends us.v{}(class Eu extends dl.o{constructor(F,H){super(F,H),this.scheduler=F,this.work=H}schedule(F,H=0){return H>0?super.schedule(F,H):(this.delay=H,this.state=F,this.scheduler.flush(this),this)}execute(F,H){return H>0||this.closed?super.execute(F,H):this._execute(F,H)}requestAsyncId(F,H,oe=0){return null!=oe&&oe>0||null==oe&&this.delay>0?super.requestAsyncId(F,H,oe):(F.flush(this),0)}});var $h=Q(6321),zo=Q(5592),ad=Q(9397),Hs=Q(5137),ql=Q(3093);const Cu=new c.GfV("7.6.1"),Gl="__angularfire_symbol__analyticsIsSupportedValue",Wl="__angularfire_symbol__analyticsIsSupported",cd="__angularfire_symbol__remoteConfigIsSupportedValue",Zl="__angularfire_symbol__remoteConfigIsSupported",Kl="__angularfire_symbol__messagingIsSupportedValue",$s="__angularfire_symbol__messagingIsSupported";function ih(O,F,H){if(F){if(1===F.length)return F[0];const Ue=F.filter(rt=>rt.app===H);if(1===Ue.length)return Ue[0]}return H.container.getProvider(O).getImmediate({optional:!0})}globalThis[Wl]||(globalThis[Wl]=Yf().then(O=>globalThis[Gl]=O).catch(()=>globalThis[Gl]=!1)),globalThis[$s]||(globalThis[$s]=al().then(O=>globalThis[Kl]=O).catch(()=>globalThis[Kl]=!1)),globalThis[Zl]||(globalThis[Zl]=Ta().then(O=>globalThis[cd]=O).catch(()=>globalThis[cd]=!1));const rh=(O,F)=>{const H=F?[F]:(0,U.C6)(),oe=[];return H.forEach(be=>{be.container.getProvider(O).instances.forEach(rt=>{oe.includes(rt)||oe.push(rt)})}),oe};function hl(){}class ns{constructor(F,H=Hh){this.zone=F,this.delegate=H}now(){return this.delegate.now()}schedule(F,H,oe){const be=this.zone;return this.delegate.schedule(function(rt){be.runGuarded(()=>{F.apply(this,[rt])})},H,oe)}}class fl{constructor(F){this.zone=F,this.task=null}call(F,H){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hl,{},hl,hl)),H.pipe((0,ad.b)({next:oe,complete:oe,error:oe})).subscribe(F).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sr=(()=>{class O{constructor(H){this.ngZone=H,this.outsideAngular=H.runOutsideAngular(()=>new ns(Zone.current)),this.insideAngular=H.run(()=>new ns(Zone.current,$h.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(H){return new(H||O)(c.LFG(c.R0b))},O.\u0275prov=c.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function pl(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function dr(O){return pl().ngZone.run(()=>O())}function qs(O){return pl(),function ml(O){return function(H){return(H=H.lift(new fl(O.ngZone))).pipe((0,Hs.R)(O.outsideAngular),(0,ql.Q)(O.insideAngular))}}(pl())(O)}const Fa=(O,F)=>function(){const oe=arguments;return F&&setTimeout(()=>{"scheduled"===F.state&&F.invoke()},10),dr(()=>O.apply(void 0,oe))},Bc=(O,F)=>function(){let H;const oe=arguments;for(let Ue=0;Ue<arguments.length;Ue++)"function"==typeof oe[Ue]&&(F&&(H||(H=dr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hl,{},hl,hl)))),oe[Ue]=Fa(oe[Ue],H));const be=function ud(O){return pl().ngZone.runOutsideAngular(()=>O())}(()=>O.apply(this,oe));if(!F){if(be instanceof zo.y){const Ue=pl();return be.pipe((0,Hs.R)(Ue.outsideAngular),(0,ql.Q)(Ue.insideAngular))}return dr(()=>be)}return be instanceof zo.y?be.pipe(qs):be instanceof Promise?dr(()=>new Promise((Ue,rt)=>be.then(Bt=>dr(()=>Ue(Bt)),Bt=>dr(()=>rt(Bt))))):"function"==typeof be&&H?function(){return setTimeout(()=>{H&&"scheduled"===H.state&&H.invoke()},10),be.apply(this,arguments)}:dr(()=>be)}},6710:(en,Ae,Q)=>{Q.d(Ae,{$:()=>Sa,A:()=>G,D:()=>me,I:()=>Ka,J:()=>ea,L:()=>It,N:()=>gr,P:()=>ir,Q:()=>_s,R:()=>ll,U:()=>oa,V:()=>Ta,W:()=>Fi,X:()=>Ir,Y:()=>Ic,Z:()=>hu,_:()=>sa,a:()=>zs,a0:()=>Ja,a1:()=>mi,a2:()=>$d,a3:()=>Fl,a4:()=>kr,a5:()=>la,a6:()=>Vo,a7:()=>Aa,a8:()=>Ac,a9:()=>nc,aA:()=>ue,aB:()=>Wl,aC:()=>pi,aD:()=>mo,aE:()=>ad,aF:()=>$l,aG:()=>od,aH:()=>Ai,aL:()=>kc,aO:()=>Gr,aa:()=>Ll,ab:()=>ua,ac:()=>il,ad:()=>xt,ae:()=>Mc,af:()=>Bs,ai:()=>E,aj:()=>j,ak:()=>ee,an:()=>nl,ao:()=>js,aq:()=>ol,ar:()=>sl,as:()=>Le,at:()=>Vt,au:()=>Qe,av:()=>Ce,aw:()=>Sn,ax:()=>$s,ay:()=>Xn,az:()=>nt,b:()=>Wd,c:()=>ci,d:()=>Nr,e:()=>jr,f:()=>Uc,g:()=>zh,h:()=>dl,i:()=>Do,j:()=>$h,k:()=>La,l:()=>ls,m:()=>gl,o:()=>Wh,p:()=>ut,r:()=>oc,s:()=>jl,u:()=>ts,v:()=>Io,x:()=>Fh});var c=Q(5861),U=Q(9058),K=Q(534),pe=Q(7582),ce=Q(7879),Re=Q(4537);const ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const me=function de(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},lt=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},st=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ke=new ce.Yd("@firebase/auth");function Ze(A,...w){ke.logLevel<=ce.in.ERROR&&ke.error(`Auth (${K.SDK_VERSION}): ${A}`,...w)}function Ce(A,...w){throw he(A,...w)}function nt(A,...w){return he(A,...w)}function $e(A,w,x){const P=Object.assign(Object.assign({},lt()),{[w]:x});return new U.LL("auth","Firebase",P).create(w,{appName:A.name})}function it(A,w,x){if(!(w instanceof x))throw x.name!==w.constructor.name&&Ce(A,"argument-error"),$e(A,"argument-error",`Type of ${w.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function he(A,...w){if("string"!=typeof A){const x=w[0],P=[...w.slice(1)];return P[0]&&(P[0].appName=A.name),A._errorFactory.create(x,...P)}return st.create(A,...w)}function ue(A,w,...x){if(!A)throw he(w,...x)}function Ge(A){const w="INTERNAL ASSERTION FAILED: "+A;throw Ze(w),new Error(w)}function Le(A,w){A||Ge(w)}function Et(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.href)||""}function ot(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var A;return typeof self<"u"&&(null===(A=self.location)||void 0===A?void 0:A.protocol)||null}class rn{constructor(w,x){this.shortDelay=w,this.longDelay=x,Le(x>w,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function nn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fi(A,w){Le(A.emulator,"Emulator should always be set here");const{url:x}=A.emulator;return w?`${x}${w.startsWith("/")?w.slice(1):w}`:x}class De{static initialize(w,x,P){this.fetchImpl=w,x&&(this.headersImpl=x),P&&(this.responseImpl=P)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},He=new rn(3e4,6e4);function je(A,w){return A.tenantId&&!w.tenantId?Object.assign(Object.assign({},w),{tenantId:A.tenantId}):w}function ct(A,w,x,P){return gt.apply(this,arguments)}function gt(){return(gt=(0,c.Z)(function*(A,w,x,P,$={}){return At(A,$,(0,c.Z)(function*(){let X={},Se={};P&&("GET"===w?Se=P:X={body:JSON.stringify(P)});const Je=(0,U.xO)(Object.assign({key:A.config.apiKey},Se)).slice(1),Pt=yield A._getAdditionalHeaders();return Pt["Content-Type"]="application/json",A.languageCode&&(Pt["X-Firebase-Locale"]=A.languageCode),De.fetch()(Nn(A,A.config.apiHost,x,Je),Object.assign({method:w,headers:Pt,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function At(A,w,x){return bt.apply(this,arguments)}function bt(){return(bt=(0,c.Z)(function*(A,w,x){A._canInitEmulator=!1;const P=Object.assign(Object.assign({},Ee),w);try{const $=new fn(A),X=yield Promise.race([x(),$.promise]);$.clearNetworkTimeout();const Se=yield X.json();if("needConfirmation"in Se)throw tn(A,"account-exists-with-different-credential",Se);if(X.ok&&!("errorMessage"in Se))return Se;{const Je=X.ok?Se.errorMessage:Se.error.message,[Pt,Nt]=Je.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pt)throw tn(A,"credential-already-in-use",Se);if("EMAIL_EXISTS"===Pt)throw tn(A,"email-already-in-use",Se);if("USER_DISABLED"===Pt)throw tn(A,"user-disabled",Se);const pn=P[Pt]||Pt.toLowerCase().replace(/[_\s]+/g,"-");if(Nt)throw $e(A,pn,Nt);Ce(A,pn)}}catch($){if($ instanceof U.ZR)throw $;Ce(A,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function Tn(A,w,x,P){return dn.apply(this,arguments)}function dn(){return(dn=(0,c.Z)(function*(A,w,x,P,$={}){const X=yield ct(A,w,x,P,$);return"mfaPendingCredential"in X&&Ce(A,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function Nn(A,w,x,P){const $=`${w}${x}?${P}`;return A.config.emulator?fi(A.config,$):`${A.config.apiScheme}://${$}`}class fn{constructor(w){this.auth=w,this.timer=null,this.promise=new Promise((x,P)=>{this.timer=setTimeout(()=>P(nt(this.auth,"network-request-failed")),He.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tn(A,w,x){const P={appName:A.name};x.email&&(P.email=x.email),x.phoneNumber&&(P.phoneNumber=x.phoneNumber);const $=nt(A,w,P);return $.customData._tokenResponse=x,$}function Ut(){return(Ut=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:delete",w)})).apply(this,arguments)}function Fn(){return(Fn=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function wi(){return(wi=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:lookup",w)})).apply(this,arguments)}function Si(A){if(A)try{const w=new Date(Number(A));if(!isNaN(w.getTime()))return w.toUTCString()}catch{}}function Ro(){return(Ro=(0,c.Z)(function*(A,w=!1){const x=(0,U.m9)(A),P=yield x.getIdToken(w),$=Yt(P);ue($&&$.exp&&$.auth_time&&$.iat,x.auth,"internal-error");const X="object"==typeof $.firebase?$.firebase:void 0,Se=X?.sign_in_provider;return{claims:$,token:P,authTime:Si(sn($.auth_time)),issuedAtTime:Si(sn($.iat)),expirationTime:Si(sn($.exp)),signInProvider:Se||null,signInSecondFactor:X?.sign_in_second_factor||null}})).apply(this,arguments)}function sn(A){return 1e3*Number(A)}function Yt(A){const[w,x,P]=A.split(".");if(void 0===w||void 0===x||void 0===P)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,U.tV)(x);return $?JSON.parse($):(Ze("Failed to decode base64 JWT payload"),null)}catch($){return Ze("Caught error parsing JWT payload as JSON",$?.toString()),null}}function zt(A,w){return Te.apply(this,arguments)}function Te(){return(Te=(0,c.Z)(function*(A,w,x=!1){if(x)return w;try{return yield w}catch(P){throw P instanceof U.ZR&&function we({code:A}){return"auth/user-disabled"===A||"auth/user-token-expired"===A}(P)&&A.auth.currentUser===A&&(yield A.auth.signOut()),P}})).apply(this,arguments)}class Ie{constructor(w){this.user=w,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(w){var x;if(w){const P=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),P}{this.errorBackoff=3e4;const $=(null!==(x=this.user.stsTokenManager.expirationTime)&&void 0!==x?x:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(w=!1){var x=this;if(!this.isRunning)return;const P=this.getInterval(w);this.timerId=setTimeout((0,c.Z)(function*(){yield x.iteration()}),P)}iteration(){var w=this;return(0,c.Z)(function*(){try{yield w.user.getIdToken(!0)}catch(x){return void("auth/network-request-failed"===x?.code&&w.schedule(!0))}w.schedule()})()}}class qe{constructor(w,x){this.createdAt=w,this.lastLoginAt=x,this._initializeTime()}_initializeTime(){this.lastSignInTime=Si(this.lastLoginAt),this.creationTime=Si(this.createdAt)}_copy(w){this.createdAt=w.createdAt,this.lastLoginAt=w.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fe(A){return Ct.apply(this,arguments)}function Ct(){return Ct=(0,c.Z)(function*(A){var w;const x=A.auth,P=yield A.getIdToken(),$=yield zt(A,function Un(A,w){return wi.apply(this,arguments)}(x,{idToken:P}));ue($?.users.length,x,"internal-error");const X=$.users[0];A._notifyReloadListener(X);const Se=null!==(w=X.providerUserInfo)&&void 0!==w&&w.length?function Ht(A){return A.map(w=>{var{providerId:x}=w,P=(0,pe._T)(w,["providerId"]);return{providerId:x,uid:P.rawId||"",displayName:P.displayName||null,email:P.email||null,phoneNumber:P.phoneNumber||null,photoURL:P.photoUrl||null}})}(X.providerUserInfo):[],Je=function Jt(A,w){return[...A.filter(P=>!w.some($=>$.providerId===P.providerId)),...w]}(A.providerData,Se),pn=!!A.isAnonymous&&!(A.email&&X.passwordHash||Je?.length),Gn={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:Je,metadata:new qe(X.createdAt,X.lastLoginAt),isAnonymous:pn};Object.assign(A,Gn)}),Ct.apply(this,arguments)}function jt(){return(jt=(0,c.Z)(function*(A){const w=(0,U.m9)(A);yield Fe(w),yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)})).apply(this,arguments)}function vi(){return(vi=(0,c.Z)(function*(A,w){const x=yield At(A,{},(0,c.Z)(function*(){const P=(0,U.xO)({grant_type:"refresh_token",refresh_token:w}).slice(1),{tokenApiHost:$,apiKey:X}=A.config,Se=Nn(A,$,"/v1/token",`key=${X}`),Je=yield A._getAdditionalHeaders();return Je["Content-Type"]="application/x-www-form-urlencoded",De.fetch()(Se,{method:"POST",headers:Je,body:P})}));return{accessToken:x.access_token,expiresIn:x.expires_in,refreshToken:x.refresh_token}})).apply(this,arguments)}class zn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(w){ue(w.idToken,"internal-error"),ue(typeof w.idToken<"u","internal-error"),ue(typeof w.refreshToken<"u","internal-error");const x="expiresIn"in w&&typeof w.expiresIn<"u"?Number(w.expiresIn):function Qt(A){const w=Yt(A);return ue(w,"internal-error"),ue(typeof w.exp<"u","internal-error"),ue(typeof w.iat<"u","internal-error"),Number(w.exp)-Number(w.iat)}(w.idToken);this.updateTokensAndExpiration(w.idToken,w.refreshToken,x)}getToken(w,x=!1){var P=this;return(0,c.Z)(function*(){return ue(!P.accessToken||P.refreshToken,w,"user-token-expired"),x||!P.accessToken||P.isExpired?P.refreshToken?(yield P.refresh(w,P.refreshToken),P.accessToken):null:P.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(w,x){var P=this;return(0,c.Z)(function*(){const{accessToken:$,refreshToken:X,expiresIn:Se}=yield function Ei(A,w){return vi.apply(this,arguments)}(w,x);P.updateTokensAndExpiration($,X,Number(Se))})()}updateTokensAndExpiration(w,x,P){this.refreshToken=x||null,this.accessToken=w||null,this.expirationTime=Date.now()+1e3*P}static fromJSON(w,x){const{refreshToken:P,accessToken:$,expirationTime:X}=x,Se=new zn;return P&&(ue("string"==typeof P,"internal-error",{appName:w}),Se.refreshToken=P),$&&(ue("string"==typeof $,"internal-error",{appName:w}),Se.accessToken=$),X&&(ue("number"==typeof X,"internal-error",{appName:w}),Se.expirationTime=X),Se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(w){this.accessToken=w.accessToken,this.refreshToken=w.refreshToken,this.expirationTime=w.expirationTime}_clone(){return Object.assign(new zn,this.toJSON())}_performRefresh(){return Ge("not implemented")}}function ki(A,w){ue("string"==typeof A||typeof A>"u","internal-error",{appName:w})}class Hn{constructor(w){var{uid:x,auth:P,stsTokenManager:$}=w,X=(0,pe._T)(w,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=x,this.auth=P,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new qe(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(w){var x=this;return(0,c.Z)(function*(){const P=yield zt(x,x.stsTokenManager.getToken(x.auth,w));return ue(P,x.auth,"internal-error"),x.accessToken!==P&&(x.accessToken=P,yield x.auth._persistUserIfCurrent(x),x.auth._notifyListenersIfCurrent(x)),P})()}getIdTokenResult(w){return function Vi(A){return Ro.apply(this,arguments)}(this,w)}reload(){return function mn(A){return jt.apply(this,arguments)}(this)}_assign(w){this!==w&&(ue(this.uid===w.uid,this.auth,"internal-error"),this.displayName=w.displayName,this.photoURL=w.photoURL,this.email=w.email,this.emailVerified=w.emailVerified,this.phoneNumber=w.phoneNumber,this.isAnonymous=w.isAnonymous,this.tenantId=w.tenantId,this.providerData=w.providerData.map(x=>Object.assign({},x)),this.metadata._copy(w.metadata),this.stsTokenManager._assign(w.stsTokenManager))}_clone(w){const x=new Hn(Object.assign(Object.assign({},this),{auth:w,stsTokenManager:this.stsTokenManager._clone()}));return x.metadata._copy(this.metadata),x}_onReload(w){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=w,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(w){this.reloadListener?this.reloadListener(w):this.reloadUserInfo=w}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(w,x=!1){var P=this;return(0,c.Z)(function*(){let $=!1;w.idToken&&w.idToken!==P.stsTokenManager.accessToken&&(P.stsTokenManager.updateFromServerResponse(w),$=!0),x&&(yield Fe(P)),yield P.auth._persistUserIfCurrent(P),$&&P.auth._notifyListenersIfCurrent(P)})()}delete(){var w=this;return(0,c.Z)(function*(){const x=yield w.getIdToken();return yield zt(w,function Dn(A,w){return Ut.apply(this,arguments)}(w.auth,{idToken:x})),w.stsTokenManager.clearRefreshToken(),w.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(w=>Object.assign({},w)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(w,x){var P,$,X,Se,Je,Pt,Nt,pn;const Gn=null!==(P=x.displayName)&&void 0!==P?P:void 0,eo=null!==($=x.email)&&void 0!==$?$:void 0,pa=null!==(X=x.phoneNumber)&&void 0!==X?X:void 0,to=null!==(Se=x.photoURL)&&void 0!==Se?Se:void 0,tp=null!==(Je=x.tenantId)&&void 0!==Je?Je:void 0,Zh=null!==(Pt=x._redirectEventId)&&void 0!==Pt?Pt:void 0,jc=null!==(Nt=x.createdAt)&&void 0!==Nt?Nt:void 0,xu=null!==(pn=x.lastLoginAt)&&void 0!==pn?pn:void 0,{uid:_l,emailVerified:Kh,isAnonymous:oh,providerData:Yh,stsTokenManager:fm}=x;ue(_l&&fm,w,"internal-error");const Ql=zn.fromJSON(this.name,fm);ue("string"==typeof _l,w,"internal-error"),ki(Gn,w.name),ki(eo,w.name),ue("boolean"==typeof Kh,w,"internal-error"),ue("boolean"==typeof oh,w,"internal-error"),ki(pa,w.name),ki(to,w.name),ki(tp,w.name),ki(Zh,w.name),ki(jc,w.name),ki(xu,w.name);const sh=new Hn({uid:_l,auth:w,email:eo,emailVerified:Kh,displayName:Gn,isAnonymous:oh,photoURL:to,phoneNumber:pa,tenantId:tp,stsTokenManager:Ql,createdAt:jc,lastLoginAt:xu});return Yh&&Array.isArray(Yh)&&(sh.providerData=Yh.map(o_=>Object.assign({},o_))),Zh&&(sh._redirectEventId=Zh),sh}static _fromIdTokenResponse(w,x,P=!1){return(0,c.Z)(function*(){const $=new zn;$.updateFromServerResponse(x);const X=new Hn({uid:x.localId,auth:w,stsTokenManager:$,isAnonymous:P});return yield Fe(X),X})()}}const mr=new Map;function pi(A){Le(A instanceof Function,"Expected a class definition");let w=mr.get(A);return w?(Le(w instanceof A,"Instance stored in cache mismatched with class"),w):(w=new A,mr.set(A,w),w)}const gr=(()=>{class A{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(x,P){var $=this;return(0,c.Z)(function*(){$.storage[x]=P})()}_get(x){var P=this;return(0,c.Z)(function*(){const $=P.storage[x];return void 0===$?null:$})()}_remove(x){var P=this;return(0,c.Z)(function*(){delete P.storage[x]})()}_addListener(x,P){}_removeListener(x,P){}}return A.type="NONE",A})();function mo(A,w,x){return`firebase:${A}:${w}:${x}`}class fe{constructor(w,x,P){this.persistence=w,this.auth=x,this.userKey=P;const{config:$,name:X}=this.auth;this.fullUserKey=mo(this.userKey,$.apiKey,X),this.fullPersistenceKey=mo("persistence",$.apiKey,X),this.boundEventHandler=x._onStorageEvent.bind(x),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(w){return this.persistence._set(this.fullUserKey,w.toJSON())}getCurrentUser(){var w=this;return(0,c.Z)(function*(){const x=yield w.persistence._get(w.fullUserKey);return x?Hn._fromJSON(w.auth,x):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(w){var x=this;return(0,c.Z)(function*(){if(x.persistence===w)return;const P=yield x.getCurrentUser();return yield x.removeCurrentUser(),x.persistence=w,P?x.setCurrentUser(P):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(w,x,P="authUser"){return(0,c.Z)(function*(){if(!x.length)return new fe(pi(gr),w,P);const $=(yield Promise.all(x.map(function(){var Nt=(0,c.Z)(function*(pn){if(yield pn._isAvailable())return pn});return function(pn){return Nt.apply(this,arguments)}}()))).filter(Nt=>Nt);let X=$[0]||pi(gr);const Se=mo(P,w.config.apiKey,w.name);let Je=null;for(const Nt of x)try{const pn=yield Nt._get(Se);if(pn){const Gn=Hn._fromJSON(w,pn);Nt!==X&&(Je=Gn),X=Nt;break}}catch{}const Pt=$.filter(Nt=>Nt._shouldAllowMigration);return X._shouldAllowMigration&&Pt.length?(X=Pt[0],Je&&(yield X._set(Se,Je.toJSON())),yield Promise.all(x.map(function(){var Nt=(0,c.Z)(function*(pn){if(pn!==X)try{yield pn._remove(Se)}catch{}});return function(pn){return Nt.apply(this,arguments)}}())),new fe(X,w,P)):new fe(X,w,P)})()}}function le(A){const w=A.toLowerCase();if(w.includes("opera/")||w.includes("opr/")||w.includes("opios/"))return"Opera";if(Me(w))return"IEMobile";if(w.includes("msie")||w.includes("trident/"))return"IE";if(w.includes("edge/"))return"Edge";if(J(w))return"Firefox";if(w.includes("silk/"))return"Silk";if(St(w))return"Blackberry";if(yn(w))return"Webos";if(te(w))return"Safari";if((w.includes("chrome/")||Y(w))&&!w.includes("edge/"))return"Chrome";if(Qe(w))return"Android";{const P=A.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===P?.length)return P[1]}return"Other"}function J(A=(0,U.z$)()){return/firefox\//i.test(A)}function te(A=(0,U.z$)()){const w=A.toLowerCase();return w.includes("safari/")&&!w.includes("chrome/")&&!w.includes("crios/")&&!w.includes("android")}function Y(A=(0,U.z$)()){return/crios\//i.test(A)}function Me(A=(0,U.z$)()){return/iemobile/i.test(A)}function Qe(A=(0,U.z$)()){return/android/i.test(A)}function St(A=(0,U.z$)()){return/blackberry/i.test(A)}function yn(A=(0,U.z$)()){return/webos/i.test(A)}function Vt(A=(0,U.z$)()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function Xn(A=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(A)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(A)}function kn(A=(0,U.z$)()){return Vt(A)||Qe(A)||yn(A)||St(A)||/windows phone/i.test(A)||Me(A)}function Zo(A,w=[]){let x;switch(A){case"Browser":x=le((0,U.z$)());break;case"Worker":x=`${le((0,U.z$)())}-${A}`;break;default:x=A}const P=w.length?w.join(","):"FirebaseCore-web";return`${x}/JsCore/${K.SDK_VERSION}/${P}`}function ze(){return(ze=(0,c.Z)(function*(A){return(yield ct(A,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _t(A,w){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,c.Z)(function*(A,w){return ct(A,"GET","/v2/recaptchaConfig",je(A,w))})).apply(this,arguments)}function Rt(A){return void 0!==A&&void 0!==A.getResponse}function On(A){return void 0!==A&&void 0!==A.enterprise}class ri{constructor(w){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===w.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=w.recaptchaKey.split("/")[3],this.emailPasswordEnabled=w.recaptchaEnforcementState.some(x=>"EMAIL_PASSWORD_PROVIDER"===x.provider&&"OFF"!==x.enforcementState)}}function qi(A){return new Promise((w,x)=>{const P=document.createElement("script");P.setAttribute("src",A),P.onload=w,P.onerror=$=>{const X=nt("internal-error");X.customData=$,x(X)},P.type="text/javascript",P.charset="UTF-8",function Hi(){var A,w;return null!==(w=null===(A=document.getElementsByTagName("head"))||void 0===A?void 0:A[0])&&void 0!==w?w:document}().appendChild(P)})}function Yi(A){return`__${A}${Math.floor(1e6*Math.random())}`}class Ko{constructor(w){this.type="recaptcha-enterprise",this.auth=Ai(w)}verify(w="verify",x=!1){var P=this;return(0,c.Z)(function*(){function X(){return X=(0,c.Z)(function*(Je){if(!x){if(null==Je.tenantId&&null!=Je._agentRecaptchaConfig)return Je._agentRecaptchaConfig.siteKey;if(null!=Je.tenantId&&void 0!==Je._tenantRecaptchaConfigs[Je.tenantId])return Je._tenantRecaptchaConfigs[Je.tenantId].siteKey}return new Promise(function(){var Pt=(0,c.Z)(function*(Nt,pn){_t(Je,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Gn=>{if(void 0!==Gn.recaptchaKey){const eo=new ri(Gn);return null==Je.tenantId?Je._agentRecaptchaConfig=eo:Je._tenantRecaptchaConfigs[Je.tenantId]=eo,Nt(eo.siteKey)}pn(new Error("recaptcha Enterprise site key undefined"))}).catch(Gn=>{pn(Gn)})});return function(Nt,pn){return Pt.apply(this,arguments)}}())}),X.apply(this,arguments)}function Se(Je,Pt,Nt){const pn=window.grecaptcha;On(pn)?pn.enterprise.ready(()=>{pn.enterprise.execute(Je,{action:w}).then(Gn=>{Pt(Gn)}).catch(()=>{Pt("NO_RECAPTCHA")})}):Nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Je,Pt)=>{(function $(Je){return X.apply(this,arguments)})(P.auth).then(Nt=>{if(!x&&On(window.grecaptcha))Se(Nt,Je,Pt);else{if(typeof window>"u")return void Pt(new Error("RecaptchaVerifier is only supported in browser"));qi("https://www.google.com/recaptcha/enterprise.js?render="+Nt).then(()=>{Se(Nt,Je,Pt)}).catch(pn=>{Pt(pn)})}}).catch(Nt=>{Pt(Nt)})})})()}}function cs(A,w,x){return ms.apply(this,arguments)}function ms(){return(ms=(0,c.Z)(function*(A,w,x,P=!1){const $=new Ko(A);let X;try{X=yield $.verify(x)}catch{X=yield $.verify(x,!0)}const Se=Object.assign({},w);return Object.assign(Se,P?{captchaResp:X}:{captchaResponse:X}),Object.assign(Se,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Se,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Se})).apply(this,arguments)}class Yo{constructor(w){this.auth=w,this.queue=[]}pushCallback(w,x){const P=X=>new Promise((Se,Je)=>{try{Se(w(X))}catch(Pt){Je(Pt)}});P.onAbort=x,this.queue.push(P);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(w){var x=this;return(0,c.Z)(function*(){if(x.auth.currentUser===w)return;const P=[];try{for(const $ of x.queue)yield $(w),$.onAbort&&P.push($.onAbort)}catch($){P.reverse();for(const X of P)try{X()}catch{}throw x.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class ni{constructor(w,x,P,$){this.app=w,this.heartbeatServiceProvider=x,this.appCheckServiceProvider=P,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _o(this),this.idTokenSubscription=new _o(this),this.beforeStateQueue=new Yo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=w.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(w,x){var P=this;return x&&(this._popupRedirectResolver=pi(x)),this._initializationPromise=this.queue((0,c.Z)(function*(){var $,X;if(!P._deleted&&(P.persistenceManager=yield fe.create(P,w),!P._deleted)){if(null!==($=P._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield P._popupRedirectResolver._initialize(P)}catch{}yield P.initializeCurrentUser(x),P.lastNotifiedUid=(null===(X=P.currentUser)||void 0===X?void 0:X.uid)||null,!P._deleted&&(P._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var w=this;return(0,c.Z)(function*(){if(w._deleted)return;const x=yield w.assertedPersistence.getCurrentUser();if(w.currentUser||x){if(w.currentUser&&x&&w.currentUser.uid===x.uid)return w._currentUser._assign(x),void(yield w.currentUser.getIdToken());yield w._updateCurrentUser(x,!0)}})()}initializeCurrentUser(w){var x=this;return(0,c.Z)(function*(){var P;const $=yield x.assertedPersistence.getCurrentUser();let X=$,Se=!1;if(w&&x.config.authDomain){yield x.getOrInitRedirectPersistenceManager();const Je=null===(P=x.redirectUser)||void 0===P?void 0:P._redirectEventId,Pt=X?._redirectEventId,Nt=yield x.tryRedirectSignIn(w);(!Je||Je===Pt)&&Nt?.user&&(X=Nt.user,Se=!0)}if(!X)return x.directlySetCurrentUser(null);if(!X._redirectEventId){if(Se)try{yield x.beforeStateQueue.runMiddleware(X)}catch(Je){X=$,x._popupRedirectResolver._overrideRedirectResult(x,()=>Promise.reject(Je))}return X?x.reloadAndSetCurrentUserOrClear(X):x.directlySetCurrentUser(null)}return ue(x._popupRedirectResolver,x,"argument-error"),yield x.getOrInitRedirectPersistenceManager(),x.redirectUser&&x.redirectUser._redirectEventId===X._redirectEventId?x.directlySetCurrentUser(X):x.reloadAndSetCurrentUserOrClear(X)})()}tryRedirectSignIn(w){var x=this;return(0,c.Z)(function*(){let P=null;try{P=yield x._popupRedirectResolver._completeRedirectFn(x,w,!0)}catch{yield x._setRedirectUser(null)}return P})()}reloadAndSetCurrentUserOrClear(w){var x=this;return(0,c.Z)(function*(){try{yield Fe(w)}catch(P){if("auth/network-request-failed"!==P?.code)return x.directlySetCurrentUser(null)}return x.directlySetCurrentUser(w)})()}useDeviceLanguage(){this.languageCode=function un(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}()}_delete(){var w=this;return(0,c.Z)(function*(){w._deleted=!0})()}updateCurrentUser(w){var x=this;return(0,c.Z)(function*(){const P=w?(0,U.m9)(w):null;return P&&ue(P.auth.config.apiKey===x.config.apiKey,x,"invalid-user-token"),x._updateCurrentUser(P&&P._clone(x))})()}_updateCurrentUser(w,x=!1){var P=this;return(0,c.Z)(function*(){if(!P._deleted)return w&&ue(P.tenantId===w.tenantId,P,"tenant-id-mismatch"),x||(yield P.beforeStateQueue.runMiddleware(w)),P.queue((0,c.Z)(function*(){yield P.directlySetCurrentUser(w),P.notifyAuthListeners()}))})()}signOut(){var w=this;return(0,c.Z)(function*(){return yield w.beforeStateQueue.runMiddleware(null),(w.redirectPersistenceManager||w._popupRedirectResolver)&&(yield w._setRedirectUser(null)),w._updateCurrentUser(null,!0)})()}setPersistence(w){var x=this;return this.queue((0,c.Z)(function*(){yield x.assertedPersistence.setPersistence(pi(w))}))}initializeRecaptchaConfig(){var w=this;return(0,c.Z)(function*(){const x=yield _t(w,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),P=new ri(x);null==w.tenantId?w._agentRecaptchaConfig=P:w._tenantRecaptchaConfigs[w.tenantId]=P,P.emailPasswordEnabled&&new Ko(w).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(w){this._errorFactory=new U.LL("auth","Firebase",w())}onAuthStateChanged(w,x,P){return this.registerStateListener(this.authStateSubscription,w,x,P)}beforeAuthStateChanged(w,x){return this.beforeStateQueue.pushCallback(w,x)}onIdTokenChanged(w,x,P){return this.registerStateListener(this.idTokenSubscription,w,x,P)}toJSON(){var w;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(w=this._currentUser)||void 0===w?void 0:w.toJSON()}}_setRedirectUser(w,x){var P=this;return(0,c.Z)(function*(){const $=yield P.getOrInitRedirectPersistenceManager(x);return null===w?$.removeCurrentUser():$.setCurrentUser(w)})()}getOrInitRedirectPersistenceManager(w){var x=this;return(0,c.Z)(function*(){if(!x.redirectPersistenceManager){const P=w&&pi(w)||x._popupRedirectResolver;ue(P,x,"argument-error"),x.redirectPersistenceManager=yield fe.create(x,[pi(P._redirectPersistence)],"redirectUser"),x.redirectUser=yield x.redirectPersistenceManager.getCurrentUser()}return x.redirectPersistenceManager})()}_redirectUserForId(w){var x=this;return(0,c.Z)(function*(){var P,$;return x._isInitialized&&(yield x.queue((0,c.Z)(function*(){}))),(null===(P=x._currentUser)||void 0===P?void 0:P._redirectEventId)===w?x._currentUser:(null===($=x.redirectUser)||void 0===$?void 0:$._redirectEventId)===w?x.redirectUser:null})()}_persistUserIfCurrent(w){var x=this;return(0,c.Z)(function*(){if(w===x.currentUser)return x.queue((0,c.Z)(function*(){return x.directlySetCurrentUser(w)}))})()}_notifyListenersIfCurrent(w){w===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var w,x;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const P=null!==(x=null===(w=this.currentUser)||void 0===w?void 0:w.uid)&&void 0!==x?x:null;this.lastNotifiedUid!==P&&(this.lastNotifiedUid=P,this.authStateSubscription.next(this.currentUser))}registerStateListener(w,x,P,$){if(this._deleted)return()=>{};const X="function"==typeof x?x:x.next.bind(x),Se=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(Se,this,"internal-error"),Se.then(()=>X(this.currentUser)),"function"==typeof x?w.addObserver(x,P,$):w.addObserver(x)}directlySetCurrentUser(w){var x=this;return(0,c.Z)(function*(){x.currentUser&&x.currentUser!==w&&x._currentUser._stopProactiveRefresh(),w&&x.isProactiveRefreshEnabled&&w._startProactiveRefresh(),x.currentUser=w,w?yield x.assertedPersistence.setCurrentUser(w):yield x.assertedPersistence.removeCurrentUser()})()}queue(w){return this.operations=this.operations.then(w,w),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(w){!w||this.frameworks.includes(w)||(this.frameworks.push(w),this.frameworks.sort(),this.clientVersion=Zo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var w=this;return(0,c.Z)(function*(){var x;const P={"X-Client-Version":w.clientVersion};w.app.options.appId&&(P["X-Firebase-gmpid"]=w.app.options.appId);const $=yield null===(x=w.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===x?void 0:x.getHeartbeatsHeader();$&&(P["X-Firebase-Client"]=$);const X=yield w._getAppCheckToken();return X&&(P["X-Firebase-AppCheck"]=X),P})()}_getAppCheckToken(){var w=this;return(0,c.Z)(function*(){var x;const P=yield null===(x=w.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===x?void 0:x.getToken();return P?.error&&function at(A,...w){ke.logLevel<=ce.in.WARN&&ke.warn(`Auth (${K.SDK_VERSION}): ${A}`,...w)}(`Error while retrieving App Check token: ${P.error}`),P?.token})()}}function Ai(A){return(0,U.m9)(A)}class _o{constructor(w){this.auth=w,this.observer=null,this.addObserver=(0,U.ne)(x=>this.observer=x)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ka(A,w,x){const P=Ai(A);ue(P._canInitEmulator,P,"emulator-config-failed"),ue(/^https?:\/\//.test(w),P,"invalid-emulator-scheme");const $=!!x?.disableWarnings,X=$r(w),{host:Se,port:Je}=function ks(A){const w=$r(A),x=/(\/\/)?([^?#/]+)/.exec(A.substr(w.length));if(!x)return{host:"",port:null};const P=x[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(P);if($){const X=$[1];return{host:X,port:Ya(P.substr(X.length+1))}}{const[X,Se]=P.split(":");return{host:X,port:Ya(Se)}}}(w);P.config.emulator={url:`${X}//${Se}${null===Je?"":`:${Je}`}/`},P.settings.appVerificationDisabledForTesting=!0,P.emulatorConfig=Object.freeze({host:Se,port:Je,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function Zu(){function A(){const w=document.createElement("p"),x=w.style;w.innerText="Running in emulator mode. Do not use with production credentials.",x.position="fixed",x.width="100%",x.backgroundColor="#ffffff",x.border=".1em solid #000000",x.color="#b50000",x.bottom="0px",x.left="0px",x.margin="0px",x.zIndex="10000",x.textAlign="center",w.classList.add("firebase-emulator-warning"),document.body.appendChild(w)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",A):A())}()}function $r(A){const w=A.indexOf(":");return w<0?"":A.substr(0,w+1)}function Ya(A){if(!A)return null;const w=Number(A);return isNaN(w)?null:w}class ea{constructor(w,x){this.providerId=w,this.signInMethod=x}toJSON(){return Ge("not implemented")}_getIdTokenResponse(w){return Ge("not implemented")}_linkToIdToken(w,x){return Ge("not implemented")}_getReauthenticationResolver(w){return Ge("not implemented")}}function vc(A,w){return yc.apply(this,arguments)}function yc(){return(yc=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:resetPassword",je(A,w))})).apply(this,arguments)}function Ns(A,w){return ta.apply(this,arguments)}function ta(){return(ta=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function ko(){return(ko=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:update",je(A,w))})).apply(this,arguments)}function vo(A,w){return vr.apply(this,arguments)}function vr(){return(vr=(0,c.Z)(function*(A,w){return Tn(A,"POST","/v1/accounts:signInWithPassword",je(A,w))})).apply(this,arguments)}function Qa(A,w){return na.apply(this,arguments)}function na(){return(na=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:sendOobCode",je(A,w))})).apply(this,arguments)}function bc(){return(bc=(0,c.Z)(function*(A,w){return Qa(A,w)})).apply(this,arguments)}function ia(A,w){return gs.apply(this,arguments)}function gs(){return(gs=(0,c.Z)(function*(A,w){return Qa(A,w)})).apply(this,arguments)}function Xa(A,w){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,c.Z)(function*(A,w){return Qa(A,w)})).apply(this,arguments)}function yr(){return(yr=(0,c.Z)(function*(A,w){return Qa(A,w)})).apply(this,arguments)}function br(){return(br=(0,c.Z)(function*(A,w){return Tn(A,"POST","/v1/accounts:signInWithEmailLink",je(A,w))})).apply(this,arguments)}function Ec(){return(Ec=(0,c.Z)(function*(A,w){return Tn(A,"POST","/v1/accounts:signInWithEmailLink",je(A,w))})).apply(this,arguments)}class No extends ea{constructor(w,x,P,$=null){super("password",P),this._email=w,this._password=x,this._tenantId=$}static _fromEmailAndPassword(w,x){return new No(w,x,"password")}static _fromEmailAndCode(w,x,P=null){return new No(w,x,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(w){const x="string"==typeof w?JSON.parse(w):w;if(x?.email&&x?.password){if("password"===x.signInMethod)return this._fromEmailAndPassword(x.email,x.password);if("emailLink"===x.signInMethod)return this._fromEmailAndCode(x.email,x.password,x.tenantId)}return null}_getIdTokenResponse(w){var x=this;return(0,c.Z)(function*(){var P;switch(x.signInMethod){case"password":const $={returnSecureToken:!0,email:x._email,password:x._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(P=w._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const X=yield cs(w,$,"signInWithPassword");return vo(w,X)}return vo(w,$).catch(function(){var X=(0,c.Z)(function*(Se){if("auth/missing-recaptcha-token"===Se.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Je=yield cs(w,$,"signInWithPassword");return vo(w,Je)}return Promise.reject(Se)});return function(Se){return X.apply(this,arguments)}}());case"emailLink":return function xa(A,w){return br.apply(this,arguments)}(w,{email:x._email,oobCode:x._password});default:Ce(w,"internal-error")}})()}_linkToIdToken(w,x){var P=this;return(0,c.Z)(function*(){switch(P.signInMethod){case"password":return Ns(w,{idToken:x,returnSecureToken:!0,email:P._email,password:P._password});case"emailLink":return function wc(A,w){return Ec.apply(this,arguments)}(w,{idToken:x,email:P._email,oobCode:P._password});default:Ce(w,"internal-error")}})()}_getReauthenticationResolver(w){return this._getIdTokenResponse(w)}}function Fs(A,w){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,c.Z)(function*(A,w){return Tn(A,"POST","/v1/accounts:signInWithIdp",je(A,w))})).apply(this,arguments)}class It extends ea{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(w){const x=new It(w.providerId,w.signInMethod);return w.idToken||w.accessToken?(w.idToken&&(x.idToken=w.idToken),w.accessToken&&(x.accessToken=w.accessToken),w.nonce&&!w.pendingToken&&(x.nonce=w.nonce),w.pendingToken&&(x.pendingToken=w.pendingToken)):w.oauthToken&&w.oauthTokenSecret?(x.accessToken=w.oauthToken,x.secret=w.oauthTokenSecret):Ce("argument-error"),x}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(w){const x="string"==typeof w?JSON.parse(w):w,{providerId:P,signInMethod:$}=x,X=(0,pe._T)(x,["providerId","signInMethod"]);if(!P||!$)return null;const Se=new It(P,$);return Se.idToken=X.idToken||void 0,Se.accessToken=X.accessToken||void 0,Se.secret=X.secret,Se.nonce=X.nonce,Se.pendingToken=X.pendingToken||null,Se}_getIdTokenResponse(w){return Fs(w,this.buildRequest())}_linkToIdToken(w,x){const P=this.buildRequest();return P.idToken=x,Fs(w,P)}_getReauthenticationResolver(w){const x=this.buildRequest();return x.autoCreate=!1,Fs(w,x)}buildRequest(){const w={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)w.pendingToken=this.pendingToken;else{const x={};this.idToken&&(x.id_token=this.idToken),this.accessToken&&(x.access_token=this.accessToken),this.secret&&(x.oauth_token_secret=this.secret),x.providerId=this.providerId,this.nonce&&!this.pendingToken&&(x.nonce=this.nonce),w.postBody=(0,U.xO)(x)}return w}}function Ii(){return(Ii=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:sendVerificationCode",je(A,w))})).apply(this,arguments)}function Ls(){return(Ls=(0,c.Z)(function*(A,w){return Tn(A,"POST","/v1/accounts:signInWithPhoneNumber",je(A,w))})).apply(this,arguments)}function Qo(){return(Qo=(0,c.Z)(function*(A,w){const x=yield Tn(A,"POST","/v1/accounts:signInWithPhoneNumber",je(A,w));if(x.temporaryProof)throw tn(A,"account-exists-with-different-credential",x);return x})).apply(this,arguments)}const Oi={USER_NOT_FOUND:"user-not-found"};function Xo(){return(Xo=(0,c.Z)(function*(A,w){return Tn(A,"POST","/v1/accounts:signInWithPhoneNumber",je(A,Object.assign(Object.assign({},w),{operation:"REAUTH"})),Oi)})).apply(this,arguments)}class on extends ea{constructor(w){super("phone","phone"),this.params=w}static _fromVerification(w,x){return new on({verificationId:w,verificationCode:x})}static _fromTokenResponse(w,x){return new on({phoneNumber:w,temporaryProof:x})}_getIdTokenResponse(w){return function so(A,w){return Ls.apply(this,arguments)}(w,this._makeVerificationRequest())}_linkToIdToken(w,x){return function $n(A,w){return Qo.apply(this,arguments)}(w,Object.assign({idToken:x},this._makeVerificationRequest()))}_getReauthenticationResolver(w){return function ra(A,w){return Xo.apply(this,arguments)}(w,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:w,phoneNumber:x,verificationId:P,verificationCode:$}=this.params;return w&&x?{temporaryProof:w,phoneNumber:x}:{sessionInfo:P,code:$}}toJSON(){const w={providerId:this.providerId};return this.params.phoneNumber&&(w.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(w.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(w.verificationCode=this.params.verificationCode),this.params.verificationId&&(w.verificationId=this.params.verificationId),w}static fromJSON(w){"string"==typeof w&&(w=JSON.parse(w));const{verificationId:x,verificationCode:P,phoneNumber:$,temporaryProof:X}=w;return P||x||$||X?new on({verificationId:x,verificationCode:P,phoneNumber:$,temporaryProof:X}):null}}class wr{constructor(w){var x,P,$,X,Se,Je;const Pt=(0,U.zd)((0,U.pd)(w)),Nt=null!==(x=Pt.apiKey)&&void 0!==x?x:null,pn=null!==(P=Pt.oobCode)&&void 0!==P?P:null,Gn=function qr(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Pt.mode)&&void 0!==$?$:null);ue(Nt&&pn&&Gn,"argument-error"),this.apiKey=Nt,this.operation=Gn,this.code=pn,this.continueUrl=null!==(X=Pt.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(Se=Pt.languageCode)&&void 0!==Se?Se:null,this.tenantId=null!==(Je=Pt.tenantId)&&void 0!==Je?Je:null}static parseLink(w){const x=function Rl(A){const w=(0,U.zd)((0,U.pd)(A)).link,x=w?(0,U.zd)((0,U.pd)(w)).deep_link_id:null,P=(0,U.zd)((0,U.pd)(A)).deep_link_id;return(P?(0,U.zd)((0,U.pd)(P)).link:null)||P||x||w||A}(w);try{return new wr(x)}catch{return null}}}let _s=(()=>{class A{constructor(){this.providerId=A.PROVIDER_ID}static credential(x,P){return No._fromEmailAndPassword(x,P)}static credentialWithLink(x,P){const $=wr.parseLink(P);return ue($,"argument-error"),No._fromEmailAndCode(x,$.code,$.tenantId)}}return A.PROVIDER_ID="password",A.EMAIL_PASSWORD_SIGN_IN_METHOD="password",A.EMAIL_LINK_SIGN_IN_METHOD="emailLink",A})();class Fo{constructor(w){this.providerId=w,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(w){this.defaultLanguageCode=w}setCustomParameters(w){return this.customParameters=w,this}getCustomParameters(){return this.customParameters}}class Cr extends Fo{constructor(){super(...arguments),this.scopes=[]}addScope(w){return this.scopes.includes(w)||this.scopes.push(w),this}getScopes(){return[...this.scopes]}}class Ir extends Cr{static credentialFromJSON(w){const x="string"==typeof w?JSON.parse(w):w;return ue("providerId"in x&&"signInMethod"in x,"argument-error"),It._fromParams(x)}credential(w){return this._credential(Object.assign(Object.assign({},w),{nonce:w.rawNonce}))}_credential(w){return ue(w.idToken||w.accessToken,"argument-error"),It._fromParams(Object.assign(Object.assign({},w),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(w){return Ir.oauthCredentialFromTaggedObject(w)}static credentialFromError(w){return Ir.oauthCredentialFromTaggedObject(w.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:$,pendingToken:X,nonce:Se,providerId:Je}=w;if(!P&&!$&&!x&&!X||!Je)return null;try{return new Ir(Je)._credential({idToken:x,accessToken:P,nonce:Se,pendingToken:X})}catch{return null}}}let oa=(()=>{class A extends Cr{constructor(){super("facebook.com")}static credential(x){return It._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.FACEBOOK_SIGN_IN_METHOD,accessToken:x})}static credentialFromResult(x){return A.credentialFromTaggedObject(x)}static credentialFromError(x){return A.credentialFromTaggedObject(x.customData||{})}static credentialFromTaggedObject({_tokenResponse:x}){if(!x||!("oauthAccessToken"in x)||!x.oauthAccessToken)return null;try{return A.credential(x.oauthAccessToken)}catch{return null}}}return A.FACEBOOK_SIGN_IN_METHOD="facebook.com",A.PROVIDER_ID="facebook.com",A})(),Ta=(()=>{class A extends Cr{constructor(){super("google.com"),this.addScope("profile")}static credential(x,P){return It._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GOOGLE_SIGN_IN_METHOD,idToken:x,accessToken:P})}static credentialFromResult(x){return A.credentialFromTaggedObject(x)}static credentialFromError(x){return A.credentialFromTaggedObject(x.customData||{})}static credentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{oauthIdToken:P,oauthAccessToken:$}=x;if(!P&&!$)return null;try{return A.credential(P,$)}catch{return null}}}return A.GOOGLE_SIGN_IN_METHOD="google.com",A.PROVIDER_ID="google.com",A})(),Fi=(()=>{class A extends Cr{constructor(){super("github.com")}static credential(x){return It._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.GITHUB_SIGN_IN_METHOD,accessToken:x})}static credentialFromResult(x){return A.credentialFromTaggedObject(x)}static credentialFromError(x){return A.credentialFromTaggedObject(x.customData||{})}static credentialFromTaggedObject({_tokenResponse:x}){if(!x||!("oauthAccessToken"in x)||!x.oauthAccessToken)return null;try{return A.credential(x.oauthAccessToken)}catch{return null}}}return A.GITHUB_SIGN_IN_METHOD="github.com",A.PROVIDER_ID="github.com",A})();class Gr extends ea{constructor(w,x){super(w,w),this.pendingToken=x}_getIdTokenResponse(w){return Fs(w,this.buildRequest())}_linkToIdToken(w,x){const P=this.buildRequest();return P.idToken=x,Fs(w,P)}_getReauthenticationResolver(w){const x=this.buildRequest();return x.autoCreate=!1,Fs(w,x)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(w){const x="string"==typeof w?JSON.parse(w):w,{providerId:P,signInMethod:$,pendingToken:X}=x;return P&&$&&X&&P===$?new Gr(P,X):null}static _create(w,x){return new Gr(w,x)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ic extends Fo{constructor(w){ue(w.startsWith("saml."),"argument-error"),super(w)}static credentialFromResult(w){return Ic.samlCredentialFromTaggedObject(w)}static credentialFromError(w){return Ic.samlCredentialFromTaggedObject(w.customData||{})}static credentialFromJSON(w){const x=Gr.fromJSON(w);return ue(x,"argument-error"),x}static samlCredentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{pendingToken:x,providerId:P}=w;if(!x||!P)return null;try{return Gr._create(P,x)}catch{return null}}}let hu=(()=>{class A extends Cr{constructor(){super("twitter.com")}static credential(x,P){return It._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:x,oauthTokenSecret:P})}static credentialFromResult(x){return A.credentialFromTaggedObject(x)}static credentialFromError(x){return A.credentialFromTaggedObject(x.customData||{})}static credentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{oauthAccessToken:P,oauthTokenSecret:$}=x;if(!P||!$)return null;try{return A.credential(P,$)}catch{return null}}}return A.TWITTER_SIGN_IN_METHOD="twitter.com",A.PROVIDER_ID="twitter.com",A})();function Da(A,w){return Or.apply(this,arguments)}function Or(){return(Or=(0,c.Z)(function*(A,w){return Tn(A,"POST","/v1/accounts:signUp",je(A,w))})).apply(this,arguments)}class tr{constructor(w){this.user=w.user,this.providerId=w.providerId,this._tokenResponse=w._tokenResponse,this.operationType=w.operationType}static _fromIdTokenResponse(w,x,P,$=!1){return(0,c.Z)(function*(){const X=yield Hn._fromIdTokenResponse(w,P,$),Se=Wr(P);return new tr({user:X,providerId:Se,_tokenResponse:P,operationType:x})})()}static _forOperation(w,x,P){return(0,c.Z)(function*(){yield w._updateTokensIfNecessary(P,!0);const $=Wr(P);return new tr({user:w,providerId:$,_tokenResponse:P,operationType:x})})()}}function Wr(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}function sa(A){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(A){var w;const x=Ai(A);if(yield x._initializationPromise,null!==(w=x.currentUser)&&void 0!==w&&w.isAnonymous)return new tr({user:x.currentUser,providerId:null,operationType:"signIn"});const P=yield Da(x,{returnSecureToken:!0}),$=yield tr._fromIdTokenResponse(x,"signIn",P,!0);return yield x._updateCurrentUser($.user),$})).apply(this,arguments)}class tl extends U.ZR{constructor(w,x,P,$){var X;super(x.code,x.message),this.operationType=P,this.user=$,Object.setPrototypeOf(this,tl.prototype),this.customData={appName:w.name,tenantId:null!==(X=w.tenantId)&&void 0!==X?X:void 0,_serverResponse:x.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(w,x,P,$){return new tl(w,x,P,$)}}function Zr(A,w,x,P){return("reauthenticate"===w?x._getReauthenticationResolver(A):x._getIdTokenResponse(A)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?tl._fromErrorAndOperation(A,X,w,P):X})}function xr(A){return new Set(A.map(({providerId:w})=>w).filter(w=>!!w))}function nl(A,w){return Pr.apply(this,arguments)}function Pr(){return Pr=(0,c.Z)(function*(A,w){const x=(0,U.m9)(A);yield aa(!0,x,w);const{providerUserInfo:P}=yield function cn(A,w){return Fn.apply(this,arguments)}(x.auth,{idToken:yield x.getIdToken(),deleteProvider:[w]}),$=xr(P||[]);return x.providerData=x.providerData.filter(X=>$.has(X.providerId)),$.has("phone")||(x.phoneNumber=null),yield x.auth._persistUserIfCurrent(x),x}),Pr.apply(this,arguments)}function Kr(A,w){return di.apply(this,arguments)}function di(){return(di=(0,c.Z)(function*(A,w,x=!1){const P=yield zt(A,w._linkToIdToken(A.auth,yield A.getIdToken()),x);return tr._forOperation(A,"link",P)})).apply(this,arguments)}function aa(A,w,x){return oi.apply(this,arguments)}function oi(){return(oi=(0,c.Z)(function*(A,w,x){yield Fe(w);const $=!1===A?"provider-already-linked":"no-such-provider";ue(xr(w.providerData).has(x)===A,w.auth,$)})).apply(this,arguments)}function Rr(A,w){return kl.apply(this,arguments)}function kl(){return(kl=(0,c.Z)(function*(A,w,x=!1){const{auth:P}=A,$="reauthenticate";try{const X=yield zt(A,Zr(P,$,w,A),x);ue(X.idToken,P,"internal-error");const Se=Yt(X.idToken);ue(Se,P,"internal-error");const{sub:Je}=Se;return ue(A.uid===Je,P,"user-mismatch"),tr._forOperation(A,$,X)}catch(X){throw"auth/user-not-found"===X?.code&&Ce(P,"user-mismatch"),X}})).apply(this,arguments)}function vs(A,w){return xc.apply(this,arguments)}function xc(){return(xc=(0,c.Z)(function*(A,w,x=!1){const P="signIn",$=yield Zr(A,P,w),X=yield tr._fromIdTokenResponse(A,P,$);return x||(yield A._updateCurrentUser(X.user)),X})).apply(this,arguments)}function Sa(A,w){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,c.Z)(function*(A,w){return vs(Ai(A),w)})).apply(this,arguments)}function Ja(A,w){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,c.Z)(function*(A,w){const x=(0,U.m9)(A);return yield aa(!1,x,w.providerId),Kr(x,w)})).apply(this,arguments)}function mi(A,w){return fu.apply(this,arguments)}function fu(){return(fu=(0,c.Z)(function*(A,w){return Rr((0,U.m9)(A),w)})).apply(this,arguments)}function Uo(){return(Uo=(0,c.Z)(function*(A,w){return Tn(A,"POST","/v1/accounts:signInWithCustomToken",je(A,w))})).apply(this,arguments)}function $d(A,w){return ec.apply(this,arguments)}function ec(){return ec=(0,c.Z)(function*(A,w){const x=Ai(A),P=yield function Dc(A,w){return Uo.apply(this,arguments)}(x,{token:w,returnSecureToken:!0}),$=yield tr._fromIdTokenResponse(x,"signIn",P);return yield x._updateCurrentUser($.user),$}),ec.apply(this,arguments)}class yo{constructor(w,x){this.factorId=w,this.uid=x.mfaEnrollmentId,this.enrollmentTime=new Date(x.enrolledAt).toUTCString(),this.displayName=x.displayName}static _fromServerResponse(w,x){return"phoneInfo"in x?tc._fromServerResponse(w,x):"totpInfo"in x?ca._fromServerResponse(w,x):Ce(w,"internal-error")}}class tc extends yo{constructor(w){super("phone",w),this.phoneNumber=w.phoneInfo}static _fromServerResponse(w,x){return new tc(x)}}class ca extends yo{constructor(w){super("totp",w)}static _fromServerResponse(w,x){return new ca(x)}}function ys(A,w,x){var P;ue((null===(P=x.url)||void 0===P?void 0:P.length)>0,A,"invalid-continue-uri"),ue(typeof x.dynamicLinkDomain>"u"||x.dynamicLinkDomain.length>0,A,"invalid-dynamic-link-domain"),w.continueUrl=x.url,w.dynamicLinkDomain=x.dynamicLinkDomain,w.canHandleCodeInApp=x.handleCodeInApp,x.iOS&&(ue(x.iOS.bundleId.length>0,A,"missing-ios-bundle-id"),w.iOSBundleId=x.iOS.bundleId),x.android&&(ue(x.android.packageName.length>0,A,"missing-android-pkg-name"),w.androidInstallApp=x.android.installApp,w.androidMinimumVersionCode=x.android.minimumVersion,w.androidPackageName=x.android.packageName)}function Fl(A,w,x){return pu.apply(this,arguments)}function pu(){return pu=(0,c.Z)(function*(A,w,x){var P;const $=Ai(A),X={requestType:"PASSWORD_RESET",email:w,clientType:"CLIENT_TYPE_WEB"};if(null!==(P=$._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const Se=yield cs($,X,"getOobCode",!0);x&&ys($,Se,x),yield ia($,Se)}else x&&ys($,X,x),yield ia($,X).catch(function(){var Se=(0,c.Z)(function*(Je){if("auth/missing-recaptcha-token"!==Je.code)return Promise.reject(Je);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Pt=yield cs($,X,"getOobCode",!0);x&&ys($,Pt,x),yield ia($,Pt)}});return function(Je){return Se.apply(this,arguments)}}())}),pu.apply(this,arguments)}function kr(A,w,x){return Us.apply(this,arguments)}function Us(){return(Us=(0,c.Z)(function*(A,w,x){yield vc((0,U.m9)(A),{oobCode:w,newPassword:x})})).apply(this,arguments)}function la(A,w){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,c.Z)(function*(A,w){yield function el(A,w){return ko.apply(this,arguments)}((0,U.m9)(A),{oobCode:w})}),Sc.apply(this,arguments)}function Vo(A,w){return cr.apply(this,arguments)}function cr(){return(cr=(0,c.Z)(function*(A,w){const x=(0,U.m9)(A),P=yield vc(x,{oobCode:w}),$=P.requestType;switch(ue($,x,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(P.newEmail,x,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(P.mfaInfo,x,"internal-error");default:ue(P.email,x,"internal-error")}let X=null;return P.mfaInfo&&(X=yo._fromServerResponse(Ai(x),P.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.newEmail:P.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.email:P.newEmail)||null,multiFactorInfo:X},operation:$}})).apply(this,arguments)}function Aa(A,w){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,c.Z)(function*(A,w){const{data:x}=yield Vo((0,U.m9)(A),w);return x.email})).apply(this,arguments)}function Ac(A,w,x){return bo.apply(this,arguments)}function bo(){return bo=(0,c.Z)(function*(A,w,x){var P;const $=Ai(A),X={returnSecureToken:!0,email:w,password:x,clientType:"CLIENT_TYPE_WEB"};let Se;if(null!==(P=$._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const Nt=yield cs($,X,"signUpPassword");Se=Da($,Nt)}else Se=Da($,X).catch(function(){var Nt=(0,c.Z)(function*(pn){if("auth/missing-recaptcha-token"===pn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Gn=yield cs($,X,"signUpPassword");return Da($,Gn)}return Promise.reject(pn)});return function(pn){return Nt.apply(this,arguments)}}());const Je=yield Se.catch(Nt=>Promise.reject(Nt)),Pt=yield tr._fromIdTokenResponse($,"signIn",Je);return yield $._updateCurrentUser(Pt.user),Pt}),bo.apply(this,arguments)}function nc(A,w,x){return Sa((0,U.m9)(A),_s.credential(w,x))}function Ll(A,w,x){return Vs.apply(this,arguments)}function Vs(){return Vs=(0,c.Z)(function*(A,w,x){var P;const $=Ai(A),X={requestType:"EMAIL_SIGNIN",email:w,clientType:"CLIENT_TYPE_WEB"};function Se(Je,Pt){ue(Pt.handleCodeInApp,$,"argument-error"),Pt&&ys($,Je,Pt)}if(null!==(P=$._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const Je=yield cs($,X,"getOobCode",!0);Se(Je,x),yield Xa($,Je)}else Se(X,x),yield Xa($,X).catch(function(){var Je=(0,c.Z)(function*(Pt){if("auth/missing-recaptcha-token"!==Pt.code)return Promise.reject(Pt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Nt=yield cs($,X,"getOobCode",!0);Se(Nt,x),yield Xa($,Nt)}});return function(Pt){return Je.apply(this,arguments)}}())}),Vs.apply(this,arguments)}function ua(A,w){const x=wr.parseLink(w);return"EMAIL_SIGNIN"===x?.operation}function il(A,w,x){return yi.apply(this,arguments)}function yi(){return(yi=(0,c.Z)(function*(A,w,x){const P=(0,U.m9)(A),$=_s.credentialWithLink(w,x||Et());return ue($._tenantId===(P.tenantId||null),P,"tenant-id-mismatch"),Sa(P,$)})).apply(this,arguments)}function Ma(){return(Ma=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:createAuthUri",je(A,w))})).apply(this,arguments)}function xt(A,w){return Jo.apply(this,arguments)}function Jo(){return Jo=(0,c.Z)(function*(A,w){const P={identifier:w,continueUri:ot()?Et():"http://localhost"},{signinMethods:$}=yield function Bo(A,w){return Ma.apply(this,arguments)}((0,U.m9)(A),P);return $||[]}),Jo.apply(this,arguments)}function Mc(A,w){return wo.apply(this,arguments)}function wo(){return wo=(0,c.Z)(function*(A,w){const x=(0,U.m9)(A),$={requestType:"VERIFY_EMAIL",idToken:yield A.getIdToken()};w&&ys(x.auth,$,w);const{email:X}=yield function Mr(A,w){return bc.apply(this,arguments)}(x.auth,$);X!==A.email&&(yield A.reload())}),wo.apply(this,arguments)}function Bs(A,w,x){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,c.Z)(function*(A,w,x){const P=(0,U.m9)(A),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield A.getIdToken(),newEmail:w};x&&ys(P.auth,X,x);const{email:Se}=yield function Ni(A,w){return yr.apply(this,arguments)}(P.auth,X);Se!==A.email&&(yield A.reload())}),Oc.apply(this,arguments)}function Oa(){return(Oa=(0,c.Z)(function*(A,w){return ct(A,"POST","/v1/accounts:update",w)})).apply(this,arguments)}function E(A,w){return N.apply(this,arguments)}function N(){return N=(0,c.Z)(function*(A,{displayName:w,photoURL:x}){if(void 0===w&&void 0===x)return;const P=(0,U.m9)(A),X={idToken:yield P.getIdToken(),displayName:w,photoUrl:x,returnSecureToken:!0},Se=yield zt(P,function Ku(A,w){return Oa.apply(this,arguments)}(P.auth,X));P.displayName=Se.displayName||null,P.photoURL=Se.photoUrl||null;const Je=P.providerData.find(({providerId:Pt})=>"password"===Pt);Je&&(Je.displayName=P.displayName,Je.photoURL=P.photoURL),yield P._updateTokensIfNecessary(Se)}),N.apply(this,arguments)}function j(A,w){return ve((0,U.m9)(A),w,null)}function ee(A,w){return ve((0,U.m9)(A),null,w)}function ve(A,w,x){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,c.Z)(function*(A,w,x){const{auth:P}=A,X={idToken:yield A.getIdToken(),returnSecureToken:!0};w&&(X.email=w),x&&(X.password=x);const Se=yield zt(A,Ns(P,X));yield A._updateTokensIfNecessary(Se,!0)})).apply(this,arguments)}class qn{constructor(w,x,P={}){this.isNewUser=w,this.providerId=x,this.profile=P}}class ei extends qn{constructor(w,x,P,$){super(w,x,P),this.username=$}}class lr extends qn{constructor(w,x){super(w,"facebook.com",x)}}class Eo extends ei{constructor(w,x){super(w,"github.com",x,"string"==typeof x?.login?x?.login:null)}}class es extends qn{constructor(w,x){super(w,"google.com",x)}}class Pc extends ei{constructor(w,x,P){super(w,"twitter.com",x,P)}}function js(A){const{user:w,_tokenResponse:x}=A;return w.isAnonymous&&!x?{providerId:null,isNewUser:!1,profile:null}:function kt(A){var w,x;if(!A)return null;const{providerId:P}=A,$=A.rawUserInfo?JSON.parse(A.rawUserInfo):{},X=A.isNewUser||"identitytoolkit#SignupNewUserResponse"===A.kind;if(!P&&A?.idToken){const Se=null===(x=null===(w=Yt(A.idToken))||void 0===w?void 0:w.firebase)||void 0===x?void 0:x.sign_in_provider;if(Se)return new qn(X,"anonymous"!==Se&&"custom"!==Se?Se:null)}if(!P)return null;switch(P){case"facebook.com":return new lr(X,$);case"github.com":return new Eo(X,$);case"google.com":return new es(X,$);case"twitter.com":return new Pc(X,$,A.screenName||null);case"custom":case"anonymous":return new qn(X,null);default:return new qn(X,P,$)}}(x)}function Io(A,w,x,P){return(0,U.m9)(A).onIdTokenChanged(w,x,P)}function Fh(A,w,x,P){return(0,U.m9)(A).onAuthStateChanged(w,x,P)}class bs{constructor(w,x,P){this.type=w,this.credential=x,this.auth=P}static _fromIdtoken(w,x){return new bs("enroll",w,x)}static _fromMfaPendingCredential(w){return new bs("signin",w)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(w){var x,P;if(w?.multiFactorSession){if(null!==(x=w.multiFactorSession)&&void 0!==x&&x.pendingCredential)return bs._fromMfaPendingCredential(w.multiFactorSession.pendingCredential);if(null!==(P=w.multiFactorSession)&&void 0!==P&&P.idToken)return bs._fromIdtoken(w.multiFactorSession.idToken)}return null}}class Rc{constructor(w,x,P){this.session=w,this.hints=x,this.signInResolver=P}static _fromError(w,x){const P=Ai(w),$=x.customData._serverResponse,X=($.mfaInfo||[]).map(Je=>yo._fromServerResponse(P,Je));ue($.mfaPendingCredential,P,"internal-error");const Se=bs._fromMfaPendingCredential($.mfaPendingCredential);return new Rc(Se,X,function(){var Je=(0,c.Z)(function*(Pt){const Nt=yield Pt._process(P,Se);delete $.mfaInfo,delete $.mfaPendingCredential;const pn=Object.assign(Object.assign({},$),{idToken:Nt.idToken,refreshToken:Nt.refreshToken});switch(x.operationType){case"signIn":const Gn=yield tr._fromIdTokenResponse(P,x.operationType,pn);return yield P._updateCurrentUser(Gn.user),Gn;case"reauthenticate":return ue(x.user,P,"internal-error"),tr._forOperation(x.user,x.operationType,pn);default:Ce(P,"internal-error")}});return function(Pt){return Je.apply(this,arguments)}}())}resolveSignIn(w){var x=this;return(0,c.Z)(function*(){return x.signInResolver(w)})()}}function ol(A,w){var x;const P=(0,U.m9)(A),$=w;return ue(w.customData.operationType,P,"argument-error"),ue(null===(x=$.customData._serverResponse)||void 0===x?void 0:x.mfaPendingCredential,P,"argument-error"),Rc._fromError(P,$)}class _u{constructor(w){this.user=w,this.enrolledFactors=[],w._onReload(x=>{x.mfaInfo&&(this.enrolledFactors=x.mfaInfo.map(P=>yo._fromServerResponse(w.auth,P)))})}static _fromUser(w){return new _u(w)}getSession(){var w=this;return(0,c.Z)(function*(){return bs._fromIdtoken(yield w.user.getIdToken(),w.user.auth)})()}enroll(w,x){var P=this;return(0,c.Z)(function*(){const $=w,X=yield P.getSession(),Se=yield zt(P.user,$._process(P.user.auth,X,x));return yield P.user._updateTokensIfNecessary(Se),P.user.reload()})()}unenroll(w){var x=this;return(0,c.Z)(function*(){const P="string"==typeof w?w:w.uid,$=yield x.user.getIdToken();try{const X=yield zt(x.user,function qd(A,w){return ct(A,"POST","/v2/accounts/mfaEnrollment:withdraw",je(A,w))}(x.user.auth,{idToken:$,mfaEnrollmentId:P}));x.enrolledFactors=x.enrolledFactors.filter(({uid:Se})=>Se!==P),yield x.user._updateTokensIfNecessary(X),yield x.user.reload()}catch(X){throw X}})()}}const xi=new WeakMap;function sl(A){const w=(0,U.m9)(A);return xi.has(w)||xi.set(w,_u._fromUser(w)),xi.get(w)}const Pa="__sak";class jo{constructor(w,x){this.storageRetriever=w,this.type=x}_isAvailable(){try{return this.storage?(this.storage.setItem(Pa,"1"),this.storage.removeItem(Pa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(w,x){return this.storage.setItem(w,JSON.stringify(x)),Promise.resolve()}_get(w){const x=this.storage.getItem(w);return Promise.resolve(x?JSON.parse(x):null)}_remove(w){return this.storage.removeItem(w),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wd=(()=>{class A extends jo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(x,P)=>this.onStorageEvent(x,P),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Qr(){const A=(0,U.z$)();return te(A)||Vt(A)}()&&function _r(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=kn(),this._shouldAllowMigration=!0}forAllChangedKeys(x){for(const P of Object.keys(this.listeners)){const $=this.storage.getItem(P),X=this.localCache[P];$!==X&&x(P,X,$)}}onStorageEvent(x,P=!1){if(!x.key)return void this.forAllChangedKeys((Je,Pt,Nt)=>{this.notifyListeners(Je,Nt)});const $=x.key;if(P?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Je=this.storage.getItem($);if(x.newValue!==Je)null!==x.newValue?this.storage.setItem($,x.newValue):this.storage.removeItem($);else if(this.localCache[$]===x.newValue&&!P)return}const X=()=>{const Je=this.storage.getItem($);!P&&this.localCache[$]===Je||this.notifyListeners($,Je)},Se=this.storage.getItem($);!function ai(){return(0,U.w1)()&&10===document.documentMode}()||Se===x.newValue||x.newValue===x.oldValue?X():setTimeout(X,10)}notifyListeners(x,P){this.localCache[x]=P;const $=this.listeners[x];if($)for(const X of Array.from($))X(P&&JSON.parse(P))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((x,P,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:x,oldValue:P,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(x,P){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[x]||(this.listeners[x]=new Set,this.localCache[x]=this.storage.getItem(x)),this.listeners[x].add(P)}_removeListener(x,P){this.listeners[x]&&(this.listeners[x].delete(P),0===this.listeners[x].size&&delete this.listeners[x]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(x,P){var $=()=>super._set,X=this;return(0,c.Z)(function*(){yield $().call(X,x,P),X.localCache[x]=JSON.stringify(P)})()}_get(x){var P=()=>super._get,$=this;return(0,c.Z)(function*(){const X=yield P().call($,x);return $.localCache[x]=JSON.stringify(X),X})()}_remove(x){var P=()=>super._remove,$=this;return(0,c.Z)(function*(){yield P().call($,x),delete $.localCache[x]})()}}return A.type="LOCAL",A})(),zs=(()=>{class A extends jo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(x,P){}_removeListener(x,P){}}return A.type="SESSION",A})();let Kd=(()=>{class A{constructor(x){this.eventTarget=x,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(x){const P=this.receivers.find(X=>X.isListeningto(x));if(P)return P;const $=new A(x);return this.receivers.push($),$}isListeningto(x){return this.eventTarget===x}handleEvent(x){var P=this;return(0,c.Z)(function*(){const $=x,{eventId:X,eventType:Se,data:Je}=$.data,Pt=P.handlersMap[Se];if(!Pt?.size)return;$.ports[0].postMessage({status:"ack",eventId:X,eventType:Se});const Nt=Array.from(Pt).map(function(){var Gn=(0,c.Z)(function*(eo){return eo($.origin,Je)});return function(eo){return Gn.apply(this,arguments)}}()),pn=yield function cl(A){return Promise.all(A.map(function(){var w=(0,c.Z)(function*(x){try{return{fulfilled:!0,value:yield x}}catch(P){return{fulfilled:!1,reason:P}}});return function(x){return w.apply(this,arguments)}}()))}(Nt);$.ports[0].postMessage({status:"done",eventId:X,eventType:Se,response:pn})})()}_subscribe(x,P){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[x]||(this.handlersMap[x]=new Set),this.handlersMap[x].add(P)}_unsubscribe(x,P){this.handlersMap[x]&&P&&this.handlersMap[x].delete(P),(!P||0===this.handlersMap[x].size)&&delete this.handlersMap[x],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return A.receivers=[],A})();function kc(A="",w=10){let x="";for(let P=0;P<w;P++)x+=Math.floor(10*Math.random());return A+x}class Uh{constructor(w){this.target=w,this.handlers=new Set}removeMessageHandler(w){w.messageChannel&&(w.messageChannel.port1.removeEventListener("message",w.onMessage),w.messageChannel.port1.close()),this.handlers.delete(w)}_send(w,x,P=50){var $=this;return(0,c.Z)(function*(){const X=typeof MessageChannel<"u"?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let Se,Je;return new Promise((Pt,Nt)=>{const pn=kc("",20);X.port1.start();const Gn=setTimeout(()=>{Nt(new Error("unsupported_event"))},P);Je={messageChannel:X,onMessage(eo){const pa=eo;if(pa.data.eventId===pn)switch(pa.data.status){case"ack":clearTimeout(Gn),Se=setTimeout(()=>{Nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Se),Pt(pa.data.response);break;default:clearTimeout(Gn),clearTimeout(Se),Nt(new Error("invalid_response"))}}},$.handlers.add(Je),X.port1.addEventListener("message",Je.onMessage),$.target.postMessage({eventType:w,eventId:pn,data:x},[X.port2])}).finally(()=>{Je&&$.removeMessageHandler(Je)})})()}}function Vr(){return window}function vu(){return typeof Vr().WorkerGlobalScope<"u"&&"function"==typeof Vr().importScripts}function Nc(){return(Nc=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Br="firebaseLocalStorageDb",$i="firebaseLocalStorage",Es="fbase_key";class Fc{constructor(w){this.request=w}toPromise(){return new Promise((w,x)=>{this.request.addEventListener("success",()=>{w(this.request.result)}),this.request.addEventListener("error",()=>{x(this.request.error)})})}}function Yd(A,w){return A.transaction([$i],w?"readwrite":"readonly").objectStore($i)}function Qd(){const A=indexedDB.open(Br,1);return new Promise((w,x)=>{A.addEventListener("error",()=>{x(A.error)}),A.addEventListener("upgradeneeded",()=>{const P=A.result;try{P.createObjectStore($i,{keyPath:Es})}catch($){x($)}}),A.addEventListener("success",(0,c.Z)(function*(){const P=A.result;P.objectStoreNames.contains($i)?w(P):(P.close(),yield function Zf(){const A=indexedDB.deleteDatabase(Br);return new Fc(A).toPromise()}(),w(yield Qd()))}))})}function rc(A,w,x){return pt.apply(this,arguments)}function pt(){return(pt=(0,c.Z)(function*(A,w,x){const P=Yd(A,!0).put({[Es]:w,value:x});return new Fc(P).toPromise()})).apply(this,arguments)}function Cs(){return(Cs=(0,c.Z)(function*(A,w){const x=Yd(A,!1).get(w),P=yield new Fc(x).toPromise();return void 0===P?null:P.value})).apply(this,arguments)}function yu(A,w){const x=Yd(A,!0).delete(w);return new Fc(x).toPromise()}const Do=(()=>{class A{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var x=this;return(0,c.Z)(function*(){return x.db||(x.db=yield Qd()),x.db})()}_withRetries(x){var P=this;return(0,c.Z)(function*(){let $=0;for(;;)try{const X=yield P._openDb();return yield x(X)}catch(X){if($++>3)throw X;P.db&&(P.db.close(),P.db=void 0)}})()}initializeServiceWorkerMessaging(){var x=this;return(0,c.Z)(function*(){return vu()?x.initializeReceiver():x.initializeSender()})()}initializeReceiver(){var x=this;return(0,c.Z)(function*(){x.receiver=Kd._getInstance(function Ju(){return vu()?self:null}()),x.receiver._subscribe("keyChanged",function(){var P=(0,c.Z)(function*($,X){return{keyProcessed:(yield x._poll()).includes(X.key)}});return function($,X){return P.apply(this,arguments)}}()),x.receiver._subscribe("ping",function(){var P=(0,c.Z)(function*($,X){return["keyChanged"]});return function($,X){return P.apply(this,arguments)}}())})()}initializeSender(){var x=this;return(0,c.Z)(function*(){var P,$;if(x.activeServiceWorker=yield function In(){return Nc.apply(this,arguments)}(),!x.activeServiceWorker)return;x.sender=new Uh(x.activeServiceWorker);const X=yield x.sender._send("ping",{},800);X&&null!==(P=X[0])&&void 0!==P&&P.fulfilled&&null!==($=X[0])&&void 0!==$&&$.value.includes("keyChanged")&&(x.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(x){var P=this;return(0,c.Z)(function*(){if(P.sender&&P.activeServiceWorker&&function Wf(){var A;return(null===(A=navigator?.serviceWorker)||void 0===A?void 0:A.controller)||null}()===P.activeServiceWorker)try{yield P.sender._send("keyChanged",{key:x},P.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const x=yield Qd();return yield rc(x,Pa,"1"),yield yu(x,Pa),!0}catch{}return!1})()}_withPendingWrite(x){var P=this;return(0,c.Z)(function*(){P.pendingWrites++;try{yield x()}finally{P.pendingWrites--}})()}_set(x,P){var $=this;return(0,c.Z)(function*(){return $._withPendingWrite((0,c.Z)(function*(){return yield $._withRetries(X=>rc(X,x,P)),$.localCache[x]=P,$.notifyServiceWorker(x)}))})()}_get(x){var P=this;return(0,c.Z)(function*(){const $=yield P._withRetries(X=>function ii(A,w){return Cs.apply(this,arguments)}(X,x));return P.localCache[x]=$,$})()}_remove(x){var P=this;return(0,c.Z)(function*(){return P._withPendingWrite((0,c.Z)(function*(){return yield P._withRetries($=>yu($,x)),delete P.localCache[x],P.notifyServiceWorker(x)}))})()}_poll(){var x=this;return(0,c.Z)(function*(){const P=yield x._withRetries(Se=>{const Je=Yd(Se,!1).getAll();return new Fc(Je).toPromise()});if(!P)return[];if(0!==x.pendingWrites)return[];const $=[],X=new Set;for(const{fbase_key:Se,value:Je}of P)X.add(Se),JSON.stringify(x.localCache[Se])!==JSON.stringify(Je)&&(x.notifyListeners(Se,Je),$.push(Se));for(const Se of Object.keys(x.localCache))x.localCache[Se]&&!X.has(Se)&&(x.notifyListeners(Se,null),$.push(Se));return $})()}notifyListeners(x,P){this.localCache[x]=P;const $=this.listeners[x];if($)for(const X of Array.from($))X(P)}startPolling(){var x=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return x._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(x,P){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[x]||(this.listeners[x]=new Set,this._get(x)),this.listeners[x].add(P)}_removeListener(x,P){this.listeners[x]&&(this.listeners[x].delete(P),0===this.listeners[x].size&&delete this.listeners[x]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return A.type="LOCAL",A})(),Zi=1e12;class ur{constructor(w){this.auth=w,this.counter=Zi,this._widgets=new Map}render(w,x){const P=this.counter;return this._widgets.set(P,new co(w,this.auth.name,x||{})),this.counter++,P}reset(w){var x;const P=w||Zi;null===(x=this._widgets.get(P))||void 0===x||x.delete(),this._widgets.delete(P)}getResponse(w){var x;return(null===(x=this._widgets.get(w||Zi))||void 0===x?void 0:x.getResponse())||""}execute(w){var x=this;return(0,c.Z)(function*(){var P;return null===(P=x._widgets.get(w||Zi))||void 0===P||P.execute(),""})()}}class co{constructor(w,x,P){this.params=P,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof w?document.getElementById(w):w;ue($,"argument-error",{appName:x}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xr(A){const w=[],x="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<A;P++)w.push(x.charAt(Math.floor(62*Math.random())));return w.join("")}(50);const{callback:w,"expired-callback":x}=this.params;if(w)try{w(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,x)try{x()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jr=Yi("rcb"),Bh=new rn(3e4,6e4);class td{constructor(){var w;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(w=Vr().grecaptcha)||void 0===w||!w.render)}load(w,x=""){return ue(function um(A){return A.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(A)}(x),w,"argument-error"),this.shouldResolveImmediately(x)&&Rt(Vr().grecaptcha)?Promise.resolve(Vr().grecaptcha):new Promise((P,$)=>{const X=Vr().setTimeout(()=>{$(nt(w,"network-request-failed"))},Bh.get());Vr()[Jr]=()=>{Vr().clearTimeout(X),delete Vr()[Jr];const Je=Vr().grecaptcha;if(!Je||!Rt(Je))return void $(nt(w,"internal-error"));const Pt=Je.render;Je.render=(Nt,pn)=>{const Gn=Pt(Nt,pn);return this.counter++,Gn},this.hostLanguage=x,P(Je)},qi(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Jr,render:"explicit",hl:x})}`).catch(()=>{clearTimeout(X),$(nt(w,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(w){var x;return!(null===(x=Vr().grecaptcha)||void 0===x||!x.render)&&(w===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bu{load(w){return(0,c.Z)(function*(){return new ur(w)})()}clearedOneInstance(){}}const Bl="recaptcha",Xd={theme:"light",type:"image"};class ll{constructor(w,x=Object.assign({},Xd),P){this.parameters=x,this.type=Bl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ai(P),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof w?document.getElementById(w):w;ue($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bu:new td,this.validateStartingState()}verify(){var w=this;return(0,c.Z)(function*(){w.assertNotDestroyed();const x=yield w.render(),P=w.getAssertedRecaptcha();return P.getResponse(x)||new Promise(X=>{const Se=Je=>{Je&&(w.tokenChangeListeners.delete(Se),X(Je))};w.tokenChangeListeners.add(Se),w.isInvisible&&P.execute(x)})})()}render(){try{this.assertNotDestroyed()}catch(w){return Promise.reject(w)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(w=>{throw this.renderPromise=null,w})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(w=>{this.container.removeChild(w)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(w){return x=>{if(this.tokenChangeListeners.forEach(P=>P(x)),"function"==typeof w)w(x);else if("string"==typeof w){const P=Vr()[w];"function"==typeof P&&P(x)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var w=this;return(0,c.Z)(function*(){if(yield w.init(),!w.widgetId){let x=w.container;if(!w.isInvisible){const P=document.createElement("div");x.appendChild(P),x=P}w.widgetId=w.getAssertedRecaptcha().render(x,w.parameters)}return w.widgetId})()}init(){var w=this;return(0,c.Z)(function*(){ue(ot()&&!vu(),w.auth,"internal-error"),yield function Jd(){let A=null;return new Promise(w=>{"complete"!==document.readyState?(A=()=>w(),window.addEventListener("load",A)):w()}).catch(w=>{throw A&&window.removeEventListener("load",A),w})}(),w.recaptcha=yield w._recaptchaLoader.load(w.auth,w.auth.languageCode||void 0);const x=yield function Xe(A){return ze.apply(this,arguments)}(w.auth);ue(x,w.auth,"internal-error"),w.parameters.sitekey=x})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ra{constructor(w,x){this.verificationId=w,this.onConfirmation=x}confirm(w){const x=on._fromVerification(this.verificationId,w);return this.onConfirmation(x)}}function jl(A,w,x){return wu.apply(this,arguments)}function wu(){return(wu=(0,c.Z)(function*(A,w,x){const P=Ai(A),$=yield ac(P,w,(0,U.m9)(x));return new Ra($,X=>Sa(P,X))})).apply(this,arguments)}function ls(A,w,x){return ul.apply(this,arguments)}function ul(){return(ul=(0,c.Z)(function*(A,w,x){const P=(0,U.m9)(A);yield aa(!1,P,"phone");const $=yield ac(P.auth,w,(0,U.m9)(x));return new Ra($,X=>Ja(P,X))})).apply(this,arguments)}function oc(A,w,x){return sc.apply(this,arguments)}function sc(){return(sc=(0,c.Z)(function*(A,w,x){const P=(0,U.m9)(A),$=yield ac(P.auth,w,(0,U.m9)(x));return new Ra($,X=>mi(P,X))})).apply(this,arguments)}function ac(A,w,x){return zl.apply(this,arguments)}function zl(){return zl=(0,c.Z)(function*(A,w,x){var P;const $=yield x.verify();try{let X;if(ue("string"==typeof $,A,"argument-error"),ue(x.type===Bl,A,"argument-error"),X="string"==typeof w?{phoneNumber:w}:w,"session"in X){const Se=X.session;if("phoneNumber"in X)return ue("enroll"===Se.type,A,"internal-error"),(yield function Xu(A,w){return ct(A,"POST","/v2/accounts/mfaEnrollment:start",je(A,w))}(A,{idToken:Se.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{ue("signin"===Se.type,A,"internal-error");const Je=(null===(P=X.multiFactorHint)||void 0===P?void 0:P.uid)||X.multiFactorUid;return ue(Je,A,"missing-multi-factor-info"),(yield function Wi(A,w){return ct(A,"POST","/v2/accounts/mfaSignIn:start",je(A,w))}(A,{mfaPendingCredential:Se.credential,mfaEnrollmentId:Je,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Se}=yield function Cn(A,w){return Ii.apply(this,arguments)}(A,{phoneNumber:X.phoneNumber,recaptchaToken:$});return Se}}finally{x._reset()}}),zl.apply(this,arguments)}function ts(A,w){return ha.apply(this,arguments)}function ha(){return(ha=(0,c.Z)(function*(A,w){yield Kr((0,U.m9)(A),w)})).apply(this,arguments)}let ir=(()=>{class A{constructor(x){this.providerId=A.PROVIDER_ID,this.auth=Ai(x)}verifyPhoneNumber(x,P){return ac(this.auth,x,(0,U.m9)(P))}static credential(x,P){return on._fromVerification(x,P)}static credentialFromResult(x){return A.credentialFromTaggedObject(x)}static credentialFromError(x){return A.credentialFromTaggedObject(x.customData||{})}static credentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{phoneNumber:P,temporaryProof:$}=x;return P&&$?on._fromTokenResponse(P,$):null}}return A.PROVIDER_ID="phone",A.PHONE_SIGN_IN_METHOD="phone",A})();function fa(A,w){return w?pi(w):(ue(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}class eh extends ea{constructor(w){super("custom","custom"),this.params=w}_getIdTokenResponse(w){return Fs(w,this._buildIdpRequest())}_linkToIdToken(w,x){return Fs(w,this._buildIdpRequest(x))}_getReauthenticationResolver(w){return Fs(w,this._buildIdpRequest())}_buildIdpRequest(w){const x={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return w&&(x.idToken=w),x}}function Is(A){return vs(A.auth,new eh(A),A.bypassAuthState)}function jn(A){const{auth:w,user:x}=A;return ue(x,w,"internal-error"),Rr(x,new eh(A),A.bypassAuthState)}function rr(A){return So.apply(this,arguments)}function So(){return(So=(0,c.Z)(function*(A){const{auth:w,user:x}=A;return ue(x,w,"internal-error"),Kr(x,new eh(A),A.bypassAuthState)})).apply(this,arguments)}class Hl{constructor(w,x,P,$,X=!1){this.auth=w,this.resolver=P,this.user=$,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(x)?x:[x]}execute(){var w=this;return new Promise(function(){var x=(0,c.Z)(function*(P,$){w.pendingPromise={resolve:P,reject:$};try{w.eventManager=yield w.resolver._initialize(w.auth),yield w.onExecution(),w.eventManager.registerConsumer(w)}catch(X){w.reject(X)}});return function(P,$){return x.apply(this,arguments)}}())}onAuthEvent(w){var x=this;return(0,c.Z)(function*(){const{urlResponse:P,sessionId:$,postBody:X,tenantId:Se,error:Je,type:Pt}=w;if(Je)return void x.reject(Je);const Nt={auth:x.auth,requestUri:P,sessionId:$,tenantId:Se||void 0,postBody:X||void 0,user:x.user,bypassAuthState:x.bypassAuthState};try{x.resolve(yield x.getIdpTask(Pt)(Nt))}catch(pn){x.reject(pn)}})()}onError(w){this.reject(w)}getIdpTask(w){switch(w){case"signInViaPopup":case"signInViaRedirect":return Is;case"linkViaPopup":case"linkViaRedirect":return rr;case"reauthViaPopup":case"reauthViaRedirect":return jn;default:Ce(this.auth,"internal-error")}}resolve(w){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(w),this.unregisterAndCleanUp()}reject(w){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(w),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cc=new rn(2e3,1e4);function ci(A,w,x){return ka.apply(this,arguments)}function ka(){return(ka=(0,c.Z)(function*(A,w,x){const P=Ai(A);it(A,w,Fo);const $=fa(P,x);return new Xi(P,"signInViaPopup",w,$).executeNotNull()})).apply(this,arguments)}function jr(A,w,x){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,c.Z)(function*(A,w,x){const P=(0,U.m9)(A);it(P.auth,w,Fo);const $=fa(P.auth,x);return new Xi(P.auth,"reauthViaPopup",w,$,P).executeNotNull()})).apply(this,arguments)}function Nr(A,w,x){return or.apply(this,arguments)}function or(){return(or=(0,c.Z)(function*(A,w,x){const P=(0,U.m9)(A);it(P.auth,w,Fo);const $=fa(P.auth,x);return new Xi(P.auth,"linkViaPopup",w,$,P).executeNotNull()})).apply(this,arguments)}let Xi=(()=>{class A extends Hl{constructor(x,P,$,X,Se){super(x,P,X,Se),this.provider=$,this.authWindow=null,this.pollId=null,A.currentPopupAction&&A.currentPopupAction.cancel(),A.currentPopupAction=this}executeNotNull(){var x=this;return(0,c.Z)(function*(){const P=yield x.execute();return ue(P,x.auth,"internal-error"),P})()}onExecution(){var x=this;return(0,c.Z)(function*(){Le(1===x.filter.length,"Popup operations only handle one event");const P=kc();x.authWindow=yield x.resolver._openPopup(x.auth,x.provider,x.filter[0],P),x.authWindow.associatedEvent=P,x.resolver._originValidation(x.auth).catch($=>{x.reject($)}),x.resolver._isIframeWebStorageSupported(x.auth,$=>{$||x.reject(nt(x.auth,"web-storage-unsupported"))}),x.pollUserCancellation()})()}get eventId(){var x;return(null===(x=this.authWindow)||void 0===x?void 0:x.associatedEvent)||null}cancel(){this.reject(nt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A.currentPopupAction=null}pollUserCancellation(){const x=()=>{var P,$;this.pollId=null!==($=null===(P=this.authWindow)||void 0===P?void 0:P.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(nt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(x,cc.get())};x()}}return A.currentPopupAction=null,A})();const Yf="pendingRedirect",xs=new Map;class nd extends Hl{constructor(w,x,P=!1){super(w,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],x,void 0,P),this.eventId=null}execute(){var w=()=>super.execute,x=this;return(0,c.Z)(function*(){let P=xs.get(x.auth._key());if(!P){try{const X=(yield function dm(A,w){return id.apply(this,arguments)}(x.resolver,x.auth))?yield w().call(x):null;P=()=>Promise.resolve(X)}catch($){P=()=>Promise.reject($)}xs.set(x.auth._key(),P)}return x.bypassAuthState||xs.set(x.auth._key(),()=>Promise.resolve(null)),P()})()}onAuthEvent(w){var x=()=>super.onAuthEvent,P=this;return(0,c.Z)(function*(){if("signInViaRedirect"===w.type)return x().call(P,w);if("unknown"!==w.type){if(w.eventId){const $=yield P.auth._redirectUserForId(w.eventId);if($)return P.user=$,x().call(P,w);P.resolve(null)}}else P.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function id(){return(id=(0,c.Z)(function*(A,w){const x=th(w),P=jh(A);if(!(yield P._isAvailable()))return!1;const $="true"===(yield P._get(x));return yield P._remove(x),$})).apply(this,arguments)}function rd(A,w){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,c.Z)(function*(A,w){return jh(A)._set(th(w),"true")})).apply(this,arguments)}function od(){xs.clear()}function $l(A,w){xs.set(A._key(),w)}function jh(A){return pi(A._redirectPersistence)}function th(A){return mo(Yf,A.config.apiKey,A.name)}function Uc(A,w,x){return function Vc(A,w,x){return sd.apply(this,arguments)}(A,w,x)}function sd(){return(sd=(0,c.Z)(function*(A,w,x){const P=Ai(A);it(A,w,Fo),yield P._initializationPromise;const $=fa(P,x);return yield rd($,P),$._openRedirect(P,w,"signInViaRedirect")})).apply(this,arguments)}function dl(A,w,x){return function Eu(A,w,x){return us.apply(this,arguments)}(A,w,x)}function us(){return(us=(0,c.Z)(function*(A,w,x){const P=(0,U.m9)(A);it(P.auth,w,Fo),yield P.auth._initializationPromise;const $=fa(P.auth,x);yield rd($,P.auth);const X=yield ql(P);return $._openRedirect(P.auth,w,"reauthViaRedirect",X)})).apply(this,arguments)}function zh(A,w,x){return function Hh(A,w,x){return nh.apply(this,arguments)}(A,w,x)}function nh(){return(nh=(0,c.Z)(function*(A,w,x){const P=(0,U.m9)(A);it(P.auth,w,Fo),yield P.auth._initializationPromise;const $=fa(P.auth,x);yield aa(!1,P,w.providerId),yield rd($,P.auth);const X=yield ql(P);return $._openRedirect(P.auth,w,"linkViaRedirect",X)})).apply(this,arguments)}function $h(A,w){return zo.apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(A,w){return yield Ai(A)._initializationPromise,ad(A,w,!1)})).apply(this,arguments)}function ad(A,w){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,c.Z)(function*(A,w,x=!1){const P=Ai(A),$=fa(P,w),Se=yield new nd(P,$,x).execute();return Se&&!x&&(delete Se.user._redirectEventId,yield P._persistUserIfCurrent(Se.user),yield P._setRedirectUser(null,w)),Se})).apply(this,arguments)}function ql(A){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,c.Z)(function*(A){const w=kc(`${A.uid}:::`);return A._redirectEventId=w,yield A.auth._setRedirectUser(A),yield A.auth._persistUserIfCurrent(A),w})).apply(this,arguments)}class Wl{constructor(w){this.auth=w,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(w){this.consumers.add(w),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,w)&&(this.sendToConsumer(this.queuedRedirectEvent,w),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(w){this.consumers.delete(w)}onEvent(w){if(this.hasEventBeenHandled(w))return!1;let x=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(w,P)&&(x=!0,this.sendToConsumer(w,P),this.saveEventToCache(w))}),this.hasHandledPotentialRedirect||!function Kl(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zl(A);default:return!1}}(w)||(this.hasHandledPotentialRedirect=!0,x||(this.queuedRedirectEvent=w,x=!0)),x}sendToConsumer(w,x){var P;if(w.error&&!Zl(w)){const $=(null===(P=w.error.code)||void 0===P?void 0:P.split("auth/")[1])||"internal-error";x.onError(nt(this.auth,$))}else x.onAuthEvent(w)}isEventForConsumer(w,x){const P=null===x.eventId||!!w.eventId&&w.eventId===x.eventId;return x.filter.includes(w.type)&&P}hasEventBeenHandled(w){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cd(w))}saveEventToCache(w){this.cachedEventUids.add(cd(w)),this.lastProcessedEventTime=Date.now()}}function cd(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(w=>w).join("-")}function Zl({type:A,error:w}){return"unknown"===A&&"auth/no-auth-event"===w?.code}function $s(A){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,c.Z)(function*(A,w={}){return ct(A,"GET","/v1/projects",w)})).apply(this,arguments)}const Xf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ld=/^https?/;function ih(){return(ih=(0,c.Z)(function*(A){if(A.config.emulator)return;const{authorizedDomains:w}=yield $s(A);for(const x of w)try{if(rh(x))return}catch{}Ce(A,"unauthorized-domain")})).apply(this,arguments)}function rh(A){const w=Et(),{protocol:x,hostname:P}=new URL(w);if(A.startsWith("chrome-extension://")){const Se=new URL(A);return""===Se.hostname&&""===P?"chrome-extension:"===x&&A.replace("chrome-extension://","")===w.replace("chrome-extension://",""):"chrome-extension:"===x&&Se.hostname===P}if(!ld.test(x))return!1;if(Xf.test(A))return P===A;const $=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(P)}const hl=new rn(3e4,6e4);function ns(){const A=Vr().___jsl;if(A?.H)for(const w of Object.keys(A.H))if(A.H[w].r=A.H[w].r||[],A.H[w].L=A.H[w].L||[],A.H[w].r=[...A.H[w].L],A.CP)for(let x=0;x<A.CP.length;x++)A.CP[x]=null}let sr=null;const ud=new rn(5e3,15e3),dr="__/auth/iframe",qh="emulator/auth/iframe",Jf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ml(A){const w=A.config;ue(w.authDomain,A,"auth-domain-config-required");const x=w.emulator?fi(w,qh):`https://${A.config.authDomain}/${dr}`,P={apiKey:w.apiKey,appName:A.name,v:K.SDK_VERSION},$=qs.get(A.config.apiHost);$&&(P.eid=$);const X=A._getFrameworks();return X.length&&(P.fw=X.join(",")),`${x}?${(0,U.xO)(P).slice(1)}`}function Bc(){return Bc=(0,c.Z)(function*(A){const w=yield function pl(A){return sr=sr||function fl(A){return new Promise((w,x)=>{var P,$,X;function Se(){ns(),gapi.load("gapi.iframes",{callback:()=>{w(gapi.iframes.getContext())},ontimeout:()=>{ns(),x(nt(A,"network-request-failed"))},timeout:hl.get()})}if(null!==($=null===(P=Vr().gapi)||void 0===P?void 0:P.iframes)&&void 0!==$&&$.Iframe)w(gapi.iframes.getContext());else{if(null===(X=Vr().gapi)||void 0===X||!X.load){const Je=Yi("iframefcb");return Vr()[Je]=()=>{gapi.load?Se():x(nt(A,"network-request-failed"))},qi(`https://apis.google.com/js/api.js?onload=${Je}`).catch(Pt=>x(Pt))}Se()}}).catch(w=>{throw sr=null,w})}(A),sr}(A),x=Vr().gapi;return ue(x,A,"internal-error"),w.open({where:document.body,url:ml(A),messageHandlersFilter:x.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jf,dontclear:!0},P=>new Promise(function(){var $=(0,c.Z)(function*(X,Se){yield P.restyle({setHideOnLeave:!1});const Je=nt(A,"network-request-failed"),Pt=Vr().setTimeout(()=>{Se(Je)},ud.get());function Nt(){Vr().clearTimeout(Pt),X(P)}P.ping(Nt).then(Nt,()=>{Se(Je)})});return function(X,Se){return $.apply(this,arguments)}}()))}),Bc.apply(this,arguments)}const O={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ue{constructor(w){this.window=w,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ft="__/auth/handler",hn="emulator/auth/handler",Ln=encodeURIComponent("fac");function Sn(A,w,x,P,$,X){return ds.apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(A,w,x,P,$,X){ue(A.config.authDomain,A,"auth-domain-config-required"),ue(A.config.apiKey,A,"invalid-api-key");const Se={apiKey:A.config.apiKey,appName:A.name,authType:x,redirectUrl:P,v:K.SDK_VERSION,eventId:$};if(w instanceof Fo){w.setDefaultLanguage(A.languageCode),Se.providerId=w.providerId||"",(0,U.xb)(w.getCustomParameters())||(Se.customParameters=JSON.stringify(w.getCustomParameters()));for(const[pn,Gn]of Object.entries(X||{}))Se[pn]=Gn}if(w instanceof Cr){const pn=w.getScopes().filter(Gn=>""!==Gn);pn.length>0&&(Se.scopes=pn.join(","))}A.tenantId&&(Se.tid=A.tenantId);const Je=Se;for(const pn of Object.keys(Je))void 0===Je[pn]&&delete Je[pn];const Pt=yield A._getAppCheckToken(),Nt=Pt?`#${Ln}=${encodeURIComponent(Pt)}`:"";return`${function Ao({config:A}){return A.emulator?fi(A,hn):`https://${A.authDomain}/${Ft}`}(A)}?${(0,U.xO)(Je).slice(1)}${Nt}`})).apply(this,arguments)}const Ki="webStorageSupport",La=class Iu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zs,this._completeRedirectFn=ad,this._overrideRedirectResult=$l}_openPopup(w,x,P,$){var X=this;return(0,c.Z)(function*(){var Se;Le(null===(Se=X.eventManagers[w._key()])||void 0===Se?void 0:Se.manager,"_initialize() not called before _openPopup()");const Je=yield Sn(w,x,P,Et(),$);return function rt(A,w,x,P=500,$=600){const X=Math.max((window.screen.availHeight-$)/2,0).toString(),Se=Math.max((window.screen.availWidth-P)/2,0).toString();let Je="";const Pt=Object.assign(Object.assign({},O),{width:P.toString(),height:$.toString(),top:X,left:Se}),Nt=(0,U.z$)().toLowerCase();x&&(Je=Y(Nt)?"_blank":x),J(Nt)&&(w=w||"http://localhost",Pt.scrollbars="yes");const pn=Object.entries(Pt).reduce((eo,[pa,to])=>`${eo}${pa}=${to},`,"");if(function En(A=(0,U.z$)()){var w;return Vt(A)&&!(null===(w=window.navigator)||void 0===w||!w.standalone)}(Nt)&&"_self"!==Je)return function Bt(A,w){const x=document.createElement("a");x.href=A,x.target=w;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),x.dispatchEvent(P)}(w||"",Je),new Ue(null);const Gn=window.open(w||"",Je,pn);ue(Gn,A,"popup-blocked");try{Gn.focus()}catch{}return new Ue(Gn)}(w,Je,kc())})()}_openRedirect(w,x,P,$){var X=this;return(0,c.Z)(function*(){return yield X._originValidation(w),function ic(A){Vr().location.href=A}(yield Sn(w,x,P,Et(),$)),new Promise(()=>{})})()}_initialize(w){const x=w._key();if(this.eventManagers[x]){const{manager:$,promise:X}=this.eventManagers[x];return $?Promise.resolve($):(Le(X,"If manager is not set, promise should be"),X)}const P=this.initAndGetManager(w);return this.eventManagers[x]={promise:P},P.catch(()=>{delete this.eventManagers[x]}),P}initAndGetManager(w){var x=this;return(0,c.Z)(function*(){const P=yield function Fa(A){return Bc.apply(this,arguments)}(w),$=new Wl(w);return P.register("authEvent",X=>(ue(X?.authEvent,w,"invalid-auth-event"),{status:$.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),x.eventManagers[w._key()]={manager:$},x.iframes[w._key()]=P,$})()}_isIframeWebStorageSupported(w,x){this.iframes[w._key()].send(Ki,{type:Ki},$=>{var X;const Se=null===(X=$?.[0])||void 0===X?void 0:X[Ki];void 0!==Se&&x(!!Se),Ce(w,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(w){const x=w._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=function Na(A){return ih.apply(this,arguments)}(w)),this.originValidationPromises[x]}get _shouldInitProactively(){return kn()||te()||Vt()}};class Ua{constructor(w){this.factorId=w}_process(w,x,P){switch(x.type){case"enroll":return this._finalizeEnroll(w,x.credential,P);case"signin":return this._finalizeSignIn(w,x.credential);default:return Ge("unexpected MultiFactorSessionType")}}}class Fr extends Ua{constructor(w){super("phone"),this.credential=w}static _fromCredential(w){return new Fr(w)}_finalizeEnroll(w,x,P){return function gu(A,w){return ct(A,"POST","/v2/accounts/mfaEnrollment:finalize",je(A,w))}(w,{idToken:x,displayName:P,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(w,x){return function ao(A,w){return ct(A,"POST","/v2/accounts/mfaSignIn:finalize",je(A,w))}(w,{mfaPendingCredential:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gl=(()=>{class A{constructor(){}static assertion(x){return Fr._fromCredential(x)}}return A.FACTOR_ID="phone",A})();var n_="@firebase/auth";class Sy{constructor(w){this.auth=w,this.internalListeners=new Map}getUid(){var w;return this.assertAuthConfigured(),(null===(w=this.auth.currentUser)||void 0===w?void 0:w.uid)||null}getToken(w){var x=this;return(0,c.Z)(function*(){return x.assertAuthConfigured(),yield x.auth._initializationPromise,x.auth.currentUser?{accessToken:yield x.auth.currentUser.getIdToken(w)}:null})()}addAuthTokenListener(w){if(this.assertAuthConfigured(),this.internalListeners.has(w))return;const x=this.auth.onIdTokenChanged(P=>{w(P?.stsTokenManager.accessToken||null)});this.internalListeners.set(w,x),this.updateProactiveRefresh()}removeAuthTokenListener(w){this.assertAuthConfigured();const x=this.internalListeners.get(w);x&&(this.internalListeners.delete(w),x(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const i_=(0,U.Pz)("authIdTokenMaxAge")||300;let fd=null;const r_=A=>function(){var w=(0,c.Z)(function*(x){const P=x&&(yield x.getIdTokenResult()),$=P&&((new Date).getTime()-Date.parse(P.issuedAtTime))/1e3;if($&&$>i_)return;const X=P?.token;fd!==X&&(fd=X,yield fetch(A,{method:X?"POST":"DELETE",headers:X?{Authorization:`Bearer ${X}`}:{}}))});return function(x){return w.apply(this,arguments)}}();function Wh(A=(0,K.getApp)()){const w=(0,K._getProvider)(A,"auth");if(w.isInitialized())return w.getImmediate();const x=function Qi(A,w){const x=(0,K._getProvider)(A,"auth");if(x.isInitialized()){const $=x.getImmediate(),X=x.getOptions();if((0,U.vZ)(X,w??{}))return $;Ce($,"already-initialized")}return x.initialize({options:w})}(A,{popupRedirectResolver:La,persistence:[Do,Wd,zs]}),P=(0,U.Pz)("authTokenSyncURL");if(P){const X=r_(P);(function Yu(A,w,x){(0,U.m9)(A).beforeAuthStateChanged(w,x)})(x,X,()=>X(x.currentUser)),Io(x,Se=>X(Se))}const $=(0,U.q4)("auth");return $&&Ka(x,`http://${$}`),x}!function ep(A){(0,K._registerComponent)(new Re.wA("auth",(w,{options:x})=>{const P=w.getProvider("app").getImmediate(),$=w.getProvider("heartbeat"),X=w.getProvider("app-check-internal"),{apiKey:Se,authDomain:Je}=P.options;ue(Se&&!Se.includes(":"),"invalid-api-key",{appName:P.name});const Pt={apiKey:Se,authDomain:Je,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zo(A)},Nt=new ni(P,$,X,Pt);return function _c(A,w){const x=w?.persistence||[],P=(Array.isArray(x)?x:[x]).map(pi);w?.errorMap&&A._updateErrorMap(w.errorMap),A._initializeWithPersistence(P,w?.popupRedirectResolver)}(Nt,x),Nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((w,x,P)=>{w.getProvider("auth-internal").initialize()})),(0,K._registerComponent)(new Re.wA("auth-internal",w=>{const x=Ai(w.getProvider("auth").getImmediate());return new Sy(x)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,K.registerVersion)(n_,"0.23.2",function Gs(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(A)),(0,K.registerVersion)(n_,"0.23.2","esm2017")}("Browser")},9058:(en,Ae,Q)=>{Q.d(Ae,{$s:()=>pi,BH:()=>$e,DV:()=>Fn,Dv:()=>Fe,G6:()=>fi,GJ:()=>Ut,L:()=>Ve,LL:()=>gt,P0:()=>Ze,Pz:()=>nt,Sg:()=>it,UG:()=>Ge,UI:()=>wi,US:()=>Re,Wj:()=>jt,Wl:()=>dn,Yr:()=>rn,ZB:()=>de,ZR:()=>ct,aH:()=>Ce,b$:()=>ot,cI:()=>Tn,dS:()=>Ht,eu:()=>Ee,g5:()=>K,gK:()=>Ct,gQ:()=>Qt,h$:()=>ut,hl:()=>De,hu:()=>U,jU:()=>Le,lb:()=>Jt,m9:()=>mo,ne:()=>zt,p$:()=>G,pd:()=>Yt,q4:()=>at,r3:()=>cn,ru:()=>Et,tV:()=>z,uI:()=>ue,ug:()=>Ei,vZ:()=>Si,w1:()=>nn,w9:()=>Dn,xO:()=>Ro,xb:()=>Un,z$:()=>he,zI:()=>He,zd:()=>sn});const c={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},U=function(fe,le){if(!fe)throw K(le)},K=function(fe){return new Error("Firebase Database ("+c.SDK_VERSION+") INTERNAL ASSERT FAILED: "+fe)},pe=function(fe){const le=[];let J=0;for(let te=0;te<fe.length;te++){let Y=fe.charCodeAt(te);Y<128?le[J++]=Y:Y<2048?(le[J++]=Y>>6|192,le[J++]=63&Y|128):55296==(64512&Y)&&te+1<fe.length&&56320==(64512&fe.charCodeAt(te+1))?(Y=65536+((1023&Y)<<10)+(1023&fe.charCodeAt(++te)),le[J++]=Y>>18|240,le[J++]=Y>>12&63|128,le[J++]=Y>>6&63|128,le[J++]=63&Y|128):(le[J++]=Y>>12|224,le[J++]=Y>>6&63|128,le[J++]=63&Y|128)}return le},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(fe,le){if(!Array.isArray(fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=le?this.byteToCharMapWebSafe_:this.byteToCharMap_,te=[];for(let Y=0;Y<fe.length;Y+=3){const Me=fe[Y],Qe=Y+1<fe.length,St=Qe?fe[Y+1]:0,yn=Y+2<fe.length,Vt=yn?fe[Y+2]:0;let ai=(15&St)<<2|Vt>>6,kn=63&Vt;yn||(kn=64,Qe||(ai=64)),te.push(J[Me>>2],J[(3&Me)<<4|St>>4],J[ai],J[kn])}return te.join("")},encodeString(fe,le){return this.HAS_NATIVE_SUPPORT&&!le?btoa(fe):this.encodeByteArray(pe(fe),le)},decodeString(fe,le){return this.HAS_NATIVE_SUPPORT&&!le?atob(fe):function(fe){const le=[];let J=0,te=0;for(;J<fe.length;){const Y=fe[J++];if(Y<128)le[te++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Me=fe[J++];le[te++]=String.fromCharCode((31&Y)<<6|63&Me)}else if(Y>239&&Y<365){const yn=((7&Y)<<18|(63&fe[J++])<<12|(63&fe[J++])<<6|63&fe[J++])-65536;le[te++]=String.fromCharCode(55296+(yn>>10)),le[te++]=String.fromCharCode(56320+(1023&yn))}else{const Me=fe[J++],Qe=fe[J++];le[te++]=String.fromCharCode((15&Y)<<12|(63&Me)<<6|63&Qe)}}return le.join("")}(this.decodeStringToByteArray(fe,le))},decodeStringToByteArray(fe,le){this.init_();const J=le?this.charToByteMapWebSafe_:this.charToByteMap_,te=[];for(let Y=0;Y<fe.length;){const Me=J[fe.charAt(Y++)],St=Y<fe.length?J[fe.charAt(Y)]:0;++Y;const Vt=Y<fe.length?J[fe.charAt(Y)]:64;++Y;const En=Y<fe.length?J[fe.charAt(Y)]:64;if(++Y,null==Me||null==St||null==Vt||null==En)throw new Oe;te.push(Me<<2|St>>4),64!==Vt&&(te.push(St<<4&240|Vt>>2),64!==En&&te.push(Vt<<6&192|En))}return te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let fe=0;fe<this.ENCODED_VALS.length;fe++)this.byteToCharMap_[fe]=this.ENCODED_VALS.charAt(fe),this.charToByteMap_[this.byteToCharMap_[fe]]=fe,this.byteToCharMapWebSafe_[fe]=this.ENCODED_VALS_WEBSAFE.charAt(fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[fe]]=fe,fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(fe)]=fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(fe)]=fe)}}};class Oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ut=function(fe){const le=pe(fe);return Re.encodeByteArray(le,!0)},Ve=function(fe){return ut(fe).replace(/\./g,"")},z=function(fe){try{return Re.decodeString(fe,!0)}catch(le){console.error("base64Decode failed: ",le)}return null};function G(fe){return de(void 0,fe)}function de(fe,le){if(!(le instanceof Object))return le;switch(le.constructor){case Date:return new Date(le.getTime());case Object:void 0===fe&&(fe={});break;case Array:fe=[];break;default:return le}for(const J in le)!le.hasOwnProperty(J)||!Ne(J)||(fe[J]=de(fe[J],le[J]));return fe}function Ne(fe){return"__proto__"!==fe}const ke=()=>{try{return function me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const fe=process.env.__FIREBASE_DEFAULTS__;return fe?JSON.parse(fe):void 0})()||(()=>{if(typeof document>"u")return;let fe;try{fe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const le=fe&&z(fe[1]);return le&&JSON.parse(le)})()}catch(fe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${fe}`)}},at=fe=>{var le,J;return null===(J=null===(le=ke())||void 0===le?void 0:le.emulatorHosts)||void 0===J?void 0:J[fe]},Ze=fe=>{const le=at(fe);if(!le)return;const J=le.lastIndexOf(":");if(J<=0||J+1===le.length)throw new Error(`Invalid host ${le} with no separate hostname and port!`);const te=parseInt(le.substring(J+1),10);return"["===le[0]?[le.substring(1,J-1),te]:[le.substring(0,J),te]},Ce=()=>{var fe;return null===(fe=ke())||void 0===fe?void 0:fe.config},nt=fe=>{var le;return null===(le=ke())||void 0===le?void 0:le[`_${fe}`]};class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((le,J)=>{this.resolve=le,this.reject=J})}wrapCallback(le){return(J,te)=>{J?this.reject(J):this.resolve(te),"function"==typeof le&&(this.promise.catch(()=>{}),1===le.length?le(J):le(J,te))}}}function it(fe,le){if(fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const te=le||"demo-project",Y=fe.iat||0,Me=fe.sub||fe.user_id;if(!Me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Qe=Object.assign({iss:`https://securetoken.google.com/${te}`,aud:te,iat:Y,exp:Y+3600,auth_time:Y,sub:Me,user_id:Me,firebase:{sign_in_provider:"custom",identities:{}}},fe);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(Qe)),""].join(".")}function he(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(he())}function Ge(){var fe;const le=null===(fe=ke())||void 0===fe?void 0:fe.forceEnvironment;if("node"===le)return!0;if("browser"===le)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Le(){return"object"==typeof self&&self.self===self}function Et(){const fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof fe&&void 0!==fe.id}function ot(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nn(){const fe=he();return fe.indexOf("MSIE ")>=0||fe.indexOf("Trident/")>=0}function rn(){return!0===c.NODE_CLIENT||!0===c.NODE_ADMIN}function fi(){return!Ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function De(){try{return"object"==typeof indexedDB}catch{return!1}}function Ee(){return new Promise((fe,le)=>{try{let J=!0;const te="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(te);Y.onsuccess=()=>{Y.result.close(),J||self.indexedDB.deleteDatabase(te),fe(!0)},Y.onupgradeneeded=()=>{J=!1},Y.onerror=()=>{var Me;le((null===(Me=Y.error)||void 0===Me?void 0:Me.message)||"")}}catch(J){le(J)}})}function He(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ct extends Error{constructor(le,J,te){super(J),this.code=le,this.customData=te,this.name="FirebaseError",Object.setPrototypeOf(this,ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gt.prototype.create)}}class gt{constructor(le,J,te){this.service=le,this.serviceName=J,this.errors=te}create(le,...J){const te=J[0]||{},Y=`${this.service}/${le}`,Me=this.errors[le],Qe=Me?function At(fe,le){return fe.replace(bt,(J,te)=>{const Y=le[te];return null!=Y?String(Y):`<${te}?>`})}(Me,te):"Error";return new ct(Y,`${this.serviceName}: ${Qe} (${Y}).`,te)}}const bt=/\{\$([^}]+)}/g;function Tn(fe){return JSON.parse(fe)}function dn(fe){return JSON.stringify(fe)}const Nn=function(fe){let le={},J={},te={},Y="";try{const Me=fe.split(".");le=Tn(z(Me[0])||""),J=Tn(z(Me[1])||""),Y=Me[2],te=J.d||{},delete J.d}catch{}return{header:le,claims:J,data:te,signature:Y}},Dn=function(fe){const J=Nn(fe).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},Ut=function(fe){const le=Nn(fe).claims;return"object"==typeof le&&!0===le.admin};function cn(fe,le){return Object.prototype.hasOwnProperty.call(fe,le)}function Fn(fe,le){if(Object.prototype.hasOwnProperty.call(fe,le))return fe[le]}function Un(fe){for(const le in fe)if(Object.prototype.hasOwnProperty.call(fe,le))return!1;return!0}function wi(fe,le,J){const te={};for(const Y in fe)Object.prototype.hasOwnProperty.call(fe,Y)&&(te[Y]=le.call(J,fe[Y],Y,fe));return te}function Si(fe,le){if(fe===le)return!0;const J=Object.keys(fe),te=Object.keys(le);for(const Y of J){if(!te.includes(Y))return!1;const Me=fe[Y],Qe=le[Y];if(ti(Me)&&ti(Qe)){if(!Si(Me,Qe))return!1}else if(Me!==Qe)return!1}for(const Y of te)if(!J.includes(Y))return!1;return!0}function ti(fe){return null!==fe&&"object"==typeof fe}function Ro(fe){const le=[];for(const[J,te]of Object.entries(fe))Array.isArray(te)?te.forEach(Y=>{le.push(encodeURIComponent(J)+"="+encodeURIComponent(Y))}):le.push(encodeURIComponent(J)+"="+encodeURIComponent(te));return le.length?"&"+le.join("&"):""}function sn(fe){const le={};return fe.replace(/^\?/,"").split("&").forEach(te=>{if(te){const[Y,Me]=te.split("=");le[decodeURIComponent(Y)]=decodeURIComponent(Me)}}),le}function Yt(fe){const le=fe.indexOf("?");if(!le)return"";const J=fe.indexOf("#",le);return fe.substring(le,J>0?J:void 0)}class Qt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let le=1;le<this.blockSize;++le)this.pad_[le]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(le,J){J||(J=0);const te=this.W_;if("string"==typeof le)for(let En=0;En<16;En++)te[En]=le.charCodeAt(J)<<24|le.charCodeAt(J+1)<<16|le.charCodeAt(J+2)<<8|le.charCodeAt(J+3),J+=4;else for(let En=0;En<16;En++)te[En]=le[J]<<24|le[J+1]<<16|le[J+2]<<8|le[J+3],J+=4;for(let En=16;En<80;En++){const ai=te[En-3]^te[En-8]^te[En-14]^te[En-16];te[En]=4294967295&(ai<<1|ai>>>31)}let Vt,Xn,Y=this.chain_[0],Me=this.chain_[1],Qe=this.chain_[2],St=this.chain_[3],yn=this.chain_[4];for(let En=0;En<80;En++){En<40?En<20?(Vt=St^Me&(Qe^St),Xn=1518500249):(Vt=Me^Qe^St,Xn=1859775393):En<60?(Vt=Me&Qe|St&(Me|Qe),Xn=2400959708):(Vt=Me^Qe^St,Xn=3395469782);const ai=(Y<<5|Y>>>27)+Vt+yn+Xn+te[En]&4294967295;yn=St,St=Qe,Qe=4294967295&(Me<<30|Me>>>2),Me=Y,Y=ai}this.chain_[0]=this.chain_[0]+Y&4294967295,this.chain_[1]=this.chain_[1]+Me&4294967295,this.chain_[2]=this.chain_[2]+Qe&4294967295,this.chain_[3]=this.chain_[3]+St&4294967295,this.chain_[4]=this.chain_[4]+yn&4294967295}update(le,J){if(null==le)return;void 0===J&&(J=le.length);const te=J-this.blockSize;let Y=0;const Me=this.buf_;let Qe=this.inbuf_;for(;Y<J;){if(0===Qe)for(;Y<=te;)this.compress_(le,Y),Y+=this.blockSize;if("string"==typeof le){for(;Y<J;)if(Me[Qe]=le.charCodeAt(Y),++Qe,++Y,Qe===this.blockSize){this.compress_(Me),Qe=0;break}}else for(;Y<J;)if(Me[Qe]=le[Y],++Qe,++Y,Qe===this.blockSize){this.compress_(Me),Qe=0;break}}this.inbuf_=Qe,this.total_+=J}digest(){const le=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Y=this.blockSize-1;Y>=56;Y--)this.buf_[Y]=255&J,J/=256;this.compress_(this.buf_);let te=0;for(let Y=0;Y<5;Y++)for(let Me=24;Me>=0;Me-=8)le[te]=this.chain_[Y]>>Me&255,++te;return le}}function zt(fe,le){const J=new Te(fe,le);return J.subscribe.bind(J)}class Te{constructor(le,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{le(this)}).catch(te=>{this.error(te)})}next(le){this.forEachObserver(J=>{J.next(le)})}error(le){this.forEachObserver(J=>{J.error(le)}),this.close(le)}complete(){this.forEachObserver(le=>{le.complete()}),this.close()}subscribe(le,J,te){let Y;if(void 0===le&&void 0===J&&void 0===te)throw new Error("Missing Observer.");Y=function Ie(fe,le){if("object"!=typeof fe||null===fe)return!1;for(const J of le)if(J in fe&&"function"==typeof fe[J])return!0;return!1}(le,["next","error","complete"])?le:{next:le,error:J,complete:te},void 0===Y.next&&(Y.next=qe),void 0===Y.error&&(Y.error=qe),void 0===Y.complete&&(Y.complete=qe);const Me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Me}unsubscribeOne(le){void 0===this.observers||void 0===this.observers[le]||(delete this.observers[le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(le){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,le)}sendOne(le,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[le])try{J(this.observers[le])}catch(te){typeof console<"u"&&console.error&&console.error(te)}})}close(le){this.finalized||(this.finalized=!0,void 0!==le&&(this.finalError=le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qe(){}const Fe=function(fe,le,J,te){let Y;if(te<le?Y="at least "+le:te>J&&(Y=0===J?"none":"no more than "+J),Y)throw new Error(fe+" failed: Was called with "+te+(1===te?" argument.":" arguments.")+" Expects "+Y+".")};function Ct(fe,le){return`${fe} failed: ${le} argument `}function jt(fe,le,J,te){if((!te||J)&&"function"!=typeof J)throw new Error(Ct(fe,le)+"must be a valid function.")}function Jt(fe,le,J,te){if((!te||J)&&("object"!=typeof J||null===J))throw new Error(Ct(fe,le)+"must be a valid context object.")}const Ht=function(fe){const le=[];let J=0;for(let te=0;te<fe.length;te++){let Y=fe.charCodeAt(te);if(Y>=55296&&Y<=56319){const Me=Y-55296;te++,U(te<fe.length,"Surrogate pair missing trail surrogate."),Y=65536+(Me<<10)+(fe.charCodeAt(te)-56320)}Y<128?le[J++]=Y:Y<2048?(le[J++]=Y>>6|192,le[J++]=63&Y|128):Y<65536?(le[J++]=Y>>12|224,le[J++]=Y>>6&63|128,le[J++]=63&Y|128):(le[J++]=Y>>18|240,le[J++]=Y>>12&63|128,le[J++]=Y>>6&63|128,le[J++]=63&Y|128)}return le},Ei=function(fe){let le=0;for(let J=0;J<fe.length;J++){const te=fe.charCodeAt(J);te<128?le++:te<2048?le+=2:te>=55296&&te<=56319?(le+=4,J++):le+=3}return le},zn=1e3,ki=2,Hn=144e5,mr=.5;function pi(fe,le=zn,J=ki){const te=le*Math.pow(J,fe),Y=Math.round(mr*te*(Math.random()-.5)*2);return Math.min(Hn,te+Y)}function mo(fe){return fe&&fe._delegate?fe._delegate:fe}},3375:(en,Ae,Q)=>{var c=Q(5879);let U=null;function K(){return U}class ce{}const Re=new c.OlP("DocumentToken");let Oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Ve)},providedIn:"platform"})}return n})();const ut=new c.OlP("Location Initialized");let Ve=(()=>{class n extends Oe{constructor(){super(),this._doc=(0,c.f3M)(Re),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(t){const i=K().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=K().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function z(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function de(n){return n&&"?"!==n[0]?"?"+n:n}let Ne=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(lt)},providedIn:"root"})}return n})();const me=new c.OlP("appBaseHref");let lt=(()=>{class n extends Ne{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(Re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return z(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+de(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const u=this.prepareExternalUrl(r+de(s));this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,s){const u=this.prepareExternalUrl(r+de(s));this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Oe),c.LFG(me,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),st=(()=>{class n extends Ne{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=z(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let u=this.prepareExternalUrl(r+de(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,s){let u=this.prepareExternalUrl(r+de(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Oe),c.LFG(me,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})(),mt=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Ce(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(Ze(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+de(i))}normalize(t){return n.stripTrailingSlash(function at(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+de(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+de(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=de;static#t=this.joinWithSlash=z;static#n=this.stripTrailingSlash=G;static#i=this.\u0275fac=function(i){return new(i||n)(c.LFG(Ne))};static#r=this.\u0275prov=c.Yz7({token:n,factory:function(){return function ke(){return new mt((0,c.LFG)(Ne))}()},providedIn:"root"})}return n})();function Ze(n){return n.replace(/\/index.html$/,"")}var he=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(he||{}),ue=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ue||{}),Ge=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ge||{}),Le=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(Le||{});function Ee(n,e){return cn((0,c.cg1)(n)[c.wAp.DateFormat],e)}function He(n,e){return cn((0,c.cg1)(n)[c.wAp.TimeFormat],e)}function je(n,e){return cn((0,c.cg1)(n)[c.wAp.DateTimeFormat],e)}function ct(n,e){const t=(0,c.cg1)(n),i=t[c.wAp.NumberSymbols][e];if(typeof i>"u"){if(e===Le.CurrencyDecimal)return t[c.wAp.NumberSymbols][Le.Decimal];if(e===Le.CurrencyGroup)return t[c.wAp.NumberSymbols][Le.Group]}return i}function fn(n){if(!n[c.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[c.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function cn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Fn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const ti=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vi={},Ro=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var sn=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(sn||{}),Yt=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Yt||{}),Qt=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Qt||{});function zt(n,e,t,i){let r=function le(n){if(te(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,u=1]=n.split("-").map(m=>+m);return Te(r,s-1,u)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(ti))return function J(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const u=Number(n[4]||0)-t,m=Number(n[5]||0)-i,v=Number(n[6]||0),C=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,u,m,v,C),e}(i)}const e=new Date(n);if(!te(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=we(t,e)||e;let m,u=[];for(;e;){if(m=Ro.exec(e),!m){u.push(e);break}{u=u.concat(m.slice(1));const M=u.pop();if(!M)break;e=M}}let v=r.getTimezoneOffset();i&&(v=gr(i,v),r=function fe(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function mo(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(gr(e,r)-r))}(r,i,!0));let C="";return u.forEach(M=>{const L=function Ci(n){if(pi[n])return pi[n];let e;switch(n){case"G":case"GG":case"GGG":e=jt(Qt.Eras,ue.Abbreviated);break;case"GGGG":e=jt(Qt.Eras,ue.Wide);break;case"GGGGG":e=jt(Qt.Eras,ue.Narrow);break;case"y":e=Ct(Yt.FullYear,1,0,!1,!0);break;case"yy":e=Ct(Yt.FullYear,2,0,!0,!0);break;case"yyy":e=Ct(Yt.FullYear,3,0,!1,!0);break;case"yyyy":e=Ct(Yt.FullYear,4,0,!1,!0);break;case"Y":e=mr(1);break;case"YY":e=mr(2,!0);break;case"YYY":e=mr(3);break;case"YYYY":e=mr(4);break;case"M":case"L":e=Ct(Yt.Month,1,1);break;case"MM":case"LL":e=Ct(Yt.Month,2,1);break;case"MMM":e=jt(Qt.Months,ue.Abbreviated);break;case"MMMM":e=jt(Qt.Months,ue.Wide);break;case"MMMMM":e=jt(Qt.Months,ue.Narrow);break;case"LLL":e=jt(Qt.Months,ue.Abbreviated,he.Standalone);break;case"LLLL":e=jt(Qt.Months,ue.Wide,he.Standalone);break;case"LLLLL":e=jt(Qt.Months,ue.Narrow,he.Standalone);break;case"w":e=Hn(1);break;case"ww":e=Hn(2);break;case"W":e=Hn(1,!0);break;case"d":e=Ct(Yt.Date,1);break;case"dd":e=Ct(Yt.Date,2);break;case"c":case"cc":e=Ct(Yt.Day,1);break;case"ccc":e=jt(Qt.Days,ue.Abbreviated,he.Standalone);break;case"cccc":e=jt(Qt.Days,ue.Wide,he.Standalone);break;case"ccccc":e=jt(Qt.Days,ue.Narrow,he.Standalone);break;case"cccccc":e=jt(Qt.Days,ue.Short,he.Standalone);break;case"E":case"EE":case"EEE":e=jt(Qt.Days,ue.Abbreviated);break;case"EEEE":e=jt(Qt.Days,ue.Wide);break;case"EEEEE":e=jt(Qt.Days,ue.Narrow);break;case"EEEEEE":e=jt(Qt.Days,ue.Short);break;case"a":case"aa":case"aaa":e=jt(Qt.DayPeriods,ue.Abbreviated);break;case"aaaa":e=jt(Qt.DayPeriods,ue.Wide);break;case"aaaaa":e=jt(Qt.DayPeriods,ue.Narrow);break;case"b":case"bb":case"bbb":e=jt(Qt.DayPeriods,ue.Abbreviated,he.Standalone,!0);break;case"bbbb":e=jt(Qt.DayPeriods,ue.Wide,he.Standalone,!0);break;case"bbbbb":e=jt(Qt.DayPeriods,ue.Narrow,he.Standalone,!0);break;case"B":case"BB":case"BBB":e=jt(Qt.DayPeriods,ue.Abbreviated,he.Format,!0);break;case"BBBB":e=jt(Qt.DayPeriods,ue.Wide,he.Format,!0);break;case"BBBBB":e=jt(Qt.DayPeriods,ue.Narrow,he.Format,!0);break;case"h":e=Ct(Yt.Hours,1,-12);break;case"hh":e=Ct(Yt.Hours,2,-12);break;case"H":e=Ct(Yt.Hours,1);break;case"HH":e=Ct(Yt.Hours,2);break;case"m":e=Ct(Yt.Minutes,1);break;case"mm":e=Ct(Yt.Minutes,2);break;case"s":e=Ct(Yt.Seconds,1);break;case"ss":e=Ct(Yt.Seconds,2);break;case"S":e=Ct(Yt.FractionalSeconds,1);break;case"SS":e=Ct(Yt.FractionalSeconds,2);break;case"SSS":e=Ct(Yt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ht(sn.Short);break;case"ZZZZZ":e=Ht(sn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ht(sn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ht(sn.Long);break;default:return null}return pi[n]=e,e}(M);C+=L?L(r,t,v):"''"===M?"'":M.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function Te(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function we(n,e){const t=function ot(n){return(0,c.cg1)(n)[c.wAp.LocaleId]}(n);if(Vi[t]=Vi[t]||{},Vi[t][e])return Vi[t][e];let i="";switch(e){case"shortDate":i=Ee(n,Ge.Short);break;case"mediumDate":i=Ee(n,Ge.Medium);break;case"longDate":i=Ee(n,Ge.Long);break;case"fullDate":i=Ee(n,Ge.Full);break;case"shortTime":i=He(n,Ge.Short);break;case"mediumTime":i=He(n,Ge.Medium);break;case"longTime":i=He(n,Ge.Long);break;case"fullTime":i=He(n,Ge.Full);break;case"short":const r=we(n,"shortTime"),s=we(n,"shortDate");i=Ie(je(n,Ge.Short),[r,s]);break;case"medium":const u=we(n,"mediumTime"),m=we(n,"mediumDate");i=Ie(je(n,Ge.Medium),[u,m]);break;case"long":const v=we(n,"longTime"),C=we(n,"longDate");i=Ie(je(n,Ge.Long),[v,C]);break;case"full":const M=we(n,"fullTime"),L=we(n,"fullDate");i=Ie(je(n,Ge.Full),[M,L])}return i&&(Vi[t][e]=i),i}function Ie(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function qe(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let u=String(n);for(;u.length<e;)u="0"+u;return i&&(u=u.slice(u.length-e)),s+u}function Ct(n,e,t=0,i=!1,r=!1){return function(s,u){let m=function mn(n,e){switch(n){case Yt.FullYear:return e.getFullYear();case Yt.Month:return e.getMonth();case Yt.Date:return e.getDate();case Yt.Hours:return e.getHours();case Yt.Minutes:return e.getMinutes();case Yt.Seconds:return e.getSeconds();case Yt.FractionalSeconds:return e.getMilliseconds();case Yt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||m>-t)&&(m+=t),n===Yt.Hours)0===m&&-12===t&&(m=12);else if(n===Yt.FractionalSeconds)return function Fe(n,e){return qe(n,3).substring(0,e)}(m,e);const v=ct(u,Le.MinusSign);return qe(m,e,v,i,r)}}function jt(n,e,t=he.Format,i=!1){return function(r,s){return function Jt(n,e,t,i,r,s){switch(t){case Qt.Months:return function un(n,e,t){const i=(0,c.cg1)(n),s=cn([i[c.wAp.MonthsFormat],i[c.wAp.MonthsStandalone]],e);return cn(s,t)}(e,r,i)[n.getMonth()];case Qt.Days:return function nn(n,e,t){const i=(0,c.cg1)(n),s=cn([i[c.wAp.DaysFormat],i[c.wAp.DaysStandalone]],e);return cn(s,t)}(e,r,i)[n.getDay()];case Qt.DayPeriods:const u=n.getHours(),m=n.getMinutes();if(s){const C=function tn(n){const e=(0,c.cg1)(n);return fn(e),(e[c.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?Fn(i):[Fn(i[0]),Fn(i[1])])}(e),M=function Dn(n,e,t){const i=(0,c.cg1)(n);fn(i);const s=cn([i[c.wAp.ExtraData][0],i[c.wAp.ExtraData][1]],e)||[];return cn(s,t)||[]}(e,r,i),L=C.findIndex(q=>{if(Array.isArray(q)){const[ne,ae]=q,ye=u>=ne.hours&&m>=ne.minutes,We=u<ae.hours||u===ae.hours&&m<ae.minutes;if(ne.hours<ae.hours){if(ye&&We)return!0}else if(ye||We)return!0}else if(q.hours===u&&q.minutes===m)return!0;return!1});if(-1!==L)return M[L]}return function Kt(n,e,t){const i=(0,c.cg1)(n),s=cn([i[c.wAp.DayPeriodsFormat],i[c.wAp.DayPeriodsStandalone]],e);return cn(s,t)}(e,r,i)[u<12?0:1];case Qt.Eras:return function rn(n,e){return cn((0,c.cg1)(n)[c.wAp.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function Ht(n){return function(e,t,i){const r=-1*i,s=ct(t,Le.MinusSign),u=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case sn.Short:return(r>=0?"+":"")+qe(u,2,s)+qe(Math.abs(r%60),2,s);case sn.ShortGMT:return"GMT"+(r>=0?"+":"")+qe(u,1,s);case sn.Long:return"GMT"+(r>=0?"+":"")+qe(u,2,s)+":"+qe(Math.abs(r%60),2,s);case sn.Extended:return 0===i?"Z":(r>=0?"+":"")+qe(u,2,s)+":"+qe(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Ei=0,vi=4;function ki(n){return Te(n.getFullYear(),n.getMonth(),n.getDate()+(vi-n.getDay()))}function Hn(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,u=t.getDate();r=1+Math.floor((u+s)/7)}else{const s=ki(t),u=function zn(n){const e=Te(n,Ei,1).getDay();return Te(n,0,1+(e<=vi?vi:vi+7)-e)}(s.getFullYear()),m=s.getTime()-u.getTime();r=1+Math.round(m/6048e5)}return qe(r,n,ct(i,Le.MinusSign))}}function mr(n,e=!1){return function(t,i){return qe(ki(t).getFullYear(),n,ct(i,Le.MinusSign),e)}}const pi={};function gr(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function te(n){return n instanceof Date&&!isNaN(n.valueOf())}const go=/\s+/,Ia=[];let Ko=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=Ia,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(go):Ia}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(go):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(go).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Yo{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ni=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,u)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Yo(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===s?void 0:s);else if(null!==s){const m=i.get(s);i.move(m,u),Ai(m,r)}});for(let r=0,s=i.length;r<s;r++){const m=i.get(r).context;m.index=r,m.count=s,m.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Ai(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Ai(n,e){n.context.$implicit=e.item}let Qi=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new _c,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ka("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ka("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.s_b),c.Y36(c.Rgc))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class _c{constructor(){this.$implicit=null,this.ngIf=null}}function Ka(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class $r{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ks=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return n})(),Ya=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new $r(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(ks,9))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return n})(),Ns=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),u=-1===r.indexOf("-")?void 0:c.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,u):this._renderer.removeStyle(this._ngEl.nativeElement,r,u)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),ta=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:u}=this;this._viewRef=i.createEmbeddedView(r,s,u?{injector:u}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.s_b))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[c.TTD]})}return n})();function ko(n,e){return new c.vHH(2100,!1)}class vo{createSubscription(e,t){return(0,c.rg0)(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){(0,c.rg0)(()=>e.unsubscribe())}}class vr{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Qa=new vr,na=new vo;let Mr=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if((0,c.QGY)(t))return Qa;if((0,c.F4k)(t))return na;throw ko()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.sBO,16))};static#t=this.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1,standalone:!0})}return n})();const Ni=new c.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),yr=new c.OlP("DATE_PIPE_DEFAULT_OPTIONS");let xa=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(null==t||""===t||t!=t)return null;try{return zt(t,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(u){throw ko()}}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.soG,16),c.Y36(Ni,24),c.Y36(yr,24))};static#t=this.\u0275pipe=c.Yjl({name:"date",type:n,pure:!0,standalone:!0})}return n})(),Oi=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();const ra="browser";function wr(n){return"server"===n}let Cr=(()=>{class n{static#e=this.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Ir((0,c.LFG)(Re),window)})}return n})();class Ir{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function oa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class es extends ce{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Pc extends es{static makeCurrent(){!function pe(n){U||(U=n)}(new Pc)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function rl(){return js=js||document.querySelector("base"),js?js.getAttribute("href"):null}();return null==t?null:function Io(n){Co=Co||document.createElement("a"),Co.setAttribute("href",n);const e=Co.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ur(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Co,js=null,Fh=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const mu=new c.OlP("EventManagerPlugins");let Lh=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new c.vHH(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(mu),c.LFG(c.R0b))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class Ul{constructor(e){this._doc=e}}const Vl="ng-app-id";let Qu=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wr(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Vl}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(Vl),s;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=i,this.platformIsServer&&u.setAttribute(Vl,this.appId),u}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,u=s.get(i)?.elements;u?u.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re),c.LFG(c.AFp),c.LFG(c.Ojb,8),c.LFG(c.Lbi))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const bs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rc=/%COMP%/g,ws=new c.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function xi(n,e){return e.map(t=>t.replace(Rc,n))}let sl=(()=>{class n{constructor(t,i,r,s,u,m,v,C=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=u,this.platformId=m,this.ngZone=v,this.nonce=C,this.rendererByCompId=new Map,this.platformIsServer=wr(m),this.defaultRenderer=new Pa(t,u,v,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===c.ifc.ShadowDom&&(i={...i,encapsulation:c.ifc.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof Wd?r.applyToHost(t):r instanceof Gi&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const u=this.doc,m=this.ngZone,v=this.eventManager,C=this.sharedStylesHost,M=this.removeStylesOnCompDestroy,L=this.platformIsServer;switch(i.encapsulation){case c.ifc.Emulated:s=new Wd(v,C,i,this.appId,M,u,m,L);break;case c.ifc.ShadowDom:return new al(v,C,t,i,u,m,this.nonce,L);default:s=new Gi(v,C,i,M,u,m,L)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Lh),c.LFG(Qu),c.LFG(c.AFp),c.LFG(ws),c.LFG(Re),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(c.Ojb))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class Pa{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(bs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Gd(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Gd(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new c.vHH(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=bs[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=bs[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,i,r&c.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=K().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Gd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class al extends Pa{constructor(e,t,i,r,s,u,m,v){super(e,s,u,v),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const C=xi(r.id,r.styles);for(const M of C){const L=document.createElement("style");m&&L.setAttribute("nonce",m),L.textContent=M,this.shadowRoot.appendChild(L)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gi extends Pa{constructor(e,t,i,r,s,u,m,v){super(e,s,u,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=v?xi(v,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Wd extends Gi{constructor(e,t,i,r,s,u,m,v){const C=r+"-"+i.id;super(e,t,i,s,u,m,v,C),this.contentAttr=function qd(n){return"_ngcontent-%COMP%".replace(Rc,n)}(C),this.hostAttr=function _u(n){return"_nghost-%COMP%".replace(Rc,n)}(C)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Zd=(()=>{class n extends Ul{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const zs=["alt","control","meta","shift"],cl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kd={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let kc=(()=>{class n extends Ul{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),u=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>K().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let u="",m=i.indexOf("code");if(m>-1&&(i.splice(m,1),u="code."),zs.forEach(C=>{const M=i.indexOf(C);M>-1&&(i.splice(M,1),u+=C+".")}),u+=s,0!=i.length||0===s.length)return null;const v={};return v.domEventName=r,v.fullKey=u,v}static matchEventFullKeyCode(t,i){let r=cl[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),zs.forEach(u=>{u!==r&&(0,Kd[u])(t)&&(s+=u+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const Br=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:ra},{provide:c.g9A,useValue:function In(){Pc.makeCurrent()},multi:!0},{provide:Re,useFactory:function Wf(){return(0,c.RDi)(document),document},deps:[]}]),Vh=new c.OlP(""),$i=[{provide:c.rWj,useClass:class Yu{addToWindow(e){c.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new c.vHH(5103,!1);return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(i=>{const r=c.dqk.getAllAngularTestabilities();let s=r.length,u=!1;const m=function(v){u=u||v,s--,0==s&&i(u)};r.forEach(v=>{v.whenStable(m)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?K().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Es=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Nc(){return new c.qLn},deps:[]},{provide:mu,useClass:Zd,multi:!0,deps:[Re,c.R0b,c.Lbi]},{provide:mu,useClass:kc,multi:!0,deps:[Re]},sl,Qu,Lh,{provide:c.FYo,useExisting:sl},{provide:class Fi{},useClass:Fh,deps:[]},[]];let Fc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Vh,12))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[...Es,...$i],imports:[Oi,c.hGG]})}return n})(),pt=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re))};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function rc(){return new pt((0,c.LFG)(Re))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;let Jr=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(i){let r=null;return r=i?new(i||n):c.LFG(da),r},providedIn:"root"})}return n})(),da=(()=>{class n extends Jr{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case c.q3G.NONE:return i;case c.q3G.HTML:return(0,c.qzn)(i,"HTML")?(0,c.z3N)(i):(0,c.EiD)(this._doc,String(i)).toString();case c.q3G.STYLE:return(0,c.qzn)(i,"Style")?(0,c.z3N)(i):i;case c.q3G.SCRIPT:if((0,c.qzn)(i,"Script"))return(0,c.z3N)(i);throw new c.vHH(5200,!1);case c.q3G.URL:return(0,c.qzn)(i,"URL")?(0,c.z3N)(i):(0,c.mCW)(String(i));case c.q3G.RESOURCE_URL:if((0,c.qzn)(i,"ResourceURL"))return(0,c.z3N)(i);throw new c.vHH(5201,!1);default:throw new c.vHH(5202,!1)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re))};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(i){let r=null;return r=i?new i:function Bh(n){return new da(n.get(Re))}(c.LFG(c.zs3)),r},providedIn:"root"})}return n})();function oc(n){return n instanceof c.Rgc}function sc(n){return"function"==typeof n}function ac(n){return"string"==typeof n}let zl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["dynamic-view"]],inputs:{content:"content"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,i){1&t&&c._UZ(0,"div",0),2&t&&c.Q6J("innerHTML",i.content,c.oJD)},encapsulation:2}),n})();class ts{constructor(e){this.args=e,this.wrapper=null,this.args.vcr?(this.viewRef=this.args.vcr.createEmbeddedView(this.args.tpl,this.args.context||{}),this.viewRef.detectChanges()):(this.viewRef=this.args.tpl.createEmbeddedView(this.args.context||{}),this.viewRef.detectChanges(),this.args.appRef.attachView(this.viewRef))}detectChanges(){this.viewRef.detectChanges()}getElement(){const e=this.viewRef.rootNodes;return 1===e.length&&e[0]===Node.ELEMENT_NODE?this.element=e[0]:(this.element=document.createElement("div"),this.element.append(...e)),this.element}destroy(){1!==this.viewRef.rootNodes[0]&&(this.element?.parentNode.removeChild(this.element),this.element=null),this.args.vcr||this.args.appRef.detachView(this.viewRef),this.viewRef.destroy(),this.viewRef=null}}class ha{constructor(e){this.value=e}getElement(){return this.value}detectChanges(){}destroy(){}}class ir{constructor(e){if(this.options=e,e.vcr)this.compRef=e.vcr.createComponent(e.component,{index:e.vcr.length,injector:e.injector||e.vcr.injector});else{const t=e.resolver.resolveComponentFactory(e.component);this.compRef=t.create(e.injector),e.appRef.attachView(this.compRef.hostView)}}get ref(){return this.compRef}setInput(e,t){return this.compRef.instance[e]=t,this}setInputs(e){return Object.keys(e).forEach(t=>{this.compRef.instance[t]=e[t]}),this}detectChanges(){return this.compRef.hostView.detectChanges(),this}appendTo(e){return e.appendChild(this.getElement()),this}removeFrom(e){return e.removeChild(this.getElement()),this}getRawContent(){return this.getElement().outerHTML}getElement(){return this.compRef.location.nativeElement}destroy(){this.compRef.destroy(),!this.options.vcr&&this.options.appRef.detachView(this.compRef.hostView),this.compRef=null}}let fa=(()=>{class n{constructor(t,i,r){this.resolver=t,this.injector=i,this.appRef=r}createComponent(t,i={}){return new ir({component:t,vcr:i.vcr,injector:i.injector||this.injector,appRef:this.appRef,resolver:this.resolver})}createTemplate(t,i={}){return new ts({vcr:i.vcr,appRef:this.appRef,tpl:t,context:i.context})}createView(t,i={}){if(oc(t))return this.createTemplate(t,i);if(sc(t))return this.createComponent(t,i);if(ac(t))return new ha(t);throw"Type of content is not supported"}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(c.z2F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eh=(()=>{class n{constructor(t,i,r){this.defaultTpl=t,this.vcr=i,this.viewService=r}ngOnInit(){this.resolveContentType()}ngOnChanges(t){t.view&&!t.view.isFirstChange()&&this.resolveContentType()}resolveContentType(){this.viewRef?.destroy(),ac(this.view)?(this.viewRef=this.viewService.createComponent(zl,{vcr:this.vcr,injector:this.injector}),this.viewRef.setInput("content",this.view).detectChanges()):this.viewRef=this.viewService.createView(this.view||this.defaultTpl,{vcr:this.vcr,injector:this.injector??this.vcr.injector,context:this.context})}ngOnDestroy(){this.viewRef?.destroy()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.s_b),c.Y36(fa))},n.\u0275dir=c.lG2({type:n,selectors:[["","dynamicView",""]],inputs:{view:["dynamicView","view"],injector:["dynamicViewInjector","injector"],context:["dynamicViewContext","context"]},features:[c.TTD]}),n})(),Is=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();var jn=Q(8645),rr=Q(5592),So=Q(4829);const{isArray:Hl}=Array;var ci=Q(8251);function Lc(n){return new rr.y(e=>{(0,So.Xf)(n()).subscribe(e)})}var Nr=Q(9360);function or(n,e){return(0,Nr.e)((t,i)=>{let r=0;t.subscribe((0,ci.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}var Xi=Q(9397);const Yf=["*"],xs=function(n,e){return{"border-color":n,"border-right-color":e}};function nd(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-error",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function dm(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-checkmark",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function id(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-warning",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function rd(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-info",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function Qf(n,e){if(1&n&&(c.TgZ(0,"div",4),c._uU(1,"\n    "),c.TgZ(2,"div",5),c._uU(3,"\n      "),c.YNc(4,nd,4,1,"div",6),c._uU(5,"\n      "),c.YNc(6,dm,4,1,"div",6),c._uU(7,"\n      "),c.YNc(8,id,4,1,"div",6),c._uU(9,"\n      "),c.YNc(10,rd,4,1,"div",6),c._uU(11,"\n    "),c.qZA(),c._uU(12,"\n  "),c.qZA()),2&n){const t=c.oxw(2);c.xp6(2),c.Q6J("ngSwitch",t.type),c.xp6(2),c.Q6J("ngSwitchCase","error"),c.xp6(2),c.Q6J("ngSwitchCase","success"),c.xp6(2),c.Q6J("ngSwitchCase","warning"),c.xp6(2),c.Q6J("ngSwitchCase","info")}}function od(n,e){if(1&n&&(c.TgZ(0,"div",1),c._uU(1,"\n  "),c._UZ(2,"hot-toast-loader",2),c._uU(3,"\n  "),c.YNc(4,Qf,13,5,"div",3),c._uU(5,"\n"),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("theme",t.theme),c.xp6(2),c.Q6J("ngIf","loading"!==t.type)}}const $l=["hotToastBarBase"];function jh(n,e){if(1&n&&(c.ynx(0),c._uU(1,"\n          "),c.TgZ(2,"hot-toast-animated-icon",10),c._uU(3),c.qZA(),c._uU(4,"\n        "),c.BQk()),2&n){const t=c.oxw(2);c.xp6(2),c.Q6J("iconTheme",t.toast.iconTheme),c.xp6(1),c.Oqu(t.toast.icon)}}function th(n,e){if(1&n&&(c._uU(0,"\n          "),c.TgZ(1,"div"),c._uU(2,"\n            "),c.GkF(3,11),c._uU(4,"\n          "),c.qZA(),c._uU(5,"\n        ")),2&n){const t=c.oxw(2);c.xp6(3),c.Q6J("dynamicView",t.toast.icon)}}function Uc(n,e){if(1&n&&(c.ynx(0),c._uU(1,"\n        "),c.YNc(2,jh,5,2,"ng-container",4),c._uU(3,"\n        "),c.YNc(4,th,6,1,"ng-template",null,9,c.W1O),c._uU(6,"\n      "),c.BQk()),2&n){const t=c.MAs(5),i=c.oxw();c.xp6(2),c.Q6J("ngIf",i.isIconString)("ngIfElse",t)}}function Vc(n,e){if(1&n&&(c._uU(0,"\n        "),c._UZ(1,"hot-toast-indicator",12),c._uU(2,"\n      ")),2&n){const t=c.oxw();c.xp6(1),c.Q6J("theme",t.toast.iconTheme)("type",t.toast.type)}}function sd(n,e){1&n&&c.GkF(0)}function dl(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",13),c.NdJ("click",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.close())}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("ngStyle",t.toast.closeStyle)}}function Eu(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"hot-toast",3),c.NdJ("height",function(r){const u=c.CHM(t).$implicit,m=c.oxw();return c.KtG(m.updateHeight(r,u))})("beforeClosed",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.beforeClosed(s))})("afterClosed",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s.afterClosed(r))}),c.qZA()}if(2&n){const t=e.$implicit,i=e.index,r=c.oxw();c.Q6J("toast",t)("offset",r.calculateOffset(t.id,t.position))("toastRef",r.toastRefs[i])}}const us={blank:4e3,error:4e3,success:4e3,loading:3e4,warning:4e3,info:4e3};class $h{constructor(e){this.toast=e,this._onClosed=new jn.x}get data(){return this.toast.data}set dispose(e){this._dispose=e}getToast(){return this.toast}appendTo(e){const{dispose:t,updateMessage:i,updateToast:r,afterClosed:s}=e.addToast(this);return this.dispose=t,this.updateMessage=i,this.updateToast=r,this.afterClosed=function ka(...n){return 1===(n=function cc(n){return 1===n.length&&Hl(n[0])?n[0]:n}(n)).length?(0,So.Xf)(n[0]):new rr.y(function jr(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push((0,So.Xf)(n[i]).subscribe((0,ci.x)(e,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}e.next(r)})))}}(n))}(this._onClosed.asObservable(),s),this}close(e={dismissedByAction:!1}){this._dispose(),this._onClosed.next({dismissedByAction:e.dismissedByAction,id:this.toast.id}),this._onClosed.complete()}}let ad=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-animated-icon"]],inputs:{iconTheme:"iconTheme"},ngContentSelectors:Yf,decls:5,vars:2,consts:[[1,"hot-toast-animated-icon"]],template:function(t,i){1&t&&(c.F$t(),c.TgZ(0,"div",0),c._uU(1,"\n  "),c.Hsn(2),c._uU(3,"\n"),c.qZA(),c._uU(4,"\n")),2&t&&c.Udp("color",null==i.iconTheme?null:i.iconTheme.primary)},encapsulation:2,changeDetection:0}),n})(),Hs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-checkmark"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-checkmark-icon"]],template:function(t,i){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--check-primary",null==i.theme?null:i.theme.primary)("--check-secondary",null==i.theme?null:i.theme.secondary)},encapsulation:2,changeDetection:0}),n})(),ql=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-error"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-error-icon"]],template:function(t,i){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--error-primary",null==i.theme?null:i.theme.primary)("--error-secondary",null==i.theme?null:i.theme.secondary)},encapsulation:2,changeDetection:0}),n})(),Cu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-loader"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-loader-icon",3,"ngStyle"]],template:function(t,i){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Q6J("ngStyle",c.WLB(1,xs,null==i.theme?null:i.theme.primary,null==i.theme?null:i.theme.secondary))},dependencies:[Ns],encapsulation:2,changeDetection:0}),n})(),Gl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-warning"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-warning-icon"]],template:function(t,i){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--warn-primary",null==i.theme?null:i.theme.primary)("--warn-secondary",null==i.theme?null:i.theme.secondary)},encapsulation:2,changeDetection:0}),n})(),Wl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-info"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-info-icon"]],template:function(t,i){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--warn-primary",null==i.theme?null:i.theme.primary)("--warn-secondary",null==i.theme?null:i.theme.secondary)},encapsulation:2,changeDetection:0}),n})(),cd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-indicator"]],inputs:{theme:"theme",type:"type"},decls:2,vars:1,consts:[["class","hot-toast-indicator-wrapper",4,"ngIf"],[1,"hot-toast-indicator-wrapper"],[3,"theme"],["class","hot-toast-status-wrapper",4,"ngIf"],[1,"hot-toast-status-wrapper"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,i){1&t&&(c.YNc(0,od,6,2,"div",0),c._uU(1,"\n")),2&t&&c.Q6J("ngIf","blank"!==i.type)},dependencies:[Qi,ks,Ya,Hs,ql,Cu,Gl,Wl],encapsulation:2,changeDetection:0}),n})(),Zl=(()=>{class n{constructor(t,i,r){this.injector=t,this.renderer=i,this.ngZone=r,this.offset=0,this.height=new c.vpe,this.beforeClosed=new c.vpe,this.afterClosed=new c.vpe,this.isManualClose=!1,this.unlisteners=[]}get toastBarBaseHeight(){return this.toastBarBase.nativeElement.offsetHeight}get containerPositionStyle(){const t=this.toast.position.includes("top"),i=t?{top:0}:{bottom:0},r=this.toast.position.includes("left")?{left:0}:this.toast.position.includes("right")?{right:0}:{left:0,right:0,justifyContent:"center"};return{transform:`translateY(${this.offset*(t?1:-1)}px)`,...i,...r}}get toastBarBaseStyles(){const t=this.toast.position.includes("top"),i=`hotToastEnterAnimation${t?"Negative":"Positive"} 350ms cubic-bezier(0.21, 1.02, 0.73, 1) forwards`;return{...this.toast.style,animation:this.toast.autoClose?`${i}, hotToastExitAnimation${t?"Negative":"Positive"} 800ms forwards cubic-bezier(0.06, 0.71, 0.55, 1) ${this.toast.duration}ms`:i}}get isIconString(){return"string"==typeof this.toast.icon}ngOnChanges(t){t.toast&&!t.toast.firstChange&&t.toast.currentValue?.message&&requestAnimationFrame(()=>{this.height.emit(this.toastBarBase.nativeElement.offsetHeight)})}ngOnInit(){oc(this.toast.message)&&(this.context={$implicit:this.toastRef}),sc(this.toast.message)&&(this.toastComponentInjector=c.zs3.create({providers:[{provide:$h,useValue:this.toastRef}],parent:this.toast.injector||this.injector}))}ngAfterViewInit(){const t=this.toastBarBase.nativeElement;requestAnimationFrame(()=>{this.height.emit(t.offsetHeight)}),this.ngZone.runOutsideAngular(()=>{this.unlisteners.push(this.renderer.listen(t,"animationstart",i=>{this.isExitAnimation(i)&&this.ngZone.run(()=>this.beforeClosed.emit())}),this.renderer.listen(t,"animationend",i=>{this.isExitAnimation(i)&&this.ngZone.run(()=>this.afterClosed.emit({dismissedByAction:this.isManualClose,id:this.toast.id}))}))}),this.setToastAttributes()}close(){this.isManualClose=!0;((n,e)=>{this.toastBarBase.nativeElement.style.animation=e})(0,`hotToastExitAnimation${this.toast.position.includes("top")?"Negative":"Positive"} 800ms forwards cubic-bezier(0.06, 0.71, 0.55, 1)`)}ngOnDestroy(){for(this.close();this.unlisteners.length;)this.unlisteners.pop()()}isExitAnimation(t){return t.animationName.includes("hotToastExitAnimation")}setToastAttributes(){const t=this.toast.attributes;for(const[i,r]of Object.entries(t))this.renderer.setAttribute(this.toastBarBase.nativeElement,i,r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.zs3),c.Y36(c.Qsj),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast"]],viewQuery:function(t,i){if(1&t&&c.Gf($l,5),2&t){let r;c.iGM(r=c.CRH())&&(i.toastBarBase=r.first)}},inputs:{toast:"toast",offset:"offset",defaultConfig:"defaultConfig",toastRef:"toastRef"},outputs:{height:"height",beforeClosed:"beforeClosed",afterClosed:"afterClosed"},features:[c.TTD],decls:25,vars:14,consts:[[1,"hot-toast-bar-base-container",3,"ngStyle","ngClass"],[1,"hot-toast-bar-base",3,"ngStyle","ngClass"],["hotToastBarBase",""],["aria-hidden","true",1,"hot-toast-icon"],[4,"ngIf","ngIfElse"],["indicator",""],[1,"hot-toast-message"],[4,"dynamicView","dynamicViewContext","dynamicViewInjector"],["type","button","class","hot-toast-close-btn","aria-label","Close",3,"ngStyle","click",4,"ngIf"],["iconTemplateOrComponent",""],[3,"iconTheme"],[3,"dynamicView"],[3,"theme","type"],["type","button","aria-label","Close",1,"hot-toast-close-btn",3,"ngStyle","click"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1,2),c._uU(4,"\n    "),c.TgZ(5,"div",3),c._uU(6,"\n      "),c.YNc(7,Uc,7,2,"ng-container",4),c._uU(8,"\n\n      "),c.YNc(9,Vc,3,2,"ng-template",null,5,c.W1O),c._uU(11,"\n    "),c.qZA(),c._uU(12,"\n\n    "),c.TgZ(13,"div",6),c._uU(14,"\n      "),c.TgZ(15,"div"),c._uU(16,"\n        "),c.YNc(17,sd,1,0,"ng-container",7),c._uU(18,"\n      "),c.qZA(),c._uU(19,"\n    "),c.qZA(),c._uU(20,"\n\n    "),c.YNc(21,dl,1,1,"button",8),c._uU(22,"\n  "),c.qZA(),c._uU(23,"\n"),c.qZA(),c._uU(24,"\n")),2&t){const r=c.MAs(10);c.Q6J("ngStyle",i.containerPositionStyle)("ngClass","hot-toast-theme-"+i.toast.theme),c.xp6(2),c.Udp("--hot-toast-animation-state",i.isManualClose?"running":"paused"),c.Q6J("ngStyle",i.toastBarBaseStyles)("ngClass",i.toast.className),c.uIk("aria-live",i.toast.ariaLive)("role",i.toast.role),c.xp6(5),c.Q6J("ngIf",void 0!==i.toast.icon)("ngIfElse",r),c.xp6(10),c.Q6J("dynamicView",i.toast.message)("dynamicViewContext",i.context)("dynamicViewInjector",i.toastComponentInjector),c.xp6(4),c.Q6J("ngIf",i.toast.dismissible)}},dependencies:[Ko,Qi,Ns,eh,ad,cd],encapsulation:2,changeDetection:0}),n})(),Kl=(()=>{class n{constructor(t){this.cdr=t,this.toasts=[],this.toastRefs=[],this._onClosed=new jn.x,this.onClosed$=this._onClosed.asObservable()}trackById(t,i){return i.id}calculateOffset(t,i){const r=this.toasts.filter(m=>m.visible&&m.position===i),s=r.findIndex(m=>m.id===t);return-1!==s?r.slice(...this.defaultConfig.reverseOrder?[s+1]:[0,s]).reduce((m,v)=>m+(v.height||0)+8,0):0}updateHeight(t,i){i.height=t,this.cdr.detectChanges()}addToast(t){this.toastRefs.push(t);const i=t.getToast();return this.toasts.push(t.getToast()),this.cdr.detectChanges(),{dispose:()=>{this.closeToast(i.id)},updateMessage:r=>{i.message=r,this.updateToasts(i),this.cdr.detectChanges()},updateToast:r=>{this.updateToasts(i,r),this.cdr.detectChanges()},afterClosed:this.getAfterClosed(i)}}closeToast(t){if(t){const i=this.hotToastComponentList.find(r=>r.toast.id===t);i&&i.close()}else this.hotToastComponentList.forEach(i=>i.close())}beforeClosed(t){t.visible=!1}afterClosed(t){this.toasts.findIndex(r=>r.id===t.id)>-1&&(this._onClosed.next(t),this.toasts=this.toasts.filter(r=>r.id!==t.id),this.toastRefs=this.toastRefs.filter(r=>r.getToast().id!==t.id),this.cdr.detectChanges())}hasToast(t){return this.toasts.findIndex(i=>i.id===t)>-1}getAfterClosed(t){return this.onClosed$.pipe(or(i=>i.id===t.id))}updateToasts(t,i){this.toasts=this.toasts.map(r=>({...r,...r.id===t.id&&{...t,...i}}))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-container"]],viewQuery:function(t,i){if(1&t&&c.Gf(Zl,5),2&t){let r;c.iGM(r=c.CRH())&&(i.hotToastComponentList=r)}},inputs:{defaultConfig:"defaultConfig"},decls:8,vars:2,consts:[[2,"position","fixed","z-index","9999","top","0","right","0","bottom","0","left","0","pointer-events","none"],[2,"position","relative","height","100%"],[3,"toast","offset","toastRef","height","beforeClosed","afterClosed",4,"ngFor","ngForOf","ngForTrackBy"],[3,"toast","offset","toastRef","height","beforeClosed","afterClosed"]],template:function(t,i){1&t&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3,"\n    "),c.YNc(4,Eu,1,3,"hot-toast",2),c._uU(5,"\n  "),c.qZA(),c._uU(6,"\n"),c.qZA(),c._uU(7,"\n")),2&t&&(c.xp6(4),c.Q6J("ngForOf",i.toasts)("ngForTrackBy",i.trackById))},dependencies:[ni,Zl],encapsulation:2,changeDetection:0}),n})();class $s{constructor(){this.reverseOrder=!1,this.ariaLive="polite",this.role="status",this.position="top-center",this.autoClose=!0,this.theme="toast",this.attributes={},this.info={content:""},this.success={content:""},this.error={content:""},this.loading={content:""},this.blank={content:""},this.warning={content:""}}}class ld{constructor(){this.storage="local",this.key="ngneat/hototast-${id}",this.count=1,this.enabled=!1}}let Na=(()=>{class n{constructor(t,i,r){this._viewService=t,this.platformId=i,this._isInitialized=!1,this._defaultConfig=new $s,this._defaultPersistConfig=new ld,r&&(this._defaultConfig={...this._defaultConfig,...r})}get defaultConfig(){return this._defaultConfig}set defaultConfig(t){this._defaultConfig={...this._defaultConfig,...t},this._componentRef&&this._componentRef.setInput("defaultConfig",this._defaultConfig)}show(t,i){return this.createToast(t||this._defaultConfig.blank.content,"blank",{...this._defaultConfig,...i})}error(t,i){return this.createToast(t||this._defaultConfig.error.content,"error",{...this._defaultConfig,...this._defaultConfig?.error,...i})}success(t,i){return this.createToast(t||this._defaultConfig.success.content,"success",{...this._defaultConfig,...this._defaultConfig?.success,...i})}loading(t,i){return this.createToast(t||this._defaultConfig.loading.content,"loading",{...this._defaultConfig,...this._defaultConfig?.loading,...i})}warning(t,i){return this.createToast(t||this._defaultConfig.warning.content,"warning",{...this._defaultConfig,...this._defaultConfig?.warning,...i})}info(t,i){return this.createToast(t||this._defaultConfig.info.content,"info",{...this._defaultConfig,...this._defaultConfig?.info,...i})}observe(t){return i=>{let r,s=0;const u=t.loading??this._defaultConfig.loading?.content,m=t.success??this._defaultConfig.success?.content,v=t.error??this._defaultConfig.error?.content;return Lc(()=>(u&&(r=this.createLoadingToast(u),s=Date.now()),i.pipe((0,Xi.b)({...m&&{next:C=>{r=this.createOrUpdateToast(t,C,r,"success",0===s?s:Date.now()-s)}},...v&&{error:C=>{r=this.createOrUpdateToast(t,C,r,"error",0===s?s:Date.now()-s)}}}))))}}close(t){this._componentRef&&this._componentRef.ref.instance.closeToast(t)}init(){wr(this.platformId)||(this._componentRef=this._viewService.createComponent(Kl).setInput("defaultConfig",this._defaultConfig).appendTo(document.body))}createOrUpdateToast(t,i,r,s,u){let m=null,v={};if(({content:m,options:v}=this.getContentAndOptions(s,t[s]||(this._defaultConfig[s]?this._defaultConfig[s].content:""))),m=((n,e)=>(n=>"function"==typeof n)(n)?n(e):n)(m,i),r){r.updateMessage(m);const C={type:s,duration:u+us[s],...v,...v.duration&&{duration:u+v.duration}};r.updateToast(C)}else this.createToast(m,s,v);return r}createToast(t,i,r,s){this._isInitialized||(this._isInitialized=!0,this.init());const u=Date.now(),m=r?.id??u.toString();if(!this.isDuplicate(m)&&(!r.persist?.enabled||r.persist?.enabled&&this.handleStorageValue(m,r))){const v={ariaLive:r?.ariaLive??"polite",createdAt:u,duration:r?.duration??us[i],id:m,message:t,role:r?.role??"status",type:i,visible:!0,observableMessages:s??void 0,...r};return new $h(v).appendTo(this._componentRef.ref.instance)}}isDuplicate(t){return this._componentRef.ref.instance.hasToast(t)}handleStorageValue(t,i){let r=1;const s={...this._defaultPersistConfig,...i.persist},u="local"===s.storage?localStorage:sessionStorage,m=s.key.replace(/\${id}/g,t);let v=u.getItem(m);return v?(v=parseInt(v,10),r=v>0?v-1:v):r=s.count,u.setItem(m,r.toString()),r}getContentAndOptions(t,i){let r,s={...this._defaultConfig,...this._defaultConfig[t]};if("string"==typeof i||oc(i)||sc(i))r=i;else{let u;({content:r,...u}=i),s={...s,...u}}return{content:r,options:s}}createLoadingToast(t){let i=null,r={};return({content:i,options:r}=this.getContentAndOptions("loading",t)),this.loading(i,r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(fa),c.LFG(c.Lbi),c.LFG($s,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ih=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:$s,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Oi,Is]}),n})();class rh{}class hl{}const ns="*";function fl(n,e){return{type:7,name:n,definitions:e,options:{}}}function sr(n,e=null){return{type:4,styles:e,timings:n}}function ud(n,e=null){return{type:2,steps:n,options:e}}function dr(n){return{type:6,styles:n,offset:null}}function qh(n,e,t){return{type:0,name:n,styles:e,options:t}}function Jf(n){return{type:5,steps:n}}function qs(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class H{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class oe{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++i==s&&this._onDestroy()}),u.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,m)=>Math.max(u,m.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function rt(n){return new c.vHH(3e3,!1)}function Nt(n){switch(n.length){case 0:return new H;case 1:return n[0];default:return new oe(n)}}function pn(n,e,t=new Map,i=new Map){const r=[],s=[];let u=-1,m=null;if(e.forEach(v=>{const C=v.get("offset"),M=C==u,L=M&&m||new Map;v.forEach((q,ne)=>{let ae=ne,ye=q;if("offset"!==ne)switch(ae=n.normalizePropertyName(ae,r),ye){case"!":ye=t.get(ne);break;case ns:ye=i.get(ne);break;default:ye=n.normalizeStyleValue(ne,ae,ye,r)}L.set(ae,ye)}),M||s.push(L),m=L,u=C}),r.length)throw function i_(n){return new c.vHH(3502,!1)}();return s}function Gn(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&eo(t,"start",n)));break;case"done":n.onDone(()=>i(t&&eo(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&eo(t,"destroy",n)))}}function eo(n,e,t){const s=pa(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function pa(n,e,t,i,r="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!u}}function to(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function tp(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Zh=(()=>typeof document>"u"?null:document.documentElement)();function jc(n){const e=n.parentNode||n.host||null;return e===Zh?null:e}let _l=null,Kh=!1;function Ql(n,e){for(;e;){if(e===n)return!0;e=jc(e)}return!1}function sh(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let ah=(()=>{class n{validateStyleProperty(t){return function oh(n){_l||(_l=function fm(){return typeof document<"u"?document.body:null}()||{},Kh=!!_l.style&&"WebkitAppearance"in _l.style);let e=!0;return _l.style&&!function xu(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in _l.style,!e&&Kh&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in _l.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return Ql(t,i)}getParentElement(t){return jc(t)}query(t,i,r){return sh(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,u,m=[],v){return new H(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})(),pd=(()=>{class n{static#e=this.NOOP=new ah}return n})();const s_=1e3,pm="ng-enter",a_="ng-leave",mm="ng-trigger",md=".ng-trigger",ip="ng-animating",c_=".ng-animating";function Tu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ch(parseFloat(e[1]),e[2])}function ch(n,e){return"s"===e?n*s_:n}function gm(n,e,t){return n.hasOwnProperty("duration")?n:function _w(n,e,t){let r,s=0,u="";if("string"==typeof n){const m=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===m)return e.push(rt()),{duration:0,delay:0,easing:""};r=ch(parseFloat(m[1]),m[2]);const v=m[3];null!=v&&(s=ch(parseFloat(v),m[4]));const C=m[5];C&&(u=C)}else r=n;if(!t){let m=!1,v=e.length;r<0&&(e.push(function Bt(){return new c.vHH(3100,!1)}()),m=!0),s<0&&(e.push(function Ft(){return new c.vHH(3101,!1)}()),m=!0),m&&e.splice(v,0,rt())}return{duration:r,delay:s,easing:u}}(n,e,t)}function vl(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ay(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function yl(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function lc(n,e,t){e.forEach((i,r)=>{const s=uh(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function Du(n,e){e.forEach((t,i)=>{const r=uh(i);n.style[r]=""})}function lh(n){return Array.isArray(n)?1==n.length?n[0]:ud(n):n}const Su=new RegExp("{{\\s*(.+?)\\s*}}","g");function Xh(n){let e=[];if("string"==typeof n){let t;for(;t=Su.exec(n);)e.push(t[1]);Su.lastIndex=0}return e}function gd(n,e,t){const i=n.toString(),r=i.replace(Su,(s,u)=>{let m=e[u];return null==m&&(t.push(function Ln(n){return new c.vHH(3003,!1)}()),m=""),m.toString()});return r==i?n:r}function Xl(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Jh=/-+([a-z0-9])/g;function uh(n){return n.replace(Jh,(...e)=>e[1].toUpperCase())}function Ws(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Sn(n){return new c.vHH(3004,!1)}()}}function vm(n,e){return window.getComputedStyle(n)[e]}const y="*";function I(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function D(n,e,t){if(":"==n[0]){const v=function k(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Sy(n){return new c.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function hm(n){return new c.vHH(3015,!1)}()),e;const r=i[1],s=i[2],u=i[3];e.push(re(r,u));"<"==s[0]&&!(r==y&&u==y)&&e.push(re(u,r))}(i,t,e)):t.push(n),t}const V=new Set(["true","1"]),Z=new Set(["false","0"]);function re(n,e){const t=V.has(n)||Z.has(n),i=V.has(e)||Z.has(e);return(r,s)=>{let u=n==y||n==r,m=e==y||e==s;return!u&&t&&"boolean"==typeof r&&(u=r?V.has(n):Z.has(n)),!m&&i&&"boolean"==typeof s&&(m=s?V.has(e):Z.has(e)),u&&m}}const _e=new RegExp("s*:selfs*,?","g");function Pe(n,e,t,i){return new ht(n).build(e,t,i)}class ht{constructor(e){this._driver=e}build(e,t,i){const r=new Pn(t);return this._resetContextStyleTimingState(r),Ws(this,lh(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function Ao(){return new c.vHH(3006,!1)}()),e.definitions.forEach(m=>{if(this._resetContextStyleTimingState(t),0==m.type){const v=m,C=v.name;C.toString().split(/\s*,\s*/).forEach(M=>{v.name=M,s.push(this.visitState(v,t))}),v.name=C}else if(1==m.type){const v=this.visitTransition(m,t);i+=v.queryCount,r+=v.depCount,u.push(v)}else t.errors.push(function Ki(){return new c.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:u,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,u=r||{};i.styles.forEach(m=>{m instanceof Map&&m.forEach(v=>{Xh(v).forEach(C=>{u.hasOwnProperty(C)||s.add(C)})})}),s.size&&(Xl(s.values()),t.errors.push(function Iu(n,e){return new c.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Ws(this,lh(e.animation),t);return{type:1,matchers:I(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:bi(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Ws(this,i,t)),options:bi(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(u=>{t.currentTime=i;const m=Ws(this,u,t);return r=Math.max(r,t.currentTime),m});return t.currentTime=r,{type:3,steps:s,options:bi(e.options)}}visitAnimate(e,t){const i=function gi(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return hr(gm(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=hr(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=gm(t,e);return hr(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:dr({});if(5==s.type)r=this.visitKeyframes(s,t);else{let u=e.styles,m=!1;if(!u){m=!0;const C={};i.easing&&(C.easing=i.easing),u=dr(C)}t.currentTime+=i.duration+i.delay;const v=this.visitStyle(u,t);v.isEmptyStep=m,r=v}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let m of r)"string"==typeof m?m===ns?i.push(m):t.errors.push(new c.vHH(3002,!1)):i.push(Ay(m));let s=!1,u=null;return i.forEach(m=>{if(m instanceof Map&&(m.has("easing")&&(u=m.get("easing"),m.delete("easing")),!s))for(let v of m.values())if(v.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((m,v)=>{const C=t.collectedStyles.get(t.currentQuerySelector),M=C.get(v);let L=!0;M&&(s!=r&&s>=M.startTime&&r<=M.endTime&&(t.errors.push(function Fr(n,e,t,i,r){return new c.vHH(3010,!1)}()),L=!1),s=M.startTime),L&&C.set(v,{startTime:s,endTime:r}),t.options&&function l_(n,e,t){const i=e.params||{},r=Xh(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function hn(n){return new c.vHH(3001,!1)}())})}(m,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function gl(){return new c.vHH(3011,!1)}()),i;let s=0;const u=[];let m=!1,v=!1,C=0;const M=e.steps.map(wt=>{const Ot=this._makeStyleAst(wt,t);let Mt=null!=Ot.offset?Ot.offset:function Qn(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ot.styles),Lt=0;return null!=Mt&&(s++,Lt=Ot.offset=Mt),v=v||Lt<0||Lt>1,m=m||Lt<C,C=Lt,u.push(Lt),Ot});v&&t.errors.push(function t_(){return new c.vHH(3012,!1)}()),m&&t.errors.push(function dd(){return new c.vHH(3200,!1)}());const L=e.steps.length;let q=0;s>0&&s<L?t.errors.push(function hd(){return new c.vHH(3202,!1)}()):0==s&&(q=1/(L-1));const ne=L-1,ae=t.currentTime,ye=t.currentAnimateTimings,We=ye.duration;return M.forEach((wt,Ot)=>{const Mt=q>0?Ot==ne?1:q*Ot:u[Ot],Lt=Mt*We;t.currentTime=ae+ye.delay+Lt,ye.duration=Lt,this._validateStyleAst(wt,t),wt.offset=Mt,i.styles.push(wt)}),i}visitReference(e,t){return{type:8,animation:Ws(this,lh(e.animation),t),options:bi(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:bi(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:bi(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function an(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(_e,"")),n=n.replace(/@\*/g,md).replace(/@\w+/g,t=>md+"-"+t.slice(1)).replace(/:animating/g,c_),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,to(t.collectedStyles,t.currentQuerySelector,new Map);const m=Ws(this,lh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:m,originalSelector:e.selector,options:bi(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Gh(){return new c.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:gm(e.timings,t.errors,!0);return{type:12,animation:Ws(this,lh(e.animation),t),timings:i,options:null}}}class Pn{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function bi(n){return n?(n=vl(n)).params&&(n.params=function Xt(n){return n?vl(n):null}(n.params)):n={},n}function hr(n,e,t){return{duration:n,delay:e,easing:t}}function Zs(n,e,t,i,r,s,u=null,m=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:u,subTimeline:m}}class zc{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const tf=new RegExp(":enter","g"),_d=new RegExp(":leave","g");function vd(n,e,t,i,r,s=new Map,u=new Map,m,v,C=[]){return(new My).buildKeyframes(n,e,t,i,r,s,u,m,v,C)}class My{buildKeyframes(e,t,i,r,s,u,m,v,C,M=[]){C=C||new zc;const L=new uc(e,t,C,r,s,M,[]);L.options=v;const q=v.delay?Tu(v.delay):0;L.currentTimeline.delayNextStep(q),L.currentTimeline.setStyles([u],null,L.errors,v),Ws(this,i,L);const ne=L.timelines.filter(ae=>ae.containsAnimation());if(ne.length&&m.size){let ae;for(let ye=ne.length-1;ye>=0;ye--){const We=ne[ye];if(We.element===t){ae=We;break}}ae&&!ae.allowOnlyTimelineStyles()&&ae.setStyles([m],null,L.errors,v)}return ne.length?ne.map(ae=>ae.buildKeyframes()):[Zs(t,[],[],[],0,q,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const u="number"==typeof s?s:Tu(gd(s,r?.params??{},t.errors));i.delayNextStep(u)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const u=null!=i.duration?Tu(i.duration):null,m=null!=i.delay?Tu(i.delay):null;return 0!==u&&e.forEach(v=>{const C=t.appendInstructionToTimeline(v,u,m);s=Math.max(s,C.duration+C.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ws(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ks);const u=Tu(s.delay);r.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Ws(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Tu(e.options.delay):0;e.steps.forEach(u=>{const m=t.createSubContext(e.options);s&&m.delayNextStep(s),Ws(this,u,m),r=Math.max(r,m.currentTimeline.currentTime),i.push(m.currentTimeline)}),i.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return gm(t.params?gd(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,m=t.createSubContext().currentTimeline;m.easing=i.easing,e.styles.forEach(v=>{m.forwardTime((v.offset||0)*s),m.setStyles(v.styles,v.easing,t.errors,t.options),m.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(m),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Tu(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ks);let u=i;const m=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=m.length;let v=null;m.forEach((C,M)=>{t.currentQueryIndex=M;const L=t.createSubContext(e.options,C);s&&L.delayNextStep(s),C===t.element&&(v=L.currentTimeline),Ws(this,e.animation,L),L.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,L.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),m=u*(t.currentQueryTotal-1);let v=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":v=m-v;break;case"full":v=i.currentStaggerTime}const M=t.currentTimeline;v&&M.delayNextStep(v);const L=M.currentTime;Ws(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-L+(r.startTime-i.currentTimeline.startTime)}}const Ks={};class uc{constructor(e,t,i,r,s,u,m,v){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=u,this.timelines=m,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ks,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new Oy(this._driver,t,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Tu(i.duration)),null!=i.delay&&(r.delay=Tu(i.delay));const s=i.params;if(s){let u=r.params;u||(u=this.options.params={}),Object.keys(s).forEach(m=>{(!t||!u.hasOwnProperty(m))&&(u[m]=gd(s[m],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new uc(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ks,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new vO(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,u){let m=[];if(r&&m.push(this.element),e.length>0){e=(e=e.replace(tf,"."+this._enterClassName)).replace(_d,"."+this._leaveClassName);let C=this._driver.query(this.element,e,1!=i);0!==i&&(C=i<0?C.slice(C.length+i,C.length):C.slice(0,i)),m.push(...C)}return!s&&0==m.length&&u.push(function n_(n){return new c.vHH(3014,!1)}()),m}}class Oy{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Oy(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||ns),this._currentKeyframe.set(t,ns);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},u=function yO(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,ns)}else yl(r,t)}),t}(e,this._globalTimelineStyles);for(let[m,v]of u){const C=gd(v,s,i);this._pendingStyles.set(m,C),this._localTimelineStyles.has(m)||this._backFill.set(m,this._globalTimelineStyles.get(m)??ns),this._updateStyle(m,C)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((m,v)=>{const C=yl(m,new Map,this._backFill);C.forEach((M,L)=>{"!"===M?e.add(L):M===ns&&t.add(L)}),i||C.set("offset",v/this.duration),r.push(C)});const s=e.size?Xl(e.values()):[],u=t.size?Xl(t.values()):[];if(i){const m=r[0],v=new Map(m);m.set("offset",0),v.set("offset",1),r=[m,v]}return Zs(this.element,r,s,u,this.duration,this.startTime,this.easing,!1)}}class vO extends Oy{constructor(e,t,i,r,s,u,m=!1){super(e,t,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=m,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=i+t,m=t/u,v=yl(e[0]);v.set("offset",0),s.push(v);const C=yl(e[0]);C.set("offset",hT(m)),s.push(C);const M=e.length-1;for(let L=1;L<=M;L++){let q=yl(e[L]);const ne=q.get("offset");q.set("offset",hT((t+ne*i)/u)),s.push(q)}i=u,t=0,r="",e=s}return Zs(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function hT(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ww{}const Py=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ew extends ww{normalizePropertyName(e,t){return uh(e)}normalizeStyleValue(e,t,i,r){let s="";const u=i.toString().trim();if(Py.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const m=i.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&0==m[1].length&&r.push(function ds(n,e){return new c.vHH(3005,!1)}())}return u+s}}function Ry(n,e,t,i,r,s,u,m,v,C,M,L,q){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:u,timelines:m,queriedElements:v,preStyleProps:C,postStyleProps:M,totalTime:L,errors:q}}const Cw={};class fT{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function mT(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,u,m,v,C,M){const L=[],q=this.ast.options&&this.ast.options.params||Cw,ae=this.buildStyles(i,m&&m.params||Cw,L),ye=v&&v.params||Cw,We=this.buildStyles(r,ye,L),wt=new Set,Ot=new Map,Mt=new Map,Lt="void"===r,Mn={params:op(ye,q),delay:this.ast.options?.delay},Rn=M?[]:vd(e,t,this.ast.animation,s,u,ae,We,Mn,C,L);let Ui=0;if(Rn.forEach(Xc=>{Ui=Math.max(Xc.duration+Xc.delay,Ui)}),L.length)return Ry(t,this._triggerName,i,r,Lt,ae,We,[],[],Ot,Mt,Ui,L);Rn.forEach(Xc=>{const lm=Xc.element,X6=to(Ot,lm,new Set);Xc.preStyleProps.forEach(Ty=>X6.add(Ty));const uT=to(Mt,lm,new Set);Xc.postStyleProps.forEach(Ty=>uT.add(Ty)),lm!==t&&wt.add(lm)});const Wo=Xl(wt.values());return Ry(t,this._triggerName,i,r,Lt,ae,We,Rn,Wo,Ot,Mt,Ui)}}function op(n,e){const t=vl(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class gT{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=vl(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!==u&&(r[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,m)=>{u&&(u=gd(u,r,t));const v=this.normalizer.normalizePropertyName(m,t);u=this.normalizer.normalizeStyleValue(m,v,u,t),i.set(m,u)})}),i}}class wO{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new gT(r.style,r.options&&r.options.params||{},i))}),u_(this.states,"true","1"),u_(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new fT(e,r,this.states))}),this.fallbackTransition=function _2(n,e,t){return new fT(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,m)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(u=>u.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function u_(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const EO=new zc;class vT{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=Pe(this._driver,t,i,[]);if(i.length)throw function fd(n){return new c.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=pn(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let u;const m=new Map;if(s?(u=vd(this._driver,t,s,pm,a_,new Map,new Map,i,EO,r),u.forEach(M=>{const L=to(m,M.element,new Map);M.postStyleProps.forEach(q=>L.set(q,null))})):(r.push(function r_(){return new c.vHH(3300,!1)}()),u=[]),r.length)throw function Wh(n){return new c.vHH(3504,!1)}();m.forEach((M,L)=>{M.forEach((q,ne)=>{M.set(ne,this._driver.computeStyle(L,ne,ns))})});const C=Nt(u.map(M=>{const L=m.get(M.element);return this._buildPlayer(M,new Map,L)}));return this._playersById.set(e,C),C.onDestroy(()=>this.destroy(e)),this.players.push(C),C}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function A(n){return new c.vHH(3301,!1)}();return t}listen(e,t,i,r){const s=pa(t,"","","");return Gn(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Iw="ng-animate-queued",d_="ng-animate-disabled",wT=[],Ny={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Fy={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Jl="__ng_removed";class f_{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function CT(n){return n??null}(i?e.value:e),i){const s=vl(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const hh="void",xw=new f_(hh);class ET{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,eu(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function w(n,e){return new c.vHH(3302,!1)}();if(null==i||0==i.length)throw function x(n){return new c.vHH(3303,!1)}();if(!function Ly(n){return"start"==n||"done"==n}(i))throw function P(n,e){return new c.vHH(3400,!1)}();const s=to(this._elementListeners,e,[]),u={name:t,phase:i,callback:r};s.push(u);const m=to(this._engine.statesByElement,e,new Map);return m.has(t)||(eu(e,mm),eu(e,mm+"-"+t),m.set(t,xw)),()=>{this._engine.afterFlush(()=>{const v=s.indexOf(u);v>=0&&s.splice(v,1),this._triggers.has(t)||m.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function $(n){return new c.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),u=new Tw(this.id,t,e);let m=this._engine.statesByElement.get(e);m||(eu(e,mm),eu(e,mm+"-"+t),this._engine.statesByElement.set(e,m=new Map));let v=m.get(t);const C=new f_(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&v&&C.absorbOptions(v.options),m.set(t,C),v||(v=xw),C.value!==hh&&v.value===C.value){if(!function ym(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(v.params,C.params)){const ye=[],We=s.matchStyles(v.value,v.params,ye),wt=s.matchStyles(C.value,C.params,ye);ye.length?this._engine.reportError(ye):this._engine.afterFlush(()=>{Du(e,We),lc(e,wt)})}return}const q=to(this._engine.playersByElement,e,[]);q.forEach(ye=>{ye.namespaceId==this.id&&ye.triggerName==t&&ye.queued&&ye.destroy()});let ne=s.matchTransition(v.value,C.value,e,C.params),ae=!1;if(!ne){if(!r)return;ne=s.fallbackTransition,ae=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:ne,fromState:v,toState:C,player:u,isFallbackTransition:ae}),ae||(eu(e,Iw),u.onStart(()=>{m_(e,Iw)})),u.onDone(()=>{let ye=this.players.indexOf(u);ye>=0&&this.players.splice(ye,1);const We=this._engine.playersByElement.get(e);if(We){let wt=We.indexOf(u);wt>=0&&We.splice(wt,1)}}),this.players.push(u),q.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,md,!0);i.forEach(r=>{if(r[Jl])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(u=>u.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const m=[];if(s.forEach((v,C)=>{if(u.set(C,v.value),this._triggers.has(C)){const M=this.trigger(e,C,hh,r);M&&m.push(M)}}),m.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),i&&Nt(m).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const u=s.name;if(r.has(u))return;r.add(u);const v=this._triggers.get(u).fallbackTransition,C=i.get(u)||xw,M=new f_(hh),L=new Tw(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:v,fromState:C,toState:M,player:L,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let u=e;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Jl];(!s||s===Ny)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){eu(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,u=this._elementListeners.get(s);u&&u.forEach(m=>{if(m.name==i.triggerName){const v=pa(s,i.triggerName,i.fromState.value,i.toState.value);v._data=e,Gn(i.player,m.phase,v,m.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class CO{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new ET(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let u=!1,m=this.driver.getParentElement(t);for(;m;){const v=r.get(m);if(v){const C=i.indexOf(v);i.splice(C+1,0,e),u=!0;break}m=this.driver.getParentElement(m)}u||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(p_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!p_(t))return;const s=t[Jl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),eu(e,d_)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),m_(e,d_))}removeNode(e,t,i){if(p_(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Jl]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return p_(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,md,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,c_,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Nt(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Jl];if(t&&t.setForRemoval){if(e[Jl]=Ny,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(d_)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)eu(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Nt(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function X(n){return new c.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new zc,r=[],s=new Map,u=[],m=new Map,v=new Map,C=new Map,M=new Set;this.disabledNodes.forEach(wn=>{M.add(wn);const Vn=this.driver.query(wn,".ng-animate-queued",!0);for(let Yn=0;Yn<Vn.length;Yn++)M.add(Vn[Yn])});const L=this.bodyNode,q=Array.from(this.statesByElement.keys()),ne=IT(q,this.collectedEnterElements),ae=new Map;let ye=0;ne.forEach((wn,Vn)=>{const Yn=pm+ye++;ae.set(Vn,Yn),wn.forEach(er=>eu(er,Yn))});const We=[],wt=new Set,Ot=new Set;for(let wn=0;wn<this.collectedLeaveElements.length;wn++){const Vn=this.collectedLeaveElements[wn],Yn=Vn[Jl];Yn&&Yn.setForRemoval&&(We.push(Vn),wt.add(Vn),Yn.hasAnimation?this.driver.query(Vn,".ng-star-inserted",!0).forEach(er=>wt.add(er)):Ot.add(Vn))}const Mt=new Map,Lt=IT(q,Array.from(wt));Lt.forEach((wn,Vn)=>{const Yn=a_+ye++;Mt.set(Vn,Yn),wn.forEach(er=>eu(er,Yn))}),e.push(()=>{ne.forEach((wn,Vn)=>{const Yn=ae.get(Vn);wn.forEach(er=>m_(er,Yn))}),Lt.forEach((wn,Vn)=>{const Yn=Mt.get(Vn);wn.forEach(er=>m_(er,Yn))}),We.forEach(wn=>{this.processLeaveNode(wn)})});const Mn=[],Rn=[];for(let wn=this._namespaceList.length-1;wn>=0;wn--)this._namespaceList[wn].drainQueuedTransitions(t).forEach(Yn=>{const er=Yn.player,Za=Yn.element;if(Mn.push(er),this.collectedEnterElements.length){const Jc=Za[Jl];if(Jc&&Jc.setForMove){if(Jc.previousTriggersValues&&Jc.previousTriggersValues.has(Yn.triggerName)){const Dy=Jc.previousTriggersValues.get(Yn.triggerName),Hd=this.statesByElement.get(Yn.element);if(Hd&&Hd.has(Yn.triggerName)){const _O=Hd.get(Yn.triggerName);_O.value=Dy,Hd.set(Yn.triggerName,_O)}}return void er.destroy()}}const qf=!L||!this.driver.containsElement(L,Za),Wu=Mt.get(Za),Jg=ae.get(Za),as=this._buildInstruction(Yn,i,Jg,Wu,qf);if(as.errors&&as.errors.length)return void Rn.push(as);if(qf)return er.onStart(()=>Du(Za,as.fromStyles)),er.onDestroy(()=>lc(Za,as.toStyles)),void r.push(er);if(Yn.isFallbackTransition)return er.onStart(()=>Du(Za,as.fromStyles)),er.onDestroy(()=>lc(Za,as.toStyles)),void r.push(er);const t$=[];as.timelines.forEach(Jc=>{Jc.stretchStartingKeyframe=!0,this.disabledNodes.has(Jc.element)||t$.push(Jc)}),as.timelines=t$,i.append(Za,as.timelines),u.push({instruction:as,player:er,element:Za}),as.queriedElements.forEach(Jc=>to(m,Jc,[]).push(er)),as.preStyleProps.forEach((Jc,Dy)=>{if(Jc.size){let Hd=v.get(Dy);Hd||v.set(Dy,Hd=new Set),Jc.forEach((_O,p2)=>Hd.add(p2))}}),as.postStyleProps.forEach((Jc,Dy)=>{let Hd=C.get(Dy);Hd||C.set(Dy,Hd=new Set),Jc.forEach((_O,p2)=>Hd.add(p2))})});if(Rn.length){const wn=[];Rn.forEach(Vn=>{wn.push(function Je(n,e){return new c.vHH(3505,!1)}())}),Mn.forEach(Vn=>Vn.destroy()),this.reportError(wn)}const Ui=new Map,Wo=new Map;u.forEach(wn=>{const Vn=wn.element;i.has(Vn)&&(Wo.set(Vn,Vn),this._beforeAnimationBuild(wn.player.namespaceId,wn.instruction,Ui))}),r.forEach(wn=>{const Vn=wn.element;this._getPreviousPlayers(Vn,!1,wn.namespaceId,wn.triggerName,null).forEach(er=>{to(Ui,Vn,[]).push(er),er.destroy()})});const Xc=We.filter(wn=>g_(wn,v,C)),lm=new Map;sp(lm,this.driver,Ot,C,ns).forEach(wn=>{g_(wn,v,C)&&Xc.push(wn)});const uT=new Map;ne.forEach((wn,Vn)=>{sp(uT,this.driver,new Set(wn),v,"!")}),Xc.forEach(wn=>{const Vn=lm.get(wn),Yn=uT.get(wn);lm.set(wn,new Map([...Vn?.entries()??[],...Yn?.entries()??[]]))});const Ty=[],J6=[],e$={};u.forEach(wn=>{const{element:Vn,player:Yn,instruction:er}=wn;if(i.has(Vn)){if(M.has(Vn))return Yn.onDestroy(()=>lc(Vn,er.toStyles)),Yn.disabled=!0,Yn.overrideTotalTime(er.totalTime),void r.push(Yn);let Za=e$;if(Wo.size>1){let Wu=Vn;const Jg=[];for(;Wu=Wu.parentNode;){const as=Wo.get(Wu);if(as){Za=as;break}Jg.push(Wu)}Jg.forEach(as=>Wo.set(as,Za))}const qf=this._buildAnimation(Yn.namespaceId,er,Ui,s,uT,lm);if(Yn.setRealPlayer(qf),Za===e$)Ty.push(Yn);else{const Wu=this.playersByElement.get(Za);Wu&&Wu.length&&(Yn.parentPlayer=Nt(Wu)),r.push(Yn)}}else Du(Vn,er.fromStyles),Yn.onDestroy(()=>lc(Vn,er.toStyles)),J6.push(Yn),M.has(Vn)&&r.push(Yn)}),J6.forEach(wn=>{const Vn=s.get(wn.element);if(Vn&&Vn.length){const Yn=Nt(Vn);wn.setRealPlayer(Yn)}}),r.forEach(wn=>{wn.parentPlayer?wn.syncPlayerEvents(wn.parentPlayer):wn.destroy()});for(let wn=0;wn<We.length;wn++){const Vn=We[wn],Yn=Vn[Jl];if(m_(Vn,a_),Yn&&Yn.hasAnimation)continue;let er=[];if(m.size){let qf=m.get(Vn);qf&&qf.length&&er.push(...qf);let Wu=this.driver.query(Vn,c_,!0);for(let Jg=0;Jg<Wu.length;Jg++){let as=m.get(Wu[Jg]);as&&as.length&&er.push(...as)}}const Za=er.filter(qf=>!qf.destroyed);Za.length?xO(this,Vn,Za):this.processLeaveNode(Vn)}return We.length=0,Ty.forEach(wn=>{this.players.push(wn),wn.onDone(()=>{wn.destroy();const Vn=this.players.indexOf(wn);this.players.splice(Vn,1)}),wn.play()}),Ty}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let u=[];if(t){const m=this.playersByQueriedElement.get(e);m&&(u=m)}else{const m=this.playersByElement.get(e);if(m){const v=!s||s==hh;m.forEach(C=>{C.queued||!v&&C.triggerName!=r||u.push(C)})}}return(i||r)&&(u=u.filter(m=>!(i&&i!=m.namespaceId||r&&r!=m.triggerName))),u}_beforeAnimationBuild(e,t,i){const s=t.element,u=t.isRemovalTransition?void 0:e,m=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const C=v.element,M=C!==s,L=to(i,C,[]);this._getPreviousPlayers(C,M,u,m,t.toState).forEach(ne=>{const ae=ne.getRealPlayer();ae.beforeDestroy&&ae.beforeDestroy(),ne.destroy(),L.push(ne)})}Du(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,u){const m=t.triggerName,v=t.element,C=[],M=new Set,L=new Set,q=t.timelines.map(ae=>{const ye=ae.element;M.add(ye);const We=ye[Jl];if(We&&We.removedBeforeQueried)return new H(ae.duration,ae.delay);const wt=ye!==v,Ot=function Dw(n){const e=[];return xT(n,e),e}((i.get(ye)||wT).map(Ui=>Ui.getRealPlayer())).filter(Ui=>!!Ui.element&&Ui.element===ye),Mt=s.get(ye),Lt=u.get(ye),Mn=pn(this._normalizer,ae.keyframes,Mt,Lt),Rn=this._buildPlayer(ae,Mn,Ot);if(ae.subTimeline&&r&&L.add(ye),wt){const Ui=new Tw(e,m,ye);Ui.setRealPlayer(Rn),C.push(Ui)}return Rn});C.forEach(ae=>{to(this.playersByQueriedElement,ae.element,[]).push(ae),ae.onDone(()=>function IO(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,ae.element,ae))}),M.forEach(ae=>eu(ae,ip));const ne=Nt(q);return ne.onDestroy(()=>{M.forEach(ae=>m_(ae,ip)),lc(v,t.toStyles)}),L.forEach(ae=>{to(r,ae,[]).push(ne)}),ne}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new H(e.duration,e.delay)}}class Tw{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new H,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Gn(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){to(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function p_(n){return n&&1===n.nodeType}function Uy(n,e){const t=n.style.display;return n.style.display=e??"none",t}function sp(n,e,t,i,r){const s=[];t.forEach(v=>s.push(Uy(v)));const u=[];i.forEach((v,C)=>{const M=new Map;v.forEach(L=>{const q=e.computeStyle(C,L,r);M.set(L,q),(!q||0==q.length)&&(C[Jl]=Fy,u.push(C))}),n.set(C,M)});let m=0;return t.forEach(v=>Uy(v,s[m++])),u}function IT(n,e){const t=new Map;if(n.forEach(m=>t.set(m,[])),0==e.length)return t;const r=new Set(e),s=new Map;function u(m){if(!m)return 1;let v=s.get(m);if(v)return v;const C=m.parentNode;return v=t.has(C)?C:r.has(C)?1:u(C),s.set(m,v),v}return e.forEach(m=>{const v=u(m);1!==v&&t.get(v).push(m)}),t}function eu(n,e){n.classList?.add(e)}function m_(n,e){n.classList?.remove(e)}function xO(n,e,t){Nt(t).onDone(()=>n.processLeaveNode(e))}function xT(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof oe?xT(i.players,e):e.push(i)}}function g_(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class bm{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new CO(e,t,i),this._timelineEngine=new vT(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const u=e+"-"+r;let m=this._triggerCache[u];if(!m){const v=[],M=Pe(this._driver,s,v,[]);if(v.length)throw function Yl(n,e){return new c.vHH(3404,!1)}();m=function _T(n,e,t){return new wO(n,e,t)}(r,M,this._normalizer),this._triggerCache[u]=m}this._transitionEngine.registerTrigger(t,r,m)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,u]=tp(i);this._timelineEngine.command(s,t,u,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[u,m]=tp(i);return this._timelineEngine.listen(u,t,m,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let DT=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&lc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(lc(this._element,this._initialStyles),this._endStyles&&(lc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Du(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Du(this._element,this._endStyles),this._endStyles=null),lc(this._element,this._initialStyles),this._state=3)}}return n})();function Vy(n){let e=null;return n.forEach((t,i)=>{(function ap(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class ST{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:vm(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class TO{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Ql(e,t)}getParentElement(e){return jc(e)}query(e,t,i){return sh(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,u=[]){const v={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(v.easing=s);const C=new Map,M=u.filter(ne=>ne instanceof ST);(function Au(n,e){return 0===n||0===e})(i,r)&&M.forEach(ne=>{ne.currentSnapshot.forEach((ae,ye)=>C.set(ye,ae))});let L=function Qh(n){return n.length?n[0]instanceof Map?n:n.map(e=>Ay(e)):[]}(t).map(ne=>yl(ne));L=function yw(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,u)=>{i.has(u)||r.push(u),i.set(u,s)}),r.length)for(let s=1;s<e.length;s++){let u=e[s];r.forEach(m=>u.set(m,vm(n,m)))}}return e}(e,L,C);const q=function TT(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Vy(e[0]),e.length>1&&(i=Vy(e[e.length-1]))):e instanceof Map&&(t=Vy(e)),t||i?new DT(n,t,i):null}(e,L);return new ST(e,L,v,q)}}let DO=(()=>{class n extends rh{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?ud(t):t;return yd(this._renderer,null,i,"register",[r]),new SO(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(c.FYo),c.LFG(Re))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class SO extends hl{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new AO(this._id,e,t||{},this._renderer)}}class AO{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return yd(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function yd(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const AT="@.disabled";let MO=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,u)=>{const m=u?.parentNode(s);m&&u.removeChild(m,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let M=this._rendererCache.get(s);return M||(M=new MT("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,M)),M}const u=i.id,m=i.id+"-"+this._currentId;this._currentId++,this.engine.register(m,t);const v=M=>{Array.isArray(M)?M.forEach(v):this.engine.registerTrigger(u,m,t,M.name,M)};return i.data.animation.forEach(v),new OO(this,m,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,m]=s;u(m)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(c.FYo),c.LFG(bm),c.LFG(c.R0b))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();class MT{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==AT?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class OO extends MT{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==AT?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function PO(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function RO(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,u,m=>{this.factory.scheduleListenerCallback(m._data||-1,i,m)})}return this.delegate.listen(e,t,i)}}let OT=(()=>{class n extends bm{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re),c.LFG(pd),c.LFG(ww),c.LFG(c.z2F))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const PT=[{provide:rh,useClass:DO},{provide:ww,useFactory:function kO(){return new Ew}},{provide:bm,useClass:OT},{provide:c.FYo,useFactory:function NO(n,e,t){return new MO(n,e,t)},deps:[sl,bm,c.R0b]}],Sw=[{provide:pd,useFactory:()=>new TO},{provide:c.QbO,useValue:"BrowserAnimations"},...PT],__=[{provide:pd,useClass:ah},{provide:c.QbO,useValue:"NoopAnimations"},...PT];let ph=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?__:Sw}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:Sw,imports:[Fc]})}return n})();var bd=Q(4097),An=Q(2793);class wm{constructor(e){return e}}class Aw{constructor(){return(0,bd.C6)()}}const kT=new c.OlP("angularfire2._apps"),v2={provide:wm,useFactory:function Mw(n){return n&&1===n.length?n[0]:new wm((0,bd.Mq)())},deps:[[new c.FiY,kT]]},NT={provide:Aw,deps:[[new c.FiY,kT]]};function UO(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new wm(i)}}let VO=(()=>{class n{constructor(t){(0,bd.KN)("angularfire",An.q4.full,"core"),(0,bd.KN)("angularfire",An.q4.full,"app"),(0,bd.KN)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[v2,NT]}),n})();function BO(n,...e){return{ngModule:VO,providers:[{provide:kT,useFactory:UO(n),multi:!0,deps:[c.R0b,c.zs3,An.HU,...e]}]}}const FT=(0,An.u3)(bd.ZF,!0);var dt=Q(5861),Ds=Q(534),tu=Q(4537),ie=Q(9058),Mu=Q(7879);const Pw=new Map,UT={activated:!1,tokenObservers:[]},zO={initialized:!1,enabled:!1};function Mo(n){return Pw.get(n)||Object.assign({},UT)}function Rw(){return zO}const cp="https://content-firebaseappcheck.googleapis.com/v1",VT="exchangeDebugToken",kw={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class BT{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,dt.Z)(function*(){t.stop();try{t.pending=new ie.BH,yield function HO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ie.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ys=new ie.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function zT(n){if(!Mo(n).activated)throw Ys.create("use-before-activation",{appName:n.name})}function Cm(n,e){return zy.apply(this,arguments)}function zy(){return(zy=(0,dt.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const L=yield r.getHeartbeatsHeader();L&&(i["X-Firebase-Client"]=L)}const s={method:"POST",body:JSON.stringify(e),headers:i};let u,m;try{u=yield fetch(n,s)}catch(L){throw Ys.create("fetch-network-error",{originalErrorMessage:L?.message})}if(200!==u.status)throw Ys.create("fetch-status-error",{httpStatus:u.status});try{m=yield u.json()}catch(L){throw Ys.create("fetch-parse-error",{originalErrorMessage:L?.message})}const v=m.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(v[1]),M=Date.now();return{token:m.token,expireTimeMillis:M+C,issuedAtTimeMillis:M}})).apply(this,arguments)}function $T(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${cp}/projects/${t}/apps/${i}:${VT}?key=${r}`,body:{debug_token:e}}}const Fw="firebase-app-check-database",Hy=1,b_="firebase-app-check-store";let dp=null;function nf(){return(nf=(0,dt.Z)(function*(n,e){const i=(yield function Ou(){return dp||(dp=new Promise((n,e)=>{try{const t=indexedDB.open(Fw,Hy);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Ys.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(b_,{keyPath:"compositeKey"})}}catch(t){e(Ys.create("storage-open",{originalErrorMessage:t?.message}))}}),dp)}()).transaction(b_,"readwrite"),s=i.objectStore(b_).put({compositeKey:n,value:e});return new Promise((u,m)=>{s.onsuccess=v=>{u()},i.onerror=v=>{var C;m(Ys.create("storage-set",{originalErrorMessage:null===(C=v.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const hp=new Mu.Yd("@firebase/app-check");function Gy(n,e){return(0,ie.hl)()?function Lw(n,e){return function Uw(n,e){return nf.apply(this,arguments)}(function GT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{hp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zw(){return Rw().enabled}function Hw(){return $w.apply(this,arguments)}function $w(){return($w=(0,dt.Z)(function*(){const n=Rw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const C2={error:"UNKNOWN_ERROR"};function Wy(n){return ie.US.encodeString(JSON.stringify(n),!1)}function Zy(n){return w_.apply(this,arguments)}function w_(){return(w_=(0,dt.Z)(function*(n,e=!1){const t=n.app;zT(t);const i=Mo(t);let s,r=i.token;if(r&&!sf(r)&&(i.token=void 0,r=void 0),!r){const v=yield i.cachedTokenPromise;v&&(sf(v)?r=v:yield Gy(t,void 0))}if(!e&&r&&sf(r))return{token:r.token};let m,u=!1;if(zw()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Cm($T(t,yield Hw()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);const v=yield i.exchangeTokenPromise;return yield Gy(t,v),i.token=v,{token:v.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),r=yield Mo(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?hp.warn(v.message):hp.error(v),s=v}return r?s?m=sf(r)?{token:r.token,internalError:s}:Qy(s):(m={token:r.token},i.token=r,yield Gy(t,r)):m=Qy(s),u&&function fp(n,e){const t=Mo(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,m),m})).apply(this,arguments)}function Ky(n){return rf.apply(this,arguments)}function rf(){return(rf=(0,dt.Z)(function*(n){const e=n.app;zT(e);const{provider:t}=Mo(e);if(zw()){const i=yield Hw(),{token:r}=yield Cm($T(e,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield t.getToken();return{token:i}}})).apply(this,arguments)}function C_(n,e){const t=Mo(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Im(n){const{app:e}=n,t=Mo(e);let i=t.tokenRefresher;i||(i=function Yy(n){const{app:e}=n;return new BT((0,dt.Z)(function*(){let i;if(i=Mo(e).token?yield Zy(n,!0):yield Zy(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Mo(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},kw.RETRIAL_MIN_WAIT,kw.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function sf(n){return n.expireTimeMillis-Date.now()>0}function Qy(n){return{token:Wy(C2),error:n}}class Xy{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mo(this.app);for(const t of e)C_(this.app,t.next);return Promise.resolve()}}const Tm="app-check-internal";!function JO(){(0,Ds._registerComponent)(new tu.wA("app-check",n=>function I2(n,e){return new Xy(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Tm).initialize()})),(0,Ds._registerComponent)(new tu.wA(Tm,n=>function qw(n){return{getToken:e=>Zy(n,e),getLimitedUseToken:()=>Ky(n),addTokenListener:e=>function E_(n,e,t,i){const{app:r}=n,s=Mo(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&sf(s.token)){const m=s.token;Promise.resolve().then(()=>{t({token:m.token}),Im(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Im(n))}(n,"INTERNAL",e),removeTokenListener:e=>C_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ds.registerVersion)("@firebase/app-check","0.8.0")}();class pp{constructor(){return(0,An.vb)("app-check")}}typeof window<"u"&&window;var mp=Q(6710);function iD(n){return new rr.y(function(e){return{unsubscribe:(0,mp.x)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}function nu(n){return new rr.y(function(e){return{unsubscribe:(0,mp.v)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class gp{constructor(e){return e}}class wd{constructor(){return(0,An.vb)("auth")}}const eE=new c.OlP("angularfire2.auth-instances");function rP(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new gp(i)}}const tE={provide:wd,deps:[[new c.FiY,eE]]},Ed={provide:gp,useFactory:function P2(n,e){const t=(0,An.JM)("auth",n,e);return t&&new gp(t)},deps:[[new c.FiY,eE],wm]};let oD=(()=>{class n{constructor(){(0,bd.KN)("angularfire",An.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Ed,tE]}),n})();function oP(n,...e){return{ngModule:oD,providers:[{provide:eE,useFactory:rP(n),multi:!0,deps:[c.R0b,c.zs3,An.HU,Aw,[new c.FiY,pp],...e]}]}}const R2=(0,An.u3)(iD,!0),Qs=(0,An.u3)(nu,!0),cD=(0,An.u3)(mp.a8,!0),lP=(0,An.u3)(mp.o,!0),G2=(0,An.u3)(mp.a9,!0),Dm=(0,An.u3)(mp.ai,!0);var $t,Sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bl={},rb=rb||{},Wn=Sm||self;function Am(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function _p(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var A_="closure_uid_"+(1e9*Math.random()>>>0),TP=0;function DP(n,e,t){return n.call.apply(n.bind,arguments)}function SP(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function ma(n,e,t){return(ma=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?DP:SP).apply(null,arguments)}function ob(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Xs(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var u=Array(arguments.length-2),m=2;m<arguments.length;m++)u[m-2]=arguments[m];return e.prototype[r].apply(i,u)}}function cf(){this.s=this.s,this.o=this.o}cf.prototype.s=!1,cf.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function uD(n){Object.prototype.hasOwnProperty.call(n,A_)&&n[A_]||(n[A_]=++TP)}(this)},cf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function sb(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function dD(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Am(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let u=0;u<s;u++)n[r+u]=i[u]}else n.push(i)}}function Va(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Va.prototype.h=function(){this.defaultPrevented=!0};var wl=function(){if(!Wn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Wn.addEventListener("test",()=>{},e),Wn.removeEventListener("test",()=>{},e)}catch{}return n}();function M_(n){return/^[\s\xa0]*$/.test(n)}function ab(){var n=Wn.navigator;return n&&(n=n.userAgent)?n:""}function mh(n){return-1!=ab().indexOf(n)}function O_(n){return O_[" "](n),n}O_[" "]=function(){};var sE,n,MP=mh("Opera"),Mm=mh("Trident")||mh("MSIE"),fD=mh("Edge"),cb=fD||Mm,pD=mh("Gecko")&&!(-1!=ab().toLowerCase().indexOf("webkit")&&!mh("Edge"))&&!(mh("Trident")||mh("MSIE"))&&!mh("Edge"),OP=-1!=ab().toLowerCase().indexOf("webkit")&&!mh("Edge");function lb(){var n=Wn.document;return n?n.documentMode:void 0}e:{var aE="",cE=(n=ab(),pD?/rv:([^\);]+)(\)|;)/.exec(n):fD?/Edge\/([\d\.]+)/.exec(n):Mm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):OP?/WebKit\/(\S+)/.exec(n):MP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(cE&&(aE=cE?cE[1]:""),Mm){var lE=lb();if(null!=lE&&lE>parseFloat(aE)){sE=String(lE);break e}}sE=aE}var dE=Wn.document&&Mm&&(lb()||parseInt(sE,10))||void 0;function P_(n,e){if(Va.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pD){e:{try{O_(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&P_.$.h.call(this)}}Xs(P_,Va);var mD={2:"touch",3:"pen",4:"mouse"};P_.prototype.h=function(){P_.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var R_="closure_listenable_"+(1e6*Math.random()|0),gD=0;function _D(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++gD,this.fa=this.ia=!1}function vp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function k_(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function hE(n){const e={};for(const t in n)e[t]=n[t];return e}const fE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pE(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<fE.length;s++)t=fE[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function N_(n){this.src=n,this.g={},this.h=0}function F_(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=oE(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(vp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ru(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}N_.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Ru(n,e,i,r);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new _D(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var mE="closure_lm_"+(1e6*Math.random()|0),gE={};function ub(n,e,t,i,r){if(i&&i.once)return bD(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ub(n,e[s],t,i,r);return null}return t=hb(t),n&&n[R_]?n.O(e,t,_p(i)?!!i.capture:!!i,r):vD(n,e,t,!1,i,r)}function vD(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var u=_p(r)?!!r.capture:!!r,m=wD(n);if(m||(n[mE]=m=new N_(n)),(t=m.add(e,t,i,u,s)).proxy)return t;if(i=function yD(){const e=db;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)wl||(r=u),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(_E(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function bD(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)bD(n,e[s],t,i,r);return null}return t=hb(t),n&&n[R_]?n.P(e,t,_p(i)?!!i.capture:!!i,r):vD(n,e,t,!0,i,r)}function L_(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)L_(n,e[s],t,i,r);else i=_p(i)?!!i.capture:!!i,t=hb(t),n&&n[R_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ru(s=n.g[e],t,i,r))&&(vp(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=wD(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ru(e,t,i,r)),(t=-1<n?e[n]:null)&&yp(t))}function yp(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[R_])F_(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(_E(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=wD(e))?(F_(t,n),0==t.h&&(t.src=null,e[mE]=null)):vp(n)}}}function _E(n){return n in gE?gE[n]:gE[n]="on"+n}function db(n,e){if(n.fa)n=!0;else{e=new P_(e,this);var t=n.listener,i=n.la||n.src;n.ia&&yp(n),n=t.call(i,e)}return n}function wD(n){return(n=n[mE])instanceof N_?n:null}var vE="__closure_events_fn_"+(1e9*Math.random()>>>0);function hb(n){return"function"==typeof n?n:(n[vE]||(n[vE]=function(e){return n.handleEvent(e)}),n[vE])}function Ss(){cf.call(this),this.i=new N_(this),this.S=this,this.J=null}function ga(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new Va(e,n);else if(e instanceof Va)e.target=e.target||n;else{var r=e;pE(e=new Va(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];r=fb(u,i,!0,e)&&r}if(r=fb(u=e.g=n,i,!0,e)&&r,r=fb(u,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=fb(u=e.g=t[s],i,!1,e)&&r}function fb(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.fa&&u.capture==t){var m=u.listener,v=u.la||u.src;u.ia&&F_(n.i,u),r=!1!==m.call(v,i)&&r}}return r&&!i.defaultPrevented}Xs(Ss,cf),Ss.prototype[R_]=!0,Ss.prototype.removeEventListener=function(n,e,t,i){L_(this,n,e,t,i)},Ss.prototype.N=function(){if(Ss.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)vp(t[i]);delete n.g[e],n.h--}}this.J=null},Ss.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Ss.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var pb=Wn.JSON.stringify;function U_(){var n=bE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var yE=new class ED{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new CD,n=>n.reset());class CD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function RP(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function kP(n){Wn.setTimeout(()=>{throw n},0)}let gh,V_=!1,bE=new class PP{constructor(){this.h=this.g=null}add(e,t){const i=yE.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},ID=()=>{const n=Wn.Promise.resolve(void 0);gh=()=>{n.then(NP)}};var NP=()=>{for(var n;n=U_();){try{n.h.call(n.g)}catch(t){kP(t)}var e=yE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}V_=!1};function mb(n,e){Ss.call(this),this.h=n||1,this.g=e||Wn,this.j=ma(this.qb,this),this.l=Date.now()}function wE(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function EE(n,e,t){if("function"==typeof n)t&&(n=ma(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ma(n.handleEvent,n)}return 2147483647<Number(e)?-1:Wn.setTimeout(n,e||0)}function xD(n){n.g=EE(()=>{n.g=null,n.i&&(n.i=!1,xD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Xs(mb,Ss),($t=mb.prototype).ga=!1,$t.T=null,$t.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ga(this,"tick"),this.ga&&(wE(this),this.start()))}},$t.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$t.N=function(){mb.$.N.call(this),wE(this),delete this.g};class TD extends cf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xD(this)}N(){super.N(),this.g&&(Wn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bp(n){cf.call(this),this.h=n,this.g={}}Xs(bp,cf);var DD=[];function B_(n,e,t,i){Array.isArray(t)||(t&&(DD[0]=t.toString()),t=DD);for(var r=0;r<t.length;r++){var s=ub(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function SD(n){k_(n.g,function(e,t){this.g.hasOwnProperty(t)&&yp(e)},n),n.g={}}function gb(){this.g=!0}function Om(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function VP(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<r.length;u++)r[u]=""}}}return pb(t)}catch{return e}}(n,t)+(i?" "+i:"")})}bp.prototype.N=function(){bp.$.N.call(this),SD(this)},bp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gb.prototype.Ea=function(){this.g=!1},gb.prototype.info=function(){};var lf={},CE=null;function _b(){return CE=CE||new Ss}function BP(n){Va.call(this,lf.Ta,n)}function Pm(n){const e=_b();ga(e,new BP(e))}function IE(n,e){Va.call(this,lf.STAT_EVENT,n),this.stat=e}function Hc(n){const e=_b();ga(e,new IE(e,n))}function j_(n,e){Va.call(this,lf.Ua,n),this.size=e}function z_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Wn.setTimeout(function(){n()},e)}lf.Ta="serverreachability",Xs(BP,Va),lf.STAT_EVENT="statevent",Xs(IE,Va),lf.Ua="timingevent",Xs(j_,Va);var vb={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function xE(){}function Rm(){}xE.prototype.h=null;var $c,hs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _h(){Va.call(this,"d")}function km(){Va.call(this,"c")}function Nm(){}function Cd(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new bp(this),this.P=Fm,this.V=new mb(n=cb?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wp}function wp(){this.i=null,this.g="",this.h=!1}Xs(_h,Va),Xs(km,Va),Xs(Nm,xE),Nm.prototype.g=function(){return new XMLHttpRequest},Nm.prototype.i=function(){return{}},$c=new Nm;var Fm=45e3,uf={},vh={};function df(n,e,t){n.L=1,n.v=Cb(yh(e)),n.s=t,n.S=!0,Ep(n,null)}function Ep(n,e){n.G=Date.now(),Lm(n),n.A=yh(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),FD(t.i,"t",i),n.C=0,t=n.l.J,n.h=new wp,n.g=GE(n.l,t?e:null,!n.s),0<n.O&&(n.M=new TD(ma(n.Pa,n,n.g),n.O)),B_(n.U,n.g,"readystatechange",n.nb),e=n.I?hE(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Pm(),function FP(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var u="",m=s.split("&"),v=0;v<m.length;v++){var C=m[v].split("=");if(1<C.length){var M=C[0];C=C[1];var L=M.split("_");u=2<=L.length&&"type"==L[1]?u+(M+"=")+C+"&":u+(M+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Cp(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Ip(n,e,t){let r,i=!0;for(;!n.J&&n.C<t.length;){if(r=AD(n,t),r==vh){4==e&&(n.o=4,Hc(14),i=!1),Om(n.j,n.m,null,"[Incomplete Response]");break}if(r==uf){n.o=4,Hc(15),Om(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Om(n.j,n.m,r,null),bb(n,r)}Cp(n)&&r!=vh&&r!=uf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Hc(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),iv(e),e.M=!0,Hc(11))):(Om(n.j,n.m,t,"[Invalid Chunked Response]"),hf(n),Um(n))}function AD(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?vh:(t=Number(e.substring(t,i)),isNaN(t)?uf:(i+=1)+t>e.length?vh:(e=e.slice(i,i+t),n.C=i+t,e))}function Lm(n){n.Y=Date.now()+n.P,TE(n,n.P)}function TE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=z_(ma(n.lb,n),e)}function H_(n){n.B&&(Wn.clearTimeout(n.B),n.B=null)}function Um(n){0==n.l.H||n.J||zE(n.l,n)}function hf(n){H_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,wE(n.V),SD(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function bb(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||OE(t.i,n)))if(!n.K&&OE(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;rv(t),Mb(t)}nv(t),Hc(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=z_(ma(t.ib,t),6e3));if(1>=LD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else pf(t,11)}else if((n.K||t.g==n)&&rv(t),!M_(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let C=r[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const M=C[3];null!=M&&(t.ra=M,t.l.info("VER="+t.ra));const L=C[4];null!=L&&(t.Ga=L,t.l.info("SVER="+t.Ga));const q=C[5];null!=q&&"number"==typeof q&&0<q&&(t.L=i=1.5*q,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const ne=n.g;if(ne){const ae=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var s=i.i;s.g||-1==ae.indexOf("spdy")&&-1==ae.indexOf("quic")&&-1==ae.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Z_(s,s.h),s.h=null))}if(i.F){const ye=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(i.Da=ye,lo(i.I,i.F,ye))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((i=t).wa=qE(i,i.J?i.pa:null,i.Y),u.K){UD(i.i,u);var m=u,v=i.L;v&&m.setTimeout(v),m.B&&(H_(m),Lm(m)),i.g=u}else BE(i);0<t.j.length&&ev(t)}else"stop"!=C[0]&&"close"!=C[0]||pf(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?pf(t,7):Ab(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}Pm()}catch{}}function wb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Am(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function OD(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Am(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function MD(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Am(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}($t=Cd.prototype).setTimeout=function(n){this.P=n},$t.nb=function(n){n=n.target;const e=this.M;e&&3==Nu(n)?e.l():this.Pa(n)},$t.Pa=function(n){try{if(n==this.g)e:{const M=Nu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>M)&&(3!=M||cb||this.g&&(this.h.h||this.g.ja()||$D(this.g)))){this.J||4!=M||7==e||Pm(),H_(this);var t=this.g.da();this.ca=t;t:if(Cp(this)){var i=$D(this.g);n="";var r=i.length,s=4==Nu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hf(this),Um(this);var u="";break t}this.h.i=new Wn.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function LP(n,e,t,i,r,s,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.W,M,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M_(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Hc(12),hf(this),Um(this);break e}Om(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bb(this,t)}this.S?(Ip(this,M,u),cb&&this.i&&3==M&&(B_(this.U,this.V,"tick",this.mb),this.V.start())):(Om(this.j,this.m,u,null),bb(this,u)),4==M&&hf(this),this.i&&!this.J&&(4==M?zE(this.l,this):(this.i=!1,Lm(this)))}else(function WP(n){const e={};n=(n.g&&2<=Nu(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(M_(n[i]))continue;var t=RP(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function K2(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Hc(12)):(this.o=0,Hc(13)),hf(this),Um(this)}}}catch{}},$t.mb=function(){if(this.g){var n=Nu(this.g),e=this.g.ja();this.C<e.length&&(H_(this),Ip(this,n,e),this.i&&4!=n&&Lm(this))}},$t.cancel=function(){this.J=!0,hf(this)},$t.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function UP(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Pm(),Hc(17)),hf(this),this.o=2,Um(this)):TE(this,this.Y-n)};var PD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vm(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Vm){this.h=n.h,Eb(this,n.j),this.s=n.s,this.g=n.g,DE(this,n.m),this.l=n.l;var e=n.i,t=new jm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),RD(this,t),this.o=n.o}else n&&(e=String(n).match(PD))?(this.h=!1,Eb(this,e[1]||"",!0),this.s=$_(e[2]||""),this.g=$_(e[3]||"",!0),DE(this,e[4]),this.l=$_(e[5]||"",!0),RD(this,e[6]||"",!0),this.o=$_(e[7]||"")):(this.h=!1,this.i=new jm(null,this.h))}function yh(n){return new Vm(n)}function Eb(n,e,t){n.j=t?$_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function DE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function RD(n,e,t){e instanceof jm?(n.i=e,function jP(n,e){e&&!n.j&&(ff(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(zm(this,i),FD(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=q_(e,kD)),n.i=new jm(e,n.h))}function lo(n,e,t){n.i.set(e,t)}function Cb(n){return lo(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function q_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,SE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function SE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(q_(e,Bm,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(q_(e,Bm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(q_(t,"/"==t.charAt(0)?Ib:AE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",q_(t,G_)),n.join("")};var Bm=/[#\/\?@]/g,AE=/[#\?:]/g,Ib=/[#\?]/g,kD=/[#\?@]/g,G_=/#/g;function jm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ff(n){n.g||(n.g=new Map,n.h=0,n.i&&function Y2(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zm(n,e){ff(n),e=Hm(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function ND(n,e){return ff(n),e=Hm(n,e),n.g.has(e)}function FD(n,e,t){zm(n,e),0<t.length&&(n.i=null,n.g.set(Hm(n,e),sb(t)),n.h+=t.length)}function Hm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function W_(n){this.l=n||xb,n=Wn.PerformanceNavigationTiming?0<(n=Wn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Wn.g&&Wn.g.Ka&&Wn.g.Ka()&&Wn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}($t=jm.prototype).add=function(n,e){ff(this),this.i=null,n=Hm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},$t.forEach=function(n,e){ff(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},$t.ta=function(){ff(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},$t.Z=function(n){ff(this);let e=[];if("string"==typeof n)ND(this,n)&&(e=e.concat(this.g.get(Hm(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},$t.set=function(n,e){return ff(this),this.i=null,ND(this,n=Hm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},$t.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},$t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),u=this.Z(i);for(i=0;i<u.length;i++){var r=s;""!==u[i]&&(r+="="+encodeURIComponent(String(u[i]))),n.push(r)}}return this.i=n.join("&")};var xb=10;function zP(n){return!!n.h||!!n.g&&n.g.size>=n.j}function LD(n){return n.h?1:n.g?n.g.size:0}function OE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Z_(n,e){n.g?n.g.add(e):n.h=e}function UD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function PE(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return sb(n.i)}W_.prototype.cancel=function(){if(this.i=PE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var HP=class{stringify(n){return Wn.JSON.stringify(n,void 0)}parse(n){return Wn.JSON.parse(n,void 0)}};function $P(){this.g=new HP}function VD(n,e,t){const i=t||"";try{wb(n,function(r,s){let u=r;_p(r)&&(u=pb(r)),e.push(i+s+"="+encodeURIComponent(u))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function K_(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Y_(n){this.l=n.fc||null,this.j=n.ob||!1}function Tb(n,e){Ss.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=RE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xs(Y_,xE),Y_.prototype.g=function(){return new Tb(this.l,this.j)},Y_.prototype.i=function(n){return function(){return n}}({}),Xs(Tb,Ss);var RE=0;function kE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function xp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Tp(n)}function Tp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}($t=Tb.prototype).open=function(n,e){if(this.readyState!=RE)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Tp(this)},$t.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Wn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},$t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xp(this)),this.readyState=RE},$t.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Tp(this)),this.g&&(this.readyState=3,Tp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Wn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},$t.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xp(this):Tp(this),3==this.readyState&&kE(this)}},$t.Za=function(n){this.g&&(this.response=this.responseText=n,xp(this))},$t.Ya=function(n){this.g&&(this.response=n,xp(this))},$t.ka=function(){this.g&&xp(this)},$t.setRequestHeader=function(n,e){this.v.append(n,e)},$t.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},$t.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var qP=Wn.JSON.parse;function no(n){Ss.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Q_,this.L=this.M=!1}Xs(no,Ss);var Q_="",NE=/^https?$/i,jD=["POST","PUT"];function zD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,HD(n),Dp(n)}function HD(n){n.F||(n.F=!0,ga(n,"complete"),ga(n,"error"))}function X_(n){if(n.h&&typeof rb<"u"&&(!n.C[1]||4!=Nu(n)||2!=n.da()))if(n.v&&4==Nu(n))EE(n.La,0,n);else if(ga(n,"readystatechange"),4==Nu(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===u){var r=String(n.I).match(PD)[1]||null;!r&&Wn.self&&Wn.self.location&&(r=Wn.self.location.protocol.slice(0,-1)),i=!NE.test(r?r.toLowerCase():"")}t=i}if(t)ga(n,"complete"),ga(n,"success");else{n.m=6;try{var s=2<Nu(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",HD(n)}}finally{Dp(n)}}}function Dp(n,e){if(n.g){Db(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ga(n,"ready");try{t.onreadystatechange=i}catch{}}}function Db(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Wn.clearTimeout(n.A),n.A=null)}function Nu(n){return n.g?n.g.readyState:0}function $D(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Q_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function FE(n){let e="";return k_(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function J_(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=FE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):lo(n,e,t))}function $m(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Sb(n){this.Ga=0,this.j=[],this.l=new gb,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$m("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$m("baseRetryDelayMs",5e3,n),this.hb=$m("retryDelaySeedMs",1e4,n),this.eb=$m("forwardChannelMaxRetries",2,n),this.xa=$m("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new W_(n&&n.concurrentRequestLimit),this.Ja=new $P,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ab(n){if(LE(n),3==n.H){var e=n.W++,t=yh(n.I);if(lo(t,"SID",n.K),lo(t,"RID",e),lo(t,"TYPE","terminate"),tv(n,t),(e=new Cd(n,n.l,e)).L=2,e.v=Cb(yh(t)),t=!1,Wn.navigator&&Wn.navigator.sendBeacon)try{t=Wn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Wn.Image&&((new Image).src=e.v,t=!0),t||(e.g=GE(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Lm(e)}$E(n)}function Mb(n){n.g&&(iv(n),n.g.cancel(),n.g=null)}function LE(n){Mb(n),n.u&&(Wn.clearTimeout(n.u),n.u=null),rv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Wn.clearTimeout(n.m),n.m=null)}function ev(n){if(!zP(n.i)&&!n.m){n.m=!0;var e=n.Na;gh||ID(),V_||(gh(),V_=!0),bE.add(e,n),n.C=0}}function UE(n,e){var t;t=e?e.m:n.W++;const i=yh(n.I);lo(i,"SID",n.K),lo(i,"RID",t),lo(i,"AID",n.V),tv(n,i),n.o&&n.s&&J_(i,n.o,n.s),t=new Cd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=VE(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Z_(n.i,t),df(t,i,e)}function tv(n,e){n.na&&k_(n.na,function(t,i){lo(e,i,t)}),n.h&&wb({},function(t,i){lo(e,i,t)})}function VE(n,e,t){t=Math.min(n.j.length,t);var i=n.h?ma(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=r[0].g,u.push("ofs="+s)):s=0:u.push("ofs="+s);let m=!0;for(let v=0;v<t;v++){let C=r[v].g;const M=r[v].map;if(C-=s,0>C)s=Math.max(0,r[v].g-100),m=!1;else try{VD(M,u,"req"+C+"_")}catch{i&&i(M)}}if(m){i=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function BE(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;gh||ID(),V_||(gh(),V_=!0),bE.add(e,n),n.A=0}}function nv(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=z_(ma(n.Ma,n),HE(n,n.A)),n.A++,0))}function iv(n){null!=n.B&&(Wn.clearTimeout(n.B),n.B=null)}function jE(n){n.g=new Cd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=yh(n.wa);lo(e,"RID","rpc"),lo(e,"SID",n.K),lo(e,"AID",n.V),lo(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&lo(e,"TO",n.qa),lo(e,"TYPE","xmlhttp"),tv(n,e),n.o&&n.s&&J_(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Cb(yh(e)),t.s=null,t.S=!0,Ep(t,n)}function rv(n){null!=n.v&&(Wn.clearTimeout(n.v),n.v=null)}function zE(n,e){var t=null;if(n.g==e){rv(n),iv(n),n.g=null;var i=2}else{if(!OE(n.i,e))return;t=e.F,UD(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var r=n.C;ga(i=_b(),new j_(i,t)),ev(n)}else BE(n);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==i&&function qD(n,e){return!(LD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=z_(ma(n.Na,n,e),HE(n,n.C)),n.C++,0)))}(n,e)||2==i&&nv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:pf(n,5);break;case 4:pf(n,10);break;case 3:pf(n,6);break;default:pf(n,2)}}function HE(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function pf(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=ma(n.pb,n);t||(t=new Vm("//www.google.com/images/cleardot.gif"),Wn.location&&"http"==Wn.location.protocol||Eb(t,"https"),Cb(t)),function BD(n,e){const t=new gb;if(Wn.Image){const i=new Image;i.onload=ob(K_,t,i,"TestLoadImage: loaded",!0,e),i.onerror=ob(K_,t,i,"TestLoadImage: error",!1,e),i.onabort=ob(K_,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=ob(K_,t,i,"TestLoadImage: timeout",!1,e),Wn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Hc(2);n.H=0,n.h&&n.h.za(e),$E(n),LE(n)}function $E(n){if(n.H=0,n.ma=[],n.h){const e=PE(n.i);(0!=e.length||0!=n.j.length)&&(dD(n.ma,e),dD(n.ma,n.j),n.i.i.length=0,sb(n.j),n.j.length=0),n.h.ya()}}function qE(n,e,t){var i=t instanceof Vm?yh(t):new Vm(t);if(""!=i.g)e&&(i.g=e+"."+i.g),DE(i,i.m);else{var r=Wn.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Vm(null);i&&Eb(s,i),e&&(s.g=e),r&&DE(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&lo(i,t,e),lo(i,"VER",n.ra),tv(n,i),i}function GE(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new no(t&&n.Ha&&!n.va?new Y_({ob:!0}):n.va)).Oa(n.J),e}function ov(){}function Fu(){if(Mm&&!(10<=Number(dE)))throw Error("Environmental error: no available transport.")}function El(n,e){Ss.call(this),this.g=new Sb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!M_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!M_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new iu(this)}function GD(n){_h.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ob(){km.call(this),this.status=1}function iu(n){this.g=n}function Lu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function sv(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],u=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;u=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(u<<7&4294967295|u>>>25))+((u=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((s=(e=t+((u=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((r=s+((u=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Tr(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}($t=no.prototype).Oa=function(n){this.M=n},$t.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$c.g(),this.C=function ku(n){return n.h||(n.h=n.i())}(this.u?this.u:$c),this.g.onreadystatechange=ma(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void zD(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=Wn.FormData&&n instanceof Wn.FormData,!(0<=oE(jD,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Db(this),0<this.B&&((this.L=function GP(n){return Mm&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ma(this.ua,this)):this.A=EE(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){zD(this,s)}},$t.ua=function(){typeof rb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ga(this,"timeout"),this.abort(8))},$t.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ga(this,"complete"),ga(this,"abort"),Dp(this))},$t.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dp(this,!0)),no.$.N.call(this)},$t.La=function(){this.s||(this.G||this.v||this.l?X_(this):this.kb())},$t.kb=function(){X_(this)},$t.isActive=function(){return!!this.g},$t.da=function(){try{return 2<Nu(this)?this.g.status:-1}catch{return-1}},$t.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},$t.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),qP(e)}},$t.Ia=function(){return this.m},$t.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},($t=Sb.prototype).ra=8,$t.H=1,$t.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Cd(this,this.l,n);let s=this.s;if(this.U&&(s?(s=hE(s),pE(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=VE(this,r,e),lo(t=yh(this.I),"RID",n),lo(t,"CVER",22),this.F&&lo(t,"X-HTTP-Session-Id",this.F),tv(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(FE(s)))+"&"+e:this.o&&J_(t,this.o,s)),Z_(this.i,r),this.bb&&lo(t,"TYPE","init"),this.P?(lo(t,"$req",e),lo(t,"SID","null"),r.aa=!0,df(r,t,null)):df(r,t,e),this.H=2}}else 3==this.H&&(n?UE(this,n):0==this.j.length||zP(this.i)||UE(this))},$t.Ma=function(){if(this.u=null,jE(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=z_(ma(this.jb,this),n)}},$t.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hc(10),Mb(this),jE(this))},$t.ib=function(){null!=this.v&&(this.v=null,Mb(this),nv(this),Hc(19))},$t.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Hc(2)):(this.l.info("Failed to ping google.com"),Hc(1))},$t.isActive=function(){return!!this.h&&this.h.isActive(this)},($t=ov.prototype).Ba=function(){},$t.Aa=function(){},$t.za=function(){},$t.ya=function(){},$t.isActive=function(){return!0},$t.Va=function(){},Fu.prototype.g=function(n,e){return new El(n,e)},Xs(El,Ss),El.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Hc(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=qE(n,null,n.Y),ev(n)},El.prototype.close=function(){Ab(this.g)},El.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=pb(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ev(e)},El.prototype.N=function(){this.g.h=null,delete this.j,Ab(this.g),delete this.g,El.$.N.call(this)},Xs(GD,_h),Xs(Ob,km),Xs(iu,ov),iu.prototype.Ba=function(){ga(this.g,"a")},iu.prototype.Aa=function(n){ga(this.g,new GD(n))},iu.prototype.za=function(n){ga(this.g,new Ob)},iu.prototype.ya=function(){ga(this.g,"b")},Xs(Lu,function WE(){this.blockSize=-1}),Lu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Lu.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)sv(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){sv(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){sv(this,i),r=0;break}}this.h=r,this.i+=e},Lu.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var Q2={};function ZE(n){return-128<=n&&128>n?function hD(n,e){var t=Q2;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Tr([0|e],0>e?-1:0)}):new Tr([0|n],0>n?-1:0)}function Id(n){if(isNaN(n)||!isFinite(n))return uo;if(0>n)return _a(Id(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=YE;return new Tr(e,0)}var YE=4294967296,uo=ZE(0),Pb=ZE(1),WD=ZE(16777216);function bh(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Cl(n){return-1==n.h}function _a(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Tr(t,~n.h).add(Pb)}function av(n,e){return n.add(_a(e))}function cv(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function xd(n,e){this.g=n,this.h=e}function Rb(n,e){if(bh(e))throw Error("division by zero");if(bh(n))return new xd(uo,uo);if(Cl(n))return e=Rb(_a(n),e),new xd(_a(e.g),_a(e.h));if(Cl(e))return e=Rb(n,_a(e)),new xd(_a(e.g),e.h);if(30<n.g.length){if(Cl(n)||Cl(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Pb,i=e;0>=i.X(n);)t=ZD(t),i=ZD(i);var r=Sp(t,1),s=Sp(i,1);for(i=Sp(i,2),t=Sp(t,2);!bh(i);){var u=s.add(i);0>=u.X(n)&&(r=r.add(t),s=u),i=Sp(i,1),t=Sp(t,1)}return e=av(n,r.R(e)),new xd(r,e)}for(r=uo;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),u=(s=Id(t)).R(e);Cl(u)||0<u.X(n);)u=(s=Id(t-=i)).R(e);bh(s)&&(s=Pb),r=r.add(s),n=av(n,u)}return new xd(r,n)}function ZD(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Tr(t,n.h)}function Sp(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Tr(r,n.h)}($t=Tr.prototype).ea=function(){if(Cl(this))return-_a(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:YE+i)*e,e*=YE}return n},$t.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(bh(this))return"0";if(Cl(this))return"-"+_a(this).toString(n);for(var e=Id(Math.pow(n,6)),t=this,i="";;){var r=Rb(t,e).g,s=((0<(t=av(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(bh(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},$t.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},$t.X=function(n){return Cl(n=av(this,n))?-1:bh(n)?0:1},$t.abs=function(){return Cl(this)?_a(this):this},$t.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),u=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=u>>>16,t[r]=(u&=65535)<<16|(s&=65535)}return new Tr(t,-2147483648&t[t.length-1]?-1:0)},$t.R=function(n){if(bh(this)||bh(n))return uo;if(Cl(this))return Cl(n)?_a(this).R(_a(n)):_a(_a(this).R(n));if(Cl(n))return _a(this.R(_a(n)));if(0>this.X(WD)&&0>n.X(WD))return Id(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,u=65535&this.D(i),m=n.D(r)>>>16,v=65535&n.D(r);t[2*i+2*r]+=u*v,cv(t,2*i+2*r),t[2*i+2*r+1]+=s*v,cv(t,2*i+2*r+1),t[2*i+2*r+1]+=u*m,cv(t,2*i+2*r+1),t[2*i+2*r+2]+=s*m,cv(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Tr(t,0)},$t.gb=function(n){return Rb(this,n).h},$t.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Tr(t,this.h&n.h)},$t.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Tr(t,this.h|n.h)},$t.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Tr(t,this.h^n.h)},Fu.prototype.createWebChannel=Fu.prototype.g,El.prototype.send=El.prototype.u,El.prototype.open=El.prototype.m,El.prototype.close=El.prototype.close,vb.NO_ERROR=0,vb.TIMEOUT=8,vb.HTTP_ERROR=6,yb.COMPLETE="complete",Rm.EventType=hs,hs.OPEN="a",hs.CLOSE="b",hs.ERROR="c",hs.MESSAGE="d",Ss.prototype.listen=Ss.prototype.O,no.prototype.listenOnce=no.prototype.P,no.prototype.getLastError=no.prototype.Sa,no.prototype.getLastErrorCode=no.prototype.Ia,no.prototype.getStatus=no.prototype.da,no.prototype.getResponseJson=no.prototype.Wa,no.prototype.getResponseText=no.prototype.ja,no.prototype.send=no.prototype.ha,no.prototype.setWithCredentials=no.prototype.Oa,Lu.prototype.digest=Lu.prototype.l,Lu.prototype.reset=Lu.prototype.reset,Lu.prototype.update=Lu.prototype.j,Tr.prototype.add=Tr.prototype.add,Tr.prototype.multiply=Tr.prototype.R,Tr.prototype.modulo=Tr.prototype.gb,Tr.prototype.compare=Tr.prototype.X,Tr.prototype.toNumber=Tr.prototype.ea,Tr.prototype.toString=Tr.prototype.toString,Tr.prototype.getBits=Tr.prototype.D,Tr.fromNumber=Id,Tr.fromString=function KE(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return _a(KE(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Id(Math.pow(e,8)),i=uo,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),u=parseInt(n.substring(r,r+s),e);8>s?(s=Id(Math.pow(e,s)),i=i.R(s).add(Id(u))):i=(i=i.R(t)).add(Id(u))}return i};var ZP=bl.createWebChannelTransport=function(){return new Fu},KD=bl.getStatEventTarget=function(){return _b()},YD=bl.ErrorCode=vb,QE=bl.EventType=yb,XE=bl.Event=lf,Uu=bl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},KP=bl.FetchXmlHttpFactory=Y_,lv=bl.WebChannel=Rm,Td=bl.XhrIo=no,Vu=bl.Md5=Lu,Ba=bl.Integer=Tr;const JE="@firebase/firestore";class As{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");let qm="9.23.0";const mf=new Mu.Yd("@firebase/firestore");function eC(){return mf.logLevel}function Tt(n,...e){if(mf.logLevel<=Mu.in.DEBUG){const t=e.map(kb);mf.debug(`Firestore (${qm}): ${n}`,...t)}}function io(n,...e){if(mf.logLevel<=Mu.in.ERROR){const t=e.map(kb);mf.error(`Firestore (${qm}): ${n}`,...t)}}function ru(n,...e){if(mf.logLevel<=Mu.in.WARN){const t=e.map(kb);mf.warn(`Firestore (${qm}): ${n}`,...t)}}function kb(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ln(n="Unexpected state"){const e=`FIRESTORE (${qm}) INTERNAL ASSERTION FAILED: `+n;throw io(e),new Error(e)}function bn(n,e){n||ln()}function Gt(n,e){return n}const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends ie.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(As.UNAUTHENTICATED))}shutdown(){}}class QP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XP{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=C=>this.i!==r?(r=this.i,t(C)):Promise.resolve();let u=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fs,e.enqueueRetryable(()=>s(this.currentUser))};const m=()=>{const C=u;e.enqueueRetryable((0,dt.Z)(function*(){yield C.promise,yield s(i.currentUser)}))},v=C=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>v(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?v(C):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fs)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bn("string"==typeof i.accessToken),new tC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bn(null===e||"string"==typeof e),new As(e)}}class nC{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=As.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Nb{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new nC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(As.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JD{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.T;return this.T=s.token,Tt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bn("string"==typeof t.token),this.T=t.token,new Fb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class iC{static A(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=eS(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function Zn(n,e){return n<e?-1:n>e?1:0}function Ap(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function rC(n){return n+"\0"}class ho{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new vt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ho.fromMillis(Date.now())}static fromDate(e){return ho.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new ho(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zn(this.nanoseconds,e.nanoseconds):Zn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xn(e)}static min(){return new xn(new ho(0,0))}static max(){return new xn(new ho(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uv{constructor(e,t,i){void 0===t?t=0:t>e.length&&ln(),void 0===i?i=e.length-t:i>e.length-t&&ln(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===uv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uv?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),u=t.get(r);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ji extends uv{construct(e,t,i){return new ji(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new vt(tt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new ji(t)}static emptyPath(){return new ji([])}}const eR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ho extends uv{construct(e,t,i){return new Ho(e,t,i)}static isValidIdentifier(e){return eR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ho.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ho(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new vt(tt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const m=e[r];if("\\"===m){if(r+1===e.length)throw new vt(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[r+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new vt(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,r+=2}else"`"===m?(u=!u,r++):"."!==m||u?(i+=m,r++):(s(),r++)}if(s(),u)throw new vt(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ho(t)}static emptyPath(){return new Ho([])}}class qt{constructor(e){this.path=e}static fromPath(e){return new qt(ji.fromString(e))}static fromName(e){return new qt(ji.fromString(e).popFirst(5))}static empty(){return new qt(ji.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ji.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ji.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qt(new ji(e.slice()))}}class Lb{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function oC(n){return n.fields.find(e=>2===e.kind)}function Mp(n){return n.fields.filter(e=>2!==e.kind)}Lb.UNKNOWN_ID=-1;class Ub{constructor(e,t){this.fieldPath=e,this.kind=t}}class dv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dv(0,Il.min())}}function tS(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=xn.fromTimestamp(1e9===i?new ho(t+1,0):new ho(t,i));return new Il(r,qt.empty(),e)}function nS(n){return new Il(n.readTime,n.key,-1)}class Il{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Il(xn.min(),qt.empty(),-1)}static max(){return new Il(xn.max(),qt.empty(),-1)}}function sC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qt.comparator(n.documentKey,e.documentKey),0!==t?t:Zn(n.largestBatchId,e.largestBatchId))}const aC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wh(n){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,dt.Z)(function*(n){if(n.code!==tt.FAILED_PRECONDITION||n.message!==aC)throw n;Tt("LocalStore","Unexpectedly lost primary lease")}),Vb.apply(this,arguments)}class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ke((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ke?t:Ke.resolve(t)}catch(t){return Ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ke.reject(t)}static resolve(e){return new Ke((t,i)=>{t(e)})}static reject(e){return new Ke((t,i)=>{i(e)})}static waitFor(e){return new Ke((t,i)=>{let r=0,s=0,u=!1;e.forEach(m=>{++r,m.next(()=>{++s,u&&s===r&&t()},v=>i(v))}),u=!0,s===r&&t()})}static or(e){let t=Ke.resolve(!1);for(const i of e)t=t.next(r=>r?Ke.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new Ke((i,r)=>{const s=e.length,u=new Array(s);let m=0;for(let v=0;v<s;v++){const C=v;t(e[C]).next(M=>{u[C]=M,++m,m===s&&i(u)},M=>r(M))}})}static doWhile(e,t){return new Ke((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class hv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new fs,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Gm(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=lC(i.target.error);this.v.reject(new Gm(e,r))}}static open(e,t,i,r){try{return new hv(t,e.transaction(r,i))}catch(s){throw new Gm(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rS(t)}}class ou{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===ou.S((0,ie.z$)())&&io("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Tt("SimpleDb","Removing database:",e),xl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ie.hl)())return!1;if(ou.C())return!0;const e=(0,ie.z$)(),t=ou.S(e),i=0<t&&t<10,r=ou.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,dt.Z)(function*(){return t.db||(Tt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{i(u.target.result)},s.onblocked=()=>{r(new Gm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const m=u.target.error;r("VersionError"===m.name?new vt(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new vt(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Gm(e,m))},s.onupgradeneeded=u=>{Tt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{Tt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,dt.Z)(function*(){const u="readonly"===t;let m=0;for(;;){++m;try{s.db=yield s.$(e);const v=hv.open(s.db,e,u?"readonly":"readwrite",i),C=r(v).next(M=>(v.P(),M)).catch(M=>(v.abort(M),Ke.reject(M))).toPromise();return C.catch(()=>{}),yield v.R,C}catch(v){const C=v,M="FirebaseError"!==C.name&&m<3;if(Tt("SimpleDb","Transaction failed with error:",C.message,"Retrying:",M),s.close(),!M)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class iS{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return xl(this.L.delete())}}class Gm extends vt{constructor(e,t){super(tt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dd(n){return"IndexedDbTransactionError"===n.name}class rS{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Tt("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),xl(i)}add(e){return Tt("SimpleDb","ADD",this.store.name,e,e),xl(this.store.add(e))}get(e){return xl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Tt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Tt("SimpleDb","DELETE",this.store.name,e),xl(this.store.delete(e))}count(){return Tt("SimpleDb","COUNT",this.store.name),xl(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(u,m)=>{s.push(m)}).next(()=>s)}{const r=this.store.getAll(i.range);return new Ke((s,u)=>{r.onerror=m=>{u(m.target.error)},r.onsuccess=m=>{s(m.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new Ke((r,s)=>{i.onerror=u=>{s(u.target.error)},i.onsuccess=u=>{r(u.target.result)}})}J(e,t){Tt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,u,m)=>m.delete())}X(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}Z(e){const t=this.cursor({});return new Ke((i,r)=>{t.onerror=s=>{const u=lC(s.target.error);r(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(m=>{m?u.continue():i()}):i()}})}W(e,t){const i=[];return new Ke((r,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const m=u.target.result;if(!m)return void r();const v=new iS(m),C=t(m.primaryKey,m.value,v);if(C instanceof Ke){const M=C.catch(L=>(v.done(),Ke.reject(L)));i.push(M)}v.isDone?r():null===v.K?m.continue():m.continue(v.K)}}).next(()=>Ke.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xl(n){return new Ke((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=lC(i.target.error);t(r)}})}let oS=!1;function lC(n){const e=ou.S((0,ie.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oS||(oS=!0,setTimeout(()=>{throw i},0)),i}}return n}class Wm{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Tt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,dt.Z)(function*(){t.task=null;try{Tt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Dd(i)?Tt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield wh(i)}yield t.et(6e4)}))}}class X2{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,dt.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let r=t,s=!0;return Ke.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!i.has(u))return Tt("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,r).next(m=>{r-=m,i.add(u)});s=!1})).next(()=>t-r)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(r,s)).next(m=>(Tt("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>u.size)}))}rt(e,t){let i=e;return t.changes.forEach((r,s)=>{const u=nS(s);sC(u,i)>0&&(i=u)}),new Il(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let dc=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Bb(n){return null==n}function Zm(n){return 0===n&&1/n==-1/0}function uC(n){return"number"==typeof n&&Number.isInteger(n)&&!Zm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function hc(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sS(e)),e=Km(n.get(t),e);return sS(e)}function Km(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function sS(n){return n+"\x01\x01"}function Sd(n){const e=n.length;if(bn(e>=2),2===e)return bn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ji.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&ln(),n.charAt(u+1)){case"\x01":const m=n.substring(s,u);let v;0===r.length?v=m:(r+=m,v=r,r=""),i.push(v);break;case"\x10":r+=n.substring(s,u),r+="\0";break;case"\x11":r+=n.substring(s,u+1);break;default:ln()}s=u+2}return new ji(i)}const aS=["userId","batchId"];function Eh(n,e){return[n,hc(e)]}function cS(n,e,t){return[n,hc(e),t]}const jb={},zb=["prefixPath","collectionGroup","readTime","documentId"],qc=["prefixPath","collectionGroup","documentId"],J2=["collectionGroup","readTime","prefixPath","documentId"],lS=["canonicalId","targetId"],uS=["targetId","path"],iR=["path","targetId"],dS=["collectionId","parent"],hS=["indexId","uid"],fS=["uid","sequenceNumber"],pS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rR=["indexId","uid","orderedDocumentKey"],oR=["userId","collectionPath","documentId"],sR=["userId","collectionPath","largestBatchId"],fv=["userId","collectionGroup","largestBatchId"],mS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aR=[...mS,"documentOverlays"],gS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pv=gS,_S=[...pv,"indexConfiguration","indexState","indexEntries"];class Hb extends cC{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ms(n,e){const t=Gt(n);return ou.M(t.ht,e)}function vS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function su(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ym(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class zr{constructor(e,t){this.comparator=e,this.root=t||va.EMPTY}insert(e,t){return new zr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,va.BLACK,null,null))}remove(e){return new zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,va.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $b(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $b(this.root,e,this.comparator,!1)}getReverseIterator(){return new $b(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $b(this.root,e,this.comparator,!0)}}class $b{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class va{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??va.RED,this.left=r??va.EMPTY,this.right=s??va.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new va(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return va.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return va.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,va.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,va.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ln();const e=this.left.check();if(e!==this.right.check())throw ln();return e+(this.isRed()?0:1)}}va.EMPTY=null,va.RED=!0,va.BLACK=!1,va.EMPTY=new class{constructor(){this.size=0}get key(){throw ln()}get value(){throw ln()}get color(){throw ln()}get left(){throw ln()}get right(){throw ln()}copy(n,e,t,i,r){return this}insert(n,e,t){return new va(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hr{constructor(e){this.comparator=e,this.data=new zr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dC(this.data.getIterator())}getIteratorFrom(e){return new dC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hr(this.comparator);return t.data=e,t}}class dC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Op(n){return n.hasNext()?n.getNext():void 0}class Gc{constructor(e){this.fields=e,e.sort(Ho.comparator)}static empty(){return new Gc([])}unionWith(e){let t=new Hr(Ho.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ap(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class hC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Os{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new hC("Invalid base64 string: "+r):r}}(e);return new Os(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Os(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Os.EMPTY_BYTE_STRING=new Os("");const eU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pp(n){if(bn(!!n),"string"==typeof n){let e=0;const t=eU.exec(n);if(bn(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:is(n.seconds),nanos:is(n.nanos)}}function is(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function gf(n){return"string"==typeof n?Os.fromBase64String(n):Os.fromUint8Array(n)}function mv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Rp(n){const e=n.mapValue.fields.__previous_value__;return mv(e)?Rp(e):e}function gv(n){const e=Pp(n.mapValue.fields.__local_write_time__.timestampValue);return new ho(e.seconds,e.nanos)}class lR{constructor(e,t,i,r,s,u,m,v,C){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=v,this.useFetchStreams=C}}class Ch{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ch("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ch&&e.projectId===this.projectId&&e.database===this.database}}const au={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qb={nullValue:"NULL_VALUE"};function _f(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mv(n)?4:wS(n)?9007199254740991:10:ln()}function Ad(n,e){if(n===e)return!0;const t=_f(n);if(t!==_f(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gv(n).isEqual(gv(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Pp(i.timestampValue),u=Pp(r.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,gf(n.bytesValue).isEqual(gf(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return is(i.geoPointValue.latitude)===is(r.geoPointValue.latitude)&&is(i.geoPointValue.longitude)===is(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return is(i.integerValue)===is(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=is(i.doubleValue),u=is(r.doubleValue);return s===u?Zm(s)===Zm(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return Ap(n.arrayValue.values||[],e.arrayValue.values||[],Ad);case 10:return function(i,r){const s=i.mapValue.fields||{},u=r.mapValue.fields||{};if(vS(s)!==vS(u))return!1;for(const m in s)if(s.hasOwnProperty(m)&&(void 0===u[m]||!Ad(s[m],u[m])))return!1;return!0}(n,e);default:return ln()}var r}function _v(n,e){return void 0!==(n.values||[]).find(t=>Ad(t,e))}function kp(n,e){if(n===e)return 0;const t=_f(n),i=_f(e);if(t!==i)return Zn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zn(n.booleanValue,e.booleanValue);case 2:return function(r,s){const u=is(r.integerValue||r.doubleValue),m=is(s.integerValue||s.doubleValue);return u<m?-1:u>m?1:u===m?0:isNaN(u)?isNaN(m)?0:-1:1}(n,e);case 3:return yS(n.timestampValue,e.timestampValue);case 4:return yS(gv(n),gv(e));case 5:return Zn(n.stringValue,e.stringValue);case 6:return function(r,s){const u=gf(r),m=gf(s);return u.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const u=r.split("/"),m=s.split("/");for(let v=0;v<u.length&&v<m.length;v++){const C=Zn(u[v],m[v]);if(0!==C)return C}return Zn(u.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const u=Zn(is(r.latitude),is(s.latitude));return 0!==u?u:Zn(is(r.longitude),is(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const u=r.values||[],m=s.values||[];for(let v=0;v<u.length&&v<m.length;++v){const C=kp(u[v],m[v]);if(C)return C}return Zn(u.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===au.mapValue&&s===au.mapValue)return 0;if(r===au.mapValue)return 1;if(s===au.mapValue)return-1;const u=r.fields||{},m=Object.keys(u),v=s.fields||{},C=Object.keys(v);m.sort(),C.sort();for(let M=0;M<m.length&&M<C.length;++M){const L=Zn(m[M],C[M]);if(0!==L)return L;const q=kp(u[m[M]],v[C[M]]);if(0!==q)return q}return Zn(m.length,C.length)}(n.mapValue,e.mapValue);default:throw ln()}}function yS(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zn(n,e);const t=Pp(n),i=Pp(e),r=Zn(t.seconds,i.seconds);return 0!==r?r:Zn(t.nanos,i.nanos)}function Np(n){return fC(n)}function fC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Pp(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?gf(n.bytesValue).toBase64():"referenceValue"in n?qt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const u of i.values||[])s?s=!1:r+=",",r+=fC(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",u=!0;for(const m of r)u?u=!1:s+=",",s+=`${m}:${fC(i.fields[m])}`;return s+"}"}(n.mapValue):ln();var e}function Bu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pC(n){return!!n&&"integerValue"in n}function Qm(n){return!!n&&"arrayValue"in n}function bS(n){return!!n&&"nullValue"in n}function mC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wb(n){return!!n&&"mapValue"in n}function Xm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return su(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Xm(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wS(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function gC(n){return"nullValue"in n?qb:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bu(Ch.empty(),qt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ln()}function uR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bu(Ch.empty(),qt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?au:ln()}function _C(n,e){const t=kp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vC(n,e){const t=kp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ya{constructor(e){this.value=e}static empty(){return new ya({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Wb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xm(t)}setAll(e){let t=Ho.emptyPath(),i={},r=[];e.forEach((u,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,i,r),i={},r=[],t=m.popLast()}u?i[m.lastSegment()]=Xm(u):r.push(m.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());Wb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ad(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Wb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){su(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new ya(Xm(this.value))}}function ES(n){const e=[];return su(n.fields,(t,i)=>{const r=new Ho([t]);if(Wb(i)){const s=ES(i.mapValue).fields;if(0===s.length)e.push(r);else for(const u of s)e.push(r.child(u))}else e.push(r)}),new Gc(e)}class ro{constructor(e,t,i,r,s,u,m){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=u,this.documentState=m}static newInvalidDocument(e){return new ro(e,0,xn.min(),xn.min(),xn.min(),ya.empty(),0)}static newFoundDocument(e,t,i,r){return new ro(e,1,t,xn.min(),i,r,0)}static newNoDocument(e,t){return new ro(e,2,t,xn.min(),xn.min(),ya.empty(),0)}static newUnknownDocument(e,t){return new ro(e,3,t,xn.min(),xn.min(),ya.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ya.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ya.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ro&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ro(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Md{constructor(e,t){this.position=e,this.inclusive=t}}function CS(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],u=n.position[r];if(i=s.field.isKeyField()?qt.comparator(qt.fromName(u.referenceValue),t.key):kp(u,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function yC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ad(n.position[t],e.position[t]))return!1;return!0}class Jm{constructor(e,t="asc"){this.field=e,this.dir=t}}function dR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class IS{}class Pi extends IS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new hR(e,t,i):"array-contains"===t?new IC(e,i):"in"===t?new Kb(e,i):"not-in"===t?new SS(e,i):"array-contains-any"===t?new xC(e,i):new Pi(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new fR(e,i):new pR(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(kp(t,this.value)):null!==t&&_f(this.value)===_f(t)&&this.matchesComparison(kp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ln()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class fr extends IS{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new fr(e,t)}matches(e){return eg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function eg(n){return"and"===n.op}function bC(n){return"or"===n.op}function wC(n){return EC(n)&&eg(n)}function EC(n){for(const e of n.filters)if(e instanceof fr)return!1;return!0}function Zb(n){if(n instanceof Pi)return n.field.canonicalString()+n.op.toString()+Np(n.value);if(wC(n))return n.filters.map(e=>Zb(e)).join(",");{const e=n.filters.map(t=>Zb(t)).join(",");return`${n.op}(${e})`}}function xS(n,e){return n instanceof Pi?(t=n,(i=e)instanceof Pi&&t.op===i.op&&t.field.isEqual(i.field)&&Ad(t.value,i.value)):n instanceof fr?function(t,i){return i instanceof fr&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,u)=>r&&xS(s,i.filters[u]),!0)}(n,e):void ln();var t,i}function TS(n,e){const t=n.filters.concat(e);return fr.create(t,n.op)}function CC(n){return n instanceof Pi?`${(e=n).field.canonicalString()} ${e.op} ${Np(e.value)}`:n instanceof fr?function(e){return e.op.toString()+" {"+e.getFilters().map(CC).join(" ,")+"}"}(n):"Filter";var e}class hR extends Pi{constructor(e,t,i){super(e,t,i),this.key=qt.fromName(i.referenceValue)}matches(e){const t=qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class fR extends Pi{constructor(e,t){super(e,"in",t),this.keys=DS(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pR extends Pi{constructor(e,t){super(e,"not-in",t),this.keys=DS(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function DS(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>qt.fromName(i.referenceValue))}class IC extends Pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qm(t)&&_v(t.arrayValue,this.value)}}class Kb extends Pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_v(this.value.arrayValue,t)}}class SS extends Pi{constructor(e,t){super(e,"not-in",t)}matches(e){if(_v(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_v(this.value.arrayValue,t)}}class xC extends Pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>_v(this.value.arrayValue,i))}}class mR{constructor(e,t=null,i=[],r=[],s=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=u,this.endAt=m,this.dt=null}}function TC(n,e=null,t=[],i=[],r=null,s=null,u=null){return new mR(n,e,t,i,r,s,u)}function Ih(n){const e=Gt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Zb(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Bb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Np(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Np(i)).join(",")),e.dt=t}return e.dt}function vv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yC(n.startAt,e.startAt)&&yC(n.endAt,e.endAt)}function yv(n){return qt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Od(n,e){return n.filters.filter(t=>t instanceof Pi&&t.field.isEqual(e))}function DC(n,e,t){let i=qb,r=!0;for(const s of Od(n,e)){let u=qb,m=!0;switch(s.op){case"<":case"<=":u=gC(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,m=!1;break;case"!=":case"not-in":u=qb}_C({value:i,inclusive:r},{value:u,inclusive:m})<0&&(i=u,r=m)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];_C({value:i,inclusive:r},{value:u,inclusive:t.inclusive})<0&&(i=u,r=t.inclusive);break}return{value:i,inclusive:r}}function AS(n,e,t){let i=au,r=!0;for(const s of Od(n,e)){let u=au,m=!0;switch(s.op){case">=":case">":u=uR(s.value),m=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,m=!1;break;case"!=":case"not-in":u=au}vC({value:i,inclusive:r},{value:u,inclusive:m})>0&&(i=u,r=m)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];vC({value:i,inclusive:r},{value:u,inclusive:t.inclusive})>0&&(i=u,r=t.inclusive);break}return{value:i,inclusive:r}}class vf{constructor(e,t=null,i=[],r=[],s=null,u="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=u,this.startAt=m,this.endAt=v,this.wt=null,this._t=null}}function Yb(n,e,t,i,r,s,u,m){return new vf(n,e,t,i,r,s,u,m)}function yf(n){return new vf(n)}function MS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Qb(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function SC(n){return null!==n.collectionGroup}function bf(n){const e=Gt(n);if(null===e.wt){e.wt=[];const t=bv(e),i=Qb(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new Jm(t)),e.wt.push(new Jm(Ho.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Jm(Ho.keyField(),s))}}}return e.wt}function ba(n){const e=Gt(n);if(!e._t)if("F"===e.limitType)e._t=TC(e.path,e.collectionGroup,bf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of bf(e))t.push(new Jm(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Md(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Md(e.startAt.position,e.startAt.inclusive):null;e._t=TC(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function Xb(n,e){e.getFirstInequalityField(),bv(n);const t=n.filters.concat([e]);return new vf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function wv(n,e,t){return new vf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tg(n,e){return vv(ba(n),ba(e))&&n.limitType===e.limitType}function AC(n){return`${Ih(ba(n))}|lt:${n.limitType}`}function MC(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>CC(i)).join(", ")}]`),Bb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Np(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Np(i)).join(",")),`Target(${t})`}(ba(n))}; limitType=${n.limitType})`}function Ev(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):qt.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of bf(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,u){const m=CS(r,s,u);return r.inclusive?m<=0:m<0}(t.startAt,bf(t),i)||t.endAt&&!function(r,s,u){const m=CS(r,s,u);return r.inclusive?m>=0:m>0}(t.endAt,bf(t),i)));var t,i}function OS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PS(n){return(e,t)=>{let i=!1;for(const r of bf(n)){const s=RS(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function RS(n,e,t){const i=n.field.isKeyField()?qt.comparator(e.key,t.key):function(r,s,u){const m=s.data.field(r),v=u.data.field(r);return null!==m&&null!==v?kp(m,v):ln()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ln()}}class wf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){su(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Ym(this.inner)}size(){return this.innerSize}}const kS=new zr(qt.comparator);function Wc(){return kS}const NS=new zr(qt.comparator);function Jb(...n){let e=NS;for(const t of n)e=e.insert(t.key,t);return e}function FS(n){let e=NS;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Pd(){return ng()}function OC(){return ng()}function ng(){return new wf(n=>n.toString(),(n,e)=>n.isEqual(e))}const LS=new zr(qt.comparator),gR=new Hr(qt.comparator);function li(...n){let e=gR;for(const t of n)e=e.add(t);return e}const _R=new Hr(Zn);function PC(){return _R}function US(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zm(e)?"-0":e}}function VS(n){return{integerValue:""+n}}function BS(n,e){return uC(e)?VS(e):US(n,e)}class Ef{constructor(){this._=void 0}}function jS(n,e,t){return n instanceof Fp?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&mv(r)&&(r=Rp(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Cf?kC(n,e):n instanceof Lp?vR(n,e):function(i,r){const s=RC(i,r),u=NC(s)+NC(i.gt);return pC(s)&&pC(i.gt)?VS(u):US(i.serializer,u)}(n,e)}function zS(n,e,t){return n instanceof Cf?kC(n,e):n instanceof Lp?vR(n,e):t}function RC(n,e){return n instanceof Cv?pC(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Fp extends Ef{}class Cf extends Ef{constructor(e){super(),this.elements=e}}function kC(n,e){const t=FC(e);for(const i of n.elements)t.some(r=>Ad(r,i))||t.push(i);return{arrayValue:{values:t}}}class Lp extends Ef{constructor(e){super(),this.elements=e}}function vR(n,e){let t=FC(e);for(const i of n.elements)t=t.filter(r=>!Ad(r,i));return{arrayValue:{values:t}}}class Cv extends Ef{constructor(e,t){super(),this.serializer=e,this.gt=t}}function NC(n){return is(n.integerValue||n.doubleValue)}function FC(n){return Qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Iv{constructor(e,t){this.field=e,this.transform=t}}class bR{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function e0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Up{}function HS(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new og(n.key,Dr.none()):new rg(n.key,n.data,Dr.none());{const t=n.data,i=ya.empty();let r=new Hr(Ho.comparator);for(let s of e.fields)if(!r.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?i.delete(s):i.set(s,u),r=r.add(s)}return new xh(n.key,i,new Gc(r.toArray()),Dr.none())}}function tU(n,e,t){n instanceof rg?function(i,r,s){const u=i.value.clone(),m=Tv(i.fieldTransforms,r,s.transformResults);u.setAll(m),r.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof xh?function(i,r,s){if(!e0(i.precondition,r))return void r.convertToUnknownDocument(s.version);const u=Tv(i.fieldTransforms,r,s.transformResults),m=r.data;m.setAll($S(i)),m.setAll(u),r.convertToFoundDocument(s.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xv(n,e,t,i){return n instanceof rg?function(r,s,u,m){if(!e0(r.precondition,s))return u;const v=r.value.clone(),C=LC(r.fieldTransforms,m,s);return v.setAll(C),s.convertToFoundDocument(s.version,v).setHasLocalMutations(),null}(n,e,t,i):n instanceof xh?function(r,s,u,m){if(!e0(r.precondition,s))return u;const v=LC(r.fieldTransforms,m,s),C=s.data;return C.setAll($S(r)),C.setAll(v),s.convertToFoundDocument(s.version,C).setHasLocalMutations(),null===u?null:u.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(M=>M.field))}(n,e,t,i):(u=t,e0(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function nU(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=RC(i.transform,r||null);null!=s&&(null===t&&(t=ya.empty()),t.set(i.field,s))}return t||null}function ig(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Ap(t,i,(r,s)=>function yR(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Cf&&i instanceof Cf||t instanceof Lp&&i instanceof Lp?Ap(t.elements,i.elements,Ad):t instanceof Cv&&i instanceof Cv?Ad(t.gt,i.gt):t instanceof Fp&&i instanceof Fp);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class rg extends Up{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xh extends Up{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $S(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Tv(n,e,t){const i=new Map;bn(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],u=s.transform,m=e.data.field(s.field);i.set(s.field,zS(u,m,t[r]))}return i}function LC(n,e,t){const i=new Map;for(const r of n){const s=r.transform,u=t.data.field(r.field);i.set(r.field,jS(s,u,e))}return i}class og extends Up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t0 extends Up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sg{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&tU(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xv(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xv(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=OC();return this.mutations.forEach(r=>{const s=e.get(r.key),u=s.overlayedDocument;let m=this.applyToLocalView(u,s.mutatedFields);m=t.has(r.key)?null:m;const v=HS(u,m);null!==v&&i.set(r.key,v),u.isValidDocument()||u.convertToNoDocument(xn.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),li())}isEqual(e){return this.batchId===e.batchId&&Ap(this.mutations,e.mutations,(t,i)=>ig(t,i))&&Ap(this.baseMutations,e.baseMutations,(t,i)=>ig(t,i))}}class UC{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){bn(e.mutations.length===i.length);let r=LS;const s=e.mutations;for(let u=0;u<s.length;u++)r=r.insert(s[u].key,i[u].version);return new UC(e,t,i,r)}}class VC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wR{constructor(e,t){this.count=e,this.unchangedNames=t}}var ps,Li;function Dv(n){switch(n){default:return ln();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function GS(n){if(void 0===n)return io("GRPC error has no .code"),tt.UNKNOWN;switch(n){case ps.OK:return tt.OK;case ps.CANCELLED:return tt.CANCELLED;case ps.UNKNOWN:return tt.UNKNOWN;case ps.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case ps.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case ps.INTERNAL:return tt.INTERNAL;case ps.UNAVAILABLE:return tt.UNAVAILABLE;case ps.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case ps.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case ps.NOT_FOUND:return tt.NOT_FOUND;case ps.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case ps.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case ps.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case ps.ABORTED:return tt.ABORTED;case ps.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case ps.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case ps.DATA_LOSS:return tt.DATA_LOSS;default:return ln()}}(Li=ps||(ps={}))[Li.OK=0]="OK",Li[Li.CANCELLED=1]="CANCELLED",Li[Li.UNKNOWN=2]="UNKNOWN",Li[Li.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Li[Li.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Li[Li.NOT_FOUND=5]="NOT_FOUND",Li[Li.ALREADY_EXISTS=6]="ALREADY_EXISTS",Li[Li.PERMISSION_DENIED=7]="PERMISSION_DENIED",Li[Li.UNAUTHENTICATED=16]="UNAUTHENTICATED",Li[Li.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Li[Li.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Li[Li.ABORTED=10]="ABORTED",Li[Li.OUT_OF_RANGE=11]="OUT_OF_RANGE",Li[Li.UNIMPLEMENTED=12]="UNIMPLEMENTED",Li[Li.INTERNAL=13]="INTERNAL",Li[Li.UNAVAILABLE=14]="UNAVAILABLE",Li[Li.DATA_LOSS=15]="DATA_LOSS";class BC{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Sv}static getOrCreateInstance(){return null===Sv&&(Sv=new BC),Sv}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Sv=null;function jC(){return new TextEncoder}const zC=new Ba([4294967295,4294967295],0);function HC(n){const e=jC().encode(n),t=new Vu;return t.update(e),new Uint8Array(t.digest())}function WS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ba([t,i],0),new Ba([r,s],0)]}class n0{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ag(`Invalid padding: ${t}`);if(i<0)throw new ag(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new ag(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new ag(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ba.fromNumber(this.It)}Et(e,t,i){let r=e.add(t.multiply(Ba.fromNumber(i)));return 1===r.compare(zC)&&(r=new Ba([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=HC(e),[i,r]=WS(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(i,r,s);if(!this.At(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new n0(s,r,t);return i.forEach(m=>u.insert(m)),u}insert(e){if(0===this.It)return;const t=HC(e),[i,r]=WS(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(i,r,s);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ag extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Av{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Mv.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Av(xn.min(),r,new zr(Zn),Wc(),li())}}class Mv{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Mv(i,t,li(),li(),li())}}class cg{constructor(e,t,i,r){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=r}}class r0{constructor(e,t){this.targetId=e,this.Vt=t}}class $C{constructor(e,t,i=Os.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class o0{constructor(){this.St=0,this.Dt=KS(),this.Ct=Os.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=li(),t=li(),i=li();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ln()}}),new Mv(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=KS()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class qC{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Wc(),this.zt=ZS(),this.Wt=new zr(Zn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:ln()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,r)=>{this.te(r)&&t(r)})}ne(e){var t;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const u=s.target;if(yv(u))if(0===r){const m=new qt(u.path);this.Yt(i,m,ro.newNoDocument(m,xn.min()))}else bn(1===r);else{const m=this.ie(i);if(m!==r){const v=this.re(e,m);0!==v&&(this.ee(i),this.Wt=this.Wt.insert(i,2===v?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=BC.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,M,L){var q,ne,ae,ye,We,wt;const Ot={localCacheCount:M,existenceFilterCount:L.count},Mt=L.unchangedNames;return Mt&&(Ot.bloomFilter={applied:0===C,hashCount:null!==(q=Mt?.hashCount)&&void 0!==q?q:0,bitmapLength:null!==(ye=null===(ae=null===(ne=Mt?.bits)||void 0===ne?void 0:ne.bitmap)||void 0===ae?void 0:ae.length)&&void 0!==ye?ye:0,padding:null!==(wt=null===(We=Mt?.bits)||void 0===We?void 0:We.padding)&&void 0!==wt?wt:0}),Ot}(v,m,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:u=0},hashCount:m=0}=i;let v,C;try{v=gf(s).toUint8Array()}catch(M){if(M instanceof hC)return ru("Decoding the base64 bloom filter in existence filter failed ("+M.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw M}try{C=new n0(v,u,m)}catch(M){return ru(M instanceof ag?"BloomFilter error: ":"Applying bloom filter failed: ",M),1}return 0===C.It?1:r!==t-this.oe(e.targetId,C)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const u=this.Gt.ue(),m=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;t.vt(m)||(this.Yt(e,s,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((s,u)=>{const m=this.se(u);if(m){if(s.current&&yv(m.target)){const v=new qt(m.target.path);null!==this.jt.get(v)||this.ae(u,v)||this.Yt(u,v,ro.newNoDocument(v,e))}s.Mt&&(t.set(u,s.Ot()),s.Ft())}});let i=li();this.zt.forEach((s,u)=>{let m=!0;u.forEachWhile(v=>{const C=this.se(v);return!C||"TargetPurposeLimboResolution"===C.purpose||(m=!1,!1)}),m&&(i=i.add(s))}),this.jt.forEach((s,u)=>u.setReadTime(e));const r=new Av(e,t,this.Wt,this.jt,i);return this.jt=Wc(),this.zt=ZS(),this.Wt=new zr(Zn),r}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new o0,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Hr(Zn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Tt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new o0),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ZS(){return new zr(qt.comparator)}function KS(){return new zr(qt.comparator)}const ER={asc:"ASCENDING",desc:"DESCENDING"},CR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YS={and:"AND",or:"OR"};class GC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function s0(n,e){return n.useProto3Json||Bb(e)?e:{value:e}}function Vp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QS(n,e){return Vp(n,e.toTimestamp())}function rs(n){return bn(!!n),xn.fromTimestamp(function(e){const t=Pp(e);return new ho(t.seconds,t.nanos)}(n))}function a0(n,e){return(t=n,new ji(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ZC(n){const e=ji.fromString(n);return bn(Pv(e)),e}function Ov(n,e){return a0(n.databaseId,e.path)}function ju(n,e){const t=ZC(e);if(t.get(1)!==n.databaseId.projectId)throw new vt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new vt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qt(XS(t))}function c0(n,e){return a0(n.databaseId,e)}function ja(n){const e=ZC(n);return 4===e.length?ji.emptyPath():XS(e)}function Rd(n){return new ji(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XS(n){return bn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function JS(n,e,t){return{name:Ov(n,e),fields:t.value.mapValue.fields}}function IR(n,e,t){const i=ju(n,e.name),r=rs(e.updateTime),s=e.createTime?rs(e.createTime):xn.min(),u=new ya({mapValue:{fields:e.fields}}),m=ro.newFoundDocument(i,r,s,u);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Bp(n,e){let t;if(e instanceof rg)t={update:JS(n,e.key,e.value)};else if(e instanceof og)t={delete:Ov(n,e.key)};else if(e instanceof xh)t={update:JS(n,e.key,e.data),updateMask:SR(e.fieldMask)};else{if(!(e instanceof t0))return ln();t={verify:Ov(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const u=s.transform;if(u instanceof Fp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Lp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Cv)return{fieldPath:s.field.canonicalString(),increment:u.gt};throw ln()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:QS(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ln()),t;var r}function tA(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Dr.updateTime(rs(r.updateTime)):void 0!==r.exists?Dr.exists(r.exists):Dr.none():Dr.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,u){let m=null;"setToServerValue"in u?(bn("REQUEST_TIME"===u.setToServerValue),m=new Fp):"appendMissingElements"in u?m=new Cf(u.appendMissingElements.values||[]):"removeAllFromArray"in u?m=new Lp(u.removeAllFromArray.values||[]):"increment"in u?m=new Cv(s,u.increment):ln();const v=Ho.fromServerFormat(u.fieldPath);return new Iv(v,m)}(n,r)):[];var r;if(e.update){const r=ju(n,e.update.name),s=new ya({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Gc((e.updateMask.fieldPaths||[]).map(C=>Ho.fromServerFormat(C)));return new xh(r,s,u,t,i)}return new rg(r,s,t,i)}if(e.delete){const r=ju(n,e.delete);return new og(r,t)}if(e.verify){const r=ju(n,e.verify);return new t0(r,t)}return ln()}function xR(n,e){return{documents:[c0(n,e.path)]}}function jp(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=c0(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=c0(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(v){if(0!==v.length)return YC(fr.create(v,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(v){if(0!==v.length)return v.map(C=>{return{field:If((M=C).field),direction:rA(M.dir)};var M})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=s0(n,e.limit);var m,v;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function nA(n){let e=ja(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){bn(1===i);const M=t.from[0];M.allDescendants?r=M.collectionId:e=e.child(M.collectionId)}let s=[];t.where&&(s=function(M){const L=iA(M);return L instanceof fr&&wC(L)?L.getFilters():[L]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(M=>{return new Jm(xf((L=M).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction));var L}));let m=null;t.limit&&(m=function(M){let L;return L="object"==typeof M?M.value:M,Bb(L)?null:L}(t.limit));let v=null;var M;t.startAt&&(v=new Md((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new Md(M.values||[],!M.before)}(t.endAt)),Yb(e,r,u,s,m,"F",v,C)}function iA(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xf(e.unaryFilter.field);return Pi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=xf(e.unaryFilter.field);return Pi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xf(e.unaryFilter.field);return Pi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xf(e.unaryFilter.field);return Pi.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ln()}}(n):void 0!==n.fieldFilter?Pi.create(xf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ln()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return fr.create(e.compositeFilter.filters.map(t=>iA(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ln()}}(e.compositeFilter.op))}(n):ln();var e}function rA(n){return ER[n]}function TR(n){return CR[n]}function DR(n){return YS[n]}function If(n){return{fieldPath:n.canonicalString()}}function xf(n){return Ho.fromServerFormat(n.fieldPath)}function YC(n){return n instanceof Pi?function(e){if("=="===e.op){if(mC(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NAN"}};if(bS(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mC(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NOT_NAN"}};if(bS(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:If(e.field),op:TR(e.op),value:e.value}}}(n):n instanceof fr?function(e){const t=e.getFilters().map(i=>YC(i));return 1===t.length?t[0]:{compositeFilter:{op:DR(e.op),filters:t}}}(n):ln()}function SR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class zu{constructor(e,t,i,r,s=xn.min(),u=xn.min(),m=Os.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=v}withSequenceNumber(e){return new zu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class AR{constructor(e){this.fe=e}}function sA(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Ov(r=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Vp(r,s.version.toTimestamp()),createTime:Vp(r,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:cu(e.version)};else{if(!e.isUnknownDocument())return ln();i.unknownDocument={path:t.path.toArray(),version:cu(e.version)}}var r,s;return i}function Rv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zp(n){const e=new ho(n.seconds,n.nanoseconds);return xn.fromTimestamp(e)}function Tf(n,e){const t=(e.baseMutations||[]).map(s=>tA(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>tA(n.fe,s)),r=ho.fromMillis(e.localWriteTimeMs);return new sg(e.batchId,r,t,i)}function Hp(n){const e=zp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zp(n.lastLimboFreeSnapshotVersion):xn.min();let i;var r;return void 0!==n.query.documents?(bn(1===(r=n.query).documents.length),i=ba(yf(ja(r.documents[0])))):i=ba(nA(n.query)),new zu(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Os.fromBase64String(n.resumeToken))}function MR(n,e){const t=cu(e.snapshotVersion),i=cu(e.lastLimboFreeSnapshotVersion);let r;r=yv(e.target)?xR(n.fe,e.target):jp(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ih(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function QC(n){const e=nA({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wv(e,e.limit,"L"):e}function aA(n,e){return new VC(e.largestBatchId,tA(n.fe,e.overlayMutation))}function cA(n,e){const t=e.path.lastSegment();return[n,hc(e.path.popLast()),t]}function lA(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:cu(i.readTime),documentKey:hc(i.documentKey.path),largestBatchId:i.largestBatchId}}class OR{getBundleMetadata(e,t){return XC(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:zp(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return XC(e).put({bundleId:(i=t).id,createTime:cu(rs(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return JC(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:QC(r.bundledQuery),readTime:zp(r.readTime)};var r})}saveNamedQuery(e,t){return JC(e).put({name:(i=t).name,readTime:cu(rs(i.readTime)),bundledQuery:i.bundledQuery});var i}}function XC(n){return Ms(n,"bundles")}function JC(n){return Ms(n,"namedQueries")}class l0{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new l0(e,t.uid||"")}getOverlay(e,t){return lg(e).get(cA(this.userId,t)).next(i=>i?aA(this.serializer,i):null)}getOverlays(e,t){const i=Pd();return Ke.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,u)=>{const m=new VC(t,u);r.push(this.we(e,m))}),Ke.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(u=>r.add(hc(u.getCollectionPath())));const s=[];return r.forEach(u=>{const m=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);s.push(lg(e).J("collectionPathOverlayIndex",m))}),Ke.waitFor(s)}getOverlaysForCollection(e,t,i){const r=Pd(),s=hc(t),u=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return lg(e).j("collectionPathOverlayIndex",u).next(m=>{for(const v of m){const C=aA(this.serializer,v);r.set(C.getKey(),C)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=Pd();let u;const m=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lg(e).X({index:"collectionGroupOverlayIndex",range:m},(v,C,M)=>{const L=aA(this.serializer,C);s.size()<r||L.largestBatchId===u?(s.set(L.getKey(),L),u=L.largestBatchId):M.done()}).next(()=>s)}we(e,t){return lg(e).put(function(i,r,s){const[u,m,v]=cA(r,s.mutation.key);return{userId:r,collectionPath:m,documentId:v,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Bp(i.fe,s.mutation)}}(this.serializer,this.userId,t))}}function lg(n){return Ms(n,"documentOverlays")}class Df{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(is(e.integerValue));else if("doubleValue"in e){const i=is(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),Zm(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(gf(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?wS(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ln()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const r of Object.keys(i))this.Te(r,t),this.me(i[r],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const r of i)this.me(r,t)}ve(e,t){this.ye(t,37),qt.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function PR(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function uA(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=PR(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Df.Ve=new Df;class dA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.De(i.value),i=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ne(i.value),i=t.next();this.ke()}Me(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=t.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=t.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(e){const t=this.Fe(e),i=uA(t);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),i=uA(t);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class RR{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class hA{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class ug{constructor(){this.je=new dA,this.ze=new RR(this.je),this.We=new hA(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Sf{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Sf(this.indexId,this.documentKey,this.arrayValue,i)}}function Th(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=fA(n.arrayValue,e.arrayValue),0!==t?t:(t=fA(n.directionalValue,e.directionalValue),0!==t?t:qt.comparator(n.documentKey,e.documentKey)))}function fA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class kR{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){bn(e.collectionGroup===this.collectionId);const t=oC(e);if(void 0!==t&&!this.en(t))return!1;const i=Mp(e);let r=new Set,s=0,u=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const m=i[s];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[u++],m))return!1}++s}for(;s<i.length;++s)if(u>=this.Ye.length||!this.sn(this.Ye[u++],i[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function NR(n){var e,t;if(bn(n instanceof Pi||n instanceof fr),n instanceof Pi){if(n instanceof Kb){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Pi.create(n.field,"==",s)))||[];return fr.create(r,"or")}return n}const i=n.filters.map(r=>NR(r));return fr.create(i,n.op)}function pA(n){if(0===n.getFilters().length)return[];const e=_A(NR(n));return bn(FR(e)),mA(e)||gA(e)?[e]:e.getFilters()}function mA(n){return n instanceof Pi}function gA(n){return n instanceof fr&&wC(n)}function FR(n){return mA(n)||gA(n)||function(e){if(e instanceof fr&&bC(e)){for(const t of e.getFilters())if(!mA(t)&&!gA(t))return!1;return!0}return!1}(n)}function _A(n){if(bn(n instanceof Pi||n instanceof fr),n instanceof Pi)return n;if(1===n.filters.length)return _A(n.filters[0]);const e=n.filters.map(i=>_A(i));let t=fr.create(e,n.op);return t=eI(t),FR(t)?t:(bn(t instanceof fr),bn(eg(t)),bn(t.filters.length>1),t.filters.reduce((i,r)=>vA(i,r)))}function vA(n,e){let t;return bn(n instanceof Pi||n instanceof fr),bn(e instanceof Pi||e instanceof fr),t=n instanceof Pi?e instanceof Pi?fr.create([n,e],"and"):LR(n,e):e instanceof Pi?LR(e,n):function(i,r){if(bn(i.filters.length>0&&r.filters.length>0),eg(i)&&eg(r))return TS(i,r.getFilters());const s=bC(i)?i:r,u=bC(i)?r:i,m=s.filters.map(v=>vA(v,u));return fr.create(m,"or")}(n,e),eI(t)}function LR(n,e){if(eg(e))return TS(e,n.getFilters());{const t=e.filters.map(i=>vA(n,i));return fr.create(t,"or")}}function eI(n){if(bn(n instanceof Pi||n instanceof fr),n instanceof Pi)return n;const e=n.getFilters();if(1===e.length)return eI(e[0]);if(EC(n))return n;const t=e.map(r=>eI(r)),i=[];return t.forEach(r=>{r instanceof Pi?i.push(r):r instanceof fr&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:fr.create(i,n.op)}class oU{constructor(){this.rn=new yA}addToCollectionParentIndex(e,t){return this.rn.add(t),Ke.resolve()}getCollectionParents(e,t){return Ke.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ke.resolve()}deleteFieldIndex(e,t){return Ke.resolve()}getDocumentsMatchingTarget(e,t){return Ke.resolve(null)}getIndexType(e,t){return Ke.resolve(0)}getFieldIndexes(e,t){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,t){return Ke.resolve(Il.min())}getMinOffsetFromCollectionGroup(e,t){return Ke.resolve(Il.min())}updateCollectionGroup(e,t,i){return Ke.resolve()}updateIndexEntries(e,t){return Ke.resolve()}}class yA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Hr(ji.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Hr(ji.comparator)).toArray()}}const kv=new Uint8Array(0);class tI{constructor(e,t){this.user=e,this.databaseId=t,this.on=new yA,this.un=new wf(i=>Ih(i),(i,r)=>vv(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:i,parent:hc(r)};return nI(e).put(s)}return Ke.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[rC(t),""],!1,!0);return nI(e).j(r).next(s=>{for(const u of s){if(u.collectionId!==t)break;i.push(Sd(u.parent))}return i})}addFieldIndex(e,t){const i=$p(e),r={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var u;delete r.indexId;const s=i.add(r);if(t.indexState){const u=Fv(e);return s.next(m=>{u.put(lA(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=$p(e),r=Fv(e),s=Nv(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Nv(e);let r=!0;const s=new Map;return Ke.forEach(this.cn(t),u=>this.an(e,u).next(m=>{r&&(r=!!m),s.set(u,m)})).next(()=>{if(r){let u=li();const m=[];return Ke.forEach(s,(v,C)=>{var M;Tt("IndexedDbIndexManager",`Using index ${M=v,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Mt=>`${Mt.fieldPath}:${Mt.kind}`).join(",")}`} to execute ${Ih(t)}`);const L=function(Mt,Lt){const Mn=oC(Lt);if(void 0===Mn)return null;for(const Rn of Od(Mt,Mn.fieldPath))switch(Rn.op){case"array-contains-any":return Rn.value.arrayValue.values||[];case"array-contains":return[Rn.value]}return null}(C,v),q=function(Mt,Lt){const Mn=new Map;for(const Rn of Mp(Lt))for(const Ui of Od(Mt,Rn.fieldPath))switch(Ui.op){case"==":case"in":Mn.set(Rn.fieldPath.canonicalString(),Ui.value);break;case"not-in":case"!=":return Mn.set(Rn.fieldPath.canonicalString(),Ui.value),Array.from(Mn.values())}return null}(C,v),ne=function(Mt,Lt){const Mn=[];let Rn=!0;for(const Ui of Mp(Lt)){const Wo=0===Ui.kind?DC(Mt,Ui.fieldPath,Mt.startAt):AS(Mt,Ui.fieldPath,Mt.startAt);Mn.push(Wo.value),Rn&&(Rn=Wo.inclusive)}return new Md(Mn,Rn)}(C,v),ae=function(Mt,Lt){const Mn=[];let Rn=!0;for(const Ui of Mp(Lt)){const Wo=0===Ui.kind?AS(Mt,Ui.fieldPath,Mt.endAt):DC(Mt,Ui.fieldPath,Mt.endAt);Mn.push(Wo.value),Rn&&(Rn=Wo.inclusive)}return new Md(Mn,Rn)}(C,v),ye=this.hn(v,C,ne),We=this.hn(v,C,ae),wt=this.ln(v,C,q),Ot=this.fn(v.indexId,L,ye,ne.inclusive,We,ae.inclusive,wt);return Ke.forEach(Ot,Mt=>i.H(Mt,t.limit).next(Lt=>{Lt.forEach(Mn=>{const Rn=qt.fromSegments(Mn.documentKey);u.has(Rn)||(u=u.add(Rn),m.push(Rn))})}))}).next(()=>m)}return Ke.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:pA(fr.create(e.filters,"and")).map(i=>TC(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,i,r,s,u,m){const v=(null!=t?t.length:1)*Math.max(i.length,s.length),C=v/(null!=t?t.length:1),M=[];for(let L=0;L<v;++L){const q=t?this.dn(t[L/C]):kv,ne=this.wn(e,q,i[L%C],r),ae=this._n(e,q,s[L%C],u),ye=m.map(We=>this.wn(e,q,We,!0));M.push(...this.createRange(ne,ae,ye))}return M}wn(e,t,i,r){const s=new Sf(e,qt.empty(),t,i);return r?s:s.Je()}_n(e,t,i,r){const s=new Sf(e,qt.empty(),t,i);return r?s.Je():s}an(e,t){const i=new kR(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let u=null;for(const m of s)i.tn(m)&&(!u||m.fields.length>u.fields.length)&&(u=m);return u})}getIndexType(e,t){let i=2;const r=this.cn(t);return Ke.forEach(r,s=>this.an(e,s).next(u=>{u?0!==i&&u.fields.length<function(m){let v=new Hr(Ho.comparator),C=!1;for(const M of m.filters)for(const L of M.getFlattenedFilters())L.field.isKeyField()||("array-contains"===L.op||"array-contains-any"===L.op?C=!0:v=v.add(L.field));for(const M of m.orderBy)M.field.isKeyField()||(v=v.add(M.field));return v.size+(C?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}mn(e,t){const i=new ug;for(const r of Mp(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const u=i.He(r.kind);Df.Ve._e(s,u)}return i.Qe()}dn(e){const t=new ug;return Df.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const i=new ug;return Df.Ve._e(Bu(this.databaseId,t),i.He(function(r){const s=Mp(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Qe()}ln(e,t,i){if(null===i)return[];let r=[];r.push(new ug);let s=0;for(const u of Mp(e)){const m=i[s++];for(const v of r)if(this.yn(t,u.fieldPath)&&Qm(m))r=this.pn(r,u,m);else{const C=v.He(u.kind);Df.Ve._e(m,C)}}return this.In(r)}hn(e,t,i){return this.ln(e,t,i.position)}In(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Qe();return t}pn(e,t,i){const r=[...e],s=[];for(const u of i.arrayValue.values||[])for(const m of r){const v=new ug;v.seed(m.Qe()),Df.Ve._e(u,v.He(t.kind)),s.push(v)}return s}yn(e,t){return!!e.filters.find(i=>i instanceof Pi&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=$p(e),r=Fv(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(s=>{const u=[];return Ke.forEach(s,m=>r.get([m.indexId,this.uid]).next(v=>{u.push(function(C,M){const L=M?new dv(M.sequenceNumber,new Il(zp(M.readTime),new qt(Sd(M.documentKey)),M.largestBatchId)):dv.empty(),q=C.fields.map(([ne,ae])=>new Ub(Ho.fromServerFormat(ne),ae));return new Lb(C.indexId,C.collectionGroup,q,L)}(m,v))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Zn(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=$p(e),s=Fv(e);return this.Tn(e).next(u=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>Ke.forEach(m,v=>s.put(lA(v.indexId,this.user,u,i)))))}updateIndexEntries(e,t){const i=new Map;return Ke.forEach(t,(r,s)=>{const u=i.get(r.collectionGroup);return(u?Ke.resolve(u):this.getFieldIndexes(e,r.collectionGroup)).next(m=>(i.set(r.collectionGroup,m),Ke.forEach(m,v=>this.En(e,r,v).next(C=>{const M=this.An(s,v);return C.isEqual(M)?Ke.resolve():this.vn(e,s,v,C,M)}))))})}Rn(e,t,i,r){return Nv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,i,r){return Nv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,t.key),t.key.path.toArray()])}En(e,t,i){const r=Nv(e);let s=new Hr(Th);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,t)])},(u,m)=>{s=s.add(new Sf(i.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>s)}An(e,t){let i=new Hr(Th);const r=this.mn(t,e);if(null==r)return i;const s=oC(t);if(null!=s){const u=e.data.field(s.fieldPath);if(Qm(u))for(const m of u.arrayValue.values||[])i=i.add(new Sf(t.indexId,e.key,this.dn(m),r))}else i=i.add(new Sf(t.indexId,e.key,kv,r));return i}vn(e,t,i,r,s){Tt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(m,v,C,M,L){const q=m.getIterator(),ne=v.getIterator();let ae=Op(q),ye=Op(ne);for(;ae||ye;){let We=!1,wt=!1;if(ae&&ye){const Ot=C(ae,ye);Ot<0?wt=!0:Ot>0&&(We=!0)}else null!=ae?wt=!0:We=!0;We?(M(ye),ye=Op(ne)):wt?(L(ae),ae=Op(q)):(ae=Op(q),ye=Op(ne))}}(r,s,Th,m=>{u.push(this.Rn(e,t,i,m))},m=>{u.push(this.Pn(e,t,i,m))}),Ke.waitFor(u)}Tn(e){let t=1;return Fv(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((u,m)=>Th(u,m)).filter((u,m,v)=>!m||0!==Th(u,v[m-1]));const r=[];r.push(e);for(const u of i){const m=Th(u,e),v=Th(u,t);if(0===m)r[0]=e.Je();else if(m>0&&v<0)r.push(u),r.push(u.Je());else if(v>0)break}r.push(t);const s=[];for(let u=0;u<r.length;u+=2){if(this.bn(r[u],r[u+1]))return[];s.push(IDBKeyRange.bound([r[u].indexId,this.uid,r[u].arrayValue,r[u].directionalValue,kv,[]],[r[u+1].indexId,this.uid,r[u+1].arrayValue,r[u+1].directionalValue,kv,[]]))}return s}bn(e,t){return Th(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(UR)}getMinOffset(e,t){return Ke.mapArray(this.cn(t),i=>this.an(e,i).next(r=>r||ln())).next(UR)}}function nI(n){return Ms(n,"collectionParents")}function Nv(n){return Ms(n,"indexEntries")}function $p(n){return Ms(n,"indexConfiguration")}function Fv(n){return Ms(n,"indexState")}function UR(n){bn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;sC(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Il(e.readTime,e.documentKey,t)}const VR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class za{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new za(e,za.DEFAULT_COLLECTION_PERCENTILE,za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function iI(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let m=0;const v=i.X({range:u},(M,L,q)=>(m++,q.delete()));s.push(v.next(()=>{bn(1===m)}));const C=[];for(const M of t.mutations){const L=cS(e,M.key.path,t.batchId);s.push(r.delete(L)),C.push(M.key)}return Ke.waitFor(s).next(()=>C)}function u0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ln();e=n.noDocument}return JSON.stringify(e).length}za.DEFAULT_COLLECTION_PERCENTILE=10,za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,za.DEFAULT=new za(41943040,za.DEFAULT_COLLECTION_PERCENTILE,za.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),za.DISABLED=new za(-1,0,0);class d0{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(e,t,i,r){bn(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new d0(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qp(e).X({index:"userMutationsIndex",range:i},(r,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=dg(e),u=qp(e);return u.add({}).next(m=>{bn("number"==typeof m);const v=new sg(m,t,i,r),C=function(q,ne,ae){const ye=ae.baseMutations.map(wt=>Bp(q.fe,wt)),We=ae.mutations.map(wt=>Bp(q.fe,wt));return{userId:ne,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:ye,mutations:We}}(this.serializer,this.userId,v),M=[];let L=new Hr((q,ne)=>Zn(q.canonicalString(),ne.canonicalString()));for(const q of r){const ne=cS(this.userId,q.key.path,m);L=L.add(q.key.path.popLast()),M.push(u.put(C)),M.push(s.put(ne,jb))}return L.forEach(q=>{M.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.Vn[m]=v.keys()}),Ke.waitFor(M).next(()=>v)})}lookupMutationBatch(e,t){return qp(e).get(t).next(i=>i?(bn(i.userId===this.userId),Tf(this.serializer,i)):null)}Sn(e,t){return this.Vn[t]?Ke.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Vn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return qp(e).X({index:"userMutationsIndex",range:r},(u,m,v)=>{m.userId===this.userId&&(bn(m.batchId>=i),s=Tf(this.serializer,m)),v.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return qp(e).X({index:"userMutationsIndex",range:t,reverse:!0},(r,s,u)=>{i=s.batchId,u.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qp(e).j("userMutationsIndex",t).next(i=>i.map(r=>Tf(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Eh(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return dg(e).X({range:r},(u,m,v)=>{const[C,M,L]=u,q=Sd(M);if(C===this.userId&&t.path.isEqual(q))return qp(e).get(L).next(ne=>{if(!ne)throw ln();bn(ne.userId===this.userId),s.push(Tf(this.serializer,ne))});v.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Hr(Zn);const r=[];return t.forEach(s=>{const u=Eh(this.userId,s.path),m=IDBKeyRange.lowerBound(u),v=dg(e).X({range:m},(C,M,L)=>{const[q,ne,ae]=C,ye=Sd(ne);q===this.userId&&s.path.isEqual(ye)?i=i.add(ae):L.done()});r.push(v)}),Ke.waitFor(r).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=Eh(this.userId,i),u=IDBKeyRange.lowerBound(s);let m=new Hr(Zn);return dg(e).X({range:u},(v,C,M)=>{const[L,q,ne]=v,ae=Sd(q);L===this.userId&&i.isPrefixOf(ae)?ae.length===r&&(m=m.add(ne)):M.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(qp(e).get(s).next(u=>{if(null===u)throw ln();bn(u.userId===this.userId),i.push(Tf(this.serializer,u))}))}),Ke.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return iI(e.ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),Ke.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ke.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return dg(e).X({range:i},(s,u,m)=>{if(s[0]===this.userId){const v=Sd(s[1]);r.push(v)}else m.done()}).next(()=>{bn(0===r.length)})})}containsKey(e,t){return bA(e,this.userId,t)}xn(e){return hg(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bA(n,e,t){const i=Eh(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let u=!1;return dg(n).X({range:s,Y:!0},(m,v,C)=>{const[M,L,q]=m;M===e&&L===r&&(u=!0),C.done()}).next(()=>u)}function qp(n){return Ms(n,"mutations")}function dg(n){return Ms(n,"documentMutations")}function hg(n){return Ms(n,"mutationQueues")}class kd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new kd(0)}static Mn(){return new kd(-1)}}class BR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const i=new kd(t.highestTargetId);return t.highestTargetId=i.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>xn.fromTimestamp(new ho(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(t,i),this.On(e,i))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fg(e).delete(t.targetId)).next(()=>this.$n(e)).next(i=>(bn(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return fg(e).X((u,m)=>{const v=Hp(m);v.sequenceNumber<=t&&null===i.get(v.targetId)&&(r++,s.push(this.removeTargetData(e,v)))}).next(()=>Ke.waitFor(s)).next(()=>r)}forEachTarget(e,t){return fg(e).X((i,r)=>{const s=Hp(r);t(s)})}$n(e){return wA(e).get("targetGlobalKey").next(t=>(bn(null!==t),t))}On(e,t){return wA(e).put("targetGlobalKey",t)}Fn(e,t){return fg(e).put(MR(this.serializer,t))}Bn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Ih(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return fg(e).X({range:r,index:"queryTargetsIndex"},(u,m,v)=>{const C=Hp(m);vv(t,C.target)&&(s=C,v.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Af(e);return t.forEach(u=>{const m=hc(u.path);r.push(s.put({targetId:i,path:m})),r.push(this.referenceDelegate.addReference(e,i,u))}),Ke.waitFor(r)}removeMatchingKeys(e,t,i){const r=Af(e);return Ke.forEach(t,s=>{const u=hc(s.path);return Ke.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Af(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Af(e);let s=li();return r.X({range:i,Y:!0},(u,m,v)=>{const C=Sd(u[1]),M=new qt(C);s=s.add(M)}).next(()=>s)}containsKey(e,t){const i=hc(t.path),r=IDBKeyRange.bound([i],[rC(i)],!1,!0);let s=0;return Af(e).X({index:"documentTargetsIndex",Y:!0,range:r},([u,m],v,C)=>{0!==u&&(s++,C.done())}).next(()=>s>0)}le(e,t){return fg(e).get(t).next(i=>i?Hp(i):null)}}function fg(n){return Ms(n,"targets")}function wA(n){return Ms(n,"targetGlobal")}function Af(n){return Ms(n,"targetDocuments")}function EA([n,e],[t,i]){const r=Zn(n,t);return 0===r?Zn(e,i):r}class jR{constructor(e){this.Ln=e,this.buffer=new Hr(EA),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();EA(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class h0{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,dt.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Dd(i)?Tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield wh(i)}yield t.Qn(3e5)}))}}class zR{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return Ke.resolve(dc.ct);const i=new jR(t);return this.jn.forEachTarget(e,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(e,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),Ke.resolve(VR)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VR):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let i,r,s,u,m,v,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(L=>(L>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${L}`),r=this.params.maximumSequenceNumbersToCollect):r=L,u=Date.now(),this.nthSequenceNumber(e,r))).next(L=>(i=L,m=Date.now(),this.removeTargets(e,i,t))).next(L=>(s=L,v=Date.now(),this.removeOrphanedDocuments(e,i))).next(L=>(C=Date.now(),eC()<=Mu.in.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-M}ms\n\tDetermined least recently used ${r} in `+(m-u)+`ms\n\tRemoved ${s} targets in `+(v-m)+`ms\n\tRemoved ${L} documents in `+(C-v)+`ms\nTotal Duration: ${C-M}ms`),Ke.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:L})))}}class HR{constructor(e,t){this.db=e,this.garbageCollector=function CA(n,e){return new zR(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Jn(e){let t=0;return this.Wn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(i,r)=>t(r))}addReference(e,t,i){return f0(e,i)}removeReference(e,t,i){return f0(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return f0(e,t)}Xn(e,t){return function(i,r){let s=!1;return hg(i).Z(u=>bA(i,u,r).next(m=>(m&&(s=!0),Ke.resolve(!m)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(u,m)=>{if(m<=t){const v=this.Xn(e,u).next(C=>{if(!C)return s++,i.getEntry(e,u).next(()=>(i.removeEntry(u,xn.min()),Af(e).delete([0,hc(u.path)])))});r.push(v)}}).next(()=>Ke.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return f0(e,t)}Yn(e,t){const i=Af(e);let r,s=dc.ct;return i.X({index:"documentTargetsIndex"},([u,m],{path:v,sequenceNumber:C})=>{0===u?(s!==dc.ct&&t(new qt(Sd(r)),s),s=C,r=v):s=dc.ct}).next(()=>{s!==dc.ct&&t(new qt(Sd(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function f0(n,e){return Af(n).put((i=n.currentSequenceNumber,{targetId:0,path:hc(e.path),sequenceNumber:i}));var i}class IA{constructor(){this.changes=new wf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ro.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?Ke.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $R{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Mf(e).put(i)}removeEntry(e,t,i){return Mf(e).delete(function(r,s){const u=r.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Rv(s),u[u.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Zn(e,i)))}getEntry(e,t){let i=ro.newInvalidDocument(t);return Mf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gp(t))},(r,s)=>{i=this.ts(t,s)}).next(()=>i)}es(e,t){let i={size:0,document:ro.newInvalidDocument(t)};return Mf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gp(t))},(r,s)=>{i={document:this.ts(t,s),size:u0(s)}}).next(()=>i)}getEntries(e,t){let i=Wc();return this.ns(e,t,(r,s)=>{const u=this.ts(r,s);i=i.insert(r,u)}).next(()=>i)}ss(e,t){let i=Wc(),r=new zr(qt.comparator);return this.ns(e,t,(s,u)=>{const m=this.ts(s,u);i=i.insert(s,m),r=r.insert(s,u0(u))}).next(()=>({documents:i,rs:r}))}ns(e,t,i){if(t.isEmpty())return Ke.resolve();let r=new Hr(SA);t.forEach(v=>r=r.add(v));const s=IDBKeyRange.bound(Gp(r.first()),Gp(r.last())),u=r.getIterator();let m=u.getNext();return Mf(e).X({index:"documentKeyIndex",range:s},(v,C,M)=>{const L=qt.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&SA(m,L)<0;)i(m,null),m=u.getNext();m&&m.isEqual(L)&&(i(m,C),m=u.hasNext()?u.getNext():null),m?M.G(Gp(m)):M.done()}).next(()=>{for(;m;)i(m,null),m=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const s=t.path,u=[s.popLast().toArray(),s.lastSegment(),Rv(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mf(e).j(IDBKeyRange.bound(u,m,!0)).next(v=>{let C=Wc();for(const M of v){const L=this.ts(qt.fromSegments(M.prefixPath.concat(M.collectionGroup,M.documentId)),M);L.isFoundDocument()&&(Ev(t,L)||r.has(L.key))&&(C=C.insert(L.key,L))}return C})}getAllFromCollectionGroup(e,t,i,r){let s=Wc();const u=DA(t,i),m=DA(t,Il.max());return Mf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,m,!0)},(v,C,M)=>{const L=this.ts(qt.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);s=s.insert(L.key,L),s.size===r&&M.done()}).next(()=>s)}newChangeBuffer(e){return new qR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TA(e).get("remoteDocumentGlobalKey").next(t=>(bn(!!t),t))}Zn(e,t){return TA(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const i=function oA(n,e){let t;if(e.document)t=IR(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=qt.fromSegments(e.noDocument.path),r=zp(e.noDocument.readTime);t=ro.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ln();{const i=qt.fromSegments(e.unknownDocument.path),r=zp(e.unknownDocument.version);t=ro.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new ho(i[0],i[1]);return xn.fromTimestamp(r)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(xn.min()))return i}return ro.newInvalidDocument(e)}}function xA(n){return new $R(n)}class qR extends IA{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new wf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Hr((s,u)=>Zn(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const m=this.us.get(s);if(t.push(this.os.removeEntry(e,s,m.readTime)),u.isValidDocument()){const v=sA(this.os.serializer,u);r=r.add(s.path.popLast());const C=u0(v);i+=C-m.size,t.push(this.os.addEntry(e,s,v))}else if(i-=m.size,this.trackRemovals){const v=sA(this.os.serializer,u.convertToNoDocument(xn.min()));t.push(this.os.addEntry(e,s,v))}}),r.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,i)),Ke.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(i=>(this.us.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:i,rs:r})=>(r.forEach((s,u)=>{this.us.set(s,{size:u,readTime:i.get(s).readTime})}),i))}}function TA(n){return Ms(n,"remoteDocumentGlobal")}function Mf(n){return Ms(n,"remoteDocumentsV14")}function Gp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DA(n,e){const t=e.documentKey.path.toArray();return[n,Rv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SA(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Zn(t[s],i[s]),r)return r;return r=Zn(t.length,i.length),r||(r=Zn(t[t.length-2],i[i.length-2]),r||Zn(t[t.length-1],i[i.length-1]))}class AA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rI{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&xv(i.mutation,r,Gc.empty(),ho.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,li()).next(()=>i))}getLocalViewOfDocuments(e,t,i=li()){const r=Pd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let u=Jb();return s.forEach((m,v)=>{u=u.insert(m,v.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=Pd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,li()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((u,m)=>{t.set(u,m)})})}computeViews(e,t,i,r){let s=Wc();const u=ng(),m=ng();return t.forEach((v,C)=>{const M=i.get(C.key);r.has(C.key)&&(void 0===M||M.mutation instanceof xh)?s=s.insert(C.key,C):void 0!==M?(u.set(C.key,M.mutation.getFieldMask()),xv(M.mutation,C,M.mutation.getFieldMask(),ho.now())):u.set(C.key,Gc.empty())}),this.recalculateAndSaveOverlays(e,s).next(v=>(v.forEach((C,M)=>u.set(C,M)),t.forEach((C,M)=>{var L;return m.set(C,new AA(M,null!==(L=u.get(C))&&void 0!==L?L:null))}),m))}recalculateAndSaveOverlays(e,t){const i=ng();let r=new zr((u,m)=>u-m),s=li();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const m of u)m.keys().forEach(v=>{const C=t.get(v);if(null===C)return;let M=i.get(v)||Gc.empty();M=m.applyToLocalView(C,M),i.set(v,M);const L=(r.get(m.batchId)||li()).add(v);r=r.insert(m.batchId,L)})}).next(()=>{const u=[],m=r.getReverseIterator();for(;m.hasNext();){const v=m.getNext(),C=v.key,M=v.value,L=OC();M.forEach(q=>{if(!s.has(q)){const ne=HS(t.get(q),i.get(q));null!==ne&&L.set(q,ne),s=s.add(q)}}),u.push(this.documentOverlayCache.saveOverlays(e,C,L))}return Ke.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return qt.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):SC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const u=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Ke.resolve(Pd());let m=-1,v=s;return u.next(C=>Ke.forEach(C,(M,L)=>(m<L.largestBatchId&&(m=L.largestBatchId),s.get(M)?Ke.resolve():this.remoteDocumentCache.getEntry(e,M).next(q=>{v=v.insert(M,q)}))).next(()=>this.populateOverlays(e,C,s)).next(()=>this.computeViews(e,v,C,li())).next(M=>({batchId:m,changes:FS(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qt(t)).next(i=>{let r=Jb();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=Jb();return this.indexManager.getCollectionParents(e,r).next(u=>Ke.forEach(u,m=>{const v=(C=t,M=m.child(r),new vf(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.getDocumentsMatchingCollectionQuery(e,v,i).next(C=>{C.forEach((M,L)=>{s=s.insert(M,L)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((m,v)=>{const C=v.getKey();null===s.get(C)&&(s=s.insert(C,ro.newInvalidDocument(C)))});let u=Jb();return s.forEach((m,v)=>{const C=r.get(m);void 0!==C&&xv(C.mutation,v,Gc.empty(),ho.now()),Ev(t,v)&&(u=u.insert(m,v))}),u})}}class sU{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ke.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:rs(i.createTime)}),Ke.resolve()}getNamedQuery(e,t){return Ke.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:QC(i.bundledQuery),readTime:rs(i.readTime)}),Ke.resolve();var i}}class Zc{constructor(){this.overlays=new zr(qt.comparator),this.ls=new Map}getOverlay(e,t){return Ke.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Pd();return Ke.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.we(e,t,s)}),Ke.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),Ke.resolve()}getOverlaysForCollection(e,t,i){const r=Pd(),s=t.length+1,u=new qt(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const v=m.getNext().value,C=v.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===s&&v.largestBatchId>i&&r.set(v.getKey(),v)}return Ke.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new zr((C,M)=>C-M);const u=this.overlays.getIterator();for(;u.hasNext();){const C=u.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>i){let M=s.get(C.largestBatchId);null===M&&(M=Pd(),s=s.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const m=Pd(),v=s.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((C,M)=>m.set(C,M)),!(m.size()>=r)););return Ke.resolve(m)}we(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const u=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new VC(t,i));let s=this.ls.get(t);void 0===s&&(s=li(),this.ls.set(t,s)),this.ls.set(t,s.add(i.key))}}class p0{constructor(){this.fs=new Hr(Ps.ds),this.ws=new Hr(Ps._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new Ps(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new Ps(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new qt(new ji([])),i=new Ps(t,e),r=new Ps(t,e+1),s=[];return this.ws.forEachInRange([i,r],u=>{this.ys(u),s.push(u.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new qt(new ji([])),i=new Ps(t,e),r=new Ps(t,e+1);let s=li();return this.ws.forEachInRange([i,r],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Ps(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Ps{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return qt.comparator(e.key,t.key)||Zn(e.As,t.As)}static _s(e,t){return Zn(e.As,t.As)||qt.comparator(e.key,t.key)}}class GR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Hr(Ps.ds)}checkEmpty(e){return Ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.vs;this.vs++;const u=new sg(s,t,i,r);this.mutationQueue.push(u);for(const m of r)this.Rs=this.Rs.add(new Ps(m.key,s)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Ke.resolve(u)}lookupMutationBatch(e,t){return Ke.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.bs(t+1),s=r<0?0:r;return Ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ps(t,0),r=new Ps(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],u=>{const m=this.Ps(u.As);s.push(m)}),Ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Hr(Zn);return t.forEach(r=>{const s=new Ps(r,0),u=new Ps(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,u],m=>{i=i.add(m.As)})}),Ke.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;qt.isDocumentKey(s)||(s=s.child(""));const u=new Ps(new qt(s),0);let m=new Hr(Zn);return this.Rs.forEachWhile(v=>{const C=v.key.path;return!!i.isPrefixOf(C)&&(C.length===r&&(m=m.add(v.As)),!0)},u),Ke.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(i=>{const r=this.Ps(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){bn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return Ke.forEach(t.mutations,r=>{const s=new Ps(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new Ps(t,0),r=this.Rs.firstAfterOrEqual(i);return Ke.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Ke.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class MA{constructor(e){this.Ds=e,this.docs=new zr(qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,u=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Ke.resolve(i?i.document.mutableCopy():ro.newInvalidDocument(t))}getEntries(e,t){let i=Wc();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ro.newInvalidDocument(r))}),Ke.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Wc();const u=t.path,m=new qt(u.child("")),v=this.docs.getIteratorFrom(m);for(;v.hasNext();){const{key:C,value:{document:M}}=v.getNext();if(!u.isPrefixOf(C.path))break;C.path.length>u.length+1||sC(nS(M),i)<=0||(r.has(M.key)||Ev(t,M))&&(s=s.insert(M.key,M.mutableCopy()))}return Ke.resolve(s)}getAllFromCollectionGroup(e,t,i,r){ln()}Cs(e,t){return Ke.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new WR(this)}getSize(e){return Ke.resolve(this.size)}}class WR extends IA{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),Ke.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class oI{constructor(e){this.persistence=e,this.xs=new wf(t=>Ih(t),vv),this.lastRemoteSnapshotVersion=xn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new p0,this.targetCount=0,this.Ms=kd.kn()}forEachTarget(e,t){return this.xs.forEach((i,r)=>t(r)),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),Ke.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new kd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ke.resolve()}updateTargetData(e,t){return this.Fn(t),Ke.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.xs.forEach((u,m)=>{m.sequenceNumber<=t&&null===i.get(m.targetId)&&(this.xs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,m.targetId)),r++)}),Ke.waitFor(s).next(()=>r)}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return Ke.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),Ke.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(u=>{s.push(r.markPotentiallyOrphaned(e,u))}),Ke.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ke.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return Ke.resolve(i)}containsKey(e,t){return Ke.resolve(this.ks.containsKey(t))}}class Nd{constructor(e,t){this.$s={},this.overlays={},this.Os=new dc(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new oI(this),this.indexManager=new oU,this.remoteDocumentCache=new MA(i=>this.referenceDelegate.Ls(i)),this.serializer=new AR(t),this.qs=new sU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new GR(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){Tt("MemoryPersistence","Starting transaction:",e);const r=new OA(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,t){return Ke.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class OA extends cC{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Qs=new p0,this.js=null}static zs(e){return new pg(e)}get Ws(){if(this.js)return this.js;throw ln()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),Ke.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),Ke.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ke.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Ws,i=>{const r=qt.fromPath(i);return this.Hs(e,r).next(s=>{s||t.removeEntry(r,xn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ke.or([()=>Ke.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ZR{constructor(e){this.serializer=e}O(e,t,i,r){const s=new hv("createOrUpgrade",t);var m;i<1&&r>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aS,{unique:!0}),m.createObjectStore("documentMutations"),KR(e),function(m){m.createObjectStore("remoteDocuments")}(e));let u=Ke.resolve();return i<3&&r>=3&&(0!==i&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),KR(e)),u=u.next(()=>function(m){const v=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xn.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",C)}(s))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(m,v){return v.store("mutations").j().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aS,{unique:!0});const M=v.store("mutations"),L=C.map(q=>M.put(q));return Ke.waitFor(L)})}(e,s))),u=u.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(u=u.next(()=>this.Ys(s))),i<6&&r>=6&&(u=u.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),i<7&&r>=7&&(u=u.next(()=>this.Zs(s))),i<8&&r>=8&&(u=u.next(()=>this.ti(e,s))),i<9&&r>=9&&(u=u.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(u=u.next(()=>this.ei(s))),i<11&&r>=11&&(u=u.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(u=u.next(()=>{!function(m){const v=m.createObjectStore("documentOverlays",{keyPath:oR});v.createIndex("collectionPathOverlayIndex",sR,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",fv,{unique:!1})}(e)})),i<13&&r>=13&&(u=u.next(()=>function(m){const v=m.createObjectStore("remoteDocumentsV14",{keyPath:zb});v.createIndex("documentKeyIndex",qc),v.createIndex("collectionGroupIndex",J2)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(u=u.next(()=>this.si(e,s))),i<15&&r>=15&&(u=u.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:hS}).createIndex("sequenceNumberIndex",fS,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:pS}).createIndex("documentKeyIndex",rR,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((i,r)=>{t+=u0(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(r=>Ke.forEach(r,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",u).next(m=>Ke.forEach(m,v=>{bn(v.userId===s.userId);const C=Tf(this.serializer,v);return iI(e,s.userId,C).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((u,m)=>{const v=new ji(u),C=[0,hc(v)];s.push(t.get(C).next(M=>M?Ke.resolve():t.put({targetId:0,path:hc(v),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>Ke.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:dS});const i=t.store("collectionParents"),r=new yA,s=u=>{if(r.add(u)){const m=u.lastSegment(),v=u.popLast();return i.put({collectionId:m,parent:hc(v)})}};return t.store("remoteDocuments").X({Y:!0},(u,m)=>{const v=new ji(u);return s(v.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,m,v],C)=>{const M=Sd(m);return s(M.popLast())}))}ei(e){const t=e.store("targets");return t.X((i,r)=>{const s=Hp(r),u=MR(this.serializer,s);return t.put(u)})}ni(e,t){const i=t.store("remoteDocuments"),r=[];return i.X((s,u)=>{const m=t.store("remoteDocumentsV14"),v=(C=u,C.document?new qt(ji.fromString(C.document.name).popFirst(5)):C.noDocument?qt.fromSegments(C.noDocument.path):C.unknownDocument?qt.fromSegments(C.unknownDocument.path):ln()).path.toArray();var C;const M={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(m.put(M))}).next(()=>Ke.waitFor(r))}si(e,t){const i=t.store("mutations"),r=xA(this.serializer),s=new Nd(pg.zs,this.serializer.fe);return i.j().next(u=>{const m=new Map;return u.forEach(v=>{var C;let M=null!==(C=m.get(v.userId))&&void 0!==C?C:li();Tf(this.serializer,v).keys().forEach(L=>M=M.add(L)),m.set(v.userId,M)}),Ke.forEach(m,(v,C)=>{const M=new As(C),L=l0.de(this.serializer,M),q=s.getIndexManager(M),ne=d0.de(M,this.serializer,q,s.referenceDelegate);return new rI(r,ne,L,q).recalculateAndSaveOverlaysForDocumentKeys(new Hb(t,dc.ct),v).next()})})}}function KR(n){n.createObjectStore("targetDocuments",{keyPath:uS}).createIndex("documentTargetsIndex",iR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lS,{unique:!0}),n.createObjectStore("targetGlobal")}const m0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sI{constructor(e,t,i,r,s,u,m,v,C,M,L=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ii=s,this.window=u,this.document=m,this.ri=C,this.oi=M,this.ui=L,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=q=>Promise.resolve(),!sI.D())throw new vt(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HR(this,r),this.di=t+"main",this.serializer=new AR(v),this.wi=new ou(this.di,this.ui,new ZR(this.serializer)),this.Bs=new BR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xA(this.serializer),this.qs=new OR,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===M&&io("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(tt.FAILED_PRECONDITION,m0);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new dc(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var i=(0,dt.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,dt.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,dt.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>g0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Dd(e))return Tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Lv(e).get("owner").next(t=>Ke.resolve(this.Ri(t)))}Pi(e){return g0(e).delete(this.clientId)}bi(){var e=this;return(0,dt.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Ms(i,"clientMetadata");return r.j().next(s=>{const u=e.Si(s,18e5),m=s.filter(v=>-1===u.indexOf(v));return Ke.forEach(m,v=>r.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const i of t)e._i.removeItem(e.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Ke.resolve(!0):Lv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new vt(tt.FAILED_PRECONDITION,m0);return!1}}return!(!this.networkEnabled||!this.inForeground)||g0(e).j().next(i=>void 0===this.Si(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Tt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,dt.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new Hb(t,dc.ct);return e.Ai(i).next(()=>e.Pi(i))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(i=>this.Vi(i.updateTimeMs,t)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>g0(e).j().next(t=>this.Si(t,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return d0.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tI(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return l0.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,i){Tt("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(u=this.ui)?_S:14===u?pv:13===u?gS:12===u?aR:11===u?mS:void ln();var u;let m;return this.wi.runTransaction(e,r,s,v=>(m=new Hb(v,this.Os?this.Os.next():dc.ct),"readwrite-primary"===t?this.Ti(m).next(C=>!!C||this.Ei(m)).next(C=>{if(!C)throw io(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new vt(tt.FAILED_PRECONDITION,aC);return i(m)}).next(C=>this.vi(m).next(()=>C)):this.Oi(m).next(()=>i(m)))).then(v=>(m.raiseOnCommittedEvent(),v))}Oi(e){return Lv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new vt(tt.FAILED_PRECONDITION,m0)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lv(e).put("owner",t)}static D(){return ou.D()}Ai(e){const t=Lv(e);return t.get("owner").next(i=>this.Ri(i)?(Tt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ke.resolve())}Vi(e,t){const i=Date.now();return!(e<i-t||e>i&&(io(`Detected an update time that is in the future: ${e} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ie.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const i=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Tt("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return io("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){io("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lv(n){return Ms(n,"owner")}function g0(n){return Ms(n,"clientMetadata")}function aI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class _0{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=r}static Li(e,t){let i=li(),r=li();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new _0(e,t.fromCache,i,r)}}class YR{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,i)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(MS(t))return Ke.resolve(null);let i=ba(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=wv(t,null,"F"),i=ba(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const u=li(...s);return this.Ui.getDocuments(e,u).next(m=>this.indexManager.getMinOffset(e,i).next(v=>{const C=this.ji(t,m);return this.zi(t,C,u,v.readTime)?this.Ki(e,wv(t,null,"F")):this.Wi(e,C,t,v)}))})))}Gi(e,t,i,r){return MS(t)||r.isEqual(xn.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(s=>{const u=this.ji(t,s);return this.zi(t,u,i,r)?this.Qi(e,t):(eC()<=Mu.in.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),MC(t)),this.Wi(e,u,t,tS(r,-1)))})}ji(e,t){let i=new Hr(PS(e));return t.forEach((r,s)=>{Ev(e,s)&&(i=i.add(s))}),i}zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return eC()<=Mu.in.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",MC(t)),this.Ui.getDocumentsMatchingQuery(e,t,Il.min())}Wi(e,t,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class PA{constructor(e,t,i,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new zr(Zn),this.Yi=new wf(s=>Ih(s),vv),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rI(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function RA(n,e,t,i){return new PA(n,e,t,i)}function cI(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,dt.Z)(function*(n,e){const t=Gt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const u=[],m=[];let v=li();for(const C of r){u.push(C.batchId);for(const M of C.mutations)v=v.add(M.key)}for(const C of s){m.push(C.batchId);for(const M of C.mutations)v=v.add(M.key)}return t.localDocuments.getDocuments(i,v).next(C=>({er:C,removedBatchIds:u,addedBatchIds:m}))})})}),kA.apply(this,arguments)}function uI(n){const e=Gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function FA(n,e,t){let i=li(),r=li();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let u=Wc();return t.forEach((m,v)=>{const C=s.get(m);v.isFoundDocument()!==C.isFoundDocument()&&(r=r.add(m)),v.isNoDocument()&&v.version.isEqual(xn.min())?(e.removeEntry(m,v.readTime),u=u.insert(m,v)):!C.isValidDocument()||v.version.compareTo(C.version)>0||0===v.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(v),u=u.insert(m,v)):Tt("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",v.version)}),{nr:u,sr:r}})}function LA(n,e){const t=Gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Wp(n,e){const t=Gt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Bs.getTargetData(i,e).next(s=>s?(r=s,Ke.resolve(r)):t.Bs.allocateTargetId(i).next(u=>(r=new zu(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function Hu(n,e,t){return gg.apply(this,arguments)}function gg(){return gg=(0,dt.Z)(function*(n,e,t){const i=Gt(n),r=i.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Dd(u))throw u;Tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}),gg.apply(this,arguments)}function Uv(n,e,t){const i=Gt(n);let r=xn.min(),s=li();return i.persistence.runTransaction("Execute query","readonly",u=>function(m,v,C){const M=Gt(m),L=M.Yi.get(C);return void 0!==L?Ke.resolve(M.Ji.get(L)):M.Bs.getTargetData(v,C)}(i,u,ba(e)).next(m=>{if(m)return r=m.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(u,m.targetId).next(v=>{s=v})}).next(()=>i.Hi.getDocumentsMatchingQuery(u,e,t?r:xn.min(),t?s:li())).next(m=>(VA(i,OS(e),m),{documents:m,ir:s})))}function dI(n,e){const t=Gt(n),i=Gt(t.Bs),r=t.Ji.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.le(s,e).next(u=>u?u.target:null))}function UA(n,e){const t=Gt(n),i=t.Xi.get(e)||xn.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Zi.getAllFromCollectionGroup(r,e,tS(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(VA(t,e,r),r))}function VA(n,e,t){let i=n.Xi.get(e)||xn.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(e,i)}function v0(){return v0=(0,dt.Z)(function*(n,e,t,i){const r=Gt(n);let s=li(),u=Wc();for(const C of t){const M=e.rr(C.metadata.name);C.document&&(s=s.add(M));const L=e.ur(C);L.setReadTime(e.cr(C.metadata.readTime)),u=u.insert(M,L)}const m=r.Zi.newChangeBuffer({trackRemovals:!0}),v=yield Wp(r,(C=i,ba(yf(ji.fromString(`__bundle__/docs/${C}`)))));var C;return r.persistence.runTransaction("Apply bundle documents","readwrite",C=>FA(C,m,u).next(M=>(m.apply(C),M)).next(M=>r.Bs.removeMatchingKeysForTargetId(C,v.targetId).next(()=>r.Bs.addMatchingKeys(C,s,v.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(C,M.nr,M.sr)).next(()=>M.nr)))}),v0.apply(this,arguments)}function QR(n,e){return hI.apply(this,arguments)}function hI(){return hI=(0,dt.Z)(function*(n,e,t=li()){const i=yield Wp(n,ba(QC(e.bundledQuery))),r=Gt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const u=rs(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r.qs.saveNamedQuery(s,e);const m=i.withResumeToken(Os.EMPTY_BYTE_STRING,u);return r.Ji=r.Ji.insert(m.targetId,m),r.Bs.updateTargetData(s,m).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,t,i.targetId)).next(()=>r.qs.saveNamedQuery(s,e))})}),hI.apply(this,arguments)}function XR(n,e){return`firestore_clients_${n}_${e}`}function JR(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function BA(n,e){return`firestore_targets_${n}_${e}`}class Vv{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static ar(e,t,i){const r=JSON.parse(i);let s,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new vt(r.error.code,r.error.message))),u?new Vv(e,t,r.state,s):(io("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bv{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static ar(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new vt(i.error.code,i.error.message))),s?new Bv(e,i.state,r):(io("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class y0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=PC();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=uC(i.activeTargetIds[u]),s=s.add(i.activeTargetIds[u]);return r?new y0(e,s):(io("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class fI{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fI(t.clientId,t.onlineState):(io("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jA{constructor(){this.activeTargetIds=PC()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zA{constructor(e,t,i,r,s){this.window=e,this.ii=t,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new zr(Zn),this.started=!1,this.yr=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=XR(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new jA),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,dt.Z)(function*(){const t=yield e.syncEngine.$i();for(const r of t){if(r===e.wr)continue;const s=e.getItem(XR(e.persistenceKey,r));if(s){const u=y0.ar(r,s);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const i=e.storage.getItem(e.vr);if(i){const r=e.br(i);r&&e.Vr(r)}for(const r of e.yr)e.mr(r);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,i){this.Dr(e,t,i),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(BA(this.persistenceKey,e));if(i){const r=Bv.ar(e,i);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(BA(this.persistenceKey,e))}updateQueryState(e,t,i){this.kr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Cr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Tt("SharedClientState","READ",e,t),t}setItem(e,t){Tt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Tt("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void io("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,dt.Z)(function*(){if(t.started){if(null!==i.key)if(t.Tr.test(i.key)){if(null==i.newValue){const r=t.Or(i.key);return t.Fr(r,null)}{const r=t.Br(i.key,i.newValue);if(r)return t.Fr(r.clientId,r)}}else if(t.Er.test(i.key)){if(null!==i.newValue){const r=t.Lr(i.key,i.newValue);if(r)return t.qr(r)}}else if(t.Ar.test(i.key)){if(null!==i.newValue){const r=t.Ur(i.key,i.newValue);if(r)return t.Kr(r)}}else if(i.key===t.vr){if(null!==i.newValue){const r=t.br(i.newValue);if(r)return t.Vr(r)}}else if(i.key===t.Ir){const r=function(s){let u=dc.ct;if(null!=s)try{const m=JSON.parse(s);bn("number"==typeof m),u=m}catch(m){io("SharedClientState","Failed to read sequence number from WebStorage",m)}return u}(i.newValue);r!==dc.ct&&t.sequenceNumberHandler(r)}else if(i.key===t.Rr){const r=t.Gr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,i){const r=new Vv(this.currentUser,e,t,i),s=JR(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const t=JR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,i){const r=BA(this.persistenceKey,e),s=new Bv(e,t,i);this.setItem(r,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const i=this.Or(e);return y0.ar(i,t)}Lr(e,t){const i=this.Er.exec(e),r=Number(i[1]);return Vv.ar(new As(void 0!==i[2]?i[2]:null),r,t)}Ur(e,t){const i=this.Ar.exec(e),r=Number(i[1]);return Bv.ar(r,t)}br(e){return fI.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,dt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const i=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(i),u=[],m=[];return s.forEach(v=>{r.has(v)||u.push(v)}),r.forEach(v=>{s.has(v)||m.push(v)}),this.syncEngine.Wr(u,m).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=PC();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class ek{constructor(){this.Hr=new jA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new jA,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cU{Yr(e){}shutdown(){}}class tk{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let b0=null;function _g(){return null===b0?b0=268435456+Math.round(2147483648*Math.random()):b0++,"0x"+b0.toString(16)}const nk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ik{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const wa="WebChannelConnection";class Zp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,r,s){const u=_g(),m=this.To(e,t);Tt("RestConnection",`Sending RPC '${e}' ${u}:`,m,i);const v={};return this.Eo(v,r,s),this.Ao(e,m,v,i).then(C=>(Tt("RestConnection",`Received RPC '${e}' ${u}: `,C),C),C=>{throw ru("RestConnection",`RPC '${e}' ${u} failed with error: `,C,"url: ",m,"request:",i),C})}vo(e,t,i,r,s,u){return this.Io(e,t,i,r,s)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+qm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,t){return`${this.mo}/v1/${t}:${nk[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,r){const s=_g();return new Promise((u,m)=>{const v=new Td;v.setWithCredentials(!0),v.listenOnce(QE.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case YD.NO_ERROR:const M=v.getResponseJson();Tt(wa,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(M)),u(M);break;case YD.TIMEOUT:Tt(wa,`RPC '${e}' ${s} timed out`),m(new vt(tt.DEADLINE_EXCEEDED,"Request time out"));break;case YD.HTTP_ERROR:const L=v.getStatus();if(Tt(wa,`RPC '${e}' ${s} failed with status:`,L,"response text:",v.getResponseText()),L>0){let q=v.getResponseJson();Array.isArray(q)&&(q=q[0]);const ne=q?.error;if(ne&&ne.status&&ne.message){const ae=function(ye){const We=ye.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(We)>=0?We:tt.UNKNOWN}(ne.status);m(new vt(ae,ne.message))}else m(new vt(tt.UNKNOWN,"Server responded with status "+v.getStatus()))}else m(new vt(tt.UNAVAILABLE,"Connection failed."));break;default:ln()}}finally{Tt(wa,`RPC '${e}' ${s} completed.`)}});const C=JSON.stringify(r);Tt(wa,`RPC '${e}' ${s} sending request:`,r),v.send(t,"POST",C,i,15)})}Ro(e,t,i){const r=_g(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZP(),m=KD(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(v.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(v.xmlHttpFactory=new KP({})),this.Eo(v.initMessageHeaders,t,i),v.encodeInitMessageHeaders=!0;const M=s.join("");Tt(wa,`Creating RPC '${e}' stream ${r}: ${M}`,v);const L=u.createWebChannel(M,v);let q=!1,ne=!1;const ae=new ik({ro:We=>{ne?Tt(wa,`Not sending because RPC '${e}' stream ${r} is closed:`,We):(q||(Tt(wa,`Opening RPC '${e}' stream ${r} transport.`),L.open(),q=!0),Tt(wa,`RPC '${e}' stream ${r} sending:`,We),L.send(We))},oo:()=>L.close()}),ye=(We,wt,Ot)=>{We.listen(wt,Mt=>{try{Ot(Mt)}catch(Lt){setTimeout(()=>{throw Lt},0)}})};return ye(L,lv.EventType.OPEN,()=>{ne||Tt(wa,`RPC '${e}' stream ${r} transport opened.`)}),ye(L,lv.EventType.CLOSE,()=>{ne||(ne=!0,Tt(wa,`RPC '${e}' stream ${r} transport closed`),ae.wo())}),ye(L,lv.EventType.ERROR,We=>{ne||(ne=!0,ru(wa,`RPC '${e}' stream ${r} transport errored:`,We),ae.wo(new vt(tt.UNAVAILABLE,"The operation could not be completed")))}),ye(L,lv.EventType.MESSAGE,We=>{var wt;if(!ne){const Ot=We.data[0];bn(!!Ot);const Lt=Ot.error||(null===(wt=Ot[0])||void 0===wt?void 0:wt.error);if(Lt){Tt(wa,`RPC '${e}' stream ${r} received error:`,Lt);const Mn=Lt.status;let Rn=function(Wo){const Xc=ps[Wo];if(void 0!==Xc)return GS(Xc)}(Mn),Ui=Lt.message;void 0===Rn&&(Rn=tt.INTERNAL,Ui="Unknown error status: "+Mn+" with message "+Lt.message),ne=!0,ae.wo(new vt(Rn,Ui)),L.close()}else Tt(wa,`RPC '${e}' stream ${r} received:`,Ot),ae._o(Ot)}}),ye(m,XE.STAT_EVENT,We=>{We.stat===Uu.PROXY?Tt(wa,`RPC '${e}' stream ${r} detected buffering proxy`):We.stat===Uu.NOPROXY&&Tt(wa,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{ae.fo()},0),ae}}function pI(){return typeof window<"u"?window:null}function vg(){return typeof document<"u"?document:null}function Kp(n){return new GC(n,!0)}class mI{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-i);r>0&&Tt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class w0{constructor(e,t,i,r,s,u,m,v){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new mI(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,dt.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,dt.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return(0,dt.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===tt.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===tt.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===t&&this.Zo(i,r)},i=>{e(()=>{const r=new vt(tt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No((0,dt.Z)(function*(){e.state=0,e.start()}))}tu(e){return Tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gI extends w0{constructor(e,t,i,r,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function eA(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:ln(),r=e.targetChange.targetIds||[],s=function(v,C){return v.useProto3Json?(bn(void 0===C||"string"==typeof C),Os.fromBase64String(C||"")):(bn(void 0===C||C instanceof Uint8Array),Os.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&function(v){const C=void 0===v.code?tt.UNKNOWN:GS(v.code);return new vt(C,v.message||"")}(u);t=new $C(i,r,s,m||null)}else if("documentChange"in e){const i=e.documentChange,r=ju(n,i.document.name),s=rs(i.document.updateTime),u=i.document.createTime?rs(i.document.createTime):xn.min(),m=new ya({mapValue:{fields:i.document.fields}}),v=ro.newFoundDocument(r,s,u,m);t=new cg(i.targetIds||[],i.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const i=e.documentDelete,r=ju(n,i.document),s=i.readTime?rs(i.readTime):xn.min(),u=ro.newNoDocument(r,s);t=new cg([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const i=e.documentRemove,r=ju(n,i.document);t=new cg([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return ln();{const i=e.filter,{count:r=0,unchangedNames:s}=i,u=new wR(r,s);t=new r0(i.targetId,u)}}var v;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return xn.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?xn.min():s.readTime?rs(s.readTime):xn.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=Rd(this.serializer),t.addTarget=function(r,s){let u;const m=s.target;if(u=yv(m)?{documents:xR(r,m)}:{query:jp(r,m)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=WC(r,s.resumeToken);const v=s0(r,s.expectedCount);null!==v&&(u.expectedCount=v)}else if(s.snapshotVersion.compareTo(xn.min())>0){u.readTime=Vp(r,s.snapshotVersion.toTimestamp());const v=s0(r,s.expectedCount);null!==v&&(u.expectedCount=v)}return u}(this.serializer,e);const i=function KC(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ln()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=Rd(this.serializer),t.removeTarget=e,this.Wo(t)}}class E0 extends w0{constructor(e,t,i,r,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(bn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function rU(n,e){return n&&n.length>0?(bn(void 0!==e),n.map(t=>function(i,r){let s=rs(i.updateTime?i.updateTime:r);return s.isEqual(xn.min())&&(s=rs(r)),new bR(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=rs(e.commitTime);return this.listener.cu(i,t)}return bn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Rd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Bp(this.serializer,i))};this.Wo(t)}}class lU extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new vt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new vt(tt.UNKNOWN,r.toString())})}vo(e,t,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.vo(e,t,i,s,u,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new vt(tt.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class $A{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(io(t),this.mu=!1):Tt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class rk{constructor(e,t,i,r,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(m=>{i.enqueueAndForget((0,dt.Z)(function*(){var v;Yp(u)&&(Tt("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,dt.Z)(function*(C){const M=Gt(C);M.vu.add(4),yield yg(M),M.bu.set("Unknown"),M.vu.delete(4),yield jv(M)}),function(C){return v.apply(this,arguments)})(u))}))}),this.bu=new $A(i,r)}}function jv(n){return _I.apply(this,arguments)}function _I(){return _I=(0,dt.Z)(function*(n){if(Yp(n))for(const e of n.Ru)yield e(!0)}),_I.apply(this,arguments)}function yg(n){return C0.apply(this,arguments)}function C0(){return C0=(0,dt.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),C0.apply(this,arguments)}function zv(n,e){const t=Gt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Hv(t)?I0(t):qv(t).Ko()&&vI(t,e))}function bg(n,e){const t=Gt(n),i=qv(t);t.Au.delete(e),i.Ko()&&qA(t,e),0===t.Au.size&&(i.Ko()?i.jo():Yp(t)&&t.bu.set("Unknown"))}function vI(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qv(n).su(e)}function qA(n,e){n.Vu.qt(e),qv(n).iu(e)}function I0(n){n.Vu=new qC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),qv(n).start(),n.bu.gu()}function Hv(n){return Yp(n)&&!qv(n).Uo()&&n.Au.size>0}function Yp(n){return 0===Gt(n).vu.size}function yI(n){n.Vu=void 0}function bI(n){return wI.apply(this,arguments)}function wI(){return wI=(0,dt.Z)(function*(n){n.Au.forEach((e,t)=>{vI(n,e)})}),wI.apply(this,arguments)}function ok(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,dt.Z)(function*(n,e){yI(n),Hv(n)?(n.bu.Iu(e),I0(n)):n.bu.set("Unknown")}),GA.apply(this,arguments)}function dU(n,e,t){return EI.apply(this,arguments)}function EI(){return EI=(0,dt.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof $C&&2===e.state&&e.cause)try{yield(i=(0,dt.Z)(function*(r,s){const u=s.cause;for(const m of s.targetIds)r.Au.has(m)&&(yield r.remoteSyncer.rejectListen(m,u),r.Au.delete(m),r.Vu.removeTarget(m))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield x0(n,i)}else if(e instanceof cg?n.Vu.Ht(e):e instanceof r0?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(xn.min()))try{const i=yield uI(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const u=r.Vu.ce(s);return u.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const C=r.Au.get(v);C&&r.Au.set(v,C.withResumeToken(m.resumeToken,s))}}),u.targetMismatches.forEach((m,v)=>{const C=r.Au.get(m);if(!C)return;r.Au.set(m,C.withResumeToken(Os.EMPTY_BYTE_STRING,C.snapshotVersion)),qA(r,m);const M=new zu(C.target,m,v,C.sequenceNumber);vI(r,M)}),r.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(i){Tt("RemoteStore","Failed to raise snapshot:",i),yield x0(n,i)}var i}),EI.apply(this,arguments)}function x0(n,e,t){return CI.apply(this,arguments)}function CI(){return CI=(0,dt.Z)(function*(n,e,t){if(!Dd(e))throw e;n.vu.add(1),yield yg(n),n.bu.set("Offline"),t||(t=()=>uI(n.localStore)),n.asyncQueue.enqueueRetryable((0,dt.Z)(function*(){Tt("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield jv(n)}))}),CI.apply(this,arguments)}function WA(n,e){return e().catch(t=>x0(n,t,e))}function Qp(n){return T0.apply(this,arguments)}function T0(){return T0=(0,dt.Z)(function*(n){const e=Gt(n),t=Of(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;sk(e);)try{const r=yield LA(e.localStore,i);if(null===r){0===e.Eu.length&&t.jo();break}i=r.batchId,ZA(e,r)}catch(r){yield x0(e,r)}II(e)&&ak(e)}),T0.apply(this,arguments)}function sk(n){return Yp(n)&&n.Eu.length<10}function ZA(n,e){n.Eu.push(e);const t=Of(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function II(n){return Yp(n)&&!Of(n).Uo()&&n.Eu.length>0}function ak(n){Of(n).start()}function ck(n){return $v.apply(this,arguments)}function $v(){return $v=(0,dt.Z)(function*(n){Of(n).hu()}),$v.apply(this,arguments)}function KA(n){return D0.apply(this,arguments)}function D0(){return D0=(0,dt.Z)(function*(n){const e=Of(n);for(const t of n.Eu)e.uu(t.mutations)}),D0.apply(this,arguments)}function lk(n,e,t){return wg.apply(this,arguments)}function wg(){return wg=(0,dt.Z)(function*(n,e,t){const i=n.Eu.shift(),r=UC.from(i,e,t);yield WA(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Qp(n)}),wg.apply(this,arguments)}function uk(n,e){return xI.apply(this,arguments)}function xI(){return xI=(0,dt.Z)(function*(n,e){var t;e&&Of(n).ou&&(yield(t=(0,dt.Z)(function*(i,r){if(Dv(s=r.code)&&s!==tt.ABORTED){const u=i.Eu.shift();Of(i).Qo(),yield WA(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield Qp(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),II(n)&&ak(n)}),xI.apply(this,arguments)}function TI(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,dt.Z)(function*(n,e){const t=Gt(n);t.asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials");const i=Yp(t);t.vu.add(3),yield yg(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield jv(t)}),S0.apply(this,arguments)}function YA(n,e){return DI.apply(this,arguments)}function DI(){return DI=(0,dt.Z)(function*(n,e){const t=Gt(n);e?(t.vu.delete(2),yield jv(t)):e||(t.vu.add(2),yield yg(t),t.bu.set("Unknown"))}),DI.apply(this,arguments)}function qv(n){return n.Su||(n.Su=function(e,t,i){const r=Gt(e);return r.fu(),new gI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:bI.bind(null,n),ao:ok.bind(null,n),nu:dU.bind(null,n)}),n.Ru.push(function(){var e=(0,dt.Z)(function*(t){t?(n.Su.Qo(),Hv(n)?I0(n):n.bu.set("Unknown")):(yield n.Su.stop(),yI(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Of(n){return n.Du||(n.Du=function(e,t,i){const r=Gt(e);return r.fu(),new E0(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:ck.bind(null,n),ao:uk.bind(null,n),au:KA.bind(null,n),cu:lk.bind(null,n)}),n.Ru.push(function(){var e=(0,dt.Z)(function*(t){t?(n.Du.Qo(),yield Qp(n)):(yield n.Du.stop(),n.Eu.length>0&&(Tt("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class QA{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,i,r,s){const u=Date.now()+i,m=new QA(e,t,u,r,s);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vt(tt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gv(n,e){if(io("AsyncQueue",`${e}: ${n}`),Dd(n))return new vt(tt.UNAVAILABLE,`${e}: ${n}`);throw n}class Eg{constructor(e){this.comparator=e?(t,i)=>e(t,i)||qt.comparator(t.key,i.key):(t,i)=>qt.comparator(t.key,i.key),this.keyedMap=Jb(),this.sortedSet=new zr(this.comparator)}static emptySet(e){return new Eg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Eg;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class XA{constructor(){this.Cu=new zr(qt.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ln():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Wv{constructor(e,t,i,r,s,u,m,v,C){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=v,this.hasCachedResults=C}static fromInitialDocuments(e,t,i,r,s){const u=[];return t.forEach(m=>{u.push({type:0,doc:m})}),new Wv(e,t,Eg.emptySet(t),u,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class hU{constructor(){this.Nu=void 0,this.listeners=[]}}class fU{constructor(){this.queries=new wf(e=>AC(e),tg),this.onlineState="Unknown",this.ku=new Set}}function JA(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,dt.Z)(function*(n,e){const t=Gt(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new hU),r)try{s.Nu=yield t.onListen(i)}catch(u){const m=Gv(u,`Initialization of query '${MC(e.query)}' failed`);return void e.onError(m)}t.queries.set(i,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&nM(t)}),eM.apply(this,arguments)}function SI(n,e){return tM.apply(this,arguments)}function tM(){return tM=(0,dt.Z)(function*(n,e){const t=Gt(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),tM.apply(this,arguments)}function pU(n,e){const t=Gt(n);let i=!1;for(const r of e){const u=t.queries.get(r.query);if(u){for(const m of u.listeners)m.$u(r)&&(i=!0);u.Nu=r}}i&&nM(t)}function mU(n,e,t){const i=Gt(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function nM(n){n.ku.forEach(e=>{e.next()})}class iM{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Wv(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Wv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class dk{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class hk{constructor(e){this.serializer=e}rr(e){return ju(this.serializer,e)}ur(e){return e.metadata.exists?IR(this.serializer,e.document,!1):ro.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return rs(e)}}class o{constructor(e,t,i){this.ju=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=a(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const i=ji.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,i=new hk(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const u of r.metadata.queries){const m=(t.get(u)||li()).add(s);t.set(u,m)}}return t}complete(){var e=this;return(0,dt.Z)(function*(){const t=yield function aU(n,e,t,i){return v0.apply(this,arguments)}(e.localStore,new hk(e.serializer),e.documents,e.ju.id),i=e.Wu(e.documents);for(const r of e.queries)yield QR(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function a(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class d{constructor(e){this.key=e}}class p{constructor(e){this.key=e}}class _{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=li(),this.mutatedKeys=li(),this.tc=PS(e),this.ec=new Eg(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new XA,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,u=r,m=!1;const v="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,C="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((M,L)=>{const q=r.get(M),ne=Ev(this.query,L)?L:null,ae=!!q&&this.mutatedKeys.has(q.key),ye=!!ne&&(ne.hasLocalMutations||this.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations);let We=!1;q&&ne?q.data.isEqual(ne.data)?ae!==ye&&(i.track({type:3,doc:ne}),We=!0):this.rc(q,ne)||(i.track({type:2,doc:ne}),We=!0,(v&&this.tc(ne,v)>0||C&&this.tc(ne,C)<0)&&(m=!0)):!q&&ne?(i.track({type:0,doc:ne}),We=!0):q&&!ne&&(i.track({type:1,doc:q}),We=!0,(v||C)&&(m=!0)),We&&(ne?(u=u.add(ne),s=ye?s.add(M):s.delete(M)):(u=u.delete(M),s=s.delete(M)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const M="F"===this.query.limitType?u.last():u.first();u=u.delete(M.key),s=s.delete(M.key),i.track({type:1,doc:M})}return{ec:u,ic:i,zi:m,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((C,M)=>function(L,q){const ne=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ln()}};return ne(L)-ne(q)}(C.type,M.type)||this.tc(C.doc,M.doc)),this.oc(i);const u=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,v=m!==this.Xu;return this.Xu=m,0!==s.length||v?{snapshot:new Wv(this.query,e.ec,r,s,e.mutatedKeys,0===m,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new XA,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=li(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new p(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new d(i))}),t}hc(e){this.Yu=e.ir,this.Zu=li();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Wv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class b{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class T{constructor(e){this.key=e,this.fc=!1}}class S{constructor(e,t,i,r,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new wf(m=>AC(m),tg),this._c=new Map,this.mc=new Set,this.gc=new zr(qt.comparator),this.yc=new Map,this.Ic=new p0,this.Tc={},this.Ec=new Map,this.Ac=kd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function R(n,e){return B.apply(this,arguments)}function B(){return B=(0,dt.Z)(function*(n,e){const t=xk(n);let i,r;const s=t.wc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const u=yield Wp(t.localStore,ba(e)),m=t.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield W(t,e,i,"current"===m,u.resumeToken),t.isPrimaryClient&&zv(t.remoteStore,u)}return r}),B.apply(this,arguments)}function W(n,e,t,i,r){return se.apply(this,arguments)}function se(){return se=(0,dt.Z)(function*(n,e,t,i,r){n.Rc=(L,q,ne)=>{return(ae=(0,dt.Z)(function*(ye,We,wt,Ot){let Mt=We.view.sc(wt);Mt.zi&&(Mt=yield Uv(ye.localStore,We.query,!1).then(({documents:Rn})=>We.view.sc(Rn,Mt)));const Lt=Ot&&Ot.targetChanges.get(We.targetId),Mn=We.view.applyChanges(Mt,ye.isPrimaryClient,Lt);return pk(ye,We.targetId,Mn.cc),Mn.snapshot}),function(ye,We,wt,Ot){return ae.apply(this,arguments)})(n,L,q,ne);var ae};const s=yield Uv(n.localStore,e,!0),u=new _(e,s.ir),m=u.sc(s.documents),v=Mv.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),C=u.applyChanges(m,n.isPrimaryClient,v);pk(n,t,C.cc);const M=new b(e,t,u);return n.wc.set(e,M),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),se.apply(this,arguments)}function xe(n,e){return Be.apply(this,arguments)}function Be(){return Be=(0,dt.Z)(function*(n,e){const t=Gt(n),i=t.wc.get(e),r=t._c.get(i.targetId);if(r.length>1)return t._c.set(i.targetId,r.filter(s=>!tg(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Hu(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),bg(t.remoteStore,i.targetId),A0(t,i.targetId)}).catch(wh))):(A0(t,i.targetId),yield Hu(t.localStore,i.targetId,!0))}),Be.apply(this,arguments)}function Dt(){return Dt=(0,dt.Z)(function*(n,e,t){const i=Tk(n);try{const r=yield function(s,u){const m=Gt(s),v=ho.now(),C=u.reduce((q,ne)=>q.add(ne.key),li());let M,L;return m.persistence.runTransaction("Locally write mutations","readwrite",q=>{let ne=Wc(),ae=li();return m.Zi.getEntries(q,C).next(ye=>{ne=ye,ne.forEach((We,wt)=>{wt.isValidDocument()||(ae=ae.add(We))})}).next(()=>m.localDocuments.getOverlayedDocuments(q,ne)).next(ye=>{M=ye;const We=[];for(const wt of u){const Ot=nU(wt,M.get(wt.key).overlayedDocument);null!=Ot&&We.push(new xh(wt.key,Ot,ES(Ot.value.mapValue),Dr.exists(!0)))}return m.mutationQueue.addMutationBatch(q,v,We,u)}).next(ye=>{L=ye;const We=ye.applyToLocalDocumentSet(M,ae);return m.documentOverlayCache.saveOverlays(q,ye.batchId,We)})}).then(()=>({batchId:L.batchId,changes:FS(M)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,u,m){let v=s.Tc[s.currentUser.toKey()];v||(v=new zr(Zn)),v=v.insert(u,m),s.Tc[s.currentUser.toKey()]=v}(i,r.batchId,t),yield Xp(i,r.changes),yield Qp(i.remoteStore)}catch(r){const s=Gv(r,"Failed to persist write");t.reject(s)}}),Dt.apply(this,arguments)}function Wt(n,e){return vn.apply(this,arguments)}function vn(){return vn=(0,dt.Z)(function*(n,e){const t=Gt(n);try{const i=yield function NA(n,e){const t=Gt(n),i=e.snapshotVersion;let r=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});r=t.Ji;const m=[];e.targetChanges.forEach((M,L)=>{const q=r.get(L);if(!q)return;m.push(t.Bs.removeMatchingKeys(s,M.removedDocuments,L).next(()=>t.Bs.addMatchingKeys(s,M.addedDocuments,L)));let ne=q.withSequenceNumber(s.currentSequenceNumber);var ae,ye,We;null!==e.targetMismatches.get(L)?ne=ne.withResumeToken(Os.EMPTY_BYTE_STRING,xn.min()).withLastLimboFreeSnapshotVersion(xn.min()):M.resumeToken.approximateByteSize()>0&&(ne=ne.withResumeToken(M.resumeToken,i)),r=r.insert(L,ne),ye=ne,We=M,(0===(ae=q).resumeToken.approximateByteSize()||ye.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||We.addedDocuments.size+We.modifiedDocuments.size+We.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(s,ne))});let v=Wc(),C=li();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(s,M))}),m.push(FA(s,u,e.documentUpdates).next(M=>{v=M.nr,C=M.sr})),!i.isEqual(xn.min())){const M=t.Bs.getLastRemoteSnapshotVersion(s).next(L=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));m.push(M)}return Ke.waitFor(m).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,v,C)).next(()=>v)}).then(s=>(t.Ji=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const u=t.yc.get(s);u&&(bn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.fc=!0:r.modifiedDocuments.size>0?bn(u.fc):r.removedDocuments.size>0&&(bn(u.fc),u.fc=!1))}),yield Xp(t,i,e)}catch(i){yield wh(i)}}),vn.apply(this,arguments)}function yt(n,e,t){const i=Gt(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.wc.forEach((s,u)=>{const m=u.view.Mu(e);m.snapshot&&r.push(m.snapshot)}),function(s,u){const m=Gt(s);m.onlineState=u;let v=!1;m.queries.forEach((C,M)=>{for(const L of M.listeners)L.Mu(u)&&(v=!0)}),v&&nM(m)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Kn(n,e,t){return ui.apply(this,arguments)}function ui(){return ui=(0,dt.Z)(function*(n,e,t){const i=Gt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.yc.get(e),s=r&&r.key;if(s){let u=new zr(qt.comparator);u=u.insert(s,ro.newNoDocument(s,xn.min()));const m=li().add(s),v=new Av(xn.min(),new Map,new zr(Zn),u,m);yield Wt(i,v),i.gc=i.gc.remove(s),i.yc.delete(e),mk(i)}else yield Hu(i.localStore,e,!1).then(()=>A0(i,e,t)).catch(wh)}),ui.apply(this,arguments)}function pr(n,e){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,dt.Z)(function*(n,e){const t=Gt(n),i=e.batch.batchId;try{const r=yield function lI(n,e){const t=Gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,m,v,C){const M=v.batch,L=M.keys();let q=Ke.resolve();return L.forEach(ne=>{q=q.next(()=>C.getEntry(m,ne)).next(ae=>{const ye=v.docVersions.get(ne);bn(null!==ye),ae.version.compareTo(ye)<0&&(M.applyToRemoteDocument(ae,v),ae.isValidDocument()&&(ae.setReadTime(v.commitVersion),C.addEntry(ae)))})}),q.next(()=>u.mutationQueue.removeMutationBatch(m,M))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let m=li();for(let v=0;v<u.mutationResults.length;++v)u.mutationResults[v].transformResults.length>0&&(m=m.add(u.batch.mutations[v].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);fk(t,i,null),OI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Xp(t,r)}catch(r){yield wh(r)}}),Ha.apply(this,arguments)}function Dh(n,e,t){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,dt.Z)(function*(n,e,t){const i=Gt(n);try{const r=yield function(s,u){const m=Gt(s);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let C;return m.mutationQueue.lookupMutationBatch(v,u).next(M=>(bn(null!==M),C=M.keys(),m.mutationQueue.removeMutationBatch(v,M))).next(()=>m.mutationQueue.performConsistencyCheck(v)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(v,C,u)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,C)).next(()=>m.localDocuments.getDocuments(v,C))})}(i.localStore,e);fk(i,e,t),OI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Xp(i,r)}catch(r){yield wh(r)}}),Pf.apply(this,arguments)}function MI(){return MI=(0,dt.Z)(function*(n,e){const t=Gt(n);Yp(t.remoteStore)||Tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const u=Gt(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>u.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===i)return void e.resolve();const r=t.Ec.get(i)||[];r.push(e),t.Ec.set(i,r)}catch(i){const r=Gv(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),MI.apply(this,arguments)}function OI(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function fk(n,e,t){const i=Gt(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function A0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||gU(n,i)})}function gU(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(bg(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),mk(n))}function pk(n,e,t){for(const i of t)i instanceof d?(n.Ic.addReference(i.key,e),l$(n,i)):i instanceof p?(Tt("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||gU(n,i.key)):ln()}function l$(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(Tt("SyncEngine","New document in limbo: "+t),n.mc.add(i),mk(n))}function mk(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new qt(ji.fromString(e)),i=n.Ac.next();n.yc.set(i,new T(t)),n.gc=n.gc.insert(t,i),zv(n.remoteStore,new zu(ba(yf(t.path)),i,"TargetPurposeLimboResolution",dc.ct))}}function Xp(n,e,t){return gk.apply(this,arguments)}function gk(){return gk=(0,dt.Z)(function*(n,e,t){const i=Gt(n),r=[],s=[],u=[];var m;i.wc.isEmpty()||(i.wc.forEach((m,v)=>{u.push(i.Rc(v,e,t).then(C=>{if((C||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(v.targetId,C?.fromCache?"not-current":"current"),C){r.push(C);const M=_0.Li(v.targetId,C);s.push(M)}}))}),yield Promise.all(u),i.dc.nu(r),yield(m=(0,dt.Z)(function*(v,C){const M=Gt(v);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",L=>Ke.forEach(C,q=>Ke.forEach(q.Fi,ne=>M.persistence.referenceDelegate.addReference(L,q.targetId,ne)).next(()=>Ke.forEach(q.Bi,ne=>M.persistence.referenceDelegate.removeReference(L,q.targetId,ne)))))}catch(L){if(!Dd(L))throw L;Tt("LocalStore","Failed to update sequence numbers: "+L)}for(const L of C){const q=L.targetId;if(!L.fromCache){const ne=M.Ji.get(q),ye=ne.withLastLimboFreeSnapshotVersion(ne.snapshotVersion);M.Ji=M.Ji.insert(q,ye)}}}),function(v,C){return m.apply(this,arguments)})(i.localStore,s))}),gk.apply(this,arguments)}function u$(n,e){return _k.apply(this,arguments)}function _k(){return _k=(0,dt.Z)(function*(n,e){const t=Gt(n);if(!t.currentUser.isEqual(e)){Tt("SyncEngine","User change. New user:",e.toKey());const i=yield cI(t.localStore,e);t.currentUser=e,(r=t).Ec.forEach(u=>{u.forEach(m=>{m.reject(new vt(tt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Xp(t,i.er)}var r}),_k.apply(this,arguments)}function d$(n,e){const t=Gt(n),i=t.yc.get(e);if(i&&i.fc)return li().add(i.key);{let r=li();const s=t._c.get(e);if(!s)return r;for(const u of s){const m=t.wc.get(u);r=r.unionWith(m.view.nc)}return r}}function h$(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,dt.Z)(function*(n,e){const t=Gt(n),i=yield Uv(t.localStore,e.query,!0),r=e.view.hc(i);return t.isPrimaryClient&&pk(t,e.targetId,r.cc),r}),vk.apply(this,arguments)}function f$(n,e){return yk.apply(this,arguments)}function yk(){return yk=(0,dt.Z)(function*(n,e){const t=Gt(n);return UA(t.localStore,e).then(i=>Xp(t,i))}),yk.apply(this,arguments)}function p$(n,e,t,i){return bk.apply(this,arguments)}function bk(){return bk=(0,dt.Z)(function*(n,e,t,i){const r=Gt(n),s=yield function(u,m){const v=Gt(u),C=Gt(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.Sn(M,m).next(L=>L?v.localDocuments.getDocuments(M,L):Ke.resolve(null)))}(r.localStore,e);var m;null!==s?("pending"===t?yield Qp(r.remoteStore):"acknowledged"===t||"rejected"===t?(fk(r,e,i||null),OI(r,e),m=e,Gt(Gt(r.localStore).mutationQueue).Cn(m)):ln(),yield Xp(r,s)):Tt("SyncEngine","Cannot apply mutation batch with id: "+e)}),bk.apply(this,arguments)}function wk(){return wk=(0,dt.Z)(function*(n,e){const t=Gt(n);if(xk(t),Tk(t),!0===e&&!0!==t.vc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield _U(t,i.toArray());t.vc=!0,yield YA(t.remoteStore,!0);for(const s of r)zv(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const i=[];let r=Promise.resolve();t._c.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(A0(t,u),Hu(t.localStore,u,!0))),bg(t.remoteStore,u)}),yield r,yield _U(t,i),function(s){const u=Gt(s);u.yc.forEach((m,v)=>{bg(u.remoteStore,v)}),u.Ic.Ts(),u.yc=new Map,u.gc=new zr(qt.comparator)}(t),t.vc=!1,yield YA(t.remoteStore,!1)}}),wk.apply(this,arguments)}function _U(n,e,t){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,dt.Z)(function*(n,e,t){const i=Gt(n),r=[],s=[];for(const u of e){let m;const v=i._c.get(u);if(v&&0!==v.length){m=yield Wp(i.localStore,ba(v[0]));for(const C of v){const M=i.wc.get(C),L=yield h$(i,M);L.snapshot&&s.push(L.snapshot)}}else{const C=yield dI(i.localStore,u);m=yield Wp(i.localStore,C),yield W(i,vU(C),u,!1,m.resumeToken)}r.push(m)}return i.dc.nu(s),r}),Ek.apply(this,arguments)}function vU(n){return Yb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function g$(n){const e=Gt(n);return Gt(Gt(e.localStore).persistence).$i()}function _$(n,e,t,i){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,dt.Z)(function*(n,e,t,i){const r=Gt(n);if(r.vc)return void Tt("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield UA(r.localStore,OS(s[0])),m=Av.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Os.EMPTY_BYTE_STRING);yield Xp(r,u,m);break}case"rejected":yield Hu(r.localStore,e,!0),A0(r,e,i);break;default:ln()}}),Ck.apply(this,arguments)}function v$(n,e,t){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,dt.Z)(function*(n,e,t){const i=xk(n);if(i.vc){for(const r of e){if(i._c.has(r)){Tt("SyncEngine","Adding an already active target "+r);continue}const s=yield dI(i.localStore,r),u=yield Wp(i.localStore,s);yield W(i,vU(s),u.targetId,!1,u.resumeToken),zv(i.remoteStore,u)}for(const r of t)i._c.has(r)&&(yield Hu(i.localStore,r,!1).then(()=>{bg(i.remoteStore,r),A0(i,r)}).catch(wh))}}),Ik.apply(this,arguments)}function xk(n){const e=Gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wt.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kn.bind(null,e),e.dc.nu=pU.bind(null,e.eventManager),e.dc.Pc=mU.bind(null,e.eventManager),e}function Tk(n){const e=Gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pr.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dh.bind(null,e),e}class PI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,dt.Z)(function*(){t.serializer=Kp(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return RA(this.persistence,new YR,e.initialUser,this.serializer)}createPersistence(e){return new Nd(pg.zs,this.serializer)}createSharedClientState(e){return new ek}terminate(){var e=this;return(0,dt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Dk extends PI{constructor(e,t,i){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,dt.Z)(function*(){yield t().call(i,e),yield i.Vc.initialize(i,e),yield Tk(i.Vc.syncEngine),yield Qp(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return RA(this.persistence,new YR,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new h0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new X2(t,this.persistence);return new Wm(e.asyncQueue,i)}createPersistence(e){const t=aI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?za.withCacheSize(this.cacheSizeBytes):za.DEFAULT;return new sI(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,pI(),vg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ek}}class yU extends Dk{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,dt.Z)(function*(){yield t().call(i,e);const r=i.Vc.syncEngine;i.sharedClientState instanceof zA&&(i.sharedClientState.syncEngine={jr:p$.bind(null,r),zr:_$.bind(null,r),Wr:v$.bind(null,r),$i:g$.bind(null,r),Qr:f$.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,dt.Z)(function*(u){yield function m$(n,e){return wk.apply(this,arguments)}(i.Vc.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start():u||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(u&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():u||i.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=pI();if(!zA.D(t))throw new vt(tt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=aI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zA(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class M0{initialize(e,t){var i=this;return(0,dt.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>yt(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=u$.bind(null,i.syncEngine),yield YA(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fU}createDatastore(e){const t=Kp(e.databaseInfo.databaseId),i=new Zp(e.databaseInfo);return new lU(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=m=>yt(this.syncEngine,m,0),u=tk.D()?new tk:new cU,new rk(t,i,r,s,u);var t,i,r,s,u}createSyncEngine(e,t){return function(i,r,s,u,m,v,C){const M=new S(i,r,s,u,m,v);return C&&(M.vc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,dt.Z)(function*(t){const i=Gt(t);Tt("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield yg(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bU(n,e=10240){let t=0;return{read:()=>(0,dt.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,dt.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class rM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class w${constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new fs,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,dt.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,dt.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,dt.Z)(function*(){const t=yield e.kc();if(null===t)return null;const i=e.xc.decode(t),r=Number(i);isNaN(r)&&e.Mc(`length string (${i}) is not valid number`);const s=yield e.$c(r);return new dk(JSON.parse(s),t.length+r)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,dt.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}$c(e){var t=this;return(0,dt.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const i=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,dt.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class E${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,dt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new vt(tt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,dt.Z)(function*(s,u){const m=Gt(s),v=Rd(m.serializer)+"/documents",C={documents:u.map(ne=>Ov(m.serializer,ne))},M=yield m.vo("BatchGetDocuments",v,C,u.length),L=new Map;M.forEach(ne=>{const ae=function iU(n,e){return"found"in e?function(t,i){bn(!!i.found);const r=ju(t,i.found.name),s=rs(i.found.updateTime),u=i.found.createTime?rs(i.found.createTime):xn.min(),m=new ya({mapValue:{fields:i.found.fields}});return ro.newFoundDocument(r,s,u,m)}(n,e):"missing"in e?function(t,i){bn(!!i.missing),bn(!!i.readTime);const r=ju(t,i.missing),s=rs(i.readTime);return ro.newNoDocument(r,s)}(n,e):ln()}(m.serializer,ne);L.set(ae.key.toString(),ae)});const q=[];return u.forEach(ne=>{const ae=L.get(ne.toString());bn(!!ae),q.push(ae)}),q}),function(s,u){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new og(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,dt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=qt.fromPath(r);e.mutations.push(new t0(s,e.precondition(s)))}),yield(i=(0,dt.Z)(function*(r,s){const u=Gt(r),m=Rd(u.serializer)+"/documents",v={writes:s.map(C=>Bp(u.serializer,C))};yield u.Io("Commit",m,v)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ln();t=xn.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new vt(tt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xn.min())?Dr.exists(!1):Dr.updateTime(t):Dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xn.min()))throw new vt(tt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dr.updateTime(t)}return Dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class C${constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new mI(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,dt.Z)(function*(){const t=new E$(e.datastore),i=e.qc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Uc(s)}))}).catch(r=>{e.Uc(r)})}))}qc(e){try{const t=this.updateFunction(e);return!Bb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Dv(t)}return!1}}class I${constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=As.UNAUTHENTICATED,this.clientId=iC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var u=(0,dt.Z)(function*(m){Tt("FirestoreClient","Received user=",m.uid),yield s.authCredentialListener(m),s.user=m});return function(m){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(i,u=>(Tt("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,dt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,dt.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Gv(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function oM(n,e){return Sk.apply(this,arguments)}function Sk(){return Sk=(0,dt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,dt.Z)(function*(s){i.isEqual(s)||(yield cI(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Sk.apply(this,arguments)}function Ak(n,e){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,dt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Ok(n);Tt("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>TI(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>TI(e.remoteStore,s)),n._onlineComponents=e}),Mk.apply(this,arguments)}function wU(n){return"FirebaseError"===n.name?n.code===tt.FAILED_PRECONDITION||n.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Ok(n){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,dt.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Tt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield oM(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!wU(t))throw t;ru("Error using user provided cache. Falling back to memory cache: "+t),yield oM(n,new PI)}}else Tt("FirestoreClient","Using default OfflineComponentProvider"),yield oM(n,new PI);return n._offlineComponents}),Pk.apply(this,arguments)}function sM(n){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,dt.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Tt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ak(n,n._uninitializedComponentsProvider._online)):(Tt("FirestoreClient","Using default OnlineComponentProvider"),yield Ak(n,new M0))),n._onlineComponents}),Rk.apply(this,arguments)}function EU(n){return Ok(n).then(e=>e.persistence)}function aM(n){return Ok(n).then(e=>e.localStore)}function CU(n){return sM(n).then(e=>e.remoteStore)}function kk(n){return sM(n).then(e=>e.syncEngine)}function O0(n){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,dt.Z)(function*(n){const e=yield sM(n),t=e.eventManager;return t.onListen=R.bind(null,e.syncEngine),t.onUnlisten=xe.bind(null,e.syncEngine),t}),Nk.apply(this,arguments)}function xU(n,e,t={}){const i=new fs;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return function(r,s,u,m,v){const C=new rM({next:L=>{s.enqueueAndForget(()=>SI(r,M));const q=L.docs.has(u);!q&&L.fromCache?v.reject(new vt(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&L.fromCache&&m&&"server"===m.source?v.reject(new vt(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(L)},error:L=>v.reject(L)}),M=new iM(yf(u.path),C,{includeMetadataChanges:!0,Ku:!0});return JA(r,M)}(yield O0(n),n.asyncQueue,e,t,i)})),i.promise}function TU(n,e,t={}){const i=new fs;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return function(r,s,u,m,v){const C=new rM({next:L=>{s.enqueueAndForget(()=>SI(r,M)),L.fromCache&&"server"===m.source?v.reject(new vt(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(L)},error:L=>v.reject(L)}),M=new iM(u,C,{includeMetadataChanges:!0,Ku:!0});return JA(r,M)}(yield O0(n),n.asyncQueue,e,t,i)})),i.promise}function DU(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const SU=new Map;function Fk(n,e,t){if(!t)throw new vt(tt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AU(n,e,t,i){if(!0===e&&!0===i)throw new vt(tt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MU(n){if(!qt.isDocumentKey(n))throw new vt(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OU(n){if(qt.isDocumentKey(n))throw new vt(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cM(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ln()}function zi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new vt(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cM(n);throw new vt(tt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function PU(n,e){if(e<=0)throw new vt(tt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class RU{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new vt(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=DU(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new vt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new vt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new vt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RI{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vt(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vt(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new XD;switch(t.type){case"firstParty":return new Nb(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new vt(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=SU.get(e);t&&(Tt("ComponentProvider","Removing Datastore"),SU.delete(e),t.terminate())}(this),Promise.resolve()}}function kU(n,e,t,i={}){var r;const s=(n=zi(n,RI))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&ru("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),i.mockUserToken){let m,v;if("string"==typeof i.mockUserToken)m=i.mockUserToken,v=As.MOCK_USER;else{m=(0,ie.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new vt(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new As(C)}n._authCredentials=new QP(new tC(m,v))}}class Oo{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oo(this.firestore,e,this._key)}}class fc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fc(this.firestore,e,this._query)}}class Rf extends fc{constructor(e,t,i){super(e,t,yf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oo(this.firestore,null,new qt(e))}withConverter(e){return new Rf(this.firestore,e,this._path)}}function Lk(n,e,...t){if(n=(0,ie.m9)(n),Fk("collection","path",e),n instanceof RI){const i=ji.fromString(e,...t);return OU(i),new Rf(n,null,i)}{if(!(n instanceof Oo||n instanceof Rf))throw new vt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ji.fromString(e,...t));return OU(i),new Rf(n.firestore,null,i)}}function kI(n,e,...t){if(n=(0,ie.m9)(n),1===arguments.length&&(e=iC.A()),Fk("doc","path",e),n instanceof RI){const i=ji.fromString(e,...t);return MU(i),new Oo(n,null,new qt(i))}{if(!(n instanceof Oo||n instanceof Rf))throw new vt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ji.fromString(e,...t));return MU(i),new Oo(n.firestore,n instanceof Rf?n.converter:null,new qt(i))}}function NU(n,e){return n=(0,ie.m9)(n),e=(0,ie.m9)(e),(n instanceof Oo||n instanceof Rf)&&(e instanceof Oo||e instanceof Rf)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Uk(n,e){return n=(0,ie.m9)(n),e=(0,ie.m9)(e),n instanceof fc&&e instanceof fc&&n.firestore===e.firestore&&tg(n._query,e._query)&&n.converter===e.converter}class k${constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new mI(this,"async_queue_retry"),this.Xc=()=>{const t=vg();t&&Tt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=vg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=vg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new fs;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,dt.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Dd(t))throw t;Tt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,io("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=QA.createAndSchedule(this,e,t,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&ln()}verifyOperationInProgress(){}sa(){var e=this;return(0,dt.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Vk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class N${constructor(){this._progressObserver={},this._taskCompletionResolver=new fs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Po extends RI{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new k$,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||FU(this),this._firestoreClient.terminate()}}function L$(n,e){const t="object"==typeof n?n:(0,Ds.getApp)(),i="string"==typeof n?n:e||"(default)",r=(0,Ds._getProvider)(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=(0,ie.P0)("firestore");s&&kU(r,...s)}return r}function Rs(n){return n._firestoreClient||FU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FU(n){var e,t,i;const r=n._freezeSettings(),s=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new lR(n._databaseId,m,n._persistenceKey,(C=r).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,DU(C.experimentalLongPollingOptions),C.useFetchStreams));var m,C;n._firestoreClient=new I$(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function LU(n,e,t){const i=new fs;return n.asyncQueue.enqueue((0,dt.Z)(function*(){try{yield oM(n,t),yield Ak(n,e),i.resolve()}catch(r){const s=r;if(!wU(s))throw s;ru("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function UU(n){if(n._initialized||n._terminated)throw new vt(tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kf(Os.fromBase64String(e))}catch(t){throw new vt(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kf(Os.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jp{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new vt(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ho(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zv{constructor(e){this._methodName=e}}class lM{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vt(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vt(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zn(this._lat,e._lat)||Zn(this._long,e._long)}}const W$=/^__.*__$/;class Z${constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new xh(e,this.data,this.fieldMask,t,this.fieldTransforms):new rg(e,this.data,t,this.fieldTransforms)}}class VU{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new xh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ln()}}class uM{constructor(e,t,i,r,s,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new uM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return fM(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(BU(this.ca)&&W$.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class K${constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Kp(e)}ya(e,t,i,r=!1){return new uM({ca:e,methodName:t,ga:i,path:Ho.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kv(n){const e=n._freezeSettings(),t=Kp(n._databaseId);return new K$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dM(n,e,t,i,r,s={}){const u=n.ya(s.merge||s.mergeFields?2:0,e,t,r);Hk("Data must be an object, but it was:",u,i);const m=HU(i,u);let v,C;if(s.merge)v=new Gc(u.fieldMask),C=u.fieldTransforms;else if(s.mergeFields){const M=[];for(const L of s.mergeFields){const q=LI(e,L,t);if(!u.contains(q))throw new vt(tt.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);qU(M,q)||M.push(q)}v=new Gc(M),C=u.fieldTransforms.filter(L=>v.covers(L.field))}else v=null,C=u.fieldTransforms;return new Z$(new ya(m),v,C)}class FI extends Zv{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof FI}}function jU(n,e,t){return new uM({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bk extends Zv{_toFieldTransform(e){return new Iv(e.path,new Fp)}isEqual(e){return e instanceof Bk}}class Y$ extends Zv{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=jU(this,e,!0),i=this.pa.map(s=>Yv(s,t)),r=new Cf(i);return new Iv(e.path,r)}isEqual(e){return this===e}}class Q$ extends Zv{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=jU(this,e,!0),i=this.pa.map(s=>Yv(s,t)),r=new Lp(i);return new Iv(e.path,r)}isEqual(e){return this===e}}class X$ extends Zv{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Cv(e.serializer,BS(e.serializer,this.Ia));return new Iv(e.path,t)}isEqual(e){return this===e}}function jk(n,e,t,i){const r=n.ya(1,e,t);Hk("Data must be an object, but it was:",r,i);const s=[],u=ya.empty();su(i,(v,C)=>{const M=hM(e,v,t);C=(0,ie.m9)(C);const L=r.da(M);if(C instanceof FI)s.push(M);else{const q=Yv(C,L);null!=q&&(s.push(M),u.set(M,q))}});const m=new Gc(s);return new VU(u,m,r.fieldTransforms)}function zk(n,e,t,i,r,s){const u=n.ya(1,e,t),m=[LI(e,i,t)],v=[r];if(s.length%2!=0)throw new vt(tt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<s.length;q+=2)m.push(LI(e,s[q])),v.push(s[q+1]);const C=[],M=ya.empty();for(let q=m.length-1;q>=0;--q)if(!qU(C,m[q])){const ne=m[q];let ae=v[q];ae=(0,ie.m9)(ae);const ye=u.da(ne);if(ae instanceof FI)C.push(ne);else{const We=Yv(ae,ye);null!=We&&(C.push(ne),M.set(ne,We))}}const L=new Gc(C);return new VU(M,L,u.fieldTransforms)}function zU(n,e,t,i=!1){return Yv(t,n.ya(i?4:3,e))}function Yv(n,e){if($U(n=(0,ie.m9)(n)))return Hk("Unsupported field value:",e,n),HU(n,e);if(n instanceof Zv)return function(t,i){if(!BU(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const u of t){let m=Yv(u,i.wa(s));null==m&&(m={nullValue:"NULL_VALUE"}),r.push(m),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,ie.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return BS(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=ho.fromDate(t);return{timestampValue:Vp(i.serializer,r)}}if(t instanceof ho){const r=new ho(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vp(i.serializer,r)}}if(t instanceof lM)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kf)return{bytesValue:WC(i.serializer,t._byteString)};if(t instanceof Oo){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:a0(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${cM(t)}`)}(n,e)}function HU(n,e){const t={};return Ym(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):su(n,(i,r)=>{const s=Yv(r,e.ha(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function $U(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ho||n instanceof lM||n instanceof kf||n instanceof Oo||n instanceof Zv)}function Hk(n,e,t){if(!$U(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=cM(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function LI(n,e,t){if((e=(0,ie.m9)(e))instanceof Jp)return e._internalPath;if("string"==typeof e)return hM(n,e);throw fM("Field path arguments must be of type string or ",n,!1,void 0,t)}const J$=new RegExp("[~\\*/\\[\\]]");function hM(n,e,t){if(e.search(J$)>=0)throw fM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jp(...e.split("."))._internalPath}catch{throw fM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fM(n,e,t,i,r){const s=i&&!i.isEmpty(),u=void 0!==r;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(s||u)&&(v+=" (found",s&&(v+=` in field ${i}`),u&&(v+=` in document ${r}`),v+=")"),new vt(tt.INVALID_ARGUMENT,m+n+v)}function qU(n,e){return n.some(t=>t.isEqual(e))}class UI{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Oo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new e5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class e5 extends UI{data(){return super.data()}}function pM(n,e){return"string"==typeof e?hM(n,e):e instanceof Jp?e._internalPath:e._delegate._internalPath}function GU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new vt(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $k{}class VI extends $k{}function Cg(n,e,...t){let i=[];e instanceof $k&&i.push(e),i=i.concat(t),function(r){const s=r.filter(m=>m instanceof P0).length,u=r.filter(m=>m instanceof BI).length;if(s>1||s>0&&u>0)throw new vt(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class BI extends VI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new BI(e,t,i)}_apply(e){const t=this._parse(e);return YU(e._query,t),new fc(e.firestore,e.converter,Xb(e._query,t))}_parse(e){const t=Kv(e.firestore);return function(r,s,u,m,v,C,M){let L;if(v.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new vt(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){KU(M,C);const q=[];for(const ne of M)q.push(ZU(m,r,ne));L={arrayValue:{values:q}}}else L=ZU(m,r,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||KU(M,C),L=zU(u,"where",M,"in"===C||"not-in"===C);return Pi.create(v,C,L)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class P0 extends $k{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new P0(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let s=i;const u=r.getFlattenedFilters();for(const m of u)YU(s,m),s=Xb(s,m)}(e._query,t),new fc(e.firestore,e.converter,Xb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qk extends VI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qk(e,t)}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new vt(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new vt(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Jm(r,s);return function(m,v){if(null===Qb(m)){const C=bv(m);null!==C&&QU(0,C,v.field)}}(i,u),u}(e._query,this._field,this._direction);return new fc(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new vf(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class mM extends VI{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new mM(e,t,i)}_apply(e){return new fc(e.firestore,e.converter,wv(e._query,this._limit,this._limitType))}}class gM extends VI{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new gM(e,t,i)}_apply(e){const t=WU(e,this.type,this._docOrFields,this._inclusive);return new fc(e.firestore,e.converter,(r=t,new vf((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class _M extends VI{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new _M(e,t,i)}_apply(e){const t=WU(e,this.type,this._docOrFields,this._inclusive);return new fc(e.firestore,e.converter,(r=t,new vf((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function WU(n,e,t,i){if(t[0]=(0,ie.m9)(t[0]),t[0]instanceof UI)return function(r,s,u,m,v){if(!m)throw new vt(tt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const C=[];for(const M of bf(r))if(M.field.isKeyField())C.push(Bu(s,m.key));else{const L=m.data.field(M.field);if(mv(L))throw new vt(tt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===L){const q=M.field.canonicalString();throw new vt(tt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}C.push(L)}return new Md(C,v)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Kv(n.firestore);return function(s,u,m,v,C,M){const L=s.explicitOrderBy;if(C.length>L.length)throw new vt(tt.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let ne=0;ne<C.length;ne++){const ae=C[ne];if(L[ne].field.isKeyField()){if("string"!=typeof ae)throw new vt(tt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ae}`);if(!SC(s)&&-1!==ae.indexOf("/"))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ae}' contains a slash.`);const ye=s.path.child(ji.fromString(ae));if(!qt.isDocumentKey(ye))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const We=new qt(ye);q.push(Bu(u,We))}else{const ye=zU(m,v,ae);q.push(ye)}}return new Md(q,M)}(n._query,n.firestore._databaseId,r,e,t,i)}}function ZU(n,e,t){if("string"==typeof(t=(0,ie.m9)(t))){if(""===t)throw new vt(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SC(e)&&-1!==t.indexOf("/"))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ji.fromString(t));if(!qt.isDocumentKey(i))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Bu(n,new qt(i))}if(t instanceof Oo)return Bu(n,t._key);throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cM(t)}.`)}function KU(n,e){if(!Array.isArray(n)||0===n.length)throw new vt(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YU(n,e){if(e.isInequality()){const i=bv(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=Qb(n);null!==s&&QU(0,r,s)}const t=function(i,r){for(const s of i)for(const u of s.getFlattenedFilters())if(r.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new vt(tt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function QU(n,e,t){if(!t.isEqual(e))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gk{convertValue(e,t="none"){switch(_f(e)){case 0:return null;case 1:return e.booleanValue;case 2:return is(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ln()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return su(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new lM(is(e.latitude),is(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Rp(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(gv(e));default:return null}}convertTimestamp(e){const t=Pp(e);return new ho(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ji.fromString(e);bn(Pv(i));const r=new Ch(i.get(1),i.get(3)),s=new qt(i.popFirst(5));return r.isEqual(t)||io(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function vM(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class u5 extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new kf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oo(this.firestore,null,t)}}class Qv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class em extends UI{constructor(e,t,i,r,s,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(pM("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class jI extends em{data(e={}){return super.data(e)}}class Ig{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qv(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new jI(this._firestore,this._userDataWriter,i.key,i,new Qv(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new vt(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new jI(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Qv(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const m=new jI(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Qv(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let v=-1,C=-1;return 0!==u.type&&(v=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),C=s.indexOf(u.doc.key)),{type:h5(u.type),doc:m,oldIndex:v,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function h5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ln()}}function JU(n,e){return n instanceof em&&e instanceof em?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ig&&e instanceof Ig&&n._firestore===e._firestore&&Uk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class xg extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new kf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Oo(this.firestore,null,t)}}function Wk(n,e,t){n=zi(n,Oo);const i=zi(n.firestore,Po),r=vM(n.converter,e,t);return R0(i,[dM(Kv(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Dr.none())])}function Zk(n,e,t,...i){n=zi(n,Oo);const r=zi(n.firestore,Po),s=Kv(r);let u;return u="string"==typeof(e=(0,ie.m9)(e))||e instanceof Jp?zk(s,"updateDoc",n._key,e,t,i):jk(s,"updateDoc",n._key,e),R0(r,[u.toMutation(n._key,Dr.exists(!0))])}function eV(n,e){const t=zi(n.firestore,Po),i=kI(n),r=vM(n.converter,e);return R0(t,[dM(Kv(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Dr.exists(!1))]).then(()=>i)}function Kk(n,...e){var t,i,r;n=(0,ie.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Vk(e[u])||(s=e[u],u++);const m={includeMetadataChanges:s.includeMetadataChanges};if(Vk(e[u])){const L=e[u];e[u]=null===(t=L.next)||void 0===t?void 0:t.bind(L),e[u+1]=null===(i=L.error)||void 0===i?void 0:i.bind(L),e[u+2]=null===(r=L.complete)||void 0===r?void 0:r.bind(L)}let v,C,M;if(n instanceof Oo)C=zi(n.firestore,Po),M=yf(n._key.path),v={next:L=>{e[u]&&e[u](Yk(C,n,L))},error:e[u+1],complete:e[u+2]};else{const L=zi(n,fc);C=zi(L.firestore,Po),M=L._query;const q=new xg(C);v={next:ne=>{e[u]&&e[u](new Ig(C,q,L,ne))},error:e[u+1],complete:e[u+2]},GU(n._query)}return function(L,q,ne,ae){const ye=new rM(ae),We=new iM(q,ye,ne);return L.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return JA(yield O0(L),We)})),()=>{ye.Dc(),L.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return SI(yield O0(L),We)}))}}(Rs(C),M,m,v)}function R0(n,e){return function(t,i){const r=new fs;return t.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return function ft(n,e,t){return Dt.apply(this,arguments)}(yield kk(t),i,r)})),r.promise}(Rs(n),e)}function Yk(n,e,t){const i=t.docs.get(e._key),r=new xg(n);return new em(n,r,e._key,i,new Qv(t.hasPendingWrites,t.fromCache),e.converter)}const A5={maxAttempts:5};class tV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kv(e)}set(e,t,i){this._verifyNotCommitted();const r=Tg(e,this._firestore),s=vM(r.converter,t,i),u=dM(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,Dr.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Tg(e,this._firestore);let u;return u="string"==typeof(t=(0,ie.m9)(t))||t instanceof Jp?zk(this._dataReader,"WriteBatch.update",s._key,t,i,r):jk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tg(e,this._firestore);return this._mutations=this._mutations.concat(new og(t._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tg(n,e){if((n=(0,ie.m9)(n)).firestore!==e)throw new vt(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class M5 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kv(e)}get(e){const t=Tg(e,this._firestore),i=new u5(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return ln();const s=r[0];if(s.isFoundDocument())return new UI(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new UI(this._firestore,i,t._key,null,t.converter);throw ln()})}set(e,t,i){const r=Tg(e,this._firestore),s=vM(r.converter,t,i),u=dM(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(e,t,i,...r){const s=Tg(e,this._firestore);let u;return u="string"==typeof(t=(0,ie.m9)(t))||t instanceof Jp?zk(this._dataReader,"Transaction.update",s._key,t,i,r):jk(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=Tg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Tg(e,this._firestore),i=new xg(this._firestore);return super.get(e).then(r=>new em(this._firestore,i,t._key,r._document,new Qv(!1,!1),t.converter))}}!function(n,e=!0){qm=Ds.SDK_VERSION,(0,Ds._registerComponent)(new tu.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),u=new Po(new XP(t.getProvider("auth-internal")),new JD(t.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new vt(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ch(m.options.projectId,v)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC").setMultipleInstances(!0)),(0,Ds.registerVersion)(JE,"3.13.0",n),(0,Ds.registerVersion)(JE,"3.13.0","esm2017")}();var gn=Q(7398),yM=function(){return yM=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},yM.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var L5={includeMetadataChanges:!1};function Xk(n,e){return void 0===e&&(e=L5),new rr.y(function(t){return{unsubscribe:Kk(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}function V5(n,e){return void 0===e&&(e={}),function U5(n){return Xk(n,{includeMetadataChanges:!0})}(n).pipe((0,gn.U)(function(t){return iV(t,e)}))}function iV(n,e){var t;void 0===e&&(e={});var i=n.data(e);return n.exists()&&"object"==typeof i&&null!==i&&e.idField?yM(yM({},i),((t={})[e.idField]=n.id,t)):i}function q5(n,e){return void 0===e&&(e={}),function $5(n){return Xk(n,{includeMetadataChanges:!0}).pipe((0,gn.U)(function(e){return e.docs}))}(n).pipe((0,gn.U)(function(t){return t.map(function(i){return iV(i,e)})}))}class Dg{constructor(e){return e}}const aV="firestore",tN=new c.OlP("angularfire2.firestore-instances");function K5(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new Dg(i)}}const Y5={provide:class W5{constructor(){return(0,An.vb)(aV)}},deps:[[new c.FiY,tN]]},Q5={provide:Dg,useFactory:function Z5(n,e){const t=(0,An.JM)(aV,n,e);return t&&new Dg(t)},deps:[[new c.FiY,tN],wm]};let cV=(()=>{class n{constructor(){(0,bd.KN)("angularfire",An.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Q5,Y5]}),n})();function X5(n,...e){return{ngModule:cV,providers:[{provide:tN,useFactory:K5(n),multi:!0,deps:[c.R0b,c.zs3,An.HU,Aw,[new c.FiY,wd],[new c.FiY,pp],...e]}]}}const nN=(0,An.u3)(q5,!0),J5=(0,An.u3)(V5,!0),eq=(0,An.u3)(eV,!0),zI=(0,An.u3)(Lk,!0),bM=(0,An.u3)(kI,!0),tq=(0,An.u3)(L$,!0),lV=(0,An.u3)(Wk,!0),nq=(0,An.u3)(Zk,!0),uV="firebasestorage.googleapis.com",dV="storageBucket";class os extends ie.ZR{constructor(e,t,i=0){super(iN(e),`Firebase Storage: ${t} (${iN(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,os.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var $o=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}($o||{});function iN(n){return"storage/"+n}function rN(){return new os($o.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function oN(n){return new os($o.INVALID_ARGUMENT,n)}function mV(){return new os($o.APP_DELETED,"The Firebase app was deleted.")}function HI(n,e){return new os($o.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function $I(n){throw new os($o.INTERNAL_ERROR,"Internal error: "+n)}class Tl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Tl.makeFromUrl(e,t)}catch{return new Tl(e,"")}if(""===i.path)return i;throw function hq(n){return new os($o.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+r+"(/(.*))?$","i");function C(Lt){Lt.path_=decodeURIComponent(Lt.path)}const L=t.replace(/[.]/g,"\\."),Mt=[{regex:m,indices:{bucket:1,path:3},postModify:function s(Lt){"/"===Lt.path.charAt(Lt.path.length-1)&&(Lt.path_=Lt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${L}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:C},{regex:new RegExp(`^https?://${t===uV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:C}];for(let Lt=0;Lt<Mt.length;Lt++){const Mn=Mt[Lt],Rn=Mn.regex.exec(e);if(Rn){let Wo=Rn[Mn.indices.path];Wo||(Wo=""),i=new Tl(Rn[Mn.indices.bucket],Wo),Mn.postModify(i);break}}if(null==i)throw function dq(n){return new os($o.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class vq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function wM(n){return"string"==typeof n||n instanceof String}function gV(n){return sN()&&n instanceof Blob}function sN(){return typeof Blob<"u"&&!(0,ie.UG)()}function aN(n,e,t,i){if(i<e)throw oN(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw oN(`Invalid value for '${n}'. Expected ${t} or less.`)}function tm(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function _V(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var k0=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(k0||{});class Iq{constructor(e,t,i,r,s,u,m,v,C,M,L,q=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=m,this.errorCallback_=v,this.timeout_=C,this.progressCallback_=M,this.connectionFactory_=L,this.retry=q,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ne,ae)=>{this.resolve_=ne,this.reject_=ae,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,u=this.reject_,m=r.connection;if(r.wasSuccessCode)try{const v=this.callback_(m,m.getResponse());!function wq(n){return void 0!==n}(v)?s():s(v)}catch(v){u(v)}else if(null!==m){const v=rN();v.serverResponse=m.getErrorText(),u(this.errorCallback_?this.errorCallback_(m,v):v)}else u(r.canceled?this.appDelete_?mV():function fV(){return new os($o.CANCELED,"User canceled the upload/download.")}():function hV(){return new os($o.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new EM(!1,null,!0)):this.backoffId_=function yq(n,e,t){let i=1,r=null,s=null,u=!1,m=0;function v(){return 2===m}let C=!1;function M(...We){C||(C=!0,e.apply(null,We))}function L(We){r=setTimeout(()=>{r=null,n(ne,v())},We)}function q(){s&&clearTimeout(s)}function ne(We,...wt){if(C)return void q();if(We)return q(),void M.call(null,We,...wt);if(v()||u)return q(),void M.call(null,We,...wt);let Mt;i<64&&(i*=2),1===m?(m=2,Mt=0):Mt=1e3*(i+Math.random()),L(Mt)}let ae=!1;function ye(We){ae||(ae=!0,q(),!C&&(null!==r?(We||(m=2),clearTimeout(r),L(0)):We||(m=1)))}return L(0),s=setTimeout(()=>{u=!0,ye(!0)},t),ye}((i,r)=>{if(r)return void i(!1,new EM(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const m=s.getErrorCode()===k0.NO_ERROR,v=s.getStatus();if(!m||function vV(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}(v,this.additionalRetryCodes_)&&this.retry){const M=s.getErrorCode()===k0.ABORT;return void i(!1,new EM(!1,null,M))}const C=-1!==this.successCodes_.indexOf(v);i(!0,new EM(C,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function bq(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class EM{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Oq(...n){const e=function Mq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(sN())return new Blob(n);throw new os($o.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Sh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cN{constructor(e,t){this.data=e,this.contentType=t||null}}function bV(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function wV(n,e){switch(n){case Sh.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw HI(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Sh.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw HI(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Rq(n){if(typeof atob>"u")throw function gq(n){return new os($o.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:HI(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class EV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw HI(Sh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function Lq(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class nm{constructor(e,t){let i=0,r="";gV(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(gV(this.data_)){const r=function Pq(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new nm(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new nm(i,!0)}}static getBlob(...e){if(sN()){const t=e.map(i=>i instanceof nm?i.data_:i);return new nm(Oq.apply(null,t))}{const t=e.map(u=>wM(u)?function yV(n,e){switch(n){case Sh.RAW:return new cN(bV(e));case Sh.BASE64:case Sh.BASE64URL:return new cN(wV(n,e));case Sh.DATA_URL:return new cN(function Nq(n){const e=new EV(n);return e.base64?wV(Sh.BASE64,e.rest):function kq(n){let e;try{e=decodeURIComponent(n)}catch{throw HI(Sh.DATA_URL,"Malformed data URL.")}return bV(e)}(e.rest)}(e),function Fq(n){return new EV(n).contentType}(e))}throw rN()}(Sh.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(u=>{for(let m=0;m<u.length;m++)r[s++]=u[m]}),new nm(r,!0)}}uploadData(){return this.data_}}function lN(n){let e;try{e=JSON.parse(n)}catch{return null}return function Cq(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function CV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Bq(n,e){return e}class Dl{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Bq}}let CM=null;function qI(){if(CM)return CM;const n=[];n.push(new Dl("bucket")),n.push(new Dl("generation")),n.push(new Dl("metageneration")),n.push(new Dl("name","fullPath",!0));const t=new Dl("name");t.xform=function e(s,u){return function jq(n){return!wM(n)||n.length<2?n:CV(n)}(u)},n.push(t);const r=new Dl("size");return r.xform=function i(s,u){return void 0!==u?Number(u):u},n.push(r),n.push(new Dl("timeCreated")),n.push(new Dl("updated")),n.push(new Dl("md5Hash",null,!0)),n.push(new Dl("cacheControl",null,!0)),n.push(new Dl("contentDisposition",null,!0)),n.push(new Dl("contentEncoding",null,!0)),n.push(new Dl("contentLanguage",null,!0)),n.push(new Dl("contentType",null,!0)),n.push(new Dl("metadata","customMetadata",!0)),CM=n,CM}function IV(n,e,t){const i=lN(e);return null===i?null:function Hq(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const u=t[s];i[u.local]=u.xform(i,e[u.server])}return function zq(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Tl(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}class Nf{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ff(n){if(!n)throw rN()}function N0(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function lq(){return new os($o.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function cq(){return new os($o.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function aq(n){return new os($o.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function uq(n){return new os($o.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function MV(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},v=function m(){let Mt="";for(let Lt=0;Lt<2;Lt++)Mt+=Math.random().toString().slice(2);return Mt}();u["Content-Type"]="multipart/related; boundary="+v;const C=function AV(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function Jq(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}(e,i,r),M=function uN(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}(C,t),ne=nm.getBlob("--"+v+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+M+"\r\n--"+v+"\r\nContent-Type: "+C.contentType+"\r\n\r\n",i,"\r\n--"+v+"--");if(null===ne)throw function pV(){return new os($o.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}();const ae={name:C.fullPath},ye=tm(s,n.host,n._protocol),wt=n.maxUploadRetryTime,Ot=new Nf(ye,"POST",function IM(n,e){return function t(i,r){const s=IV(n,r,e);return Ff(null!==s),s}}(n,t),wt);return Ot.urlParams=ae,Ot.headers=u,Ot.body=ne.uploadData(),Ot.errorHandler=N0(e),Ot}let PV=null;class rG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=k0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=k0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=k0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw $I("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $I("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $I("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $I("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $I("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class oG extends rG{initXhr(){this.xhr_.responseType="text"}}function Ah(){return PV?PV():new oG}class Xv{constructor(e,t){this._service=e,this._location=t instanceof Tl?t:Tl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xv(e,t)}get root(){const e=new Tl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CV(this._location.path)}get storage(){return this._service}get parent(){const e=function Uq(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Tl(this._location.bucket,e);return new Xv(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function _q(n){return new os($o.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function vG(n){n._throwIfRoot("getDownloadURL");const e=function Yq(n,e,t){const r=tm(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,m=new Nf(r,"GET",function Zq(n,e){return function t(i,r){const s=IV(n,r,e);return Ff(null!==s),function $q(n,e,t,i){const r=lN(e);if(null===r||!wM(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(C=>{const L=n.fullPath;return tm("/b/"+u(n.bucket)+"/o/"+u(L),t,i)+_V({alt:"media",token:C})})[0]}(s,r,n.host,n._protocol)}}(n,t),u);return m.errorHandler=function GI(n){const e=N0(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function sq(n){return new os($o.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}(e),m}(n.storage,n._location,qI());return n.storage.makeRequestWithTokens(e,Ah).then(t=>{if(null===t)throw function mq(){return new os($o.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function LV(n,e){if(n instanceof pN){const t=n;if(null==t._bucket)throw function fq(){return new os($o.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dV+"' property when initializing the app?")}();const i=new Xv(t,t._bucket);return null!=e?LV(i,e):i}return void 0!==e?function FV(n,e){const t=function Vq(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Tl(n._location.bucket,t);return new Xv(n.storage,i)}(n,e):n}function UV(n,e){const t=e?.[dV];return null==t?null:Tl.makeFromBucketSpec(t,n)}class pN{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=uV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Tl.makeFromBucketSpec(r,this._host):UV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Tl.makeFromBucketSpec(this._url,e):UV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,dt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,dt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xv(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new vq(mV());{const u=function Aq(n,e,t,i,r,s,u=!0){const m=_V(n.urlParams),v=n.url+m,C=Object.assign({},n.headers);return function Dq(n,e){e&&(n["X-Firebase-GMPID"]=e)}(C,e),function xq(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(C,t),function Tq(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(C,s),function Sq(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(C,i),new Iq(v,n.method,C,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,u)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var i=this;return(0,dt.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const VV="@firebase/storage",jV="storage";function IG(n,e,t){return function RV(n,e,t){n._throwIfRoot("uploadBytes");const i=MV(n.storage,n._location,qI(),new nm(e,!0),t);return n.storage.makeRequestWithTokens(i,Ah).then(r=>({metadata:r,ref:n}))}(n=(0,ie.m9)(n),e,t)}function xG(n){return vG(n=(0,ie.m9)(n))}function TG(n,e){return function EG(n,e){if(e&&function bG(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof pN)return function wG(n,e){return new Xv(n,e)}(n,e);throw oN("To use ref(service, url), the first argument must be a Storage instance.")}return LV(n,e)}(n=(0,ie.m9)(n),e)}function DG(n=(0,Ds.getApp)(),e){n=(0,ie.m9)(n);const i=(0,Ds._getProvider)(n,jV).getImmediate({identifier:e}),r=(0,ie.P0)("storage");return r&&function SG(n,e,t,i={}){!function CG(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,ie.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(i,...r),i}function AG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new pN(t,i,r,e,Ds.SDK_VERSION)}!function MG(){(0,Ds._registerComponent)(new tu.wA(jV,AG,"PUBLIC").setMultipleInstances(!0)),(0,Ds.registerVersion)(VV,"0.11.2",""),(0,Ds.registerVersion)(VV,"0.11.2","esm2017")}();class TM{constructor(e){return e}}const zV="storage",mN=new c.OlP("angularfire2.storage-instances");function RG(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new TM(i)}}const kG={provide:class OG{constructor(){return(0,An.vb)(zV)}},deps:[[new c.FiY,mN]]},NG={provide:TM,useFactory:function PG(n,e){const t=(0,An.JM)(zV,n,e);return t&&new TM(t)},deps:[[new c.FiY,mN],wm]};let FG=(()=>{class n{constructor(){(0,bd.KN)("angularfire",An.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[NG,kG]}),n})();function LG(n,...e){return{ngModule:FG,providers:[{provide:mN,useFactory:RG(n),multi:!0,deps:[c.R0b,c.zs3,An.HU,Aw,[new c.FiY,wd],[new c.FiY,pp],...e]}]}}const UG=(0,An.u3)(xG,!0),VG=(0,An.u3)(DG,!0),BG=(0,An.u3)(TG,!0),jG=(0,An.u3)(IG,!0);var Fd=Q(4674),Sr=Q(2459),_n=Q(2096),Ld=Q(5619);const{isArray:HG}=Array,{getPrototypeOf:$G,prototype:qG,keys:GG}=Object;function HV(n){if(1===n.length){const e=n[0];if(HG(e))return{args:e,keys:null};if(function WG(n){return n&&"object"==typeof n&&$G(n)===qG}(e)){const t=GG(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var WI=Q(2737);const{isArray:ZG}=Array;function gN(n){return(0,gn.U)(e=>function KG(n,e){return ZG(e)?n(...e):n(e)}(n,e))}var L0=Q(9940);function $V(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var YG=Q(7103);function DM(...n){const e=(0,L0.yG)(n),t=(0,L0.jO)(n),{args:i,keys:r}=HV(n);if(0===i.length)return(0,Sr.D)([],e);const s=new rr.y(function QG(n,e,t=WI.y){return i=>{qV(e,()=>{const{length:r}=n,s=new Array(r);let u=r,m=r;for(let v=0;v<r;v++)qV(e,()=>{const C=(0,Sr.D)(n[v],e);let M=!1;C.subscribe((0,ci.x)(i,L=>{s[v]=L,M||(M=!0,m--),m||i.next(t(s.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,e,r?u=>$V(r,u):WI.y));return t?s.pipe(gN(t)):s}function qV(n,e,t){n?(0,YG.f)(t,n,e):e()}const SM=(0,Q(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ZI=Q(7537);function KI(...n){return function JG(){return(0,ZI.J)(1)}()((0,Sr.D)(n,(0,L0.yG)(n)))}var _N=Q(8407);function U0(n,e){const t=(0,Fd.m)(n)?n:()=>n,i=r=>r.error(t());return new rr.y(e?r=>e.schedule(i,0,r):i)}var Lf=Q(6232),$u=Q(7394);function vN(){return(0,Nr.e)((n,e)=>{let t=null;n._refCount++;const i=(0,ci.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class GV extends rr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $u.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ci.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$u.w0.EMPTY)}return e}refCount(){return vN()(this)}}var qo=Q(4664);function Kc(n){return n<=0?()=>Lf.E:(0,Nr.e)((e,t)=>{let i=0;e.subscribe((0,ci.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Sg(...n){const e=(0,L0.yG)(n);return(0,Nr.e)((t,i)=>{(e?KI(n,t,e):KI(n,t)).subscribe(i)})}var Ea=Q(1631);function AM(n){return(0,Nr.e)((e,t)=>{let i=!1;e.subscribe((0,ci.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function WV(n=eW){return(0,Nr.e)((e,t)=>{let i=!1;e.subscribe((0,ci.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function eW(){return new SM}function Ag(n,e){const t=arguments.length>=2;return i=>i.pipe(n?or((r,s)=>n(r,s,i)):WI.y,Kc(1),t?AM(e):WV(()=>new SM))}function Jv(n,e){return(0,Fd.m)(e)?(0,Ea.z)(n,e,1):(0,Ea.z)(n,1)}function Mg(n){return(0,Nr.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,ci.x)(t,void 0,void 0,u=>{s=(0,So.Xf)(n(u,Mg(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function V0(n,e){return(0,Nr.e)(function tW(n,e,t,i,r){return(s,u)=>{let m=t,v=e,C=0;s.subscribe((0,ci.x)(u,M=>{const L=C++;v=m?n(v,M,L):(m=!0,M),i&&u.next(v)},r&&(()=>{m&&u.next(v),u.complete()})))}}(n,e,arguments.length>=2,!0))}function yN(n){return n<=0?()=>Lf.E:(0,Nr.e)((e,t)=>{let i=[];e.subscribe((0,ci.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function ZV(n){return(0,gn.U)(()=>n)}function MM(n){return(0,Nr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var bN=Q(2420);function Ud(n){return(0,Nr.e)((e,t)=>{(0,So.Xf)(n).subscribe((0,ci.x)(t,()=>t.complete(),bN.Z)),!t.closed&&e.subscribe(t)})}const _i="primary",YI=Symbol("RouteTitle");class iW{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function B0(n){return new iW(n)}function rW(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const u=i[s],m=n[s];if(u.startsWith(":"))r[u.substring(1)]=m;else if(u!==m.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Uf(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!KV(n[r],e[r]))return!1;return!0}function KV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function YV(n){return n.length>0?n[n.length-1]:null}function Og(n){return function zG(n){return!!n&&(n instanceof rr.y||(0,Fd.m)(n.lift)&&(0,Fd.m)(n.subscribe))}(n)?n:(0,c.QGY)(n)?(0,Sr.D)(Promise.resolve(n)):(0,_n.of)(n)}const sW={exact:function JV(n,e,t){if(!ey(n.segments,e.segments)||!OM(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!JV(n.children[i],e.children[i],t))return!1;return!0},subset:eB},QV={exact:function aW(n,e){return Uf(n,e)},subset:function cW(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>KV(n[t],e[t]))},ignored:()=>!0};function XV(n,e,t){return sW[t.paths](n.root,e.root,t.matrixParams)&&QV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function eB(n,e,t){return tB(n,e,e.segments,t)}function tB(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!ey(r,t)||e.hasChildren()||!OM(r,t,i))}if(n.segments.length===t.length){if(!ey(n.segments,t)||!OM(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!eB(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ey(n.segments,r)&&OM(n.segments,r,i)&&n.children[_i])&&tB(n.children[_i],e,s,i)}}function OM(n,e,t){return e.every((i,r)=>QV[t](n[r].parameters,i.parameters))}class j0{constructor(e=new Lr([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=B0(this.queryParams)),this._queryParamMap}toString(){return dW.serialize(this)}}class Lr{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return PM(this)}}class QI{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=B0(this.parameters)),this._parameterMap}toString(){return rB(this)}}function ey(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let XI=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return new wN},providedIn:"root"})}return n})();class wN{parse(e){const t=new EW(e);return new j0(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${JI(e.root,!0)}`,i=function pW(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${RM(t)}=${RM(r)}`).join("&"):`${RM(t)}=${RM(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function hW(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${i}${r}`}}const dW=new wN;function PM(n){return n.segments.map(e=>rB(e)).join("/")}function JI(n,e){if(!n.hasChildren())return PM(n);if(e){const t=n.children[_i]?JI(n.children[_i],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==_i&&i.push(`${r}:${JI(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function uW(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===_i&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==_i&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===_i?[JI(n.children[_i],!1)]:[`${r}:${JI(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[_i]?`${PM(n)}/${t[0]}`:`${PM(n)}/(${t.join("//")})`}}function nB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function RM(n){return nB(n).replace(/%3B/gi,";")}function EN(n){return nB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kM(n){return decodeURIComponent(n)}function iB(n){return kM(n.replace(/\+/g,"%20"))}function rB(n){return`${EN(n.path)}${function fW(n){return Object.keys(n).map(e=>`;${EN(e)}=${EN(n[e])}`).join("")}(n.parameters)}`}const mW=/^[^\/()?;#]+/;function CN(n){const e=n.match(mW);return e?e[0]:""}const gW=/^[^\/()?;=#]+/,vW=/^[^=?&#]+/,bW=/^[^&#]+/;class EW{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Lr([],{}):new Lr([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[_i]=new Lr(e,t)),i}parseSegment(){const e=CN(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new QI(kM(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function _W(n){const e=n.match(gW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=CN(this.remaining);r&&(i=r,this.capture(i))}e[kM(t)]=kM(i)}parseQueryParam(e){const t=function yW(n){const e=n.match(vW);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const u=function wW(n){const e=n.match(bW);return e?e[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=iB(t),s=iB(i);if(e.hasOwnProperty(r)){let u=e[r];Array.isArray(u)||(u=[u],e[r]=u),u.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=CN(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new c.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=_i);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[_i]:new Lr([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function oB(n){return n.segments.length>0?new Lr([],{[_i]:n}):n}function sB(n){const e={};for(const i of Object.keys(n.children)){const s=sB(n.children[i]);if(i===_i&&0===s.segments.length&&s.hasChildren())for(const[u,m]of Object.entries(s.children))e[u]=m;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function CW(n){if(1===n.numberOfChildren&&n.children[_i]){const e=n.children[_i];return new Lr(n.segments.concat(e.segments),e.children)}return n}(new Lr(n.segments,e))}function ty(n){return n instanceof j0}function aB(n){let e;const r=oB(function t(s){const u={};for(const v of s.children){const C=t(v);u[v.outlet]=C}const m=new Lr(s.url,u);return s===n&&(e=m),m}(n.root));return e??r}function cB(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return IN(r,r,r,t,i);const s=function xW(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new uB(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const m={};return Object.entries(s.outlets).forEach(([v,C])=>{m[v]="string"==typeof C?C.split("/"):C}),[...r,{outlets:m}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===u?(s.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&r.push(m))}),r):[...r,s]},[]);return new uB(t,e,i)}(e);if(s.toRoot())return IN(r,r,new Lr([],{}),t,i);const u=function TW(n,e,t){if(n.isAbsolute)return new FM(e,!0,0);if(!t)return new FM(e,!1,NaN);if(null===t.parent)return new FM(t,!0,0);const i=NM(n.commands[0])?0:1;return function DW(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new c.vHH(4005,!1);r=i.segments.length}return new FM(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),m=u.processChildren?tx(u.segmentGroup,u.index,s.commands):dB(u.segmentGroup,u.index,s.commands);return IN(r,u.segmentGroup,m,t,i)}function NM(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ex(n){return"object"==typeof n&&null!=n&&n.outlets}function IN(n,e,t,i,r){let u,s={};i&&Object.entries(i).forEach(([v,C])=>{s[v]=Array.isArray(C)?C.map(M=>`${M}`):`${C}`}),u=n===e?t:lB(n,e,t);const m=oB(sB(u));return new j0(m,s,r)}function lB(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:lB(s,e,t)}),new Lr(n.segments,i)}class uB{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&NM(i[0]))throw new c.vHH(4003,!1);const r=i.find(ex);if(r&&r!==YV(i))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class FM{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function dB(n,e,t){if(n||(n=new Lr([],{})),0===n.segments.length&&n.hasChildren())return tx(n,e,t);const i=function AW(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const u=n.segments[r],m=t[i];if(ex(m))break;const v=`${m}`,C=i<t.length-1?t[i+1]:null;if(r>0&&void 0===v)break;if(v&&C&&"object"==typeof C&&void 0===C.outlets){if(!fB(v,C,u))return s;i+=2}else{if(!fB(v,{},u))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Lr(n.segments.slice(0,i.pathIndex),{});return s.children[_i]=new Lr(n.segments.slice(i.pathIndex),n.children),tx(s,0,r)}return i.match&&0===r.length?new Lr(n.segments,{}):i.match&&!n.hasChildren()?xN(n,e,t):i.match?tx(n,0,r):xN(n,e,t)}function tx(n,e,t){if(0===t.length)return new Lr(n.segments,{});{const i=function SW(n){return ex(n[0])?n[0].outlets:{[_i]:n}}(t),r={};if(Object.keys(i).some(s=>s!==_i)&&n.children[_i]&&1===n.numberOfChildren&&0===n.children[_i].segments.length){const s=tx(n.children[_i],e,t);return new Lr(n.segments,s.children)}return Object.entries(i).forEach(([s,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(r[s]=dB(n.children[s],e,u))}),Object.entries(n.children).forEach(([s,u])=>{void 0===i[s]&&(r[s]=u)}),new Lr(n.segments,r)}}function xN(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(ex(s)){const v=MW(s.outlets);return new Lr(i,v)}if(0===r&&NM(t[0])){i.push(new QI(n.segments[e].path,hB(t[0]))),r++;continue}const u=ex(s)?s.outlets[_i]:`${s}`,m=r<t.length-1?t[r+1]:null;u&&m&&NM(m)?(i.push(new QI(u,hB(m))),r+=2):(i.push(new QI(u,{})),r++)}return new Lr(i,{})}function MW(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=xN(new Lr([],{}),0,i))}),e}function hB(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function fB(n,e,t){return n==t.path&&Uf(e,t.parameters)}const nx="imperative";class Vf{constructor(e,t){this.id=e,this.url=t}}class LM extends Vf{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pg extends Vf{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ix extends Vf{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class z0 extends Vf{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class UM extends Vf{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pB extends Vf{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OW extends Vf{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PW extends Vf{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class RW extends Vf{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kW extends Vf{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NW{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FW{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LW{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UW{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VW{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BW{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mB{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class TN{}class DN{constructor(e){this.url=e}}class jW{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new rx,this.attachRef=null}}let rx=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new jW,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class gB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=SN(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=SN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=AN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return AN(e,this._root).map(t=>t.value)}}function SN(n,e){if(n===e.value)return e;for(const t of e.children){const i=SN(n,t);if(i)return i}return null}function AN(n,e){if(n===e.value)return[e];for(const t of e.children){const i=AN(n,t);if(i.length)return i.unshift(e),i}return[]}class im{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function H0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _B extends gB{constructor(e,t){super(e),this.snapshot=t,MN(this,e)}toString(){return this.snapshot.toString()}}function vB(n,e){const t=function zW(n,e){const u=new VM([],{},{},"",{},_i,e,null,{});return new bB("",new im(u,[]))}(0,e),i=new Ld.X([new QI("",{})]),r=new Ld.X({}),s=new Ld.X({}),u=new Ld.X({}),m=new Ld.X(""),v=new $0(i,r,u,m,s,_i,e,t.root);return v.snapshot=t.root,new _B(new im(v,[]),t)}class $0{constructor(e,t,i,r,s,u,m,v){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=u,this.component=m,this._futureSnapshot=v,this.title=this.dataSubject?.pipe((0,gn.U)(C=>C[YI]))??(0,_n.of)(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gn.U)(e=>B0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gn.U)(e=>B0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yB(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function HW(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class VM{get title(){return this.data?.[YI]}constructor(e,t,i,r,s,u,m,v,C){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=u,this.component=m,this.routeConfig=v,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=B0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=B0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bB extends gB{constructor(e,t){super(t),this.url=e,MN(this,t)}toString(){return wB(this._root)}}function MN(n,e){e.value._routerState=n,e.children.forEach(t=>MN(n,t))}function wB(n){const e=n.children.length>0?` { ${n.children.map(wB).join(", ")} } `:"";return`${n.value}${e}`}function ON(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Uf(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Uf(e.params,t.params)||n.paramsSubject.next(t.params),function oW(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Uf(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Uf(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function PN(n,e){const t=Uf(n.params,e.params)&&function lW(n,e){return ey(n,e)&&n.every((t,i)=>Uf(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||PN(n.parent,e.parent))}let BM=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=_i,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(rx),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb),this.inputBinder=(0,c.f3M)(jM,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new c.vHH(4013,!1);this._activatedRoute=t;const r=this.location,u=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,v=new $W(t,m,r.injector);this.activated=r.createComponent(u,{index:r.length,injector:v,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]})}return n})();class $W{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===$0?this.route:e===rx?this.childContexts:this.parent.get(e,t)}}const jM=new c.OlP("");let EB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=DM([i.queryParams,i.params,i.data]).pipe((0,qo.w)(([s,u,m],v)=>(m={...s,...u,...m},0===v?(0,_n.of)(m):Promise.resolve(m)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const u=(0,c.qFp)(i.component);if(u)for(const{templateName:m}of u.inputs)t.activatedComponentRef.setInput(m,s[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function ox(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function GW(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ox(n,i,r);return ox(n,i)})}(n,e,t);return new im(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(m=>ox(n,m)),u}}const i=function WW(n){return new $0(new Ld.X(n.url),new Ld.X(n.params),new Ld.X(n.queryParams),new Ld.X(n.fragment),new Ld.X(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>ox(n,s));return new im(i,r)}}const RN="ngNavigationCancelingError";function CB(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=ty(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=IB(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function IB(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[RN]=!0,i.cancellationCode=e,t&&(i.url=t),i}function xB(n){return n&&n[RN]}let TB=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(i,r){1&i&&c._UZ(0,"router-outlet")},dependencies:[BM],encapsulation:2})}return n})();function kN(n){const e=n.children&&n.children.map(kN),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_i&&(t.component=TB),t}function Mh(n){return n.outlet||_i}function sx(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class t9{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),ON(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=H0(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,r[u],i),delete r[u]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=H0(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);if(i&&i.outlet){const u=i.outlet.detach(),m=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=H0(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=H0(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new BW(s.value.snapshot))}),e.children.length&&this.forwardEvent(new UW(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(ON(r),r===s)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const m=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(m.contexts),u.attachRef=m.componentRef,u.route=m.route.value,u.outlet&&u.outlet.attach(m.componentRef,m.route.value),ON(m.route.value),this.activateChildRoutes(e,null,u.children)}else{const m=sx(r.snapshot);u.attachRef=null,u.route=r,u.injector=m,u.outlet&&u.outlet.activateWith(r,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,i)}}class DB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zM{constructor(e,t){this.component=e,this.route=t}}function n9(n,e,t){const i=n._root;return ax(i,e?e._root:null,t,[i.value])}function q0(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:i}function ax(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=H0(e);return n.children.forEach(u=>{(function r9(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const v=function o9(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ey(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ey(n.url,e.url)||!Uf(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!PN(n,e)||!Uf(n.queryParams,e.queryParams);default:return!PN(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);v?r.canActivateChecks.push(new DB(i)):(s.data=u.data,s._resolvedData=u._resolvedData),ax(n,e,s.component?m?m.children:null:t,i,r),v&&m&&m.outlet&&m.outlet.isActivated&&r.canDeactivateChecks.push(new zM(m.outlet.component,u))}else u&&cx(e,m,r),r.canActivateChecks.push(new DB(i)),ax(n,null,s.component?m?m.children:null:t,i,r)})(u,s[u.value.outlet],t,i.concat([u.value]),r),delete s[u.value.outlet]}),Object.entries(s).forEach(([u,m])=>cx(m,t.getContext(u),r)),r}function cx(n,e,t){const i=H0(n),r=n.value;Object.entries(i).forEach(([s,u])=>{cx(u,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new zM(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function lx(n){return"function"==typeof n}function SB(n){return n instanceof SM||"EmptyError"===n?.name}const HM=Symbol("INITIAL_VALUE");function G0(){return(0,qo.w)(n=>DM(n.map(e=>e.pipe(Kc(1),Sg(HM)))).pipe((0,gn.U)(e=>{for(const t of e)if(!0!==t){if(t===HM)return HM;if(!1===t||t instanceof j0)return t}return!0}),or(e=>e!==HM),Kc(1)))}function AB(n){return(0,_N.z)((0,Xi.b)(e=>{if(ty(e))throw CB(0,e)}),(0,gn.U)(e=>!0===e))}class $M{constructor(e){this.segmentGroup=e||null}}class MB{constructor(e){this.urlTree=e}}function W0(n){return U0(new $M(n))}function OB(n){return U0(new MB(n))}class x9{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new c.vHH(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,_n.of)(i);if(r.numberOfChildren>1||!r.children[_i])return U0(new c.vHH(4e3,!1));r=r.children[_i]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new j0(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);i[r]=t[m]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let u={};return Object.entries(t.children).forEach(([m,v])=>{u[m]=this.createSegmentGroup(e,v,i,r)}),new Lr(s,u)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new c.vHH(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const NN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function T9(n,e,t,i,r){const s=FN(n,e,t);return s.matched?(i=function KW(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function E9(n,e,t,i){const r=e.canMatch;if(!r||0===r.length)return(0,_n.of)(!0);const s=r.map(u=>{const m=q0(u,n);return Og(function d9(n){return n&&lx(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,_n.of)(s).pipe(G0(),AB())}(i,e,t).pipe((0,gn.U)(u=>!0===u?s:{...NN}))):(0,_n.of)(s)}function FN(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...NN}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||rW)(t,n,e);if(!r)return{...NN};const s={};Object.entries(r.posParams??{}).forEach(([m,v])=>{s[m]=v.path});const u=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:u,positionalParamSegments:r.posParams??{}}}function PB(n,e,t,i){return t.length>0&&function A9(n,e,t){return t.some(i=>qM(n,e,i)&&Mh(i)!==_i)}(n,t,i)?{segmentGroup:new Lr(e,S9(i,new Lr(t,n.children))),slicedSegments:[]}:0===t.length&&function M9(n,e,t){return t.some(i=>qM(n,e,i))}(n,t,i)?{segmentGroup:new Lr(n.segments,D9(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Lr(n.segments,n.children),slicedSegments:t}}function D9(n,e,t,i,r){const s={};for(const u of i)if(qM(n,t,u)&&!r[Mh(u)]){const m=new Lr([],{});s[Mh(u)]=m}return{...r,...s}}function S9(n,e){const t={};t[_i]=e;for(const i of n)if(""===i.path&&Mh(i)!==_i){const r=new Lr([],{});t[Mh(i)]=r}return t}function qM(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class k9{constructor(e,t,i,r,s,u,m){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=u,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new x9(this.urlSerializer,this.urlTree)}noMatchError(e){return new c.vHH(4002,!1)}recognize(){const e=PB(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,_i).pipe(Mg(t=>{if(t instanceof MB)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof $M?this.noMatchError(t):t}),(0,gn.U)(t=>{const i=new VM([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_i,this.rootComponentType,null,{}),r=new im(i,t),s=new bB("",r),u=function IW(n,e,t=null,i=null){return cB(aB(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(s._root),{state:s,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,_i).pipe(Mg(i=>{throw i instanceof $M?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=yB(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Sr.D)(r).pipe(Jv(s=>{const u=i.children[s],m=function JW(n,e){const t=n.filter(i=>Mh(i)===e);return t.push(...n.filter(i=>Mh(i)!==e)),t}(t,s);return this.processSegmentGroup(e,m,u,s)}),V0((s,u)=>(s.push(...u),s)),AM(null),function nW(n,e){const t=arguments.length>=2;return i=>i.pipe(n?or((r,s)=>n(r,s,i)):WI.y,yN(1),t?AM(e):WV(()=>new SM))}(),(0,Ea.z)(s=>{if(null===s)return W0(i);const u=RB(s);return function N9(n){n.sort((e,t)=>e.value.outlet===_i?-1:t.value.outlet===_i?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,_n.of)(u)}))}processSegment(e,t,i,r,s,u){return(0,Sr.D)(t).pipe(Jv(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,i,r,s,u).pipe(Mg(v=>{if(v instanceof $M)return(0,_n.of)(null);throw v}))),Ag(m=>!!m),Mg(m=>{if(SB(m))return function P9(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?(0,_n.of)([]):W0(i);throw m}))}processSegmentAgainstRoute(e,t,i,r,s,u,m){return function O9(n,e,t,i){return!!(Mh(n)===i||i!==_i&&qM(e,t,n))&&("**"===n.path||FN(e,n,t).matched)}(i,r,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,u,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,u):W0(r):W0(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?OB(s):this.applyRedirects.lineralizeSegments(i,s).pipe((0,Ea.z)(u=>{const m=new Lr(u,{});return this.processSegment(e,t,m,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,u){const{matched:m,consumedSegments:v,remainingSegments:C,positionalParamSegments:M}=FN(t,r,s);if(!m)return W0(t);const L=this.applyRedirects.applyRedirectCommands(v,r.redirectTo,M);return r.redirectTo.startsWith("/")?OB(L):this.applyRedirects.lineralizeSegments(r,L).pipe((0,Ea.z)(q=>this.processSegment(e,i,t,q.concat(C),u,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,u){let m;if("**"===i.path){const v=r.length>0?YV(r).parameters:{},C=new VM(r,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kB(i),Mh(i),i.component??i._loadedComponent??null,i,NB(i));m=(0,_n.of)({snapshot:C,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=T9(t,i,r,e).pipe((0,gn.U)(({matched:v,consumedSegments:C,remainingSegments:M,parameters:L})=>v?{snapshot:new VM(C,L,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kB(i),Mh(i),i.component??i._loadedComponent??null,i,NB(i)),consumedSegments:C,remainingSegments:M}:null));return m.pipe((0,qo.w)(v=>null===v?W0(t):this.getChildConfig(e=i._injector??e,i,r).pipe((0,qo.w)(({routes:C})=>{const M=i._loadedInjector??e,{snapshot:L,consumedSegments:q,remainingSegments:ne}=v,{segmentGroup:ae,slicedSegments:ye}=PB(t,q,ne,C);if(0===ye.length&&ae.hasChildren())return this.processChildren(M,C,ae).pipe((0,gn.U)(wt=>null===wt?null:[new im(L,wt)]));if(0===C.length&&0===ye.length)return(0,_n.of)([new im(L,[])]);const We=Mh(i)===s;return this.processSegment(M,C,ae,ye,We?_i:s,!0).pipe((0,gn.U)(wt=>[new im(L,wt)]))}))))}getChildConfig(e,t,i){return t.children?(0,_n.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,_n.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function w9(n,e,t,i){const r=e.canLoad;if(void 0===r||0===r.length)return(0,_n.of)(!0);const s=r.map(u=>{const m=q0(u,n);return Og(function a9(n){return n&&lx(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,_n.of)(s).pipe(G0(),AB())}(e,t,i).pipe((0,Ea.z)(r=>r?this.configLoader.loadChildren(e,t).pipe((0,Xi.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function I9(n){return U0(IB(!1,3))}())):(0,_n.of)({routes:[],injector:e})}}function F9(n){const e=n.value.routeConfig;return e&&""===e.path}function RB(n){const e=[],t=new Set;for(const i of n){if(!F9(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=RB(i.children);e.push(new im(i.value,r))}return e.filter(i=>!t.has(i))}function kB(n){return n.data||{}}function NB(n){return n.resolve||{}}function FB(n){return"string"==typeof n.title||null===n.title}function LN(n){return(0,qo.w)(e=>{const t=n(e);return t?(0,Sr.D)(t).pipe((0,gn.U)(()=>e)):(0,_n.of)(e)})}const Z0=new c.OlP("ROUTES");let UN=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,_n.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Og(t.loadComponent()).pipe((0,gn.U)(LB),(0,Xi.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),MM(()=>{this.componentLoaders.delete(t)})),r=new GV(i,()=>new jn.x).pipe(vN());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,_n.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function H9(n,e,t,i){return Og(n.loadChildren()).pipe((0,gn.U)(LB),(0,Ea.z)(r=>r instanceof c.YKP||Array.isArray(r)?(0,_n.of)(r):(0,Sr.D)(e.compileModuleAsync(r))),(0,gn.U)(r=>{i&&i(n);let s,u,m=!1;return Array.isArray(r)?(u=r,!0):(s=r.create(t).injector,u=s.get(Z0,[],{optional:!0,self:!0}).flat()),{routes:u.map(kN),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(MM(()=>{this.childrenLoaders.delete(i)})),u=new GV(s,()=>new jn.x).pipe(vN());return this.childrenLoaders.set(i,u),u}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LB(n){return function $9(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let GM=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new jn.x,this.transitionAbortSubject=new jn.x,this.configLoader=(0,c.f3M)(UN),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(XI),this.rootContexts=(0,c.f3M)(rx),this.inputBindingEnabled=null!==(0,c.f3M)(jM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,_n.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new FW(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new NW(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new Ld.X({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:nx,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(or(s=>0!==s.id),(0,gn.U)(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),(0,qo.w)(s=>{this.currentTransition=s;let u=!1,m=!1;return(0,_n.of)(s).pipe((0,Xi.b)(v=>{this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,qo.w)(v=>{const C=v.currentBrowserUrl.toString(),M=!t.navigated||v.extractedUrl.toString()!==C||C!==v.currentUrlTree.toString();if(!M&&"reload"!==(v.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const q="";return this.events.next(new z0(v.id,this.urlSerializer.serialize(v.rawUrl),q,0)),v.resolve(null),Lf.E}if(t.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return(0,_n.of)(v).pipe((0,qo.w)(q=>{const ne=this.transitions?.getValue();return this.events.next(new LM(q.id,this.urlSerializer.serialize(q.extractedUrl),q.source,q.restoredState)),ne!==this.transitions?.getValue()?Lf.E:Promise.resolve(q)}),function L9(n,e,t,i,r,s){return(0,Ea.z)(u=>function R9(n,e,t,i,r,s,u="emptyOnly"){return new k9(n,e,t,i,r,u,s).recognize()}(n,e,t,i,u.extractedUrl,r,s).pipe((0,gn.U)(({state:m,tree:v})=>({...u,targetSnapshot:m,urlAfterRedirects:v}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Xi.b)(q=>{s.targetSnapshot=q.targetSnapshot,s.urlAfterRedirects=q.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:q.urlAfterRedirects};const ne=new pB(q.id,this.urlSerializer.serialize(q.extractedUrl),this.urlSerializer.serialize(q.urlAfterRedirects),q.targetSnapshot);this.events.next(ne)}));if(M&&t.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){const{id:q,extractedUrl:ne,source:ae,restoredState:ye,extras:We}=v,wt=new LM(q,this.urlSerializer.serialize(ne),ae,ye);this.events.next(wt);const Ot=vB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...v,targetSnapshot:Ot,urlAfterRedirects:ne,extras:{...We,skipLocationChange:!1,replaceUrl:!1}},(0,_n.of)(s)}{const q="";return this.events.next(new z0(v.id,this.urlSerializer.serialize(v.extractedUrl),q,1)),v.resolve(null),Lf.E}}),(0,Xi.b)(v=>{const C=new OW(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(C)}),(0,gn.U)(v=>(this.currentTransition=s={...v,guards:n9(v.targetSnapshot,v.currentSnapshot,this.rootContexts)},s)),function f9(n,e){return(0,Ea.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?(0,_n.of)({...t,guardsResult:!0}):function p9(n,e,t,i){return(0,Sr.D)(n).pipe((0,Ea.z)(r=>function b9(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,_n.of)(!0);const u=s.map(m=>{const v=sx(e)??r,C=q0(m,v);return Og(function u9(n){return n&&lx(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,i):v.runInContext(()=>C(n,e,t,i))).pipe(Ag())});return(0,_n.of)(u).pipe(G0())}(r.component,r.route,t,e,i)),Ag(r=>!0!==r,!0))}(u,i,r,n).pipe((0,Ea.z)(m=>m&&function s9(n){return"boolean"==typeof n}(m)?function m9(n,e,t,i){return(0,Sr.D)(e).pipe(Jv(r=>KI(function _9(n,e){return null!==n&&e&&e(new LW(n)),(0,_n.of)(!0)}(r.route.parent,i),function g9(n,e){return null!==n&&e&&e(new VW(n)),(0,_n.of)(!0)}(r.route,i),function y9(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function i9(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Lc(()=>{const m=u.guards.map(v=>{const C=sx(u.node)??t,M=q0(v,C);return Og(function l9(n){return n&&lx(n.canActivateChild)}(M)?M.canActivateChild(i,n):C.runInContext(()=>M(i,n))).pipe(Ag())});return(0,_n.of)(m).pipe(G0())}));return(0,_n.of)(s).pipe(G0())}(n,r.path,t),function v9(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return(0,_n.of)(!0);const r=i.map(s=>Lc(()=>{const u=sx(e)??t,m=q0(s,u);return Og(function c9(n){return n&&lx(n.canActivate)}(m)?m.canActivate(e,n):u.runInContext(()=>m(e,n))).pipe(Ag())}));return(0,_n.of)(r).pipe(G0())}(n,r.route,t))),Ag(r=>!0!==r,!0))}(i,s,n,e):(0,_n.of)(m)),(0,gn.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,v=>this.events.next(v)),(0,Xi.b)(v=>{if(s.guardsResult=v.guardsResult,ty(v.guardsResult))throw CB(0,v.guardsResult);const C=new PW(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(C)}),or(v=>!!v.guardsResult||(this.cancelNavigationTransition(v,"",3),!1)),LN(v=>{if(v.guards.canActivateChecks.length)return(0,_n.of)(v).pipe((0,Xi.b)(C=>{const M=new RW(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(M)}),(0,qo.w)(C=>{let M=!1;return(0,_n.of)(C).pipe(function U9(n,e){return(0,Ea.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return(0,_n.of)(t);let s=0;return(0,Sr.D)(r).pipe(Jv(u=>function V9(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!FB(r)&&(s[YI]=r.title),function B9(n,e,t,i){const r=function j9(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return(0,_n.of)({});const s={};return(0,Sr.D)(r).pipe((0,Ea.z)(u=>function z9(n,e,t,i){const r=sx(e)??i,s=q0(n,r);return Og(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[u],e,t,i).pipe(Ag(),(0,Xi.b)(m=>{s[u]=m}))),yN(1),ZV(s),Mg(u=>SB(u)?Lf.E:U0(u)))}(s,n,e,i).pipe((0,gn.U)(u=>(n._resolvedData=u,n.data=yB(n,t).resolve,r&&FB(r)&&(n.data[YI]=r.title),null)))}(u.route,i,n,e)),(0,Xi.b)(()=>s++),yN(1),(0,Ea.z)(u=>s===r.length?(0,_n.of)(t):Lf.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Xi.b)({next:()=>M=!0,complete:()=>{M||this.cancelNavigationTransition(C,"",2)}}))}),(0,Xi.b)(C=>{const M=new kW(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(M)}))}),LN(v=>{const C=M=>{const L=[];M.routeConfig?.loadComponent&&!M.routeConfig._loadedComponent&&L.push(this.configLoader.loadComponent(M.routeConfig).pipe((0,Xi.b)(q=>{M.component=q}),(0,gn.U)(()=>{})));for(const q of M.children)L.push(...C(q));return L};return DM(C(v.targetSnapshot.root)).pipe(AM(),Kc(1))}),LN(()=>this.afterPreactivation()),(0,gn.U)(v=>{const C=function qW(n,e,t){const i=ox(n,e._root,t?t._root:void 0);return new _B(i,e)}(t.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=s={...v,targetRouterState:C},s}),(0,Xi.b)(()=>{this.events.next(new TN)}),((n,e,t,i)=>(0,gn.U)(r=>(new t9(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),Kc(1),(0,Xi.b)({next:v=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pg(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),t.titleStrategy?.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{u=!0}}),Ud(this.transitionAbortSubject.pipe((0,Xi.b)(v=>{throw v}))),MM(()=>{u||m||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Mg(v=>{if(m=!0,xB(v))this.events.next(new ix(s.id,this.urlSerializer.serialize(s.extractedUrl),v.message,v.cancellationCode)),function ZW(n){return xB(n)&&ty(n.url)}(v)?this.events.next(new DN(v.url)):s.resolve(!1);else{this.events.next(new UM(s.id,this.urlSerializer.serialize(s.extractedUrl),v,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(v))}catch(C){s.reject(C)}}return Lf.E}))}))}cancelNavigationTransition(t,i,r){const s=new ix(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UB(n){return n!==nx}let VB=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===_i);return i}getResolvedTitleForRoute(t){return t.data[YI]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(q9)},providedIn:"root"})}return n})(),q9=(()=>{class n extends VB{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(pt))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),G9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Z9)},providedIn:"root"})}return n})();class W9{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Z9=(()=>{class n extends W9{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=c.n5z(n)))(r||n)}}();static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const WM=new c.OlP("",{providedIn:"root",factory:()=>({})});let K9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Y9)},providedIn:"root"})}return n})(),Y9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ux=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ux||{});function BB(n,e){n.events.pipe(or(t=>t instanceof Pg||t instanceof ix||t instanceof UM||t instanceof z0),(0,gn.U)(t=>t instanceof Pg||t instanceof z0?ux.COMPLETE:t instanceof ix&&(0===t.code||1===t.code)?ux.REDIRECTING:ux.FAILED),or(t=>t!==ux.REDIRECTING),Kc(1)).subscribe(()=>{e()})}function Q9(n){throw n}function X9(n,e,t){return e.parse("/")}const J9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eZ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pc=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this._events=new jn.x,this.options=(0,c.f3M)(WM,{optional:!0})||{},this.pendingTasks=(0,c.f3M)(c.HDt),this.errorHandler=this.options.errorHandler||Q9,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||X9,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(K9),this.routeReuseStrategy=(0,c.f3M)(G9),this.titleStrategy=(0,c.f3M)(VB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,c.f3M)(Z0,{optional:!0})?.flat()??[],this.navigationTransitions=(0,c.f3M)(GM),this.urlSerializer=(0,c.f3M)(XI),this.location=(0,c.f3M)(mt),this.componentInputBindingEnabled=!!(0,c.f3M)(jM,{optional:!0}),this.eventsSubscription=new $u.w0,this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new j0,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(jB(i)&&this._events.next(i));if(i instanceof LM)UB(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof z0)this.rawUrlTree=r.rawUrl;else if(i instanceof pB){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof TN)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof ix)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof DN){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||UB(r.source)};this.scheduleNavigation(s,nx,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof UM&&this.restoreHistory(r,!0),i instanceof Pg&&(this.navigated=!0),jB(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),nx,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},u=r?.navigationId?r:null;if(r){const v={...r};delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(s.state=v)}const m=this.parseUrl(t);this.scheduleNavigation(m,i,u,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(kN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:u,queryParamsHandling:m,preserveFragment:v}=i,C=v?this.currentUrlTree.fragment:u;let L,M=null;switch(m){case"merge":M={...this.currentUrlTree.queryParams,...s};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=s||null}null!==M&&(M=this.removeEmptyProps(M));try{L=aB(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),L=this.currentUrlTree.root}return cB(L,t,M,C??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=ty(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,nx,null,i)}navigate(t,i={skipLocationChange:!1}){return function tZ(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new c.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...J9}:!1===i?{...eZ}:i,ty(t))return XV(this.currentUrlTree,t,r);const s=this.parseUrl(t);return XV(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,u){if(this.disposed)return Promise.resolve(!1);let m,v,C;u?(m=u.resolve,v=u.reject,C=u.promise):C=new Promise((L,q)=>{m=L,v=q});const M=this.pendingTasks.add();return BB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(M))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:m,reject:v,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(L=>Promise.reject(L))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const u={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",u)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jB(n){return!(n instanceof TN||n instanceof DN)}let Rg=(()=>{class n{constructor(t,i,r,s,u,m){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=u,this.locationStrategy=m,this.href=null,this.commands=null,this.onChanges=new jn.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const v=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===v||"area"===v,this.isAnchorElement?this.subscription=t.events.subscribe(C=>{C instanceof Pg&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,u){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(pc),c.Y36($0),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Ne))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&i&&c.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",c.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",c.VuI],replaceUrl:["replaceUrl","replaceUrl",c.VuI],routerLink:"routerLink"},standalone:!0,features:[c.Xq5,c.TTD]})}return n})(),zB=(()=>{class n{get isActive(){return this._isActive}constructor(t,i,r,s,u){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=u,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(m=>{m instanceof Pg&&this.update()})}ngAfterContentInit(){(0,_n.of)(this.links.changes,(0,_n.of)(null)).pipe((0,ZI.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,Sr.D)(t).pipe((0,ZI.J)()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function nZ(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(pc),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(Rg,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,s){if(1&i&&c.Suo(s,Rg,5),2&i){let u;c.iGM(u=c.CRH())&&(r.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[c.TTD]})}return n})();class HB{}let iZ=(()=>{class n{constructor(t,i,r,s,u){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(or(t=>t instanceof Pg),Jv(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,c.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,m=s._loadedInjector??u;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(u,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(m,s.children??s._loadedRoutes))}return(0,Sr.D)(r).pipe((0,ZI.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):(0,_n.of)(null);const s=r.pipe((0,Ea.z)(u=>null===u?(0,_n.of)(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(i.loadComponent&&!i._loadedComponent){const u=this.loader.loadComponent(i);return(0,Sr.D)([s,u]).pipe((0,ZI.J)())}return s})}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(pc),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(HB),c.LFG(UN))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const VN=new c.OlP("");let $B=(()=>{class n{constructor(t,i,r,s,u={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof LM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pg?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof z0&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){c.$Z()};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();function rm(n,e){return{\u0275kind:n,\u0275providers:e}}function GB(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const i=n.get(pc),r=n.get(WB);1===n.get(BN)&&i.initialNavigation(),n.get(ZB,null,c.XFs.Optional)?.setUpPreloading(),n.get(VN,null,c.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const WB=new c.OlP("",{factory:()=>new jn.x}),BN=new c.OlP("",{providedIn:"root",factory:()=>1}),ZB=new c.OlP("");function aZ(n){return rm(0,[{provide:ZB,useExisting:iZ},{provide:HB,useExisting:n}])}const KB=new c.OlP("ROUTER_FORROOT_GUARD"),lZ=[mt,{provide:XI,useClass:wN},pc,rx,{provide:$0,useFactory:function qB(n){return n.routerState.root},deps:[pc]},UN,[]];function uZ(){return new c.PXZ("Router",pc)}let YB=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[lZ,[],{provide:Z0,multi:!0,useValue:t},{provide:KB,useFactory:pZ,deps:[[pc,new c.FiY,new c.tp0]]},{provide:WM,useValue:i||{}},i?.useHash?{provide:Ne,useClass:st}:{provide:Ne,useClass:lt},{provide:VN,useFactory:()=>{const n=(0,c.f3M)(Cr),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)(WM),i=(0,c.f3M)(GM),r=(0,c.f3M)(XI);return t.scrollOffset&&n.setOffset(t.scrollOffset),new $B(r,i,n,e,t)}},i?.preloadingStrategy?aZ(i.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:uZ},i?.initialNavigation?mZ(i):[],i?.bindToComponentInputs?rm(8,[EB,{provide:jM,useExisting:EB}]).\u0275providers:[],[{provide:QB,useFactory:GB},{provide:c.tb,multi:!0,useExisting:QB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Z0,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(KB,8))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();function pZ(n){return"guarded"}function mZ(n){return["disabled"===n.initialNavigation?rm(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(pc);return()=>{e.setUpLocationChangeListener()}}},{provide:BN,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?rm(2,[{provide:BN,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(ut,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(pc),s=e.get(WB);BB(r,()=>{i(!0)}),e.get(GM).afterPreactivation=()=>(i(!0),s.closed?(0,_n.of)(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const QB=new c.OlP(""),_Z=function(n){return{"image-active":n}};function vZ(n,e){if(1&n&&c._UZ(0,"img",6),2&n){const t=e.$implicit,i=e.index,r=c.oxw(2);c.Q6J("src",t.imageSrc,c.LSH)("alt",t.imageAlt)("ngClass",c.VKq(3,_Z,r.selectedIndex===i))}}const yZ=function(n){return{active:n}};function bZ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"span",9),c.NdJ("click",function(){const s=c.CHM(t).index,u=c.oxw(3);return c.KtG(u.selectImage(s))}),c.qZA()}if(2&n){const t=e.index,i=c.oxw(3);c.Q6J("ngClass",c.VKq(1,yZ,i.selectedIndex===t))}}function wZ(n,e){if(1&n&&(c.TgZ(0,"div",7),c.YNc(1,bZ,1,3,"span",8),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",t.images)}}function EZ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"i",11),c.NdJ("click",function(){c.CHM(t);const r=c.oxw(2);return c.KtG(r.onPrevClick())}),c.qZA()()}}function CZ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",12)(1,"i",13),c.NdJ("click",function(){c.CHM(t);const r=c.oxw(2);return c.KtG(r.onNextClick())}),c.qZA()()}}function IZ(n,e){if(1&n&&(c.TgZ(0,"div",1),c.YNc(1,vZ,1,5,"img",2),c.YNc(2,wZ,2,1,"div",3),c.YNc(3,EZ,2,0,"div",4),c.YNc(4,CZ,2,0,"div",5),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.images),c.xp6(1),c.Q6J("ngIf",t.indicators),c.xp6(1),c.Q6J("ngIf",t.controls),c.xp6(1),c.Q6J("ngIf",t.controls)}}let xZ=(()=>{class n{constructor(){this.images=[],this.indicators=!0,this.controls=!0,this.autoSlide=!1,this.slideInterval=5e3,this.selectedIndex=0}ngOnInit(){this.autoSlide&&this.autoSlideImages()}autoSlideImages(){setInterval(()=>{this.onNextClick()},this.slideInterval)}selectImage(t){this.selectedIndex=t}onPrevClick(){0===this.selectedIndex?this.selectedIndex=this.images.length-1:this.selectedIndex--}onNextClick(){this.selectedIndex===this.images.length-1?this.selectedIndex=0:this.selectedIndex++}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-carousel"]],inputs:{images:"images",indicators:"indicators",controls:"controls",autoSlide:"autoSlide",slideInterval:"slideInterval"},decls:1,vars:1,consts:[["class","carousel-container",4,"ngIf"],[1,"carousel-container"],["class","fade",3,"src","alt","ngClass",4,"ngFor","ngForOf"],["class","carousel-dot-container",4,"ngIf"],["class","btn-carousel btn-prev",4,"ngIf"],["class","btn-carousel btn-next",4,"ngIf"],[1,"fade",3,"src","alt","ngClass"],[1,"carousel-dot-container"],["class","dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dot",3,"ngClass","click"],[1,"btn-carousel","btn-prev"],[1,"fas","fa-arrow-circle-left","icon-carousel","icon-prev",3,"click"],[1,"btn-carousel","btn-next"],[1,"fas","fa-arrow-circle-right","icon-carousel","icon-next",3,"click"]],template:function(i,r){1&i&&c.YNc(0,IZ,5,4,"div",0),2&i&&c.Q6J("ngIf",r.images&&r.images.length>0)},dependencies:[Ko,ni,Qi],styles:[".carousel-container[_ngcontent-%COMP%]{position:relative;margin:auto;text-align:center;width:1000px;border-radius:15px;box-shadow:0 6px 12px #dce1e1}.carousel-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none;border-radius:15px}.carousel-container[_ngcontent-%COMP%]   img.image-active[_ngcontent-%COMP%]{display:block;width:100%;height:100%}.carousel-dot-container[_ngcontent-%COMP%]{position:absolute;right:0;left:0;bottom:0;display:flex;justify-content:center;padding:0;margin-bottom:1rem}.dot[_ngcontent-%COMP%]{cursor:pointer;height:13px;width:13px;margin:0 5px;background-color:#fff;border-radius:50%;display:inline-block;transition:opacitiy .6s ease;opacity:.5}.active[_ngcontent-%COMP%], .dot[_ngcontent-%COMP%]:hover{opacity:1}.fade[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fade;animation-duration:.7s}@keyframes _ngcontent-%COMP%_fade{0%{opacity:.8}to{opacity:1}}.btn-carousel[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;text-align:center;background:0 0;cursor:pointer}.icon-carousel[_ngcontent-%COMP%]{opacity:.5;transition:all .15s ease}.icon-carousel[_ngcontent-%COMP%]:hover{color:#fff;opacity:.9}.icon-carousel[_ngcontent-%COMP%]:active{opacity:.5}.icon-prev[_ngcontent-%COMP%], .icon-next[_ngcontent-%COMP%]{font-size:35px}.btn-prev[_ngcontent-%COMP%]{left:0}.btn-next[_ngcontent-%COMP%]{right:0}"]})}return n})(),TZ=(()=>{class n{constructor(){this.images=[{imageSrc:"./assets/images/commercial/scandal_commercial_ps_copy.jpg",imageAlt:"scandal"},{imageSrc:"./assets/images/commercial/sauvage_commercial.jpg",imageAlt:"sauvage"}]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-dashboard"]],decls:1,vars:2,consts:[[3,"images","autoSlide"]],template:function(i,r){1&i&&c._UZ(0,"app-carousel",0),2&i&&c.Q6J("images",r.images)("autoSlide",!1)},dependencies:[xZ],styles:['@charset "UTF-8";']})}return n})();Q(4467);const ZM=[{routerLink:"dashboard",icon:"fal fa-home",label:"F\u0151oldal",badge:0},{routerLink:"products",icon:"fal fa-duotone fa-glasses",label:"Napszem\xfcvegek",badge:0},{routerLink:"accessories",icon:"fal fa-gem",label:"Kieg\xe9sz\xedt\u0151k",badge:0},{routerLink:"fragrances",icon:" fa fa-spray-can-sparkles",label:"Parf\xfcm\xf6k",badge:0},{routerLink:"media",icon:"fal fa-camera",label:"Media",badge:0},{routerLink:"user",icon:"fal fa-user",label:"Profil",badge:0},{routerLink:"shopping-cart",icon:"fal fa-cart-shopping",label:"Kos\xe1r",badge:0}];let Bf=(()=>{class n{constructor(t){this.fs=t,this.cartItems=[],this.currentProduct=[]}getCollectionData(t){let i=zI(this.fs,t);return nN(i,{idField:"id"})}refreshData(t,i){t().subscribe(r=>{i.push(...r)})}getHawkers(){return this.getCollectionData("hawkers")}getJPG(){return this.getCollectionData("JPG")}getOrders(){return this.getCollectionData("*orders")}getUsers(){return this.getCollectionData("*users")}addToCartService(t){const i_selectedPrice=this.selectedSizePrice,r=this.cartItems.find(u=>u.product.id===t.id&&u.selectedPrice===i_selectedPrice);this.cartItems=this.getCartItems(),console.log("Cart items before modification:",this.cartItems),console.log("item: ",t),r?r.quantity<5&&r.quantity++:(this.cartItems.push({product:t,quantity:1,selectedPrice:this.selectedSizePrice,size:this.selectedSize}),console.log("Selected size price: ",this.selectedSizePrice),console.log("Selected size : ",this.selectedSize));const s=ZM.find(u=>"shopping-cart"===u.routerLink);if(s){const u=this.cartItems.reduce((m,v)=>m+v.quantity,0);s.badge=u}console.log("Cart items after modification:",this.cartItems)}selectSize(t){this.selectedSize=t.size,this.selectedSizePrice=t.price,console.log("kiv\xe1lasztott \xe1r: ",t.price),console.log("kiv\xe1lasztott kiszerel\xe9s: ",t.size)}getCurrentProduct(t){return this.currentProduct.push([t]),this.currentProduct}getCartItems(){return this.cartItems}getSelectedPrice(){return console.log("valami",this.selectedSizePrice),this.selectedSizePrice}exit(){window.location.reload()}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Dg))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var K0=Q(6321),kg=Q(3019),jN=Q(3020),zN=Q(3997),Sl=Q(6304),XB=(Q(8661),Q(3106));const JB="@firebase/database";let HN="";function tj(n){HN=n}class AZ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ie.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ie.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class MZ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ie.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const nj=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new AZ(e)}}catch{}return new MZ},ny=nj("localStorage"),$N=nj("sessionStorage"),Y0=new Mu.Yd("@firebase/database"),ij=function(){let n=1;return function(){return n++}}(),rj=function(n){const e=(0,ie.dS)(n),t=new ie.gQ;t.update(e);const i=t.digest();return ie.US.encodeByteArray(i)},dx=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=dx.apply(null,i):e+="object"==typeof i?(0,ie.Wl)(i):i,e+=" "}return e};let iy=null,oj=!0;const sj=function(n,e){(0,ie.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Y0.logLevel=Mu.in.VERBOSE,iy=Y0.log.bind(Y0),e&&$N.set("logging_enabled",!0)):"function"==typeof n?iy=n:(iy=null,$N.remove("logging_enabled"))},$a=function(...n){if(!0===oj&&(oj=!1,null===iy&&!0===$N.get("logging_enabled")&&sj(!0)),iy){const e=dx.apply(null,n);iy(e)}},hx=function(n){return function(...e){$a(n,...e)}},qN=function(...n){const e="FIREBASE INTERNAL ERROR: "+dx(...n);Y0.error(e)},jf=function(...n){const e=`FIREBASE FATAL ERROR: ${dx(...n)}`;throw Y0.error(e),new Error(e)},Yc=function(...n){const e="FIREBASE WARNING: "+dx(...n);Y0.warn(e)},KM=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ng="[MIN_NAME]",om="[MAX_NAME]",ry=function(n,e){if(n===e)return 0;if(n===Ng||e===om)return-1;if(e===Ng||n===om)return 1;{const t=lj(n),i=lj(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},RZ=function(n,e){return n===e?0:n<e?-1:1},fx=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,ie.Wl)(e))},GN=function(n){if("object"!=typeof n||null===n)return(0,ie.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,ie.Wl)(e[i]),t+=":",t+=GN(n[e[i]]);return t+="}",t},aj=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function qa(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const cj=function(n){(0,ie.hu)(!KM(n),"Invalid JSON number");const i=1023;let r,s,u,m,v;0===n?(s=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=m+i,u=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const C=[];for(v=52;v;v-=1)C.push(u%2?1:0),u=Math.floor(u/2);for(v=11;v;v-=1)C.push(s%2?1:0),s=Math.floor(s/2);C.push(r?1:0),C.reverse();const M=C.join("");let L="";for(v=0;v<64;v+=8){let q=parseInt(M.substr(v,8),2).toString(16);1===q.length&&(q="0"+q),L+=q}return L.toLowerCase()},LZ=new RegExp("^-?(0*)\\d{1,10}$"),lj=function(n){if(LZ.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Q0=function(n){try{n()}catch(e){setTimeout(()=>{throw Yc("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},px=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class jZ{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Yc(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zZ{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?($a("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yc(e)}}let mx=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const pj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_j="websocket",vj="long_polling";class ZN{constructor(e,t,i,r,s=!1,u="",m=!1,v=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=v,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ny.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ny.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yj(n,e,t){let i;if((0,ie.hu)("string"==typeof e,"typeof type must == string"),(0,ie.hu)("object"==typeof t,"typeof params must == object"),e===_j)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==vj)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function HZ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return qa(t,(s,u)=>{r.push(s+"="+u)}),i+r.join("&")}class $Z{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ie.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ie.p$)(this.counters_)}}const KN={},YN={};function QN(n){const e=n.toString();return KN[e]||(KN[e]=new $Z),KN[e]}class GZ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Q0(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fg{constructor(e,t,i,r,s,u,m){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=u,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hx(e),this.stats_=QN(t),this.urlFn=v=>(this.appCheckToken&&(v.ac=this.appCheckToken),yj(t,vj,v))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new GZ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ie.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new XN((...s)=>{const[u,m,v,C,M]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=m,this.password=v;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,m]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,m)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&pj.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fg.forceAllow_=!0}static forceDisallow(){Fg.forceDisallow_=!0}static isAvailable(){return!((0,ie.Yr)()||!Fg.forceAllow_&&(Fg.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ie.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,ie.h$)(t),r=aj(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ie.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ie.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class XN{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ie.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=ij(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=XN.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(m){$a("frame writing exception"),m.stack&&$a(m.stack),$a(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||$a("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,ie.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{$a("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let QM=null;typeof MozWebSocket<"u"?QM=MozWebSocket:typeof WebSocket<"u"&&(QM=WebSocket);let X0=(()=>{class n{constructor(t,i,r,s,u,m,v){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hx(this.connId),this.stats_=QN(i),this.connURL=n.connectionURL_(i,m,v,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,u){const m={v:"5"};return!(0,ie.Yr)()&&typeof location<"u"&&location.hostname&&pj.test(location.hostname)&&(m.r="f"),i&&(m.s=i),r&&(m.ls=r),s&&(m.ac=s),u&&(m.p=u),yj(t,_j,m)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ny.set("previous_websocket_failure",!0);try{let r;if((0,ie.Yr)()){r={headers:{"User-Agent":`Firebase/5/${HN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,m=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;m&&(r.proxy={origin:m})}this.mySock=new QM(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==QM&&!n.forceDisallow_}static previouslyFailed(){return ny.isInMemoryStorage||!0===ny.get("previous_websocket_failure")}markConnectionHealthy(){ny.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,ie.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,ie.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,ie.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=aj(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Tj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fg,X0]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=X0&&X0.isAvailable();let r=i&&!X0.previouslyFailed();if(t.webSocketOnly&&(i||Yc("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[X0];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Rj{constructor(e,t,i,r,s,u,m,v,C,M){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=u,this.onReady_=m,this.onDisconnect_=v,this.onKill_=C,this.lastSessionId=M,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hx("c:"+this.id+":"),this.transportManager_=new Tj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=px(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=fx("t",e),i=fx("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=fx("t",e),i=fx("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=fx("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?qN("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Yc("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),px(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):px(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ny.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class kj{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Nj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ie.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,ie.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class XM extends Nj{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ie.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new XM}getInitialEvent(e){return(0,ie.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ar{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ar(){return new Ar("")}function Ti(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Lg(n){return n.pieces_.length-n.pieceNum_}function oo(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ar(n.pieces_,e)}function eF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function gx(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Uj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ar(e,0)}function Go(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Ar)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Ar(t,0)}function Di(n){return n.pieceNum_>=n.pieces_.length}function Al(n,e){const t=Ti(n),i=Ti(e);if(null===t)return e;if(t===i)return Al(oo(n),oo(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function p8(n,e){const t=gx(n,0),i=gx(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=ry(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function tF(n,e){if(Lg(n)!==Lg(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Vd(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Lg(n)>Lg(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class m8{constructor(e,t){this.errorPrefix_=t,this.parts_=gx(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,ie.ug)(this.parts_[i]);Vj(this)}}function Vj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+oy(n))}function oy(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class nF extends Nj{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new nF}getInitialEvent(e){return(0,ie.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _x=1e3;let e1,sy=(()=>{class n extends kj{constructor(t,i,r,s,u,m,v,C){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=m,this.appCheckTokenProvider_=v,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=hx("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_x,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,ie.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nF.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&XM.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,u={r:s,a:t,b:i};this.log_((0,ie.Wl)(u)),(0,ie.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new ie.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:m=>{const v=m.d;"ok"===m.s?i.resolve(v):i.reject(v)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const u=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+u),this.listens.has(m)||this.listens.set(m,new Map),(0,ie.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ie.hu)(!this.listens.get(m).has(u),"listen() called twice for same path/queryId.");const v={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(m).set(u,v),this.connected_&&this.sendListen_(v)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const u={p:r};t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,v=>{const C=v.d,M=v.s;n.warnOnListenWarnings_(C,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",v),"ok"!==M&&this.removeListen_(r,s),t.onComplete&&t.onComplete(M,C))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,ie.r3)(t,"w")){const r=(0,ie.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();Yc(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,ie.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,ie.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const u=s.s,m=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,ie.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const u={p:t};s&&(u.q=r,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const u={p:i,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,m=>{s&&setTimeout(()=>{s(m.s,m.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,u){this.initConnection_();const m={p:i,d:r};void 0!==u&&(m.h=u),this.outstandingPuts_.push({action:t,request:m,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,ie.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):qN("Unrecognized action received from server: "+(0,ie.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,ie.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_x,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=_x,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_x),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,dt.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let v=!1,C=null;const M=function(){C?C.close():(v=!0,s())};t.realtime_={close:M,sendRequest:function(ne){(0,ie.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(ne)}};const q=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[ne,ae]=yield Promise.all([t.authTokenProvider_.getToken(q),t.appCheckTokenProvider_.getToken(q)]);v?$a("getToken() completed but was canceled"):($a("getToken() completed. Creating connection."),t.authToken_=ne&&ne.accessToken,t.appCheckToken_=ae&&ae.token,C=new Rj(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,ye=>{Yc(ye+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(ne){t.log_("Failed to get token: "+ne),v||(t.repoInfo_.nodeAdmin&&Yc(ne),M())}}})()}interrupt(t){$a("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){$a("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,ie.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_x,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(u=>GN(u)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Ar(t).toString();let s;if(this.listens.has(r)){const u=this.listens.get(r);s=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){$a("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){$a("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,ie.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+HN.replace(/\./g,"-")]=1,(0,ie.uI)()?t["framework.cordova"]=1:(0,ie.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=XM.getInstance().currentlyOnline();return(0,ie.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Ri{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ri(e,t)}}class JM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ri(Ng,e),r=new Ri(Ng,t);return 0!==this.compare(i,r)}minPost(){return Ri.MIN}}class zj extends JM{static get __EMPTY_NODE(){return e1}static set __EMPTY_NODE(e){e1=e}compare(e,t){return ry(e.name,t.name)}isDefinedOn(e){throw(0,ie.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ri.MIN}maxPost(){return new Ri(om,e1)}makePost(e,t){return(0,ie.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Ri(e,e1)}toString(){return".key"}}const zf=new zj;class t1{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,r&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let rF,Oh=(()=>{class n{constructor(t,i,r,s,u){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??uu.EMPTY_NODE,this.right=u??uu.EMPTY_NODE}copy(t,i,r,s,u){return new n(t??this.key,i??this.value,r??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const u=r(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===u?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return uu.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return uu.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class uu{constructor(e,t=uu.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new uu(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Oh.BLACK,null,null))}remove(e){return new uu(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oh.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new t1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new t1(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new t1(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new t1(this.root_,null,this.comparator_,!0,e)}}function C8(n,e){return ry(n.name,e.name)}function iF(n,e){return ry(n,e)}uu.EMPTY_NODE=new class E8{copy(e,t,i,r,s){return this}insert(e,t,i){return new Oh(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Hj=function(n){return"number"==typeof n?"number:"+cj(n):"string:"+n},$j=function(n){if(n.isLeafNode()){const e=n.val();(0,ie.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,ie.r3)(e,".sv"),"Priority must be a string or number.")}else(0,ie.hu)(n===rF||n.isEmpty(),"priority of unexpected type.");(0,ie.hu)(n===rF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qj,Gj,Wj,J0=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,ie.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$j(this.priorityNode_)}static set __childrenNodeConstructor(t){qj=t}static get __childrenNodeConstructor(){return qj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Di(t)?this:".priority"===Ti(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Ti(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,ie.hu)(".priority"!==r||1===Lg(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(oo(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Hj(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?cj(this.value_):this.value_,this.lazyHash_=rj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,ie.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,ie.hu)(s>=0,"Unknown leaf type: "+i),(0,ie.hu)(u>=0,"Unknown leaf type: "+r),s===u?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const fo=new class D8 extends JM{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?ry(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ri.MIN}maxPost(){return new Ri(om,new J0("[PRIORITY-POST]",Wj))}makePost(e,t){const i=Gj(e);return new Ri(t,new J0("[PRIORITY-POST]",i))}toString(){return".priority"}},S8=Math.log(2);class A8{constructor(e){this.count=parseInt(Math.log(e+1)/S8,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const n1=function(n,e,t,i){n.sort(e);const r=function(v,C){const M=C-v;let L,q;if(0===M)return null;if(1===M)return L=n[v],q=t?t(L):L,new Oh(q,L.node,Oh.BLACK,null,null);{const ne=parseInt(M/2,10)+v,ae=r(v,ne),ye=r(ne+1,C);return L=n[ne],q=t?t(L):L,new Oh(q,L.node,Oh.BLACK,ae,ye)}},m=function(v){let C=null,M=null,L=n.length;const q=function(ae,ye){const We=L-ae,wt=L;L-=ae;const Ot=r(We+1,wt),Mt=n[We],Lt=t?t(Mt):Mt;ne(new Oh(Lt,Mt.node,ye,null,Ot))},ne=function(ae){C?(C.left=ae,C=ae):(M=ae,C=ae)};for(let ae=0;ae<v.count;++ae){const ye=v.nextBitIsOne(),We=Math.pow(2,v.count-(ae+1));ye?q(We,Oh.BLACK):(q(We,Oh.BLACK),q(We,Oh.RED))}return M}(new A8(n.length));return new uu(i||e,m)};let oF;const ew={};class sm{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ie.hu)(ew&&fo,"ChildrenNode.ts has not been loaded"),oF=oF||new sm({".priority":ew},{".priority":fo}),oF}get(e){const t=(0,ie.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof uu?t:null}hasIndex(e){return(0,ie.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ie.hu)(e!==zf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Ri.Wrap);let m,u=s.getNext();for(;u;)r=r||e.isDefinedOn(u.node),i.push(u),u=s.getNext();m=r?n1(i,e.getCompare()):ew;const v=e.toString(),C=Object.assign({},this.indexSet_);C[v]=e;const M=Object.assign({},this.indexes_);return M[v]=m,new sm(M,C)}addToIndexes(e,t){const i=(0,ie.UI)(this.indexes_,(r,s)=>{const u=(0,ie.DV)(this.indexSet_,s);if((0,ie.hu)(u,"Missing index implementation for "+s),r===ew){if(u.isDefinedOn(e.node)){const m=[],v=t.getIterator(Ri.Wrap);let C=v.getNext();for(;C;)C.name!==e.name&&m.push(C),C=v.getNext();return m.push(e),n1(m,u.getCompare())}return ew}{const m=t.get(e.name);let v=r;return m&&(v=v.remove(new Ri(e.name,m))),v.insert(e,e.node)}});return new sm(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,ie.UI)(this.indexes_,r=>{if(r===ew)return r;{const s=t.get(e.name);return s?r.remove(new Ri(e.name,s)):r}});return new sm(i,this.indexSet_)}}let vx,hi=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&$j(this.priorityNode_),this.children_.isEmpty()&&(0,ie.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vx||(vx=new n(new uu(iF),null,sm.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vx}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?vx:i}}getChild(t){const i=Ti(t);return null===i?this:this.getImmediateChild(i).getChild(oo(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,ie.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Ri(t,i);let s,u;i.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(r,this.children_));const m=s.isEmpty()?vx:this.priorityNode_;return new n(s,m,u)}}updateChild(t,i){const r=Ti(t);if(null===r)return i;{(0,ie.hu)(".priority"!==Ti(t)||1===Lg(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(oo(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,u=!0;if(this.forEachChild(fo,(m,v)=>{i[m]=v.val(t),r++,u&&n.INTEGER_REGEXP_.test(m)?s=Math.max(s,Number(m)):u=!1}),!t&&u&&s<2*r){const m=[];for(const v in i)m[v]=i[v];return m}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Hj(this.getPriority().val())+":"),this.forEachChild(fo,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":rj(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const u=s.getPredecessorKey(new Ri(t,i));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Ri(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Ri(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Ri.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Ri.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===yx?-1:0}withIndex(t){if(t===zf||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===zf||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(fo),s=i.getIterator(fo);let u=r.getNext(),m=s.getNext();for(;u&&m;){if(u.name!==m.name||!u.node.equals(m.node))return!1;u=r.getNext(),m=s.getNext()}return null===u&&null===m}return!1}return!1}}resolveIndex_(t){return t===zf?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const yx=new class M8 extends hi{constructor(){super(new uu(iF),hi.EMPTY_NODE,sm.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return hi.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ri,{MIN:{value:new Ri(Ng,hi.EMPTY_NODE)},MAX:{value:new Ri(om,yx)}}),zj.__EMPTY_NODE=hi.EMPTY_NODE,J0.__childrenNodeConstructor=hi,function I8(n){rF=n}(yx),function T8(n){Wj=n}(yx);const O8=!0;function ss(n,e=null){if(null===n)return hi.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,ie.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new J0(n,ss(e));if(n instanceof Array||!O8){let t=hi.EMPTY_NODE;return qa(n,(i,r)=>{if((0,ie.r3)(n,i)&&"."!==i.substring(0,1)){const s=ss(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(ss(e))}{const t=[];let i=!1;if(qa(n,(u,m)=>{if("."!==u.substring(0,1)){const v=ss(m);v.isEmpty()||(i=i||!v.getPriority().isEmpty(),t.push(new Ri(u,v)))}}),0===t.length)return hi.EMPTY_NODE;const s=n1(t,C8,u=>u.name,iF);if(i){const u=n1(t,fo.getCompare());return new hi(s,ss(e),new sm({".priority":u},{".priority":fo}))}return new hi(s,ss(e),sm.Default)}}!function x8(n){Gj=n}(ss);class sF extends JM{constructor(e){super(),this.indexPath_=e,(0,ie.hu)(!Di(e)&&".priority"!==Ti(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?ry(e.name,t.name):s}makePost(e,t){const i=ss(e),r=hi.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ri(t,r)}maxPost(){const e=hi.EMPTY_NODE.updateChild(this.indexPath_,yx);return new Ri(om,e)}toString(){return gx(this.indexPath_,0).join("/")}}const aF=new class P8 extends JM{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?ry(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ri.MIN}maxPost(){return Ri.MAX}makePost(e,t){const i=ss(e);return new Ri(t,i)}toString(){return".value"}};function Zj(n){return{type:"value",snapshotNode:n}}function tw(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bx(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wx(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class cF{constructor(e){this.index_=e}updateChild(e,t,i,r,s,u){(0,ie.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(r).equals(i.getChild(r))&&m.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(bx(t,m)):(0,ie.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?u.trackChildChange(tw(t,i)):u.trackChildChange(wx(t,i,m))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(fo,(r,s)=>{t.hasChild(r)||i.trackChildChange(bx(r,s))}),t.isLeafNode()||t.forEachChild(fo,(r,s)=>{if(e.hasChild(r)){const u=e.getImmediateChild(r);u.equals(s)||i.trackChildChange(wx(r,s,u))}else i.trackChildChange(tw(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?hi.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ex{constructor(e){this.indexedFilter_=new cF(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ex.getStartPost_(e),this.endPost_=Ex.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,u){return this.matches(new Ri(t,i))||(i=hi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=hi.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(hi.EMPTY_NODE);const s=this;return t.forEachChild(fo,(u,m)=>{s.matches(new Ri(u,m))||(r=r.updateImmediateChild(u,hi.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class k8{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Ex(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,u){return this.rangedFilter_.matches(new Ri(t,i))||(i=hi.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,u):this.fullLimitUpdateChild_(e,t,i,s,u)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=hi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=hi.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const m=s.getNext();if(this.withinDirectionalStart(m)){if(!this.withinDirectionalEnd(m))break;r=r.updateImmediateChild(m.name,m.node),u++}}}else{let s;r=t.withIndex(this.index_),r=r.updatePriority(hi.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let u=0;for(;s.hasNext();){const m=s.getNext();u<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?u++:r=r.updateImmediateChild(m.name,hi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let u;if(this.reverse_){const L=this.index_.getCompare();u=(q,ne)=>L(ne,q)}else u=this.index_.getCompare();const m=e;(0,ie.hu)(m.numChildren()===this.limit_,"");const v=new Ri(t,i),C=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),M=this.rangedFilter_.matches(v);if(m.hasChild(t)){const L=m.getImmediateChild(t);let q=r.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=q&&(q.name===t||m.hasChild(q.name));)q=r.getChildAfterChild(this.index_,q,this.reverse_);const ne=null==q?1:u(q,v);if(M&&!i.isEmpty()&&ne>=0)return s?.trackChildChange(wx(t,i,L)),m.updateImmediateChild(t,i);{s?.trackChildChange(bx(t,L));const ye=m.updateImmediateChild(t,hi.EMPTY_NODE);return null!=q&&this.rangedFilter_.matches(q)?(s?.trackChildChange(tw(q.name,q.node)),ye.updateImmediateChild(q.name,q.node)):ye}}return i.isEmpty()?e:M&&u(C,v)>=0?(null!=s&&(s.trackChildChange(bx(C.name,C.node)),s.trackChildChange(tw(t,i))),m.updateImmediateChild(t,i).updateImmediateChild(C.name,hi.EMPTY_NODE)):e}}class r1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fo}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ng}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:om}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ie.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fo}copy(){const e=new r1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lF(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function uF(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function o1(n,e){const t=n.copy();return t.index_=e,t}function Kj(n){const e={};if(n.isDefault())return e;let t;if(n.index_===fo?t="$priority":n.index_===aF?t="$value":n.index_===zf?t="$key":((0,ie.hu)(n.index_ instanceof sF,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,ie.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,ie.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,ie.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,ie.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,ie.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Yj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==fo&&(e.i=n.index_.toString()),e}class s1 extends kj{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hx("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ie.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=s1.getListenId_(e,i),m={};this.listens_[u]=m;const v=Kj(e._queryParams);this.restRequest_(s+".json",v,(C,M)=>{let L=M;if(404===C&&(L=null,C=null),null===C&&this.onDataUpdate_(s,L,!1,i),(0,ie.DV)(this.listens_,u)===m){let q;q=C?401===C?"permission_denied":"rest_error:"+C:"ok",r(q,null)}})}unlisten(e,t){const i=s1.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Kj(e._queryParams),i=e._path.toString(),r=new ie.BH;return this.restRequest_(i+".json",t,(s,u)=>{let m=u;404===s&&(m=null,s=null),null===s?(this.onDataUpdate_(i,m,!1,null),r.resolve(m)):r.reject(new Error(m))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ie.xO)(t);this.log_("Sending REST request for "+u);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(i&&4===m.readyState){this.log_("REST Response for "+u+" received. status:",m.status,"response:",m.responseText);let v=null;if(m.status>=200&&m.status<300){try{v=(0,ie.cI)(m.responseText)}catch{Yc("Failed to parse JSON response for "+u+": "+m.responseText)}i(null,v)}else 401!==m.status&&404!==m.status&&Yc("Got unsuccessful REST response for "+u+" Status: "+m.status),i(m.status);i=null}},m.open("GET",u,!0),m.send()})}}class B8{constructor(){this.rootNode_=hi.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function a1(){return{value:null,children:new Map}}function nw(n,e,t){if(Di(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Ti(e);n.children.has(i)||n.children.set(i,a1()),nw(n.children.get(i),e=oo(e),t)}}function dF(n,e){if(Di(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(fo,(i,r)=>{nw(n,new Ar(i),r)}),dF(n,e)}}if(n.children.size>0){const t=Ti(e);return e=oo(e),n.children.has(t)&&dF(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function hF(n,e,t){null!==n.value?t(e,n.value):function j8(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{hF(r,new Ar(e.toString()+"/"+i),t)})}class z8{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&qa(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class q8{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new z8(e);const i=1e4+2e4*Math.random();px(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;qa(e,(r,s)=>{s>0&&(0,ie.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),px(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Hf=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Hf||{});function mF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class c1{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Hf.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Di(this.path)){if(null!=this.affectedTree.value)return(0,ie.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ar(e));return new c1(ar(),t,this.revert)}}return(0,ie.hu)(Ti(this.path)===e,"operationForChild called for unrelated child."),new c1(oo(this.path),this.affectedTree,this.revert)}}class Cx{constructor(e,t){this.source=e,this.path=t,this.type=Hf.LISTEN_COMPLETE}operationForChild(e){return Di(this.path)?new Cx(this.source,ar()):new Cx(this.source,oo(this.path))}}class ay{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Hf.OVERWRITE}operationForChild(e){return Di(this.path)?new ay(this.source,ar(),this.snap.getImmediateChild(e)):new ay(this.source,oo(this.path),this.snap)}}class iw{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Hf.MERGE}operationForChild(e){if(Di(this.path)){const t=this.children.subtree(new Ar(e));return t.isEmpty()?null:t.value?new ay(this.source,ar(),t.value):new iw(this.source,ar(),t)}return(0,ie.hu)(Ti(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new iw(this.source,oo(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ug{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Di(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ti(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class G8{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ix(n,e,t,i,r,s){const u=i.filter(m=>m.type===t);u.sort((m,v)=>function K8(n,e,t){if(null==e.childName||null==t.childName)throw(0,ie.g5)("Should only compare child_ events.");const i=new Ri(e.childName,e.snapshotNode),r=new Ri(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,m,v)),u.forEach(m=>{const v=function Z8(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,s);r.forEach(C=>{C.respondsTo(m.type)&&e.push(C.createEvent(v,n.query_))})})}function l1(n,e){return{eventCache:n,serverCache:e}}function xx(n,e,t,i){return l1(new Ug(e,t,i),n.serverCache)}function Xj(n,e,t,i){return l1(n.eventCache,new Ug(e,t,i))}function u1(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function cy(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let gF;class po{constructor(e,t=(()=>(gF||(gF=new uu(RZ)),gF))()){this.value=e,this.children=t}static fromObject(e){let t=new po(null);return qa(e,(i,r)=>{t=t.set(new Ar(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ar(),value:this.value};if(Di(e))return null;{const i=Ti(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(oo(e),t);return null!=s?{path:Go(new Ar(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Di(e))return this;{const t=Ti(e),i=this.children.get(t);return null!==i?i.subtree(oo(e)):new po(null)}}set(e,t){if(Di(e))return new po(t,this.children);{const i=Ti(e),s=(this.children.get(i)||new po(null)).set(oo(e),t),u=this.children.insert(i,s);return new po(this.value,u)}}remove(e){if(Di(e))return this.children.isEmpty()?new po(null):new po(null,this.children);{const t=Ti(e),i=this.children.get(t);if(i){const r=i.remove(oo(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new po(null):new po(this.value,s)}return this}}get(e){if(Di(e))return this.value;{const t=Ti(e),i=this.children.get(t);return i?i.get(oo(e)):null}}setTree(e,t){if(Di(e))return t;{const i=Ti(e),s=(this.children.get(i)||new po(null)).setTree(oo(e),t);let u;return u=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new po(this.value,u)}}fold(e){return this.fold_(ar(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Go(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ar(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Di(e))return null;{const s=Ti(e),u=this.children.get(s);return u?u.findOnPath_(oo(e),Go(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ar(),t)}foreachOnPath_(e,t,i){if(Di(e))return this;{this.value&&i(t,this.value);const r=Ti(e),s=this.children.get(r);return s?s.foreachOnPath_(oo(e),Go(t,r),i):new po(null)}}foreach(e){this.foreach_(ar(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Go(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Ph{constructor(e){this.writeTree_=e}static empty(){return new Ph(new po(null))}}function Tx(n,e,t){if(Di(e))return new Ph(new po(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const u=Al(r,e);return s=s.updateChild(u,t),new Ph(n.writeTree_.set(r,s))}{const r=new po(t),s=n.writeTree_.setTree(e,r);return new Ph(s)}}}function _F(n,e,t){let i=n;return qa(t,(r,s)=>{i=Tx(i,Go(e,r),s)}),i}function Jj(n,e){if(Di(e))return Ph.empty();{const t=n.writeTree_.setTree(e,new po(null));return new Ph(t)}}function vF(n,e){return null!=ly(n,e)}function ly(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Al(t.path,e)):null}function e3(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(fo,(i,r)=>{e.push(new Ri(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Ri(i,r.value))}),e}function Vg(n,e){if(Di(e))return n;{const t=ly(n,e);return new Ph(null!=t?new po(t):n.writeTree_.subtree(e))}}function yF(n){return n.writeTree_.isEmpty()}function rw(n,e){return t3(ar(),n.writeTree_,e)}function t3(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,ie.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=t3(Go(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Go(n,".priority"),i)),t}}function d1(n,e){return a3(e,n)}function t7(n,e){if(n.snap)return Vd(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Vd(Go(n.path,t),e))return!0;return!1}function i7(n){return n.visible}function n3(n,e,t){let i=Ph.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const u=s.path;let m;if(s.snap)Vd(t,u)?(m=Al(t,u),i=Tx(i,m,s.snap)):Vd(u,t)&&(m=Al(u,t),i=Tx(i,ar(),s.snap.getChild(m)));else{if(!s.children)throw(0,ie.g5)("WriteRecord should have .snap or .children");if(Vd(t,u))m=Al(t,u),i=_F(i,m,s.children);else if(Vd(u,t))if(m=Al(u,t),Di(m))i=_F(i,ar(),s.children);else{const v=(0,ie.DV)(s.children,Ti(m));if(v){const C=v.getChild(oo(m));i=Tx(i,ar(),C)}}}}}return i}function r3(n,e,t,i,r){if(i||r){const s=Vg(n.visibleWrites,e);return!r&&yF(s)?t:r||null!=t||vF(s,ar())?rw(n3(n.allWrites,function(C){return(C.visible||r)&&(!i||!~i.indexOf(C.writeId))&&(Vd(C.path,e)||Vd(e,C.path))},e),t||hi.EMPTY_NODE):null}{const s=ly(n.visibleWrites,e);if(null!=s)return s;{const u=Vg(n.visibleWrites,e);return yF(u)?t:null!=t||vF(u,ar())?rw(u,t||hi.EMPTY_NODE):null}}}function h1(n,e,t,i){return r3(n.writeTree,n.treePath,e,t,i)}function bF(n,e){return function r7(n,e,t){let i=hi.EMPTY_NODE;const r=ly(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(fo,(s,u)=>{i=i.updateImmediateChild(s,u)}),i;if(t){const s=Vg(n.visibleWrites,e);return t.forEachChild(fo,(u,m)=>{const v=rw(Vg(s,new Ar(u)),m);i=i.updateImmediateChild(u,v)}),e3(s).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return e3(Vg(n.visibleWrites,e)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,e)}function o3(n,e,t,i){return function o7(n,e,t,i,r){(0,ie.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Go(e,t);if(vF(n.visibleWrites,s))return null;{const u=Vg(n.visibleWrites,s);return yF(u)?r.getChild(t):rw(u,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function f1(n,e){return function a7(n,e){return ly(n.visibleWrites,e)}(n.writeTree,Go(n.treePath,e))}function wF(n,e,t){return function s7(n,e,t,i){const r=Go(e,t),s=ly(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?rw(Vg(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function s3(n,e){return a3(Go(n.treePath,e),n.writeTree)}function a3(n,e){return{treePath:n,writeTree:e}}class d7{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,ie.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ie.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,wx(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,bx(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,tw(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,ie.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,wx(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const c3=new class h7{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class EF{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Ug(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wF(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:cy(this.viewCache_),s=function u7(n,e,t,i,r,s){return function c7(n,e,t,i,r,s,u){let m;const v=Vg(n.visibleWrites,e),C=ly(v,ar());if(null!=C)m=C;else{if(null==t)return[];m=rw(v,t)}if(m=m.withIndex(u),m.isEmpty()||m.isLeafNode())return[];{const M=[],L=u.getCompare(),q=s?m.getReverseIteratorFrom(i,u):m.getIteratorFrom(i,u);let ne=q.getNext();for(;ne&&M.length<r;)0!==L(ne,i)&&M.push(ne),ne=q.getNext();return M}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function l3(n,e,t,i,r,s){const u=e.eventCache;if(null!=f1(i,t))return e;{let m,v;if(Di(t))if((0,ie.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=cy(e),L=bF(i,C instanceof hi?C:hi.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),L,s)}else{const C=h1(i,cy(e));m=n.filter.updateFullNode(e.eventCache.getNode(),C,s)}else{const C=Ti(t);if(".priority"===C){(0,ie.hu)(1===Lg(t),"Can't have a priority with additional path components");const M=u.getNode();v=e.serverCache.getNode();const L=o3(i,t,M,v);m=null!=L?n.filter.updatePriority(M,L):u.getNode()}else{const M=oo(t);let L;if(u.isCompleteForChild(C)){v=e.serverCache.getNode();const q=o3(i,t,u.getNode(),v);L=null!=q?u.getNode().getImmediateChild(C).updateChild(M,q):u.getNode().getImmediateChild(C)}else L=wF(i,C,e.serverCache);m=null!=L?n.filter.updateChild(u.getNode(),C,L,M,r,s):u.getNode()}}return xx(e,m,u.isFullyInitialized()||Di(t),n.filter.filtersNodes())}}function p1(n,e,t,i,r,s,u,m){const v=e.serverCache;let C;const M=u?n.filter:n.filter.getIndexedFilter();if(Di(t))C=M.updateFullNode(v.getNode(),i,null);else if(M.filtersNodes()&&!v.isFiltered()){const ne=v.getNode().updateChild(t,i);C=M.updateFullNode(v.getNode(),ne,null)}else{const ne=Ti(t);if(!v.isCompleteForPath(t)&&Lg(t)>1)return e;const ae=oo(t),We=v.getNode().getImmediateChild(ne).updateChild(ae,i);C=".priority"===ne?M.updatePriority(v.getNode(),We):M.updateChild(v.getNode(),ne,We,ae,c3,null)}const L=Xj(e,C,v.isFullyInitialized()||Di(t),M.filtersNodes());return l3(n,L,t,r,new EF(r,L,s),m)}function CF(n,e,t,i,r,s,u){const m=e.eventCache;let v,C;const M=new EF(r,e,s);if(Di(t))C=n.filter.updateFullNode(e.eventCache.getNode(),i,u),v=xx(e,C,!0,n.filter.filtersNodes());else{const L=Ti(t);if(".priority"===L)C=n.filter.updatePriority(e.eventCache.getNode(),i),v=xx(e,C,m.isFullyInitialized(),m.isFiltered());else{const q=oo(t),ne=m.getNode().getImmediateChild(L);let ae;if(Di(q))ae=i;else{const ye=M.getCompleteChild(L);ae=null!=ye?".priority"===eF(q)&&ye.getChild(Uj(q)).isEmpty()?ye:ye.updateChild(q,i):hi.EMPTY_NODE}v=ne.equals(ae)?e:xx(e,n.filter.updateChild(m.getNode(),L,ae,q,M,u),m.isFullyInitialized(),n.filter.filtersNodes())}}return v}function u3(n,e){return n.eventCache.isCompleteForChild(e)}function d3(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function IF(n,e,t,i,r,s,u,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,v=e;C=Di(t)?i:new po(null).setTree(t,i);const M=e.serverCache.getNode();return C.children.inorderTraversal((L,q)=>{if(M.hasChild(L)){const ae=d3(0,e.serverCache.getNode().getImmediateChild(L),q);v=p1(n,v,new Ar(L),ae,r,s,u,m)}}),C.children.inorderTraversal((L,q)=>{const ne=!e.serverCache.isCompleteForChild(L)&&null===q.value;if(!M.hasChild(L)&&!ne){const ye=d3(0,e.serverCache.getNode().getImmediateChild(L),q);v=p1(n,v,new Ar(L),ye,r,s,u,m)}}),v}class w7{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new cF(i.getIndex()),s=function N8(n){return n.loadsAllData()?new cF(n.getIndex()):n.hasLimit()?new k8(n):new Ex(n)}(i);this.processor_=function f7(n){return{filter:n}}(s);const u=t.serverCache,m=t.eventCache,v=r.updateFullNode(hi.EMPTY_NODE,u.getNode(),null),C=s.updateFullNode(hi.EMPTY_NODE,m.getNode(),null),M=new Ug(v,u.isFullyInitialized(),r.filtersNodes()),L=new Ug(C,m.isFullyInitialized(),s.filtersNodes());this.viewCache_=l1(L,M),this.eventGenerator_=new G8(this.query_)}get query(){return this.query_}}function I7(n,e){const t=cy(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Di(e)&&!t.getImmediateChild(Ti(e)).isEmpty())?t.getChild(e):null}function h3(n){return 0===n.eventRegistrations_.length}function f3(n,e,t){const i=[];if(t){(0,ie.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,r);u&&i.push(u)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function p3(n,e,t,i){e.type===Hf.MERGE&&null!==e.source.queryId&&((0,ie.hu)(cy(n.viewCache_),"We should always have a full cache before handling merges"),(0,ie.hu)(u1(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function m7(n,e,t,i,r){const s=new d7;let u,m;if(t.type===Hf.OVERWRITE){const C=t;C.source.fromUser?u=CF(n,e,C.path,C.snap,i,r,s):((0,ie.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||e.serverCache.isFiltered()&&!Di(C.path),u=p1(n,e,C.path,C.snap,i,r,m,s))}else if(t.type===Hf.MERGE){const C=t;C.source.fromUser?u=function _7(n,e,t,i,r,s,u){let m=e;return i.foreach((v,C)=>{const M=Go(t,v);u3(e,Ti(M))&&(m=CF(n,m,M,C,r,s,u))}),i.foreach((v,C)=>{const M=Go(t,v);u3(e,Ti(M))||(m=CF(n,m,M,C,r,s,u))}),m}(n,e,C.path,C.children,i,r,s):((0,ie.hu)(C.source.fromServer,"Unknown source."),m=C.source.tagged||e.serverCache.isFiltered(),u=IF(n,e,C.path,C.children,i,r,m,s))}else if(t.type===Hf.ACK_USER_WRITE){const C=t;u=C.revert?function b7(n,e,t,i,r,s){let u;if(null!=f1(i,t))return e;{const m=new EF(i,e,r),v=e.eventCache.getNode();let C;if(Di(t)||".priority"===Ti(t)){let M;if(e.serverCache.isFullyInitialized())M=h1(i,cy(e));else{const L=e.serverCache.getNode();(0,ie.hu)(L instanceof hi,"serverChildren would be complete if leaf node"),M=bF(i,L)}C=n.filter.updateFullNode(v,M,s)}else{const M=Ti(t);let L=wF(i,M,e.serverCache);null==L&&e.serverCache.isCompleteForChild(M)&&(L=v.getImmediateChild(M)),C=null!=L?n.filter.updateChild(v,M,L,oo(t),m,s):e.eventCache.getNode().hasChild(M)?n.filter.updateChild(v,M,hi.EMPTY_NODE,oo(t),m,s):v,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=h1(i,cy(e)),u.isLeafNode()&&(C=n.filter.updateFullNode(C,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=f1(i,ar()),xx(e,C,u,n.filter.filtersNodes())}}(n,e,C.path,i,r,s):function v7(n,e,t,i,r,s,u){if(null!=f1(r,t))return e;const m=e.serverCache.isFiltered(),v=e.serverCache;if(null!=i.value){if(Di(t)&&v.isFullyInitialized()||v.isCompleteForPath(t))return p1(n,e,t,v.getNode().getChild(t),r,s,m,u);if(Di(t)){let C=new po(null);return v.getNode().forEachChild(zf,(M,L)=>{C=C.set(new Ar(M),L)}),IF(n,e,t,C,r,s,m,u)}return e}{let C=new po(null);return i.foreach((M,L)=>{const q=Go(t,M);v.isCompleteForPath(q)&&(C=C.set(M,v.getNode().getChild(q)))}),IF(n,e,t,C,r,s,m,u)}}(n,e,C.path,C.affectedTree,i,r,s)}else{if(t.type!==Hf.LISTEN_COMPLETE)throw(0,ie.g5)("Unknown operation type: "+t.type);u=function y7(n,e,t,i,r){const s=e.serverCache;return l3(n,Xj(e,s.getNode(),s.isFullyInitialized()||Di(t),s.isFiltered()),t,i,c3,r)}(n,e,t.path,i,s)}const v=s.getChanges();return function g7(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=u1(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Zj(u1(e)))}}(e,u,v),{viewCache:u,changes:v}}(n.processor_,r,e,t,i);return function p7(n,e){(0,ie.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ie.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,ie.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,m3(n,s.changes,s.viewCache.eventCache.getNode(),null)}function m3(n,e,t,i){return function W8(n,e,t,i){const r=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function R8(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Ix(n,r,"child_removed",e,i,t),Ix(n,r,"child_added",e,i,t),Ix(n,r,"child_moved",s,i,t),Ix(n,r,"child_changed",e,i,t),Ix(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let m1,_1;class g3{constructor(){this.views=new Map}}function xF(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,ie.hu)(null!=s,"SyncTree gave us an op for an invalid query."),p3(s,e,t,i)}{let s=[];for(const u of n.views.values())s=s.concat(p3(u,e,t,i));return s}}function _3(n,e,t,i,r){const u=n.views.get(e._queryIdentifier);if(!u){let m=h1(t,r?i:null),v=!1;m?v=!0:i instanceof hi?(m=bF(t,i),v=!1):(m=hi.EMPTY_NODE,v=!1);const C=l1(new Ug(m,v,!1),new Ug(i,r,!1));return new w7(e,C)}return u}function v3(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Bg(n,e){let t=null;for(const i of n.views.values())t=t||I7(i,e);return t}function y3(n,e){return e._queryParams.loadsAllData()?g1(n):n.views.get(e._queryIdentifier)}function b3(n,e){return null!=y3(n,e)}function jg(n){return null!=g1(n)}function g1(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let k7=1;class w3{constructor(e){this.listenProvider_=e,this.syncPointTree_=new po(null),this.pendingWriteTree_=function l7(){return{visibleWrites:Ph.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TF(n,e,t,i,r){return function Q8(n,e,t,i,r){(0,ie.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Tx(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?ow(n,new ay({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function zg(n,e,t=!1){const i=function J8(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function e7(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,ie.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const m=n.allWrites[u];m.visible&&(u>=t&&t7(m,i.path)?r=!1:Vd(i.path,m.path)&&(s=!0)),u--}return!!r&&(s?(function n7(n){n.visibleWrites=n3(n.allWrites,i7,ar()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Jj(n.visibleWrites,i.path):qa(i.children,v=>{n.visibleWrites=Jj(n.visibleWrites,Go(i.path,v))}),!0))}(n.pendingWriteTree_,e)){let s=new po(null);return null!=i.snap?s=s.set(ar(),!0):qa(i.children,u=>{s=s.set(new Ar(u),!0)}),ow(n,new c1(i.path,s,t))}return[]}function Dx(n,e,t){return ow(n,new ay({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function v1(n,e,t,i,r=!1){const s=e._path,u=n.syncPointTree_.get(s);let m=[];if(u&&("default"===e._queryIdentifier||b3(u,e))){const v=function O7(n,e,t,i){const r=e._queryIdentifier,s=[];let u=[];const m=jg(n);if("default"===r)for(const[v,C]of n.views.entries())u=u.concat(f3(C,t,i)),h3(C)&&(n.views.delete(v),C.query._queryParams.loadsAllData()||s.push(C.query));else{const v=n.views.get(r);v&&(u=u.concat(f3(v,t,i)),h3(v)&&(n.views.delete(r),v.query._queryParams.loadsAllData()||s.push(v.query)))}return m&&!jg(n)&&s.push(new(function S7(){return(0,ie.hu)(m1,"Reference.ts has not been loaded"),m1}())(e._repo,e._path)),{removed:s,events:u}}(u,e,t,i);(function A7(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const C=v.removed;if(m=v.events,!r){const M=-1!==C.findIndex(q=>q._queryParams.loadsAllData()),L=n.syncPointTree_.findOnPath(s,(q,ne)=>jg(ne));if(M&&!L){const q=n.syncPointTree_.subtree(s);if(!q.isEmpty()){const ne=function j7(n){return n.fold((e,t,i)=>{if(t&&jg(t))return[g1(t)];{let r=[];return t&&(r=v3(t)),qa(i,(s,u)=>{r=r.concat(u)}),r}})}(q);for(let ae=0;ae<ne.length;++ae){const ye=ne[ae],We=ye.query,wt=x3(n,ye);n.listenProvider_.startListening(Ax(We),Sx(n,We),wt.hashFn,wt.onComplete)}}}!L&&C.length>0&&!i&&(M?n.listenProvider_.stopListening(Ax(e),null):C.forEach(q=>{const ne=n.queryToTagMap.get(b1(q));n.listenProvider_.stopListening(Ax(q),ne)}))}!function z7(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=b1(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,C)}return m}function E3(n,e,t,i){const r=SF(n,i);if(null!=r){const s=AF(r),u=s.path,m=s.queryId,v=Al(u,e);return MF(n,u,new ay(mF(m),v,t))}return[]}function DF(n,e,t,i=!1){const r=e._path;let s=null,u=!1;n.syncPointTree_.foreachOnPath(r,(q,ne)=>{const ae=Al(q,r);s=s||Bg(ne,ae),u=u||jg(ne)});let v,m=n.syncPointTree_.get(r);m?(u=u||jg(m),s=s||Bg(m,ar())):(m=new g3,n.syncPointTree_=n.syncPointTree_.set(r,m)),null!=s?v=!0:(v=!1,s=hi.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((ne,ae)=>{const ye=Bg(ae,ar());ye&&(s=s.updateImmediateChild(ne,ye))}));const C=b3(m,e);if(!C&&!e._queryParams.loadsAllData()){const q=b1(e);(0,ie.hu)(!n.queryToTagMap.has(q),"View does not exist, but we have a tag");const ne=function H7(){return k7++}();n.queryToTagMap.set(q,ne),n.tagToQueryMap.set(ne,q)}let L=function M7(n,e,t,i,r,s){const u=_3(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function x7(n,e){n.eventRegistrations_.push(e)}(u,t),function T7(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(fo,(s,u)=>{i.push(tw(s,u))}),t.isFullyInitialized()&&i.push(Zj(t.getNode())),m3(n,i,t.getNode(),e)}(u,t)}(m,e,t,d1(n.pendingWriteTree_,r),s,v);if(!C&&!u&&!i){const q=y3(m,e);L=L.concat(function $7(n,e,t){const i=e._path,r=Sx(n,e),s=x3(n,t),u=n.listenProvider_.startListening(Ax(e),r,s.hashFn,s.onComplete),m=n.syncPointTree_.subtree(i);if(r)(0,ie.hu)(!jg(m.value),"If we're adding a query, it shouldn't be shadowed");else{const v=m.fold((C,M,L)=>{if(!Di(C)&&M&&jg(M))return[g1(M).query];{let q=[];return M&&(q=q.concat(v3(M).map(ne=>ne.query))),qa(L,(ne,ae)=>{q=q.concat(ae)}),q}});for(let C=0;C<v.length;++C){const M=v[C];n.listenProvider_.stopListening(Ax(M),Sx(n,M))}}return u}(n,e,q))}return L}function y1(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,m)=>{const C=Bg(m,Al(u,e));if(C)return C});return r3(r,e,s,t,!0)}function ow(n,e){return C3(e,n.syncPointTree_,null,d1(n.pendingWriteTree_,ar()))}function C3(n,e,t,i){if(Di(n.path))return I3(n,e,t,i);{const r=e.get(ar());null==t&&null!=r&&(t=Bg(r,ar()));let s=[];const u=Ti(n.path),m=n.operationForChild(u),v=e.children.get(u);if(v&&m){const C=t?t.getImmediateChild(u):null,M=s3(i,u);s=s.concat(C3(m,v,C,M))}return r&&(s=s.concat(xF(r,n,i,t))),s}}function I3(n,e,t,i){const r=e.get(ar());null==t&&null!=r&&(t=Bg(r,ar()));let s=[];return e.children.inorderTraversal((u,m)=>{const v=t?t.getImmediateChild(u):null,C=s3(i,u),M=n.operationForChild(u);M&&(s=s.concat(I3(M,m,v,C)))}),r&&(s=s.concat(xF(r,n,i,t))),s}function x3(n,e){const t=e.query,i=Sx(n,t);return{hashFn:()=>(function E7(n){return n.viewCache_.serverCache.getNode()}(e)||hi.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function U7(n,e,t){const i=SF(n,t);if(i){const r=AF(i),s=r.path,u=r.queryId,m=Al(s,e);return MF(n,s,new Cx(mF(u),m))}return[]}(n,t._path,i):function L7(n,e){return ow(n,new Cx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function FZ(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return v1(n,t,null,s)}}}}function Sx(n,e){const t=b1(e);return n.queryToTagMap.get(t)}function b1(n){return n._path.toString()+"$"+n._queryIdentifier}function SF(n,e){return n.tagToQueryMap.get(e)}function AF(n){const e=n.indexOf("$");return(0,ie.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ar(n.substr(0,e))}}function MF(n,e,t){const i=n.syncPointTree_.get(e);return(0,ie.hu)(i,"Missing sync point for query tag that we're tracking"),xF(i,t,d1(n.pendingWriteTree_,e),null)}function Ax(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function R7(){return(0,ie.hu)(_1,"Reference.ts has not been loaded"),_1}())(n._repo,n._path):n}class OF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new OF(t)}node(){return this.node_}}class PF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Go(this.path_,e);return new PF(this.syncTree_,t)}node(){return y1(this.syncTree_,this.path_)}}const q7=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},T3=function(n,e,t){return n&&"object"==typeof n?((0,ie.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?G7(n[".sv"],e,t):"object"==typeof n[".sv"]?W7(n[".sv"],e):void(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},G7=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,ie.hu)(!1,"Unexpected server value: "+n)},W7=function(n,e,t){n.hasOwnProperty("increment")||(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,ie.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,ie.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},D3=function(n,e,t,i){return kF(e,new PF(t,n),i)},RF=function(n,e,t){return kF(n,new OF(e),t)};function kF(n,e,t){const i=n.getPriority().val(),r=T3(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,m=T3(u.getValue(),e,t);return m!==u.getValue()||r!==u.getPriority().val()?new J0(m,ss(r)):n}{const u=n;return s=u,r!==u.getPriority().val()&&(s=s.updatePriority(new J0(r))),u.forEachChild(fo,(m,v)=>{const C=kF(v,e.getImmediateChild(m),t);C!==v&&(s=s.updateImmediateChild(m,C))}),s}}class NF{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function w1(n,e){let t=e instanceof Ar?e:new Ar(e),i=n,r=Ti(t);for(;null!==r;){const s=(0,ie.DV)(i.node.children,r)||{children:{},childCount:0};i=new NF(r,i,s),t=oo(t),r=Ti(t)}return i}function uy(n){return n.node.value}function FF(n,e){n.node.value=e,LF(n)}function S3(n){return n.node.childCount>0}function E1(n,e){qa(n.node.children,(t,i)=>{e(new NF(t,n,i))})}function A3(n,e,t,i){t&&!i&&e(n),E1(n,r=>{A3(r,e,!0,i)}),t&&i&&e(n)}function Mx(n){return new Ar(null===n.parent?n.name:Mx(n.parent)+"/"+n.name)}function LF(n){null!==n.parent&&function Y7(n,e,t){const i=function Z7(n){return void 0===uy(n)&&!S3(n)}(t),r=(0,ie.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,LF(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,LF(n))}(n.parent,n.name,n)}const Q7=/[\[\].#$\/\u0000-\u001F\u007F]/,X7=/[\[\].#$\u0000-\u001F\u007F]/,UF=10485760,C1=function(n){return"string"==typeof n&&0!==n.length&&!Q7.test(n)},M3=function(n){return"string"==typeof n&&0!==n.length&&!X7.test(n)},Ox=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!KM(n)||n&&"object"==typeof n&&(0,ie.r3)(n,".sv")},$f=function(n,e,t,i){i&&void 0===e||Px((0,ie.gK)(n,"value"),e,t)},Px=function(n,e,t){const i=t instanceof Ar?new m8(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+oy(i));if("function"==typeof e)throw new Error(n+"contains a function "+oy(i)+" with contents = "+e.toString());if(KM(e))throw new Error(n+"contains "+e.toString()+" "+oy(i));if("string"==typeof e&&e.length>UF/3&&(0,ie.ug)(e)>UF)throw new Error(n+"contains a string greater than "+UF+" utf8 bytes "+oy(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(qa(e,(u,m)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!C1(u)))throw new Error(n+" contains an invalid key ("+u+") "+oy(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function g8(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,ie.ug)(e),Vj(n)})(i,u),Px(n,m,i),function _8(n){const e=n.parts_.pop();n.byteLength_-=(0,ie.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+oy(i)+" in addition to actual children.")}},O3=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,ie.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];qa(e,(u,m)=>{const v=new Ar(u);if(Px(r,m,Go(t,v)),".priority"===eF(v)&&!Ox(m))throw new Error(r+"contains an invalid value for '"+v.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(v)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=gx(i);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!C1(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(p8);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Vd(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},VF=function(n,e,t){if(!t||void 0!==e){if(KM(e))throw new Error((0,ie.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ox(e))throw new Error((0,ie.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Rx=function(n,e,t,i){if(!(i&&void 0===t||C1(t)))throw new Error((0,ie.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kx=function(n,e,t,i){if(!(i&&void 0===t||M3(t)))throw new Error((0,ie.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tK=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kx(n,e,t,i)},Bd=function(n,e){if(".info"===Ti(e))throw new Error(n+" failed = Can't modify data under /.info/")},P3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!C1(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),M3(n)}(t))throw new Error((0,ie.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class nK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function I1(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!tF(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function R3(n,e,t){I1(n,t),k3(n,i=>tF(i,e))}function qu(n,e,t){I1(n,t),k3(n,i=>Vd(i,e)||Vd(e,i))}function k3(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(iK(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function iK(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();iy&&$a("event: "+t.toString()),Q0(i)}}}const N3="repo_interrupt",rK=25;class oK{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=a1(),this.transactionQueueTree_=new NF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function F3(n){const t=n.infoData_.getNode(new Ar(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Nx(n){return q7({timestamp:F3(n)})}function L3(n,e,t,i,r){n.dataUpdateCount++;const s=new Ar(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(r)if(i){const v=(0,ie.UI)(t,C=>ss(C));u=function V7(n,e,t,i){const r=SF(n,i);if(r){const s=AF(r),u=s.path,m=s.queryId,v=Al(u,e),C=po.fromObject(t);return MF(n,u,new iw(mF(m),v,C))}return[]}(n.serverSyncTree_,s,v,r)}else{const v=ss(t);u=E3(n.serverSyncTree_,s,v,r)}else if(i){const v=(0,ie.UI)(t,C=>ss(C));u=function F7(n,e,t){const i=po.fromObject(t);return ow(n,new iw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,v)}else{const v=ss(t);u=Dx(n.serverSyncTree_,s,v)}let m=s;u.length>0&&(m=aw(n,s)),qu(n.eventQueue_,m,u)}function U3(n,e){BF(n,"connected",e),!1===e&&function uK(n){sw(n,"onDisconnectEvents");const e=Nx(n),t=a1();hF(n.onDisconnect_,ar(),(r,s)=>{const u=D3(r,s,n.serverSyncTree_,e);nw(t,r,u)});let i=[];hF(t,ar(),(r,s)=>{i=i.concat(Dx(n.serverSyncTree_,r,s));const u=$F(n,r);aw(n,u)}),n.onDisconnect_=a1(),qu(n.eventQueue_,ar(),i)}(n)}function BF(n,e,t){const i=new Ar("/.info/"+e),r=ss(t);n.infoData_.updateSnapshot(i,r);const s=Dx(n.infoSyncTree_,i,r);qu(n.eventQueue_,i,s)}function x1(n){return n.nextWriteId_++}function jF(n,e,t,i,r){sw(n,"set",{path:e.toString(),value:t,priority:i});const s=Nx(n),u=ss(t,i),m=y1(n.serverSyncTree_,e),v=RF(u,m,s),C=x1(n),M=TF(n.serverSyncTree_,e,v,C,!0);I1(n.eventQueue_,M),n.server_.put(e.toString(),u.val(!0),(q,ne)=>{const ae="ok"===q;ae||Yc("set at "+e+" failed: "+q);const ye=zg(n.serverSyncTree_,C,!ae);qu(n.eventQueue_,e,ye),Hg(0,r,q,ne)});const L=$F(n,e);aw(n,L),qu(n.eventQueue_,L,[])}function dK(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&dF(n.onDisconnect_,e),Hg(0,t,i,r)})}function V3(n,e,t,i){const r=ss(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,u)=>{"ok"===s&&nw(n.onDisconnect_,e,r),Hg(0,i,s,u)})}function zF(n,e,t){let i;i=".info"===Ti(e._path)?v1(n.infoSyncTree_,e,t):v1(n.serverSyncTree_,e,t),R3(n.eventQueue_,e._path,i)}function B3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(N3)}function sw(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),$a(t,...e)}function Hg(n,e,t,i){e&&Q0(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const u=new Error(s);u.code=r,e(u)}})}function HF(n,e,t){return y1(n.serverSyncTree_,e,t)||hi.EMPTY_NODE}function T1(n,e=n.transactionQueueTree_){if(e||D1(n,e),uy(e)){const t=z3(n,e);(0,ie.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function _K(n,e,t){const i=t.map(C=>C.currentWriteId),r=HF(n,e,i);let s=r;const u=r.hash();for(let C=0;C<t.length;C++){const M=t[C];(0,ie.hu)(0===M.status,"tryToSendTransactionQueue_: items in queue should all be run."),M.status=1,M.retryCount++;const L=Al(e,M.path);s=s.updateChild(L,M.currentOutputSnapshotRaw)}const m=s.val(!0),v=e;n.server_.put(v.toString(),m,C=>{sw(n,"transaction put response",{path:v.toString(),status:C});let M=[];if("ok"===C){const L=[];for(let q=0;q<t.length;q++)t[q].status=2,M=M.concat(zg(n.serverSyncTree_,t[q].currentWriteId)),t[q].onComplete&&L.push(()=>t[q].onComplete(null,!0,t[q].currentOutputSnapshotResolved)),t[q].unwatcher();D1(n,w1(n.transactionQueueTree_,e)),T1(n,n.transactionQueueTree_),qu(n.eventQueue_,e,M);for(let q=0;q<L.length;q++)Q0(L[q])}else{if("datastale"===C)for(let L=0;L<t.length;L++)t[L].status=3===t[L].status?4:0;else{Yc("transaction at "+v.toString()+" failed: "+C);for(let L=0;L<t.length;L++)t[L].status=4,t[L].abortReason=C}aw(n,e)}},u)}(n,Mx(e),t)}else S3(e)&&E1(e,t=>{T1(n,t)})}function aw(n,e){const t=j3(n,e),i=Mx(t);return function vK(n,e,t){if(0===e.length)return;const i=[];let r=[];const u=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const v=e[m],C=Al(t,v.path);let L,M=!1;if((0,ie.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===v.status)M=!0,L=v.abortReason,r=r.concat(zg(n.serverSyncTree_,v.currentWriteId,!0));else if(0===v.status)if(v.retryCount>=rK)M=!0,L="maxretry",r=r.concat(zg(n.serverSyncTree_,v.currentWriteId,!0));else{const q=HF(n,v.path,u);v.currentInputSnapshot=q;const ne=e[m].update(q.val());if(void 0!==ne){Px("transaction failed: Data returned ",ne,v.path);let ae=ss(ne);"object"==typeof ne&&null!=ne&&(0,ie.r3)(ne,".priority")||(ae=ae.updatePriority(q.getPriority()));const We=v.currentWriteId,wt=Nx(n),Ot=RF(ae,q,wt);v.currentOutputSnapshotRaw=ae,v.currentOutputSnapshotResolved=Ot,v.currentWriteId=x1(n),u.splice(u.indexOf(We),1),r=r.concat(TF(n.serverSyncTree_,v.path,Ot,v.currentWriteId,v.applyLocally)),r=r.concat(zg(n.serverSyncTree_,We,!0))}else M=!0,L="nodata",r=r.concat(zg(n.serverSyncTree_,v.currentWriteId,!0))}qu(n.eventQueue_,t,r),r=[],M&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&i.push("nodata"===L?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error(L),!1,null)))}D1(n,n.transactionQueueTree_);for(let m=0;m<i.length;m++)Q0(i[m]);T1(n,n.transactionQueueTree_)}(n,z3(n,t),i),i}function j3(n,e){let t,i=n.transactionQueueTree_;for(t=Ti(e);null!==t&&void 0===uy(i);)i=w1(i,t),t=Ti(e=oo(e));return i}function z3(n,e){const t=[];return H3(n,e,t),t.sort((i,r)=>i.order-r.order),t}function H3(n,e,t){const i=uy(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);E1(e,r=>{H3(n,r,t)})}function D1(n,e){const t=uy(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,FF(e,t.length>0?t:void 0)}E1(e,i=>{D1(n,i)})}function $F(n,e){const t=Mx(j3(n,e)),i=w1(n.transactionQueueTree_,e);return function K7(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{qF(n,r)}),qF(n,i),A3(i,r=>{qF(n,r)}),t}function qF(n,e){const t=uy(e);if(t){const i=[];let r=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,ie.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,ie.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),r=r.concat(zg(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?FF(e,void 0):t.length=s+1,qu(n.eventQueue_,Mx(e),r);for(let u=0;u<i.length;u++)Q0(i[u])}}const GF=function(n,e){const t=wK(n),i=t.namespace;return"firebase.com"===t.domain&&jf(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&jf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Yc("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ZN(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Ar(t.pathString)}},wK=function(n){let e="",t="",i="",r="",s="",u=!0,m="https",v=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(m=n.substring(0,C-1),n=n.substring(C+2));let M=n.indexOf("/");-1===M&&(M=n.length);let L=n.indexOf("?");-1===L&&(L=n.length),e=n.substring(0,Math.min(M,L)),M<L&&(r=function yK(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(M,L)));const q=function bK(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Yc(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,L)));C=e.indexOf(":"),C>=0?(u="https"===m||"wss"===m,v=parseInt(e.substring(C+1),10)):C=e.length;const ne=e.slice(0,C);if("localhost"===ne.toLowerCase())t="localhost";else if(ne.split(".").length<=2)t=ne;else{const ae=e.indexOf(".");i=e.substring(0,ae).toLowerCase(),t=e.substring(ae+1),s=i}"ns"in q&&(s=q.ns)}return{host:e,port:v,domain:t,subdomain:i,secure:u,scheme:m,pathString:r,namespace:s}},$3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",EK=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=$3.charAt(t%64),t=Math.floor(t/64);(0,ie.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=$3.charAt(e[r]);return(0,ie.hu)(20===u.length,"nextPushId: Length should be 20."),u}}();class q3{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ie.Wl)(this.snapshot.exportVal())}}class G3{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class WF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,ie.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class W3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new ie.BH;return dK(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Bd("OnDisconnect.remove",this._path);const e=new ie.BH;return V3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Bd("OnDisconnect.set",this._path),$f("OnDisconnect.set",e,this._path,!1);const t=new ie.BH;return V3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Bd("OnDisconnect.setWithPriority",this._path),$f("OnDisconnect.setWithPriority",e,this._path,!1),VF("OnDisconnect.setWithPriority",t,!1);const i=new ie.BH;return function hK(n,e,t,i,r){const s=ss(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,m)=>{"ok"===u&&nw(n.onDisconnect_,e,s),Hg(0,r,u,m)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Bd("OnDisconnect.update",this._path),O3("OnDisconnect.update",e,this._path,!1);const t=new ie.BH;return function fK(n,e,t,i){if((0,ie.xb)(t))return $a("onDisconnect().update() called with empty data.  Don't do anything."),void Hg(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&qa(t,(u,m)=>{const v=ss(m);nw(n.onDisconnect_,Go(e,u),v)}),Hg(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class du{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Di(this._path)?null:eF(this._path)}get ref(){return new jd(this._repo,this._path)}get _queryIdentifier(){const e=Yj(this._queryParams),t=GN(e);return"{}"===t?"default":t}get _queryObject(){return Yj(this._queryParams)}isEqual(e){if(!((e=(0,ie.m9)(e))instanceof du))return!1;const t=this._repo===e._repo,i=tF(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function f8(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function S1(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function $g(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===zf){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ng)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==om)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===fo){if(null!=e&&!Ox(e)||null!=t&&!Ox(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ie.hu)(n.getIndex()instanceof sF||n.getIndex()===aF,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function A1(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class jd extends du{constructor(e,t){super(e,t,new r1,!1)}get parent(){const e=Uj(this._path);return null===e?null:new jd(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class dy{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ar(e),i=hy(this.ref,e);return new dy(this._node.getChild(t),i,fo)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new dy(r,hy(this.ref,i),fo)))}hasChild(e){const t=new Ar(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Z3(n,e){return(n=(0,ie.m9)(n))._checkNotDeleted("ref"),void 0!==e?hy(n._root,e):n._root}function K3(n,e){(n=(0,ie.m9)(n))._checkNotDeleted("refFromURL");const t=GF(e,n._repo.repoInfo_.nodeAdmin);P3("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&jf("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),Z3(n,t.path.toString())}function hy(n,e){return null===Ti((n=(0,ie.m9)(n))._path)?tK("child","path",e,!1):kx("child","path",e,!1),new jd(n._repo,Go(n._path,e))}function ZF(n,e){n=(0,ie.m9)(n),Bd("set",n._path),$f("set",e,n._path,!1);const t=new ie.BH;return jF(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function DK(n,e){O3("update",e,n._path,!1);const t=new ie.BH;return function lK(n,e,t,i){sw(n,"update",{path:e.toString(),value:t});let r=!0;const s=Nx(n),u={};if(qa(t,(m,v)=>{r=!1,u[m]=D3(Go(e,m),ss(v),n.serverSyncTree_,s)}),r)$a("update() called with empty data.  Don't do anything."),Hg(0,i,"ok",void 0);else{const m=x1(n),v=function N7(n,e,t,i){!function X8(n,e,t,i){(0,ie.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=_F(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=po.fromObject(t);return ow(n,new iw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,u,m);I1(n.eventQueue_,v),n.server_.merge(e.toString(),t,(C,M)=>{const L="ok"===C;L||Yc("update at "+e+" failed: "+C);const q=zg(n.serverSyncTree_,m,!L),ne=q.length>0?aw(n,e):e;qu(n.eventQueue_,ne,q),Hg(0,i,C,M)}),qa(t,C=>{const M=$F(n,Go(e,C));aw(n,M)}),qu(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function SK(n){n=(0,ie.m9)(n);const e=new WF(()=>{}),t=new Fx(e);return function cK(n,e,t){const i=function B7(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(C,M)=>{const L=Al(C,t);i=i||Bg(M,L)});let r=n.syncPointTree_.get(t);r?i=i||Bg(r,ar()):(r=new g3,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,u=s?new Ug(i,!0,!1):null;return function C7(n){return u1(n.viewCache_)}(_3(r,e,d1(n.pendingWriteTree_,e._path),s?u.getNode():hi.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=ss(r).withIndex(e._queryParams.getIndex());let u;if(DF(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=Dx(n.serverSyncTree_,e._path,s);else{const m=Sx(n.serverSyncTree_,e);u=E3(n.serverSyncTree_,e._path,s,m)}return qu(n.eventQueue_,e._path,u),v1(n.serverSyncTree_,e,t,null,!0),s},r=>(sw(n,"get for query "+(0,ie.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new dy(i,new jd(n._repo,n._path),n._queryParams.getIndex()))}class Fx{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new q3("value",this,new dy(e.snapshotNode,new jd(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new G3(this,e,t):null}matches(e){return e instanceof Fx&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class M1{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new G3(this,e,t):null}createEvent(e,t){(0,ie.hu)(null!=e.childName,"Child events should have a childName.");const i=hy(new jd(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new q3(e.type,this,new dy(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof M1&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Lx(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const v=t,C=(M,L)=>{zF(n._repo,n,m),v(M,L)};C.userCallback=t.userCallback,C.context=t.context,t=C}const u=new WF(t,s||void 0),m="value"===e?new Fx(u):new M1(e,u);return function pK(n,e,t){let i;i=".info"===Ti(e._path)?DF(n.infoSyncTree_,e,t):DF(n.serverSyncTree_,e,t),R3(n.eventQueue_,e._path,i)}(n._repo,n,m),()=>zF(n._repo,n,m)}function KF(n,e,t,i){return Lx(n,"value",e,t,i)}function Y3(n,e,t,i){return Lx(n,"child_added",e,t,i)}function Q3(n,e,t,i){return Lx(n,"child_changed",e,t,i)}function X3(n,e,t,i){return Lx(n,"child_moved",e,t,i)}function J3(n,e,t,i){return Lx(n,"child_removed",e,t,i)}function ez(n,e,t){let i=null;const r=t?new WF(t):null;"value"===e?i=new Fx(r):e&&(i=new M1(e,r)),zF(n._repo,n,i)}class Rh{}class tz extends Rh{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$f("endAt",this._value,e._path,!0);const t=uF(e._queryParams,this._value,this._key);if(A1(t),$g(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new du(e._repo,e._path,t,e._orderByCalled)}}class MK extends Rh{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$f("endBefore",this._value,e._path,!1);const t=function V8(n,e,t){let i;return i=uF(n,e,n.index_===zf||t?t:Ng),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(A1(t),$g(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new du(e._repo,e._path,t,e._orderByCalled)}}class nz extends Rh{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$f("startAt",this._value,e._path,!0);const t=lF(e._queryParams,this._value,this._key);if(A1(t),$g(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new du(e._repo,e._path,t,e._orderByCalled)}}class RK extends Rh{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$f("startAfter",this._value,e._path,!1);const t=function U8(n,e,t){let i;return i=lF(n,e,n.index_===zf||t?t:om),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(A1(t),$g(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new du(e._repo,e._path,t,e._orderByCalled)}}class NK extends Rh{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new du(e._repo,e._path,function F8(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class LK extends Rh{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new du(e._repo,e._path,function L8(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class VK extends Rh{constructor(e){super(),this._path=e}_apply(e){S1(e,"orderByChild");const t=new Ar(this._path);if(Di(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new sF(t),r=o1(e._queryParams,i);return $g(r),new du(e._repo,e._path,r,!0)}}class jK extends Rh{_apply(e){S1(e,"orderByKey");const t=o1(e._queryParams,zf);return $g(t),new du(e._repo,e._path,t,!0)}}class HK extends Rh{_apply(e){S1(e,"orderByPriority");const t=o1(e._queryParams,fo);return $g(t),new du(e._repo,e._path,t,!0)}}class qK extends Rh{_apply(e){S1(e,"orderByValue");const t=o1(e._queryParams,aF);return $g(t),new du(e._repo,e._path,t,!0)}}class WK extends Rh{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if($f("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new tz(this._value,this._key)._apply(new nz(this._value,this._key)._apply(e))}}function kh(n,...e){let t=(0,ie.m9)(n);for(const i of e)t=i._apply(t);return t}(function D7(n){(0,ie.hu)(!m1,"__referenceConstructor has already been defined"),m1=n})(jd),function P7(n){(0,ie.hu)(!_1,"__referenceConstructor has already been defined"),_1=n}(jd);const YF={};function rz(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||jf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$a("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let v,C,u=GF(s,r),m=u.repoInfo;typeof process<"u"&&process.env&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(v=!0,s=`http://${C}?ns=${m.namespace}`,u=GF(s,r),m=u.repoInfo):v=!u.repoInfo.secure;const M=r&&v?new mx(mx.OWNER):new zZ(n.name,n.options,e);P3("Invalid Firebase Database URL",u),Di(u.path)||jf("Database URL must point to the root of a Firebase Database (not including a child path).");const L=function XK(n,e,t,i){let r=YF[e.name];r||(r={},YF[e.name]=r);let s=r[n.toURLString()];return s&&jf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new oK(n,false,t,i),r[n.toURLString()]=s,s}(m,n,M,new jZ(n.name,t));return new eY(L,n)}class eY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function sK(n,e,t){if(n.stats_=QN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new s1(n.repoInfo_,(i,r,s,u)=>{L3(n,i,r,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>U3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ie.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new sy(n.repoInfo_,e,(i,r,s,u)=>{L3(n,i,r,s,u)},i=>{U3(n,i)},i=>{!function aK(n,e){qa(e,(t,i)=>{BF(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function qZ(n,e){const t=n.toString();return YN[t]||(YN[t]=e()),YN[t]}(n.repoInfo_,()=>new q8(n.stats_,n.server_)),n.infoData_=new B8,n.infoSyncTree_=new w3({startListening:(i,r,s,u)=>{let m=[];const v=n.infoData_.getNode(i._path);return v.isEmpty()||(m=Dx(n.infoSyncTree_,i._path,v),setTimeout(()=>{u("ok")},0)),m},stopListening:()=>{}}),BF(n,"connected",!1),n.serverSyncTree_=new w3({startListening:(i,r,s,u)=>(n.server_.listen(i,s,r,(m,v)=>{const C=u(m,v);qu(n.eventQueue_,i._path,C)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new jd(this._repo,ar())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function QK(n,e){const t=YF[e];(!t||t[n.key]!==n)&&jf(`Database ${e}(${n.repoInfo_}) has already been deleted.`),B3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&jf("Cannot call "+e+" on a deleted database.")}}function oz(){Tj.IS_TRANSPORT_INITIALIZED&&Yc("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function tY(){oz(),Fg.forceDisallow()}function nY(){oz(),X0.forceDisallow(),Fg.forceAllow()}function oY(n,e){sj(n,e)}const aY={".sv":"timestamp"};class uY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}sy.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},sy.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function sY(n){tj(Ds.SDK_VERSION),(0,Ds._registerComponent)(new tu.wA("database",(e,{instanceIdentifier:t})=>rz(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ds.registerVersion)(JB,"0.14.4",n),(0,Ds.registerVersion)(JB,"0.14.4","esm2017")}();const pY=new Mu.Yd("@firebase/database-compat"),az=function(n){pY.warn("FIREBASE WARNING: "+n)};class _Y{constructor(e){this._delegate=e}cancel(e){(0,ie.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,ie.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,ie.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ie.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,ie.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ie.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,ie.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,az("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ie.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class vY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,ie.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class qg{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,ie.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ie.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ie.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ie.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,ie.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),kx("DataSnapshot.child","path",e,!1),new qg(this._database,this._delegate.child(e))}hasChild(e){return(0,ie.Dv)("DataSnapshot.hasChild",1,1,arguments.length),kx("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,ie.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,ie.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ie.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new qg(this._database,t)))}hasChildren(){return(0,ie.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ie.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ie.Dv)("DataSnapshot.ref",0,0,arguments.length),new Gu(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class mc{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,ie.Dv)("Query.on",2,4,arguments.length),(0,ie.Wj)("Query.on","callback",t,!1);const u=mc.getCancelAndContextArgs_("Query.on",i,r),m=(C,M)=>{t.call(u.context,new qg(this.database,C),M)};m.userCallback=t,m.context=u.context;const v=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return KF(this._delegate,m,v),t;case"child_added":return Y3(this._delegate,m,v),t;case"child_removed":return J3(this._delegate,m,v),t;case"child_changed":return Q3(this._delegate,m,v),t;case"child_moved":return X3(this._delegate,m,v),t;default:throw new Error((0,ie.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,ie.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ie.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,ie.Wj)("Query.off","callback",t,!0),(0,ie.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,ez(this._delegate,e,r)}else ez(this._delegate,e)}get(){return SK(this._delegate).then(e=>new qg(this.database,e))}once(e,t,i,r){(0,ie.Dv)("Query.once",1,4,arguments.length),(0,ie.Wj)("Query.once","callback",t,!0);const s=mc.getCancelAndContextArgs_("Query.once",i,r),u=new ie.BH,m=(C,M)=>{const L=new qg(this.database,C);t&&t.call(s.context,L,M),u.resolve(L)};m.userCallback=t,m.context=s.context;const v=C=>{s.cancel&&s.cancel.call(s.context,C),u.reject(C)};switch(e){case"value":KF(this._delegate,m,v,{onlyOnce:!0});break;case"child_added":Y3(this._delegate,m,v,{onlyOnce:!0});break;case"child_removed":J3(this._delegate,m,v,{onlyOnce:!0});break;case"child_changed":Q3(this._delegate,m,v,{onlyOnce:!0});break;case"child_moved":X3(this._delegate,m,v,{onlyOnce:!0});break;default:throw new Error((0,ie.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,ie.Dv)("Query.limitToFirst",1,1,arguments.length),new mc(this.database,kh(this._delegate,function FK(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new NK(n)}(e)))}limitToLast(e){return(0,ie.Dv)("Query.limitToLast",1,1,arguments.length),new mc(this.database,kh(this._delegate,function UK(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new LK(n)}(e)))}orderByChild(e){return(0,ie.Dv)("Query.orderByChild",1,1,arguments.length),new mc(this.database,kh(this._delegate,function BK(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kx("orderByChild","path",n,!1),new VK(n)}(e)))}orderByKey(){return(0,ie.Dv)("Query.orderByKey",0,0,arguments.length),new mc(this.database,kh(this._delegate,function zK(){return new jK}()))}orderByPriority(){return(0,ie.Dv)("Query.orderByPriority",0,0,arguments.length),new mc(this.database,kh(this._delegate,function $K(){return new HK}()))}orderByValue(){return(0,ie.Dv)("Query.orderByValue",0,0,arguments.length),new mc(this.database,kh(this._delegate,function GK(){return new qK}()))}startAt(e=null,t){return(0,ie.Dv)("Query.startAt",0,2,arguments.length),new mc(this.database,kh(this._delegate,function PK(n=null,e){return Rx("startAt","key",e,!0),new nz(n,e)}(e,t)))}startAfter(e=null,t){return(0,ie.Dv)("Query.startAfter",0,2,arguments.length),new mc(this.database,kh(this._delegate,function kK(n,e){return Rx("startAfter","key",e,!0),new RK(n,e)}(e,t)))}endAt(e=null,t){return(0,ie.Dv)("Query.endAt",0,2,arguments.length),new mc(this.database,kh(this._delegate,function AK(n,e){return Rx("endAt","key",e,!0),new tz(n,e)}(e,t)))}endBefore(e=null,t){return(0,ie.Dv)("Query.endBefore",0,2,arguments.length),new mc(this.database,kh(this._delegate,function OK(n,e){return Rx("endBefore","key",e,!0),new MK(n,e)}(e,t)))}equalTo(e,t){return(0,ie.Dv)("Query.equalTo",1,2,arguments.length),new mc(this.database,kh(this._delegate,function ZK(n,e){return Rx("equalTo","key",e,!0),new WK(n,e)}(e,t)))}toString(){return(0,ie.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ie.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,ie.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof mc))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,ie.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,ie.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,ie.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Gu(this.database,new jd(this._delegate._repo,this._delegate._path))}}class Gu extends mc{constructor(e,t){super(e,new du(t._repo,t._path,new r1,!1)),this.database=e,this._delegate=t}getKey(){return(0,ie.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,ie.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Gu(this.database,hy(this._delegate,e))}getParent(){(0,ie.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Gu(this.database,e):null}getRoot(){return(0,ie.Dv)("Reference.root",0,0,arguments.length),new Gu(this.database,this._delegate.root)}set(e,t){(0,ie.Dv)("Reference.set",1,2,arguments.length),(0,ie.Wj)("Reference.set","onComplete",t,!0);const i=ZF(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,ie.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,az("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Bd("Reference.update",this._delegate._path),(0,ie.Wj)("Reference.update","onComplete",t,!0);const i=DK(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,ie.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ie.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function TK(n,e,t){if(Bd("setWithPriority",n._path),$f("setWithPriority",e,n._path,!1),VF("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new ie.BH;return jF(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,ie.Dv)("Reference.remove",0,1,arguments.length),(0,ie.Wj)("Reference.remove","onComplete",e,!0);const t=function IK(n){return Bd("remove",n._path),ZF(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,ie.Dv)("Reference.transaction",1,3,arguments.length),(0,ie.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,ie.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,ie.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function dY(n,e,t){var i;if(n=(0,ie.m9)(n),Bd("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,s=new ie.BH,m=KF(n,()=>{});return function gK(n,e,t,i,r,s){sw(n,"transaction on "+e);const u={path:e,update:t,onComplete:i,status:null,order:ij(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=HF(n,e,void 0);u.currentInputSnapshot=m;const v=u.update(m.val());if(void 0===v)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Px("transaction failed: Data returned ",v,u.path),u.status=0;const C=w1(n.transactionQueueTree_,e),M=uy(C)||[];let L;M.push(u),FF(C,M),"object"==typeof v&&null!==v&&(0,ie.r3)(v,".priority")?(L=(0,ie.DV)(v,".priority"),(0,ie.hu)(Ox(L),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):L=(y1(n.serverSyncTree_,e)||hi.EMPTY_NODE).getPriority().val();const q=Nx(n),ne=ss(v,L),ae=RF(ne,m,q);u.currentOutputSnapshotRaw=ne,u.currentOutputSnapshotResolved=ae,u.currentWriteId=x1(n);const ye=TF(n.serverSyncTree_,e,ae,u.currentWriteId,u.applyLocally);qu(n.eventQueue_,e,ye),T1(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(v,C,M)=>{let L=null;v?s.reject(v):(L=new dy(M,new jd(n._repo,n._path),fo),s.resolve(new uY(C,L)))},m,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new vY(s.committed,new qg(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,ie.Dv)("Reference.setPriority",1,2,arguments.length),(0,ie.Wj)("Reference.setPriority","onComplete",t,!0);const i=function xK(n,e){n=(0,ie.m9)(n),Bd("setPriority",n._path),VF("setPriority",e,!1);const t=new ie.BH;return jF(n._repo,Go(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,ie.Dv)("Reference.push",0,2,arguments.length),(0,ie.Wj)("Reference.push","onComplete",t,!0);const i=function CK(n,e){n=(0,ie.m9)(n),Bd("push",n._path),$f("push",e,n._path,!0);const t=F3(n._repo),i=EK(t),r=hy(n,i),s=hy(n,i);let u;return u=null!=e?ZF(s,e).then(()=>s):Promise.resolve(s),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(this._delegate,e),r=i.then(u=>new Gu(this.database,u));t&&r.then(()=>t(null),u=>t(u));const s=new Gu(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Bd("Reference.onDisconnect",this._delegate._path),new _Y(new W3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Ux{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:tY,forceLongPolling:nY}}useEmulator(e,t,i={}){!function sz(n,e,t,i={}){(n=(0,ie.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&jf("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&jf('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new mx(mx.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:(0,ie.Sg)(i.mockUserToken,n.app.options.projectId);s=new mx(u)}!function YK(n,e,t,i){n.repoInfo_=new ZN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,ie.Dv)("database.ref",0,1,arguments.length),e instanceof Gu){const t=K3(this._delegate,e.toString());return new Gu(this,t)}{const t=Z3(this._delegate,e);return new Gu(this,t)}}refFromURL(e){(0,ie.Dv)("database.refFromURL",1,1,arguments.length);const i=K3(this._delegate,e);return new Gu(this,i)}goOffline(){return(0,ie.Dv)("database.goOffline",0,0,arguments.length),function iY(n){(n=(0,ie.m9)(n))._checkNotDeleted("goOffline"),B3(n._repo)}(this._delegate)}goOnline(){return(0,ie.Dv)("database.goOnline",0,0,arguments.length),function rY(n){(n=(0,ie.m9)(n))._checkNotDeleted("goOnline"),function mK(n){n.persistentConnection_&&n.persistentConnection_.resume(N3)}(n._repo)}(this._delegate)}}Ux.ServerValue={TIMESTAMP:function cY(){return aY}(),increment:n=>function lY(n){return{".sv":{increment:n}}}(n)};var bY=Object.freeze({__proto__:null,initStandalone:function yY({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){tj(t);const u=new tu.zt("auth-internal",new tu.H0("database-standalone"));return u.setComponent(new tu.wA("auth-internal",()=>i,"PRIVATE")),{instance:new Ux(rz(n,u,void 0,e,s),n),namespace:r}}});const wY=Ux.ServerValue;!function EY(n){n.INTERNAL.registerComponent(new tu.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Ux(r,i)},"PUBLIC").setServiceProps({Reference:Gu,Query:mc,Database:Ux,DataSnapshot:qg,enableLogging:oY,INTERNAL:bY,ServerValue:wY}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(XB.Z);var O1=Q(3093),CY=Q(4552);class IY extends jn.x{constructor(e=1/0,t=1/0,i=CY.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:u}=this;t||(i.push(e),!r&&i.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let u=0;u<s.length&&!e.closed;u+=i?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const u=t.now();let m=0;for(let v=1;v<i.length&&i[v]<=u;v+=2)m=v;m&&i.splice(0,m+1)}}}function QF(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,jN.B)({connector:()=>new IY(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function cz(n,e){return(0,Fd.m)(e)?(0,qo.w)(()=>n,e):(0,qo.w)(()=>n)}var XF=Q(5137),lz=Q(120);const JF=new c.OlP("angularfire2.auth.use-emulator"),eL=new c.OlP("angularfire2.auth.settings"),tL=new c.OlP("angularfire2.auth.tenant-id"),nL=new c.OlP("angularfire2.auth.langugage-code"),iL=new c.OlP("angularfire2.auth.use-device-language"),rL=new c.OlP("angularfire.auth.persistence"),oL=(n,e,t,i,r,s,u,m)=>(0,Sl.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),i&&(v.tenantId=i),v.languageCode=r,s&&v.useDeviceLanguage(),u)for(const[C,M]of Object.entries(u))v.settings[C]=M;return m&&v.setPersistence(m),v},[t,i,r,s,u,m]);let sL=(()=>{class n{constructor(t,i,r,s,u,m,v,C,M,L,q,ne){const ae=new jn.x,ye=(0,_n.of)(void 0).pipe((0,O1.Q)(u.outsideAngular),(0,qo.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(Q.bind(Q,8661)))),(0,gn.U)(()=>(0,Sl.on)(t,s,i)),(0,gn.U)(We=>oL(We,s,m,C,M,L,v,q)),QF({bufferSize:1,refCount:!1}));if(wr(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,_n.of)(null);else{ye.pipe(Ag()).subscribe();const wt=ye.pipe((0,qo.w)(Lt=>Lt.getRedirectResult().then(Mn=>Mn,()=>null)),An.iC,QF({bufferSize:1,refCount:!1})),Ot=ye.pipe((0,qo.w)(Lt=>new rr.y(Mn=>({unsubscribe:s.runOutsideAngular(()=>Lt.onAuthStateChanged(Rn=>Mn.next(Rn),Rn=>Mn.error(Rn),()=>Mn.complete()))})))),Mt=ye.pipe((0,qo.w)(Lt=>new rr.y(Mn=>({unsubscribe:s.runOutsideAngular(()=>Lt.onIdTokenChanged(Rn=>Mn.next(Rn),Rn=>Mn.error(Rn),()=>Mn.complete()))}))));this.authState=wt.pipe(cz(Ot),(0,XF.R)(u.outsideAngular),(0,O1.Q)(u.insideAngular)),this.user=wt.pipe(cz(Mt),(0,XF.R)(u.outsideAngular),(0,O1.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,qo.w)(Lt=>Lt?(0,Sr.D)(Lt.getIdToken()):(0,_n.of)(null))),this.idTokenResult=this.user.pipe((0,qo.w)(Lt=>Lt?(0,Sr.D)(Lt.getIdTokenResult()):(0,_n.of)(null))),this.credential=(0,kg.T)(wt,ae,this.authState.pipe(or(Lt=>!Lt))).pipe((0,gn.U)(Lt=>Lt?.user?Lt:null),(0,XF.R)(u.outsideAngular),(0,O1.Q)(u.insideAngular))}return(0,Sl.pX)(this,ye,s,{spy:{apply:(We,wt,Ot)=>{(We.startsWith("signIn")||We.startsWith("createUser"))&&Ot.then(Mt=>ae.next(Mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sl.Dh),c.LFG(Sl.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(An.HU),c.LFG(JF,8),c.LFG(eL,8),c.LFG(tL,8),c.LFG(nL,8),c.LFG(iL,8),c.LFG(rL,8),c.LFG(pp,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function uz(n){return null==n}function dz(n){return"function"==typeof n.set}function hz(n,e){return dz(e)?e:n.ref(e)}function fz(n,e){if(function TY(n){return"string"==typeof n}(n))return e.stringCase();if(dz(n))return e.firebaseCase();if(function DY(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Vx(n,e,t="on",i=K0.z){return new rr.y(r=>{let s=null;return s=n[t](e,(u,m)=>{i.schedule(()=>{r.next({snapshot:u,prevKey:m})}),"once"===t&&i.schedule(()=>r.complete())},u=>{i.schedule(()=>r.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,gn.U)(r=>{const{snapshot:s,prevKey:u}=r;let m=null;return s.exists()&&(m=s.key),{type:e,payload:s,prevKey:u,key:m}}),(0,jN.B)())}function pz(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function MY(n,e){const{payload:t,prevKey:i,key:r}=e,s=pz(n,r),u=function AY(n,e){if(uz(e))return 0;{const t=pz(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let m=null;e.payload.forEach(v=>{const C={payload:v,type:"value",prevKey:m,key:v.key};return m=v.key,n=[...n,C],!1})}return n;case"child_added":if(s>-1){const m=n[s-1];(m&&m.key||null)!==i&&(n=n.filter(v=>v.payload.key!==t.key)).splice(u,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(m=>m.payload.key!==t.key);case"child_changed":return n.map(m=>m.payload.key===r?e:m);case"child_moved":if(s>-1){const m=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,m),n}return n;default:return n}}function mz(n){return(uz(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function gz(n,e,t){return function SY(n,e,t){return Vx(n,"value","once",t).pipe((0,qo.w)(i=>{const r=[(0,_n.of)(i)];return e.forEach(s=>r.push(Vx(n,s,"on",t))),(0,kg.T)(...r).pipe(V0(MY,[]))}),(0,zN.x)())}(n,e=mz(e),t)}function _z(n,e,t){const i=(e=mz(e)).map(r=>Vx(n,r,"on",t));return(0,kg.T)(...i)}function vz(n,e){return function(i,r){return fz(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function kY(n){return function(t){return t?fz(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function yz(n,e){return function(){return Vx(n,"value","on",e)}}const LY=new c.OlP("angularfire2.realtimeDatabaseURL"),UY=new c.OlP("angularfire2.database.use-emulator");let aL=(()=>{class n{constructor(t,i,r,s,u,m,v,C,M,L,q,ne,ae,ye,We){this.schedulers=m;const wt=v,Ot=(0,Sl.on)(t,u,i);C&&oL(Ot,u,M,q,ne,ae,L,ye),this.database=(0,Sl.cc)(`${Ot.name}.database.${r}`,"AngularFireDatabase",Ot.name,()=>{const Mt=u.runOutsideAngular(()=>Ot.database(r||void 0));return wt&&Mt.useEmulator(...wt),Mt},[wt])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>hz(this.database,t));let s=r;return i&&(s=i(r)),function NY(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:vz(i,"update"),set:vz(i,"set"),push:r=>i.push(r),remove:kY(i),snapshotChanges:r=>gz(n,r,t).pipe(An.iC),stateChanges:r=>_z(n,r,t).pipe(An.iC),auditTrail:r=>function OY(n,e,t){return function RY(n,e,t){return function PY(n,e){return Vx(n,"value","on",e).pipe((0,gn.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function DZ(...n){const e=(0,L0.jO)(n);return(0,Nr.e)((t,i)=>{const r=n.length,s=new Array(r);let u=n.map(()=>!1),m=!1;for(let v=0;v<r;v++)(0,So.Xf)(n[v]).subscribe((0,ci.x)(i,C=>{s[v]=C,!m&&!u[v]&&(u[v]=!0,(m=u.every(WI.y))&&(u=null))},bN.Z));t.subscribe((0,ci.x)(i,v=>{if(m){const C=[v,...s];i.next(e?e(...C):C)}}))})}(e),(0,gn.U)(([r,s])=>{const u=r.lastKeyToLoad,m=s.map(v=>v.key);return{actions:s,lastKeyToLoad:u,loadedKeys:m}}),function SZ(n){return(0,Nr.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,ci.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,gn.U)(r=>r.actions))}(n,_z(n,e).pipe(V0((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(An.iC),valueChanges:(r,s)=>gz(n,r,t).pipe((0,gn.U)(m=>m.map(v=>s&&s.idField?Object.assign(Object.assign({},v.payload.val()),{[s.idField]:v.key}):v.payload.val())),An.iC)}}(s,this)}object(t){return function FY(n,e){return{query:n,snapshotChanges:()=>yz(n,e.schedulers.outsideAngular)().pipe(An.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>yz(n,e.schedulers.outsideAngular)().pipe(An.iC,(0,gn.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>hz(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sl.Dh),c.LFG(Sl.xv,8),c.LFG(LY,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(An.HU),c.LFG(UY,8),c.LFG(sL,8),c.LFG(JF,8),c.LFG(eL,8),c.LFG(tL,8),c.LFG(nL,8),c.LFG(iL,8),c.LFG(rL,8),c.LFG(pp,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bz=(()=>{class n{constructor(){lz.Z.registerVersion("angularfire",An.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[aL]}),n})();function VY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"img",17),c.NdJ("mouseover",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.changeMainImage(s))}),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("src",t,c.LSH)}}function BY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",18),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.services.selectSize(s))}),c.TgZ(1,"div",19),c._uU(2),c.qZA()()}if(2&n){const t=e.$implicit,i=c.oxw();c.xp6(1),c.ekj("selected",i.services.selectedSize===t),c.xp6(1),c.AsE("",t.size," ",t.price," Ft")}}let jY=(()=>{class n{constructor(t,i,r){this.db=t,this.services=i,this.renderer=r,this.closeModalEvent=new c.vpe,this.currentImage=""}ngOnInit(){}changeMainImage(t){this.currentImage=t,console.log("imagePath value: ",t)}closeModal(){this.closeModalEvent.emit(),this.services.selectedSize=null,this.services.selectedSizePrice=null,console.log("bez\xe1rt modal \xe9rt\xe9ke: ",this.services.selectedSize,this.services.selectedSizePrice)}addToCart(t){this.services.addToCartService(t),this.closeModal()}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(aL),c.Y36(Bf),c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-modal-products"]],inputs:{product:"product"},outputs:{closeModalEvent:"closeModalEvent"},decls:27,vars:7,consts:[[1,"modal-container"],[1,"modal-content"],[1,"left-section"],[1,"product-name"],[1,"product-description"],[1,"product-price"],[1,"modal-image",3,"src"],[1,"modal-image-selection-container"],[4,"ngFor","ngForOf"],[1,"right-section"],[1,"composition-container"],[1,"composition-description"],[1,"comp-desc-pe"],[1,"item-size-buttons-container"],[3,"click",4,"ngFor","ngForOf"],[1,"cart-btn",3,"click"],[1,"close-btn",3,"click"],["alt","Image",1,"modal-image-selection",3,"src","mouseover"],[3,"click"],["tabindex","0",1,"item-size-buttons"]],template:function(i,r){1&i&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c._uU(4),c.qZA(),c.TgZ(5,"div",4),c._uU(6),c.qZA(),c.TgZ(7,"div",5),c._uU(8),c.qZA(),c._UZ(9,"img",6),c.TgZ(10,"div",7),c.YNc(11,VY,2,1,"div",8),c.qZA()(),c.TgZ(12,"div",9)(13,"div",10),c._UZ(14,"div",11)(15,"div",11)(16,"div",11)(17,"div",11),c.TgZ(18,"div",11)(19,"p",12),c._uU(20,"Term\xe9kjellemz\u0151: "),c.qZA()()(),c.TgZ(21,"div",13),c.YNc(22,BY,3,4,"div",14),c.qZA(),c.TgZ(23,"div",15),c.NdJ("click",function(){return r.addToCart(r.product)}),c._uU(24,"Hozz\xe1ad\xe1s a kos\xe1rhoz"),c.qZA()(),c.TgZ(25,"button",16),c.NdJ("click",function(){return r.closeModal()}),c._uU(26,"x"),c.qZA()()()),2&i&&(c.xp6(4),c.AsE(" ",r.product.productName," ",r.services.selectedSize,""),c.xp6(2),c.hij("",r.product.scent," "),c.xp6(2),c.hij("",r.services.selectedSizePrice," Ft"),c.xp6(1),c.Q6J("src",r.currentImage||r.product.modalImagePath[0],c.LSH),c.xp6(2),c.Q6J("ngForOf",r.product.modalImagePath),c.xp6(11),c.Q6J("ngForOf",r.product.type))},dependencies:[ni],styles:['@charset "UTF-8";.modal-container[_ngcontent-%COMP%]{background-color:#00000080;display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 2px 10px #0003;width:900px;height:700px;position:relative;display:flex;flex-direction:column}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]{width:66.6%}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:24px;padding-bottom:10px;color:#333;border-bottom:1px solid #aeaeae}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:16px;color:#666}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:14px;color:#333}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .modal-image[_ngcontent-%COMP%]{max-width:420px;max-height:420px;width:auto;height:auto;position:absolute;top:50%;left:33%;transform:translate(-50%,-50%);-webkit-user-select:none;user-select:none}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .modal-image-selection-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:absolute;bottom:0}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .modal-image-selection-container[_ngcontent-%COMP%]   .modal-image-selection[_ngcontent-%COMP%]{max-height:70px;width:auto;height:auto;margin-left:15px;cursor:pointer}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]{background-color:#092c3d;position:absolute;right:0;top:0;height:100%;width:33.3%;padding:5px}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   .composition-description[_ngcontent-%COMP%]:nth-child(1), .modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2), .modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3), .modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(4){display:flex;color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   .composition-description[_ngcontent-%COMP%]:nth-child(5){color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   .comp-desc-p[_ngcontent-%COMP%]{margin-right:5px}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .cart-btn[_ngcontent-%COMP%]{position:absolute;background-color:#fff;right:10px;bottom:10px;padding:10px 30px;cursor:pointer;transition:ease .4s;-webkit-user-select:none;user-select:none;color:#333}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .cart-btn[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .cart-btn[_ngcontent-%COMP%]:active{background-color:#acacac;color:#000}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .item-size-buttons-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;position:absolute;top:65%;left:10px;-webkit-user-select:none;user-select:none}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .item-size-buttons-container[_ngcontent-%COMP%]   .item-size-buttons[_ngcontent-%COMP%]{border:1.5px solid #aeaeae;padding-left:5px;padding-right:5px;width:90px;height:40px;align-items:center;text-align:center;background-color:#fff;cursor:pointer;border-radius:3px;transition:ease .2s;font-weight:500;color:#333}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .item-size-buttons-container[_ngcontent-%COMP%]   .item-size-buttons[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .item-size-buttons-container[_ngcontent-%COMP%]   .item-size-buttons[_ngcontent-%COMP%]:focus{border:1.2px solid #333;background-color:#acacac;color:#000}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background-color:red;color:#fff;position:absolute;top:-10px;right:-10px;font-size:15px;width:30px;height:30px;border:none;border-radius:50%;cursor:pointer;z-index:100}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#ef2158}']})}return n})();function zY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",3),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.openModal(s))}),c.TgZ(1,"div",4),c._uU(2),c.TgZ(3,"p",5),c._uU(4),c.qZA()(),c.TgZ(5,"div",6),c._UZ(6,"img",7),c.qZA(),c.TgZ(7,"div",8)(8,"p",9),c._uU(9),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.hij(" ",t.brand," "),c.xp6(2),c.Oqu(t.brandName),c.xp6(2),c.Q6J("src",t.imagePath,c.LSH),c.xp6(3),c.hij("",t.price," Ft")}}function HY(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"app-modal-products",10),c.NdJ("closeModalEvent",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.closeModal())}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("product",t.selectedProduct)}}let $Y=(()=>{class n{constructor(t,i){this.services=t,this.firestore=i,this.task$=nN(zI(this.firestore,"hawkers")),this.isModalOpen=!1}closeModal(){this.isModalOpen=!1}ngOnInit(){this.task$.subscribe(t=>console.log("task$ observable:",t)),console.log(this.task$)}openModal(t){this.selectedProduct=t,this.isModalOpen=!0,console.log("Kiv\xe1lasztott term\xe9k:",t),t.type&&t.type.length>0&&this.services.selectSize(t.type[0])}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(Bf),c.Y36(Dg))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-products"]],decls:4,vars:4,consts:[[1,"product-card-container"],["class","product-card",3,"click",4,"ngFor","ngForOf"],[3,"product","closeModalEvent",4,"ngIf"],[1,"product-card",3,"click"],[1,"product-card-head"],[1,"brand-name"],[1,"main-image-container"],[1,"main-image",3,"src"],[1,"product-card-price"],[1,"tol"],[3,"product","closeModalEvent"]],template:function(i,r){1&i&&(c.TgZ(0,"div",0),c.YNc(1,zY,10,4,"div",1),c.ALo(2,"async"),c.qZA(),c.YNc(3,HY,1,1,"app-modal-products",2)),2&i&&(c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,2,r.task$)),c.xp6(2),c.Q6J("ngIf",r.isModalOpen))},dependencies:[ni,Qi,jY,Mr],styles:['@charset "UTF-8";.product-card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{cursor:pointer;display:flex;color:#333;flex-direction:column;border-radius:.5rem;background-color:#fff;margin:1.25rem 0;box-shadow:0 .25rem .5rem #000;width:calc(33.33% - 20px);margin:10px;width:350px;overflow:hidden}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-head[_ngcontent-%COMP%]{padding:10px 0 5px 15px;border-bottom:2px solid #edf1f7;font-size:18px;font-weight:500}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-head[_ngcontent-%COMP%]   .brand-name[_ngcontent-%COMP%]{font-size:16px;font-weight:300}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-head[_ngcontent-%COMP%]   .scent[_ngcontent-%COMP%]{margin:-10px 0 -5px;font-size:14px}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-body[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-weight:300;border-bottom:1px solid #edf1f7}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{max-width:300px;max-height:300px;width:auto;height:auto}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .scent[_ngcontent-%COMP%]{font-weight:100;font-size:15px}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-price[_ngcontent-%COMP%]{display:flex;align-items:center;padding:25px 0 0 15px;font-weight:400;font-size:22px;background-color:#edf1f7}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-price[_ngcontent-%COMP%]   .tol[_ngcontent-%COMP%]{font-size:15px;font-weight:100;padding:15px 0 0 5px}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-price[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{font-size:15px;padding:10px;margin-left:auto;margin-bottom:5px}.product-card-price[_ngcontent-%COMP%]{padding-top:25px}@media screen and (max-width: 1200px){.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{width:calc(50% - 20px)}}@media screen and (max-width: 768px){.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{width:95%}}']})}return n})(),qY=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-coupens"]],decls:2,vars:0,template:function(i,r){1&i&&(c.TgZ(0,"h1"),c._uU(1,"Kieg\xe9sz\xedt\u0151k"),c.qZA())}})}return n})(),GY=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-media"]],decls:2,vars:0,template:function(i,r){1&i&&(c.TgZ(0,"h1"),c._uU(1,"K\xf6z\xf6ss\xe9gi oldal"),c.qZA())}})}return n})(),wz=(()=>{class n{constructor(t){this.services=t,this.navbarData=ZM,this.insuranceIsChecked=!0,this.giftIsChecked=!1,this.shippingPrice=1390}getTotalPrice(){let t=0;for(const i of this.services.getCartItems())t+=i.selectedPrice*i.quantity;return t}calculateShippingPrice(){return this.shippingPrice=this.getTotalPrice()>=5e4?0:1390}calculateInsurance(){return this.insuranceIsChecked?500:0}calculateGiftFee(){return this.giftIsChecked?1590:0}calculateTotalPayment(){return this.calculateShippingPrice()+this.getTotalPrice()+this.calculateInsurance()+this.calculateGiftFee()}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Bf))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ez(...n){const e=(0,L0.jO)(n),{args:t,keys:i}=HV(n),r=new rr.y(s=>{const{length:u}=t;if(!u)return void s.complete();const m=new Array(u);let v=u,C=u;for(let M=0;M<u;M++){let L=!1;(0,So.Xf)(t[M]).subscribe((0,ci.x)(s,q=>{L||(L=!0,C--),m[M]=q},()=>v--,void 0,()=>{(!v||!L)&&(C||s.next(i?$V(i,m):m),s.complete())}))}});return e?r.pipe(gN(e)):r}let Cz=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.Qsj),c.Y36(c.SBq))};static#t=this.\u0275dir=c.lG2({type:n})}return n})(),fy=(()=>{class n extends Cz{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=c.n5z(n)))(r||n)}}();static#t=this.\u0275dir=c.lG2({type:n,features:[c.qOj]})}return n})();const Nh=new c.OlP("NgValueAccessor"),ZY={provide:Nh,useExisting:(0,c.Gpc)(()=>py),multi:!0},YY=new c.OlP("CompositionEventMode");let py=(()=>{class n extends Cz{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function KY(){const n=K()?K().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(YY,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([ZY]),c.qOj]})}return n})();function Gg(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function xz(n){return null!=n&&"number"==typeof n.length}const gc=new c.OlP("NgValidators"),Wg=new c.OlP("NgAsyncValidators"),QY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ga{static min(e){return function Tz(n){return e=>{if(Gg(e.value)||Gg(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Dz(n){return e=>{if(Gg(e.value)||Gg(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Sz(n){return Gg(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Az(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Mz(n){return Gg(n.value)||QY.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Oz(n){return e=>Gg(e.value)||!xz(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Pz(n){return e=>xz(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Rz(n){if(!n)return P1;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Gg(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return Vz(e)}static composeAsync(e){return Bz(e)}}function P1(n){return null}function kz(n){return null!=n}function Nz(n){return(0,c.QGY)(n)?(0,Sr.D)(n):n}function Fz(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Lz(n,e){return e.map(t=>t(n))}function Uz(n){return n.map(e=>function XY(n){return!n.validate}(e)?e:t=>e.validate(t))}function Vz(n){if(!n)return null;const e=n.filter(kz);return 0==e.length?null:function(t){return Fz(Lz(t,e))}}function cL(n){return null!=n?Vz(Uz(n)):null}function Bz(n){if(!n)return null;const e=n.filter(kz);return 0==e.length?null:function(t){return Ez(Lz(t,e).map(Nz)).pipe((0,gn.U)(Fz))}}function lL(n){return null!=n?Bz(Uz(n)):null}function jz(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zz(n){return n._rawValidators}function Hz(n){return n._rawAsyncValidators}function uL(n){return n?Array.isArray(n)?n:[n]:[]}function R1(n,e){return Array.isArray(n)?n.includes(e):n===e}function $z(n,e){const t=uL(e);return uL(n).forEach(r=>{R1(t,r)||t.push(r)}),t}function qz(n,e){return uL(e).filter(t=>!R1(n,t))}class Gz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ml extends Gz{get formDirective(){return null}get path(){return null}}class am extends Gz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wz{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cw=(()=>{class n extends Wz{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(am,2))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]})}return n})(),Bx=(()=>{class n extends Wz{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(Ml,10))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]})}return n})();const jx="VALID",N1="INVALID",lw="PENDING",zx="DISABLED";function fL(n){return(F1(n)?n.validators:n)||null}function pL(n,e){return(F1(e)?e.asyncValidators:n)||null}function F1(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Kz(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new c.vHH(1e3,"");if(!i[t])throw new c.vHH(1001,"")}function Yz(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new c.vHH(1002,"")})}class L1{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===jx}get invalid(){return this.status===N1}get pending(){return this.status==lw}get disabled(){return this.status===zx}get enabled(){return this.status!==zx}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($z(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($z(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(qz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(qz(e,this._rawAsyncValidators))}hasValidator(e){return R1(this._rawValidators,e)}hasAsyncValidator(e){return R1(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=lw,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zx,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jx,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jx||this.status===lw)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zx:jx}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=lw,this._hasOwnPendingAsyncValidator=!0;const t=Nz(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?zx:this.errors?N1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lw)?lw:this._anyControlsHaveStatus(N1)?N1:jx}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){F1(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function nQ(n){return Array.isArray(n)?cL(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function iQ(n){return Array.isArray(n)?lL(n):n||null}(this._rawAsyncValidators)}}class Hx extends L1{constructor(e,t,i){super(fL(t),pL(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Yz(this,0,e),Object.keys(e).forEach(i=>{Kz(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Qz extends Hx{}const my=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>$x}),$x="always";function U1(n,e){return[...e.path,n]}function qx(n,e,t=$x){mL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function oQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Xz(n,e)})}(n,e),function aQ(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Xz(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function rQ(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function V1(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),j1(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function B1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mL(n,e){const t=zz(n);null!==e.validator?n.setValidators(jz(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=Hz(n);null!==e.asyncValidator?n.setAsyncValidators(jz(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();B1(e._rawValidators,r),B1(e._rawAsyncValidators,r)}function j1(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=zz(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(u=>u!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=Hz(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(u=>u!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return B1(e._rawValidators,i),B1(e._rawAsyncValidators,i),t}function Xz(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Jz(n,e){mL(n,e)}function _L(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function eH(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function vL(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===py?t=s:function uQ(n){return Object.getPrototypeOf(n.constructor)===fy}(s)?i=s:r=s}),r||i||t||null}const hQ={provide:Ml,useExisting:(0,c.Gpc)(()=>z1)},Gx=(()=>Promise.resolve())();let z1=(()=>{class n extends Ml{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new Hx({},cL(t),lL(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Gx.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),qx(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Gx.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Gx.then(()=>{const i=this._findContainer(t.path),r=new Hx({});Jz(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Gx.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Gx.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,eH(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(gc,10),c.Y36(Wg,10),c.Y36(my,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([hQ]),c.qOj]})}return n})();function tH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function nH(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Wx=class extends L1{constructor(e=null,t,i){super(fL(t),pL(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),F1(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=nH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){nH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},mQ={provide:am,useExisting:(0,c.Gpc)(()=>yL)},oH=(()=>Promise.resolve())();let yL=(()=>{class n extends am{constructor(t,i,r,s,u,m){super(),this._changeDetectorRef=u,this.callSetDisabledState=m,this.control=new Wx,this._registered=!1,this.name="",this.update=new c.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=vL(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_L(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){oH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&(0,c.VuI)(i);oH.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?U1(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(Ml,9),c.Y36(gc,10),c.Y36(Wg,10),c.Y36(Nh,10),c.Y36(c.sBO,8),c.Y36(my,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([mQ]),c.qOj,c.TTD]})}return n})(),Zx=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const gQ={provide:Nh,useExisting:(0,c.Gpc)(()=>Kx),multi:!0};let Kx=(()=>{class n extends fy{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=c.n5z(n)))(r||n)}}();static#t=this.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){1&i&&c.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([gQ]),c.qOj]})}return n})(),sH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();const bL=new c.OlP("NgModelWithFormControlWarning"),wQ={provide:Ml,useExisting:(0,c.Gpc)(()=>Zg)};let Zg=(()=>{class n extends Ml{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(j1(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return qx(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){V1(t.control||null,t,!1),function dQ(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,eH(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(V1(i||null,t),(n=>n instanceof Wx)(r)&&(qx(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);Jz(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function cQ(n,e){return j1(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mL(this.form,this),this._oldForm&&j1(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(gc,10),c.Y36(Wg,10),c.Y36(my,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([wQ]),c.qOj,c.TTD]})}return n})();const IQ={provide:am,useExisting:(0,c.Gpc)(()=>uw)};let uw=(()=>{class n extends am{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,i,r,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.name=null,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=vL(0,s)}ngOnChanges(t){this._added||this._setUpControl(),_L(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return U1(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||n)(c.Y36(Ml,13),c.Y36(gc,10),c.Y36(Wg,10),c.Y36(Nh,10),c.Y36(bL,8))};static#n=this.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([IQ]),c.qOj,c.TTD]})}return n})(),wH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[sH]})}return n})();class EH extends L1{constructor(e,t,i){super(fL(t),pL(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Yz(this,0,e),e.forEach((i,r)=>{Kz(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function CH(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let DL,IH=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let s={};return CH(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Hx(r,s)}record(t,i=null){const r=this._reduceControls(t);return new Qz(r,i)}control(t,i,r){let s={};return this.useNonNullable?(CH(i)?s=i:(s.validators=i,s.asyncValidators=r),new Wx(t,{...s,nonNullable:!0})):new Wx(t,i,r)}array(t,i,r){const s=t.map(u=>this._createControl(u));return new EH(s,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Wx||t instanceof L1?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),H1=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(IH).nonNullable},providedIn:"root"})}return n})(),VQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:my,useValue:t.callSetDisabledState??$x}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[wH]})}return n})(),xH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:my,useValue:t.callSetDisabledState??$x}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[wH]})}return n})();try{DL=typeof Intl<"u"&&Intl.v8BreakIterator}catch{DL=!1}let dw,Ca=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Rl(n){return n===ra}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!DL)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(c.Lbi))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const TH=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function DH(){if(dw)return dw;if("object"!=typeof document||!document)return dw=new Set(TH),dw;let n=document.createElement("input");return dw=new Set(TH.filter(e=>(n.setAttribute("type",e),n.type===e))),dw}let Yx,_y,SL;function hw(n){return function BQ(){if(null==Yx&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Yx=!0}))}finally{Yx=Yx||!1}return Yx}()?n:!!n.capture}function jQ(){if(null==_y){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return _y=!1,_y;if("scrollBehavior"in document.documentElement.style)_y=!0;else{const n=Element.prototype.scrollTo;_y=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return _y}function Kg(n){return n.composedPath?n.composedPath()[0]:n.target}function AL(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function MH(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function OH(n,e=K0.z){return(0,Nr.e)((t,i)=>{let r=null,s=null,u=null;const m=()=>{if(r){r.unsubscribe(),r=null;const C=s;s=null,i.next(C)}};function v(){const C=u+n,M=e.now();if(M<C)return r=this.schedule(void 0,C-M),void i.add(r);m()}t.subscribe((0,ci.x)(i,C=>{s=C,u=e.now(),r||(r=e.schedule(v,n),i.add(r))},()=>{m(),i.complete()},void 0,()=>{s=r=null}))})}function PH(n){return or((e,t)=>n<=t)}function Qc(n){return null!=n&&"false"!=`${n}`}function q1(n){return Array.isArray(n)?n:[n]}function Js(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Yg(n){return n instanceof c.SBq?n.nativeElement:n}let lX=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[lX]})}return n})();const kH=new Set;let vy,uX=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):hX}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function dX(n,e){if(!kH.has(n))try{vy||(vy=document.createElement("style"),e&&(vy.nonce=e),vy.setAttribute("type","text/css"),document.head.appendChild(vy)),vy.sheet&&(vy.sheet.insertRule(`@media ${n} {body{ }}`,0),kH.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Ca),c.LFG(c.Ojb,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hX(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let fX=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new jn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return NH(q1(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=DM(NH(q1(t)).map(u=>this._registerQuery(u).observable));return s=KI(s.pipe(Kc(1)),s.pipe(PH(1),OH(0))),s.pipe((0,gn.U)(u=>{const m={matches:!1,breakpoints:{}};return u.forEach(({matches:v,query:C})=>{m.matches=m.matches||v,m.breakpoints[C]=v}),m}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new rr.y(u=>{const m=v=>this._zone.run(()=>u.next(v));return i.addListener(m),()=>{i.removeListener(m)}}).pipe(Sg(i),(0,gn.U)(({matches:u})=>({query:t,matches:u})),Ud(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(uX),c.LFG(c.R0b))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NH(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function G1(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const LH="cdk-describedby-message",W1="cdk-describedby-host";let PL=0,gX=(()=>{class n{constructor(t,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+PL++,this._document=t,this._id=(0,c.f3M)(c.AFp)+"-"+PL++}describe(t,i,r){if(!this._canBeDescribed(t,i))return;const s=RL(i,r);"string"!=typeof i?(UH(i,this._id),this._messageRegistry.set(s,{messageElement:i,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,i,r){if(!i||!this._isElementNode(t))return;const s=RL(i,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof i){const u=this._messageRegistry.get(s);u&&0===u.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${W1}="${this._id}"]`);for(let i=0;i<t.length;i++)this._removeCdkDescribedByReferenceIds(t[i]),t[i].removeAttribute(W1);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,i){const r=this._document.createElement("div");UH(r,this._id),r.textContent=t,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(RL(t,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<i.length;s++)i[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const i=G1(t,"aria-describedby").filter(r=>0!=r.indexOf(LH));t.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(t,i){const r=this._messageRegistry.get(i);(function pX(n,e,t){const i=G1(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(W1,this._id),r.referenceCount++}_removeMessageReference(t,i){const r=this._messageRegistry.get(i);r.referenceCount--,function mX(n,e,t){const r=G1(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(W1)}_isElementDescribedByMessage(t,i){const r=G1(t,"aria-describedby"),s=this._messageRegistry.get(i),u=s&&s.messageElement.id;return!!u&&-1!=r.indexOf(u)}_canBeDescribed(t,i){if(!this._isElementNode(t))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re),c.LFG(Ca))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RL(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function UH(n,e){n.id||(n.id=`${LH}-${e}-${PL++}`)}class _X{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new jn.x,this._typeaheadSubscription=$u.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new jn.x,this.change=new jn.x,e instanceof c.n_E&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Xi.b)(t=>this._pressedLetters.push(t)),OH(e),or(()=>this._pressedLetters.length>0),(0,gn.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,u=i[s];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,u=this._getItemsArray().length;this._setActiveItemByIndex(s<u?s:u-1,-1);break}return;default:return void((r||MH(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof c.n_E?this._items.toArray():this._items}}class vX extends _X{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let yX=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function wX(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function bX(n){try{return n.frameElement}catch{return null}}(function AX(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===BH(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=BH(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function DX(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function SX(n){return!function CX(n){return function xX(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function EX(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function IX(n){return function TX(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||VH(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Ca))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VH(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function BH(n){if(!VH(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function kL(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function NL(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const MX=new c.OlP("cdk-input-modality-detector-options"),OX={ignoreKeys:[18,17,224,91,16]},fw=hw({passive:!0,capture:!0});let PX=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ld.X(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(m=>m===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Kg(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(kL(u)?"keyboard":"mouse"),this._mostRecentTarget=Kg(u))},this._onTouchstart=u=>{NL(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Kg(u))},this._options={...OX,...s},this.modalityDetected=this._modality.pipe(PH(1)),this.modalityChanged=this.modalityDetected.pipe((0,zN.x)()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,fw),r.addEventListener("mousedown",this._onMousedown,fw),r.addEventListener("touchstart",this._onTouchstart,fw)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fw),document.removeEventListener("mousedown",this._onMousedown,fw),document.removeEventListener("touchstart",this._onTouchstart,fw))}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Ca),c.LFG(c.R0b),c.LFG(Re),c.LFG(MX,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const kX=new c.OlP("cdk-focus-monitor-default-options"),Z1=hw({passive:!0,capture:!0});let K1=(()=>{class n{constructor(t,i,r,s,u){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new jn.x,this._rootNodeFocusAndBlurListener=m=>{for(let C=Kg(m);C;C=C.parentElement)"focus"===m.type?this._onFocus(m,C):this._onBlur(m,C)},this._document=s,this._detectionMode=u?.detectionMode||0}monitor(t,i=!1){const r=Yg(t);if(!this._platform.isBrowser||1!==r.nodeType)return(0,_n.of)();const s=function HQ(n){if(function zQ(){if(null==SL){const n=typeof document<"u"?document.head:null;SL=!(!n||!n.createShadowRoot&&!n.attachShadow)}return SL}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),u=this._elementInfo.get(r);if(u)return i&&(u.checkChildren=!0),u.subject;const m={checkChildren:i,subject:new jn.x,rootNode:s};return this._elementInfo.set(r,m),this._registerGlobalListeners(m),m.subject}stopMonitoring(t){const i=Yg(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Yg(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([m,v])=>this._originChanged(m,i,v)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Kg(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Z1),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Z1)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ud(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Z1),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Z1),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let u=0;u<s.length;u++)if(s[u].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(c.R0b),c.LFG(Ca),c.LFG(PX),c.LFG(Re,8),c.LFG(kX,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const zH="cdk-high-contrast-black-on-white",HH="cdk-high-contrast-white-on-black",FL="cdk-high-contrast-active";let $H=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,c.f3M)(fX).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(FL,zH,HH),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(FL,zH):2===i&&t.add(FL,HH)}}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Ca),c.LFG(Re))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NX=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG($H))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[RH]})}return n})();const FX=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function LX(){return(0,c.f3M)(Re)}}),UX=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let LL=(()=>{class n{constructor(t){this.value="ltr",this.change=new c.vpe,t&&(this.value=function VX(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?UX.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(FX,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qx=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();const jX=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function BX(){return!0}});let Wa=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!AL()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG($H),c.LFG(jX,8),c.LFG(Re))};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Qx,Qx]})}return n})();function Y1(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=Qc(e)}constructor(...e){super(...e),this._disabled=!1}}}function Q1(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function UL(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Qc(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function zX(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?function aX(n,e=0){return function cX(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}function HX(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let qX=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class GX{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const WH=hw({passive:!0,capture:!0});class WX{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Kg(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const u=s.get(i);u?u.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,WH)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,WH)))}}const ZH={enterDuration:225,exitDuration:150},KH=hw({passive:!0,capture:!0}),YH=["mousedown","touchstart"],QH=["mouseup","mouseleave","touchend","touchcancel"];class X1{static#e=this._eventManager=new WX;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Yg(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...ZH,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const u=i.radius||function KX(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),m=e-r.left,v=t-r.top,C=s.enterDuration,M=document.createElement("div");M.classList.add("mat-ripple-element"),M.style.left=m-u+"px",M.style.top=v-u+"px",M.style.height=2*u+"px",M.style.width=2*u+"px",null!=i.color&&(M.style.backgroundColor=i.color),M.style.transitionDuration=`${C}ms`,this._containerElement.appendChild(M);const L=window.getComputedStyle(M),ne=L.transitionDuration,ae="none"===L.transitionProperty||"0s"===ne||"0s, 0s"===ne||0===r.width&&0===r.height,ye=new GX(this,M,i,ae);M.style.transform="scale3d(1, 1, 1)",ye.state=0,i.persistent||(this._mostRecentTransientRipple=ye);let We=null;return!ae&&(C||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const wt=()=>this._finishRippleTransition(ye),Ot=()=>this._destroyRipple(ye);M.addEventListener("transitionend",wt),M.addEventListener("transitioncancel",Ot),We={onTransitionEnd:wt,onTransitionCancel:Ot}}),this._activeRipples.set(ye,We),(ae||!C)&&this._finishRippleTransition(ye),ye}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...ZH,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Yg(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,YH.forEach(i=>{X1._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{QH.forEach(t=>{this._triggerElement.addEventListener(t,this,KH)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=kL(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!NL(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(YH.forEach(t=>X1._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&QH.forEach(t=>e.removeEventListener(t,this,KH)))}}const XH=new c.OlP("mat-ripple-global-options");let VL=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new X1(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Ca),c.Y36(XH,8),c.Y36(c.QbO,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&c.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),BL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Wa,Wa]})}return n})();const JH={capture:!0},e4=["focus","click","mouseenter","touchstart"],jL="mat-ripple-loader-uninitialized",zL="mat-ripple-loader-class-name",t4="mat-ripple-loader-centered",J1="mat-ripple-loader-disabled";let YX=(()=>{class n{constructor(){this._document=(0,c.f3M)(Re,{optional:!0}),this._animationMode=(0,c.f3M)(c.QbO,{optional:!0}),this._globalRippleOptions=(0,c.f3M)(XH,{optional:!0}),this._platform=(0,c.f3M)(Ca),this._ngZone=(0,c.f3M)(c.R0b),this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const r=t.target.closest(`[${jL}]`);r&&this.createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const t of e4)this._document?.addEventListener(t,this._onInteraction,JH)})}ngOnDestroy(){for(const t of e4)this._document?.removeEventListener(t,this._onInteraction,JH)}configureRipple(t,i){t.setAttribute(jL,""),(i.className||!t.hasAttribute(zL))&&t.setAttribute(zL,i.className||""),i.centered&&t.setAttribute(t4,""),i.disabled&&t.setAttribute(J1,"")}getRipple(t){return t.matRipple?t.matRipple:this.createRipple(t)}setDisabled(t,i){const r=t.matRipple;r?r.disabled=i:i?t.setAttribute(J1,""):t.removeAttribute(J1)}createRipple(t){if(!this._document)return;t.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(zL)),t.append(i);const r=new VL(new c.SBq(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=t,r.centered=t.hasAttribute(t4),r.disabled=t.hasAttribute(J1),this.attachRipple(t,r),r}attachRipple(t,i){t.removeAttribute(jL),t.matRipple=i}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const QX=["switch"];function XX(n,e){1&n&&(c.TgZ(0,"div",12),c.O4$(),c.TgZ(1,"svg",13),c._UZ(2,"path",14),c.qZA(),c.TgZ(3,"svg",15),c._UZ(4,"path",16),c.qZA()())}const JX=["*"],eJ=new c.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),tJ={provide:Nh,useExisting:(0,c.Gpc)(()=>i4),multi:!0};class n4{constructor(e,t){this.source=e,this.checked=t}}let nJ=0;const iJ=zX(Q1(UL(Y1(class{constructor(n){this._elementRef=n}}))));let rJ=(()=>{class n extends iJ{get required(){return this._required}set required(t){this._required=Qc(t)}get checked(){return this._checked}set checked(t){this._checked=Qc(t),this._changeDetectorRef.markForCheck()}get hideIcon(){return this._hideIcon}set hideIcon(t){this._hideIcon=Qc(t)}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,r,s,u,m,v){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=u,this._onChange=C=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this._hideIcon=!1,this.change=new c.vpe,this.toggleChange=new c.vpe,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=u.color||"accent",this._noopAnimations="NoopAnimations"===m,this.id=this._uniqueId=`${v}${++nJ}`,this._hideIcon=u.hideIcon??!1}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}static#e=this.\u0275fac=function(i){c.$Z()};static#t=this.\u0275dir=c.lG2({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked",hideIcon:"hideIcon"},outputs:{change:"change",toggleChange:"toggleChange"},features:[c.qOj]})}return n})(),i4=(()=>{class n extends rJ{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(t,i,r,s,u,m){super(t,i,r,s,u,m,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new n4(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(t){return new n4(this,t)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(K1),c.Y36(c.sBO),c.$8M("tabindex"),c.Y36(eJ),c.Y36(c.QbO,8))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&c.Gf(QX,5),2&i){let s;c.iGM(s=c.CRH())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(i,r){2&i&&(c.Ikx("id",r.id),c.uIk("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),c.ekj("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[c._Bn([tJ]),c.qOj],ngContentSelectors:JX,decls:13,vars:25,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],["class","mdc-switch__icons",4,"ngIf"],[1,"mdc-label",3,"for","click"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i&&(c.F$t(),c.TgZ(0,"div",0)(1,"button",1,2),c.NdJ("click",function(){return r._handleClick()}),c._UZ(3,"div",3),c.TgZ(4,"div",4)(5,"div",5)(6,"div",6),c._UZ(7,"div",7),c.qZA(),c.TgZ(8,"div",8),c._UZ(9,"div",9),c.qZA(),c.YNc(10,XX,5,0,"div",10),c.qZA()()(),c.TgZ(11,"label",11),c.NdJ("click",function(u){return u.stopPropagation()}),c.Hsn(12),c.qZA()()),2&i){const s=c.MAs(2);c.ekj("mdc-form-field--align-end","before"==r.labelPosition),c.xp6(1),c.ekj("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),c.Q6J("tabIndex",r.tabIndex)("disabled",r.disabled),c.uIk("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),c.xp6(8),c.Q6J("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),c.xp6(1),c.Q6J("ngIf",!r.hideIcon),c.xp6(1),c.Q6J("for",r.buttonId),c.uIk("id",r._labelId)}},dependencies:[VL,Qi],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mdc-switch{width:var(--mdc-switch-track-width);--mdc-switch-disabled-handle-opacity:0.38;--mdc-switch-disabled-selected-icon-opacity:0.38;--mdc-switch-disabled-track-opacity:0.12;--mdc-switch-disabled-unselected-icon-opacity:0.38;--mdc-switch-handle-height:20px;--mdc-switch-handle-shape:10px;--mdc-switch-handle-width:20px;--mdc-switch-selected-icon-size:18px;--mdc-switch-track-height:14px;--mdc-switch-track-shape:7px;--mdc-switch-track-width:36px;--mdc-switch-unselected-icon-size:18px;--mdc-switch-state-layer-size:40px;--mdc-switch-selected-focus-state-layer-opacity:0.12;--mdc-switch-selected-hover-state-layer-opacity:0.04;--mdc-switch-selected-pressed-state-layer-opacity:0.1;--mdc-switch-unselected-focus-state-layer-opacity:0.12;--mdc-switch-unselected-hover-state-layer-opacity:0.04;--mdc-switch-unselected-pressed-state-layer-opacity:0.1}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle .mdc-label{font-family:var(--mat-slide-toggle-label-text-font);font-size:var(--mat-slide-toggle-label-text-size);letter-spacing:var(--mat-slide-toggle-label-text-tracking);line-height:var(--mat-slide-toggle-label-text-line-height);font-weight:var(--mat-slide-toggle-label-text-weight)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}'],encapsulation:2,changeDetection:0})}return n})(),r4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})(),o4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[r4,Wa,BL,Oi,r4,Wa]})}return n})();const aJ=function(){return["/products"]};function cJ(n,e){1&n&&(c.TgZ(0,"div",2),c._UZ(1,"img",3),c.TgZ(2,"div",4),c._uU(3,"A kosara \xfcres!"),c.TgZ(4,"p",5),c._uU(5,"Vissza a term\xe9kekhez!"),c.qZA()()()),2&n&&(c.xp6(4),c.Q6J("routerLink",c.DdM(1,aJ)))}const s4=function(n){return{"disabled-button":n}};function lJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",22),c._UZ(1,"img",23),c.TgZ(2,"div",24),c._uU(3),c.qZA(),c.TgZ(4,"div",25),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw(2);return c.KtG(u.decreaseQuantity(s))}),c._uU(5,"-"),c.qZA(),c.TgZ(6,"div",26),c._uU(7),c.qZA(),c.TgZ(8,"div",27),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw(2);return c.KtG(u.increaseQuantity(s))}),c._uU(9,"+"),c.qZA(),c.TgZ(10,"div",28),c._uU(11),c.qZA(),c.TgZ(12,"div",29),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw(2);return c.KtG(u.removeFromCart(s))}),c._uU(13,"X"),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("src",t.product.imagePath,c.LSH),c.xp6(2),c.AsE("",t.product.productName," ",t.size,""),c.xp6(1),c.Q6J("ngClass",c.VKq(7,s4,1===t.quantity)),c.xp6(3),c.Oqu(t.quantity),c.xp6(1),c.Q6J("ngClass",c.VKq(9,s4,5===t.quantity)),c.xp6(3),c.hij(" ",t.selectedPrice*t.quantity," ")}}const a4=function(n){return{active:n}},c4=function(n){return{opacity:n}};function uJ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",6)(1,"div",7)(2,"div",8),c.YNc(3,lJ,14,11,"div",9),c.qZA()(),c.TgZ(4,"div",10)(5,"div",11)(6,"mat-slide-toggle",12),c.NdJ("ngModelChange",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s.shoppingService.insuranceIsChecked=r)}),c.qZA(),c.TgZ(7,"h3",13),c._uU(8,"500 Ft"),c.qZA(),c._uU(9," K\xfcldem\xe9ny biztos\xedt\xe1sa "),c.TgZ(10,"p",14),c._uU(11,"A k\xfcldem\xe9ny megs\xe9r\xfcl\xe9se vagy elveszt\xe9se eset\xe9n nem kell v\xe1rnia a helyzet t\xf6rv\xe9nyileg el\u0151\xedrt hat\xe1rid\u0151n bel\xfcli rendez\xe9s\xe9re. El\xe9g, ha bejelenti nek\xfcnk \xe9s dokument\xe1lja a k\xfcldem\xe9ny megs\xe9r\xfcl\xe9s\xe9t vagy elveszt\xe9s\xe9t, \xe9s mi postafordult\xe1val teljesen \xfaj \xe1rut k\xfcld\xfcnk \xf6nnek. "),c.qZA()(),c.TgZ(12,"div",15)(13,"mat-slide-toggle",12),c.NdJ("ngModelChange",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s.shoppingService.giftIsChecked=r)}),c.qZA(),c.TgZ(14,"h3",13),c._uU(15,"1590 Ft"),c.qZA(),c._uU(16," Luxus csomagol\xe1s "),c.TgZ(17,"p",14),c._uU(18,"Sz\xedvesen luxus kivitel\u0171 aj\xe1nd\xe9kcsomagol\xe1sba csomagolunk \xf6nnek mindent. "),c.qZA()(),c.TgZ(19,"div",16),c._uU(20,"H\xe1zhoz sz\xe1ll\xedt\xe1s "),c.TgZ(21,"h3"),c._uU(22,"1390 Ft "),c.qZA()(),c.TgZ(23,"div",17),c._uU(24,"100% Kedvezm\xe9ny a kisz\xe1ll\xedt\xe1sra! "),c.TgZ(25,"p",18),c._uU(26,"50.000 Forint v\xe1s\xe1rl\xe1s eset\xe9n ingyenesen h\xe1zhoz sz\xe1ll\xedtjuk! "),c.qZA()(),c.TgZ(27,"div",19)(28,"div",20)(29,"h3"),c._uU(30,"\xd6sszesen fizetend\u0151: "),c.TgZ(31,"p"),c._uU(32),c.qZA()()()(),c.TgZ(33,"button",21),c._uU(34,"Tov\xe1bb a sz\xe1ll\xedt\xe1sra!"),c.qZA()()()}if(2&n){const t=c.oxw();c.xp6(3),c.Q6J("ngForOf",t.services.getCartItems()),c.xp6(3),c.Q6J("ngModel",t.shoppingService.insuranceIsChecked),c.xp6(1),c.Q6J("ngClass",c.VKq(9,a4,t.shoppingService.insuranceIsChecked)),c.xp6(6),c.Q6J("ngModel",t.shoppingService.giftIsChecked),c.xp6(1),c.Q6J("ngClass",c.VKq(11,a4,t.shoppingService.giftIsChecked)),c.xp6(5),c.Q6J("ngStyle",c.VKq(13,c4,t.getTotalPrice()<5e4?1:.5)),c.xp6(4),c.Q6J("ngStyle",c.VKq(15,c4,t.getTotalPrice()>49999?1:.5)),c.xp6(9),c.hij("",t.calculateShippingPrice()+t.getTotalPrice()+(t.shoppingService.insuranceIsChecked?500:0)+(t.shoppingService.giftIsChecked?1590:0)," Ft"),c.xp6(1),c.Q6J("disabled",0===t.services.getCartItems().length)}}let dJ=(()=>{class n{constructor(t,i){this.services=t,this.shoppingService=i,this.cartItems=[],this.selectedProducts=[],this.navbarData=ZM,this.insuranceIsChecked=!0,this.giftIsChecked=!1,this.shippingPrice=1390,this.selectedProductPrice=this.services.selectedSizePrice}ngOnInit(){this.cartItems=this.services.getCartItems()}getProductPrice(){return this.selectedProductPrice}addToCart(){const t=this.navbarData.find(i=>"shopping-cart"===i.routerLink);t&&(t.badge=(t.badge||0)+1)}increaseQuantity(t){t.quantity++;const i=this.navbarData.find(r=>"shopping-cart"===r.routerLink);i&&(i.badge=(i.badge||0)+1)}decreaseQuantity(t){if(t.quantity>1){t.quantity--;const i=this.navbarData.find(r=>"shopping-cart"===r.routerLink);i&&(i.badge=(i.badge||0)-1)}}removeFromCart(t){const i=this.services.getCartItems().indexOf(t);if(-1!==i){const r=t.quantity;this.services.getCartItems().splice(i,1);const s=this.navbarData.find(u=>"shopping-cart"===u.routerLink);s&&(s.badge=Math.max((s.badge||0)-r,0))}}calculateShippingPrice(){return this.shippingPrice=this.getTotalPrice()>=5e4?0:1390}getTotalPrice(){let t=0;for(const i of this.services.getCartItems())t+=i.selectedPrice*i.quantity;return t}calculateTotalPayment(){return this.calculateShippingPrice()+this.getTotalPrice()+(this.insuranceIsChecked?500:0)+(this.giftIsChecked?1590:0)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(Bf),c.Y36(wz))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-shopping-cart"]],decls:2,vars:2,consts:[["class","empty-cart",4,"ngIf"],["class","shopping-cart-component",4,"ngIf"],[1,"empty-cart"],["src","./assets/images/empty-cart.jpg",1,"empty-cart-img"],[1,"empty-cart-desc"],[1,"empty-cart-button",3,"routerLink"],[1,"shopping-cart-component"],[1,"shopping-cart-card-container"],[1,"shopping-cart-card"],["class","cart-item",4,"ngFor","ngForOf"],[1,"checkout-container"],[1,"insurance"],[3,"ngModel","ngModelChange"],[3,"ngClass"],[1,"checkout-container-desc"],[1,"gift"],[1,"shipping",3,"ngStyle"],[1,"bonus",3,"ngStyle"],[1,"bonus-desc"],[1,"checkout-card"],[1,"total-price"],["routerLink","/shipping",1,"btn-hover","color-8",3,"disabled"],[1,"cart-item"],[1,"product-image",3,"src"],[1,"shopping-cart-head"],[1,"decreaseQuantity",3,"ngClass","click"],[1,"product-quantity"],[1,"increaseQuantity",3,"ngClass","click"],[1,"shopping-cart-price"],[1,"removeFromCart",3,"click"]],template:function(i,r){1&i&&(c.YNc(0,cJ,6,2,"div",0),c.YNc(1,uJ,35,17,"div",1)),2&i&&(c.Q6J("ngIf",0===r.services.getCartItems().length),c.xp6(1),c.Q6J("ngIf",r.services.getCartItems().length>0))},dependencies:[Ko,ni,Qi,Ns,Rg,i4,cw,yL],styles:['@charset "UTF-8";.shopping-cart-card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:auto;position:relative;-webkit-user-select:none;user-select:none}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]{padding:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .shopping-cart-head[_ngcontent-%COMP%]{color:#f0f8ff;font-size:15px;margin-bottom:5px;display:flex;flex:1}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .shopping-cart-price[_ngcontent-%COMP%]{color:#f0f8ff;font-size:18px;flex:0 0 100px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{color:#f0f8ff;border-radius:10px;background-color:#092c3d;flex:1;display:flex;align-items:center;margin:10px 10px 5px;border-bottom:1px solid #ccc;position:relative;gap:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:120px;height:auto;border-radius:5px;margin-right:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-head[_ngcontent-%COMP%]{font-size:15px;margin-right:30px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-price[_ngcontent-%COMP%]{font-size:18px;overflow:hidden;margin-left:50px;flex:0 0 70px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-quantity[_ngcontent-%COMP%]{font-size:15px;display:flex;align-items:center;margin-left:auto;color:#f0f8ff}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .decreaseQuantity[_ngcontent-%COMP%], .shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .increaseQuantity[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px;display:flex;justify-content:center;align-items:center;font-size:20px;margin:0 5px;border-radius:50%;padding:10px;border:1px solid #a5beda;cursor:pointer;color:#f0f8ff}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .removeFromCart[_ngcontent-%COMP%]{cursor:pointer;font-size:15px;margin-right:15px;margin-left:40px;color:#f0f8ff}@media screen and (max-width: 700px){.shopping-cart-card-container[_ngcontent-%COMP%]{display:flex;margin:0;gap:0px;width:auto}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]{padding:0;margin-left:-5px}}@media screen and (max-width: 700px) and (max-width: 365px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]{margin-left:-25px}}@media screen and (max-width: 700px) and (max-width: 365px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]{margin-left:0}}@media screen and (max-width: 700px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{gap:2px;margin:0}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-head[_ngcontent-%COMP%]{margin-right:5px;font-size:10px}}@media screen and (max-width: 700px) and (max-width: 365px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-head[_ngcontent-%COMP%]{padding-left:5px}}@media screen and (max-width: 700px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-quantity[_ngcontent-%COMP%]{font-size:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .decreaseQuantity[_ngcontent-%COMP%], .shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .increaseQuantity[_ngcontent-%COMP%]{width:25px;height:25px;font-size:18px;padding:0;margin:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-price[_ngcontent-%COMP%]{margin-left:4px;font-size:11.5px;flex:0 0 40px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .removeFromCart[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;font-size:12px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{margin-right:0;width:70px}}@media screen and (max-width: 700px) and (max-width: 300px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{display:none}}.empty-cart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.empty-cart-img[_ngcontent-%COMP%]{position:absolute;top:10%;left:50%;transform:translate(-50%,-22%);width:100%;max-width:600px;display:flex;overflow:hidden}.empty-cart-desc[_ngcontent-%COMP%]{text-align:center;position:absolute;width:300px;top:55%;left:50%;transform:translate(-50%,-10%);font-size:26px;font-weight:300;border-top:1px solid #ccc;padding-top:15px;transition:all .4s ease-in-out}.empty-cart-button[_ngcontent-%COMP%]{margin-top:10px;cursor:pointer;transition:all .3s ease-in-out;font-weight:100}.empty-cart-button[_ngcontent-%COMP%]:after{background:none repeat scroll 0 0 transparent;bottom:0;content:"";display:block;height:1px;left:50%;position:absolute;background:#191818;transition:width .3s ease 0s,left .3s ease 0s;width:0}.empty-cart-button[_ngcontent-%COMP%]:hover:after{width:100%;left:0}@media screen and (max-width: 500px){.empty-cart-desc[_ngcontent-%COMP%]{top:41%;left:50%}.empty-cart-button[_ngcontent-%COMP%]{top:48%;left:50%;font-size:22px}}.bonus[_ngcontent-%COMP%]   .bonus-desc[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;font-size:13px;margin-top:15px;width:600px}.insurance[_ngcontent-%COMP%], .gift[_ngcontent-%COMP%], .bonus[_ngcontent-%COMP%], .shipping[_ngcontent-%COMP%]{font-size:15px;border-top:1px solid #ccc;margin-top:20px;padding-top:10px}.checkout-container-desc[_ngcontent-%COMP%]{font-size:13px;margin-top:15px;opacity:.5;width:600px}.shipping[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{opacity:1}h3[_ngcontent-%COMP%]{float:right;opacity:.5;font-weight:800}h3.active[_ngcontent-%COMP%]{opacity:1}.disabled-button[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.checkout-container[_ngcontent-%COMP%]{background-color:#f4f7fa;padding:10px;height:100px;display:grid;position:relative;max-width:1000px}.checkout-container[_ngcontent-%COMP%]   .checkout-card[_ngcontent-%COMP%]{padding-top:20px}.checkout-container[_ngcontent-%COMP%]   .checkout-card[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{opacity:1;font-size:18px;font-weight:200}.checkout-container[_ngcontent-%COMP%]   .checkout-card[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:800;float:right;top:0;margin-left:40px}@media screen and (max-width: 750px){.checkout-container[_ngcontent-%COMP%]{padding:2px;display:block}.checkout-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:100%}.checkout-container[_ngcontent-%COMP%]   .insurance[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .gift[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .shipping[_ngcontent-%COMP%]{font-size:14px;margin-top:20px;padding-top:10px}}@media screen and (max-width: 750px) and (max-width: 340px){.checkout-container[_ngcontent-%COMP%]   .insurance[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .gift[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .shipping[_ngcontent-%COMP%]{font-size:12px}}@media screen and (max-width: 750px){.checkout-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:-4px}.checkout-container[_ngcontent-%COMP%]   .btn-hover[_ngcontent-%COMP%]{float:right}.checkout-container[_ngcontent-%COMP%]   .checkout-card[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;font-size:16px}}.btn-hover[_ngcontent-%COMP%]{width:200px;font-size:16px;font-weight:400;color:#f0f8ff;cursor:pointer;margin-left:auto;height:55px;text-align:center;border:none;background-size:300% 100%;border-radius:5px;transition:all .4s ease-in-out}[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background-position:100% 0;transition:all .4s ease-in-out}.btn-hover[_ngcontent-%COMP%]:hover{background-position:100% 0;transition:all .4s ease-in-out}.btn-hover[_ngcontent-%COMP%]:focus{outline:none}.btn-hover.color-8[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#455669,#485563,#203542,#092c3d);box-shadow:0 4px 15px #2d3641bf}']})}return n})(),yy=(()=>{class n{constructor(t){this.auth=t,this.currentUser$=R2(this.auth)}login(t,i){return(0,Sr.D)(G2(this.auth,t,i))}logout(){return(0,Sr.D)(this.auth.signOut())}signUp(t,i){return(0,Sr.D)(cD(this.auth,t,i))}updateProfileData(t){return(0,_n.of)(this.auth.currentUser).pipe(Jv(r=>{if(!r)throw new Error("Nincs hiteles\xedtve!");return Dm(r,t)}))}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(gp))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jx=(()=>{class n{get currentUserProfile$(){return this.authService.currentUser$.pipe((0,qo.w)(t=>{if(!t?.uid)return(0,_n.of)(null);const i=bM(this.firestore,"*users",t?.uid);return J5(i)}))}constructor(t,i){this.firestore=t,this.authService=i}addUser(t){const i=bM(this.firestore,"*users",t?.uid);return(0,Sr.D)(lV(i,t))}addGuest(t){const i=bM(this.firestore,"*guests",t?.uid);return(0,Sr.D)(lV(i,t))}updateUser(t){const i=bM(this.firestore,"*users",t?.uid);return(0,Sr.D)(nq(i,{...t}))}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Dg),c.LFG(yy))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hJ=["mat-button",""],l4=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],u4=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],fJ=["mat-mini-fab",""],mJ=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],gJ=Q1(Y1(UL(class{constructor(n){this._elementRef=n}})));let d4=(()=>{class n extends gJ{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Qc(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=Qc(t),this._updateRippleDisabled()}constructor(t,i,r,s){super(t),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=(0,c.f3M)(K1),this._rippleLoader=(0,c.f3M)(YX),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const u=t.nativeElement.classList;for(const m of mJ)this._hasHostAttributes(m.selector)&&m.mdcClasses.forEach(v=>{u.add(v)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){c.$Z()};static#t=this.\u0275dir=c.lG2({type:n,features:[c.qOj]})}return n})(),eT=(()=>{class n extends d4{constructor(t,i,r,s){super(t,i,r,s)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(Ca),c.Y36(c.R0b),c.Y36(c.QbO,8))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:hJ,ngContentSelectors:u4,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(c.F$t(l4),c._UZ(0,"span",0),c.Hsn(1),c.TgZ(2,"span",1),c.Hsn(3,1),c.qZA(),c.Hsn(4,2),c._UZ(5,"span",2)(6,"span",3)),2&i&&c.ekj("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})();const vJ=new c.OlP("mat-mdc-fab-default-options",{providedIn:"root",factory:h4});function h4(){return{color:"accent"}}const f4=h4();let yJ=(()=>{class n extends d4{constructor(t,i,r,s,u){super(t,i,r,s),this._options=u,this._isFab=!0,this._options=this._options||f4,this.color=this.defaultColor=this._options.color||f4.color}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(Ca),c.Y36(c.R0b),c.Y36(c.QbO,8),c.Y36(vJ,8))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-mini-fab",""]],hostVars:7,hostBindings:function(i,r){2&i&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:fJ,ngContentSelectors:u4,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(c.F$t(l4),c._UZ(0,"span",0),c.Hsn(1),c.TgZ(2,"span",1),c.Hsn(3,1),c.qZA(),c.Hsn(4,2),c._UZ(5,"span",2)(6,"span",3)),2&i&&c.ekj("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab:hover{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mdc-fab.mdc-ripple-upgraded--background-focused,.mdc-fab:not(.mdc-ripple-upgraded):focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-button-font-family);font-size:var(--mdc-typography-button-font-size);line-height:var(--mdc-typography-button-line-height);font-weight:var(--mdc-typography-button-font-weight);letter-spacing:var(--mdc-typography-button-letter-spacing);text-decoration:var(--mdc-typography-button-text-decoration);text-transform:var(--mdc-typography-button-text-transform);border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-fab,.mat-mdc-mini-fab{background-color:var(--mdc-fab-container-color);--mdc-fab-container-shape:50%;--mdc-fab-icon-size:24px}.mat-mdc-fab .mdc-fab__icon,.mat-mdc-mini-fab .mdc-fab__icon{width:var(--mdc-fab-icon-size);height:var(--mdc-fab-icon-size);font-size:var(--mdc-fab-icon-size)}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape)}.mat-mdc-extended-fab{font-family:var(--mdc-extended-fab-label-text-font);font-size:var(--mdc-extended-fab-label-text-size);font-weight:var(--mdc-extended-fab-label-text-weight);letter-spacing:var(--mdc-extended-fab-label-text-tracking)}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0})}return n})(),p4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Wa,BL,Wa]})}return n})();class HL{}class cm{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),u=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof cm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new cm;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof cm?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(m=>-1===s.indexOf(m)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class bJ{encodeKey(e){return m4(e)}encodeValue(e){return m4(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const EJ=/%(\d[a-f0-9])/gi,CJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function m4(n){return encodeURIComponent(n).replace(EJ,(e,t)=>CJ[t]??e)}function eO(n){return`${n}`}class Qg{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new bJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[u,m]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],v=t.get(u)||[];v.push(m),t.set(u,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(eO):[eO(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Qg({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(eO(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(eO(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class IJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function g4(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _4(n){return typeof Blob<"u"&&n instanceof Blob}function v4(n){return typeof FormData<"u"&&n instanceof FormData}class tT{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function xJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new cm),this.context||(this.context=new IJ),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+u}}else this.params=new Qg,this.urlWithParams=t}serializeBody(){return null===this.body?null:g4(this.body)||_4(this.body)||v4(this.body)||function TJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||v4(this.body)?null:_4(this.body)?this.body.type||null:g4(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,C=e.params||this.params;const M=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((L,q)=>L.set(q,e.setHeaders[q]),v)),e.setParams&&(C=Object.keys(e.setParams).reduce((L,q)=>L.set(q,e.setParams[q]),C)),new tT(t,i,s,{params:C,headers:v,context:M,reportProgress:m,responseType:r,withCredentials:u})}}var qL=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(qL||{});class DJ{constructor(e,t=200,i="OK"){this.headers=e.headers||new cm,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class nT extends DJ{constructor(e={}){super(e),this.type=qL.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function GL(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let WL=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof tT)s=t;else{let v,C;v=r.headers instanceof cm?r.headers:new cm(r.headers),r.params&&(C=r.params instanceof Qg?r.params:new Qg({fromObject:r.params})),s=new tT(t,i,void 0!==r.body?r.body:null,{headers:v,context:r.context,params:C,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const u=(0,_n.of)(s).pipe(Jv(v=>this.handler.handle(v)));if(t instanceof tT||"events"===r.observe)return u;const m=u.pipe(or(v=>v instanceof nT));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return m.pipe((0,gn.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return m.pipe((0,gn.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return m.pipe((0,gn.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return m.pipe((0,gn.U)(v=>v.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Qg).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,GL(r,i))}post(t,i,r={}){return this.request("POST",t,GL(r,i))}put(t,i,r={}){return this.request("PUT",t,GL(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(HL))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac})}return n})();const WJ=["*"];let iO;function iT(n){return function ZJ(){if(void 0===iO&&(iO=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(iO=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return iO}()?.createHTML(n)||n}function S4(n){return Error(`Unable to find icon with the name "${n}"`)}function A4(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function M4(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class wy{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let rO=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new wy(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const u=this._sanitizer.sanitize(c.q3G.HTML,r);if(!u)throw M4(r);const m=iT(u);return this._addSvgIconConfig(t,i,new wy("",m,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new wy(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(c.q3G.HTML,i);if(!s)throw M4(i);const u=iT(s);return this._addSvgIconSetConfig(t,new wy("",u,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,t);if(!i)throw A4(t);const r=this._cachedIconsByUrl.get(i);return r?(0,_n.of)(oO(r)):this._loadSvgIconFromConfig(new wy(t,null)).pipe((0,Xi.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,gn.U)(s=>oO(s)))}getNamedSvgIcon(t,i=""){const r=O4(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const u=this._iconSetConfigs.get(i);return u?this._getSvgFromIconSetConfigs(t,u):U0(S4(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,_n.of)(oO(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,gn.U)(i=>oO(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?(0,_n.of)(r):Ez(i.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(Mg(m=>{const C=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,u.url)} failed: ${m.message}`;return this._errorHandler.handleError(new Error(C)),(0,_n.of)(null)})))).pipe((0,gn.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,i);if(!u)throw S4(t);return u}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(s),m=this._extractSvgIconFromSet(u,t,s.options);if(m)return m}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Xi.b)(i=>t.svgText=i),(0,gn.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,_n.of)(null):this._fetchIcon(t).pipe((0,Xi.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const u=s.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,r);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),r);const m=this._svgElementFromString(iT("<svg></svg>"));return m.appendChild(u),this._setSvgAttributes(m,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(iT("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:u,value:m}=r[s];"id"!==u&&i.setAttribute(u,m)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function KJ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const u=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,i);if(!u)throw A4(i);const m=this._inProgressUrlFetches.get(u);if(m)return m;const v=this._httpClient.get(u,{responseType:"text",withCredentials:s}).pipe((0,gn.U)(C=>iT(C)),MM(()=>this._inProgressUrlFetches.delete(u)),(0,jN.B)());return this._inProgressUrlFetches.set(u,v),v}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(O4(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return QJ(s)?new wy(s.url,null,s.options):new wy(s,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(WL,8),c.LFG(Jr),c.LFG(Re,8),c.LFG(c.qLn))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oO(n){return n.cloneNode(!0)}function O4(n,e){return n+":"+e}function QJ(n){return!(!n.url||!n.options)}const XJ=Q1(class{constructor(n){this._elementRef=n}}),JJ=new c.OlP("MAT_ICON_DEFAULT_OPTIONS"),eee=new c.OlP("mat-icon-location",{providedIn:"root",factory:function tee(){const n=(0,c.f3M)(Re),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),P4=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],nee=P4.map(n=>`[${n}]`).join(", "),iee=/^url\(['"]?#(.*?)['"]?\)$/;let KL=(()=>{class n extends XJ{get inline(){return this._inline}set inline(t){this._inline=Qc(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,u,m){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=u,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=$u.w0.EMPTY,m&&(m.color&&(this.color=this.defaultColor=m.color),m.fontSet&&(this.fontSet=m.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(u=>{s.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(nee),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)P4.forEach(u=>{const m=i[s],v=m.getAttribute(u),C=v?v.match(iee):null;if(C){let M=r.get(m);M||(M=[],r.set(m,M)),M.push({name:u,value:C[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Kc(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(rO),c.$8M("aria-hidden"),c.Y36(eee),c.Y36(c.qLn),c.Y36(JJ,8))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(c.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),c.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:WJ,decls:1,vars:0,template:function(i,r){1&i&&(c.F$t(),c.Hsn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),R4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Wa,Wa]})}return n})();const ree=["*",[["mat-toolbar-row"]]],oee=["*","mat-toolbar-row"],see=Q1(class{constructor(n){this._elementRef=n}});let aee=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return n})(),cee=(()=>{class n extends see{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(Ca),c.Y36(Re))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(1&i&&c.Suo(s,aee,5),2&i){let u;c.iGM(u=c.CRH())&&(r._toolbarRows=u)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(i,r){2&i&&c.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[c.qOj],ngContentSelectors:oee,decls:2,vars:0,template:function(i,r){1&i&&(c.F$t(ree),c.Hsn(0),c.Hsn(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return n})(),k4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Wa,Wa]})}return n})();var N4=Q(1954);let YL,lee=1;const sO={};function F4(n){return n in sO&&(delete sO[n],!0)}const uee={setImmediate(n){const e=lee++;return sO[e]=!0,YL||(YL=Promise.resolve()),YL.then(()=>F4(e)&&n()),e},clearImmediate(n){F4(n)}},{setImmediate:dee,clearImmediate:hee}=uee,aO={setImmediate(...n){const{delegate:e}=aO;return(e?.setImmediate||dee)(...n)},clearImmediate(n){const{delegate:e}=aO;return(e?.clearImmediate||hee)(n)},delegate:void 0};var L4=Q(2631);const QL=new class pee extends L4.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class fee extends N4.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=aO.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(aO.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function U4(n,e){return e?t=>KI(e.pipe(Kc(1),function mee(){return(0,Nr.e)((n,e)=>{n.subscribe((0,ci.x)(e,bN.Z))})}()),t.pipe(U4(n))):(0,Ea.z)((t,i)=>(0,So.Xf)(n(t,i)).pipe(Kc(1),ZV(t)))}var gee=Q(671);function V4(n=0,e,t=K0.P){let i=-1;return null!=e&&((0,gee.K)(e)?t=e:i=e),new rr.y(r=>{let s=function _ee(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function B4(n,e=K0.z){const t=V4(n,e);return U4(()=>t)}class XL{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class vee extends XL{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class j4 extends XL{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class yee extends XL{constructor(e){super(),this.element=e instanceof c.SBq?e.nativeElement:e}}class bee{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof vee?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof j4?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof yee?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class wee extends bee{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=u=>{const m=u.element,v=this._document.createComment("dom-portal");m.parentNode.insertBefore(v,m),this.outletElement.appendChild(m),this._attachedPortal=u,super.setDisposeFn(()=>{v.parentNode&&v.parentNode.replaceChild(m,v)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||c.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Eee=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();var Cee=Q(4266);const Iee=["addListener","removeListener"],xee=["addEventListener","removeEventListener"],Tee=["on","off"];function JL(n,e,t,i){if((0,Fd.m)(t)&&(i=t,t=void 0),i)return JL(n,e,t).pipe(gN(i));const[r,s]=function Aee(n){return(0,Fd.m)(n.addEventListener)&&(0,Fd.m)(n.removeEventListener)}(n)?xee.map(u=>m=>n[u](e,m,t)):function Dee(n){return(0,Fd.m)(n.addListener)&&(0,Fd.m)(n.removeListener)}(n)?Iee.map(z4(n,e)):function See(n){return(0,Fd.m)(n.on)&&(0,Fd.m)(n.off)}(n)?Tee.map(z4(n,e)):[];if(!r&&(0,Cee.z)(n))return(0,Ea.z)(u=>JL(u,e,t))((0,So.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new rr.y(u=>{const m=(...v)=>u.next(1<v.length?v:v[0]);return r(m),()=>s(m)})}function z4(n,e){return t=>i=>n[t](e,i)}const rT={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=rT;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new $u.w0(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=rT;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=rT;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class Oee extends L4.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Mee extends N4.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=rT.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(rT.cancelAnimationFrame(t),e._scheduled=void 0)}});function H4(n,e=K0.z){return function Ree(n){return(0,Nr.e)((e,t)=>{let i=!1,r=null,s=null,u=!1;const m=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const C=r;r=null,t.next(C)}u&&t.complete()},v=()=>{s=null,u&&t.complete()};e.subscribe((0,ci.x)(t,C=>{i=!0,r=C,s||(0,So.Xf)(n(C)).subscribe(s=(0,ci.x)(t,m,v))},()=>{u=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>V4(n,e))}let Nee=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new jn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new rr.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(H4(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,_n.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(or(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Yg(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>JL(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(c.R0b),c.LFG(Ca),c.LFG(Re,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$4=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new jn.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(H4(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Ca),c.LFG(c.R0b),c.LFG(Re,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e2=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})(),q4=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Qx,e2,Qx,e2]})}return n})();const G4=jQ();class Lee{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Js(-this._previousScrollPosition.left),e.style.top=Js(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",u=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),G4&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),G4&&(i.scrollBehavior=s,r.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Uee{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(or(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class W4{enable(){}disable(){}attach(){}}function t2(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Z4(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Vee{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();t2(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Bee=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new W4,this.close=u=>new Uee(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new Lee(this._viewportRuler,this._document),this.reposition=u=>new Vee(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Nee),c.LFG($4),c.LFG(c.R0b),c.LFG(Re))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class K4{constructor(e){if(this.scrollStrategy=new W4,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class jee{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Y4=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zee=(()=>{class n extends Y4{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let u=s.length-1;u>-1;u--)if(s[u]._keydownEvents.observers.length>0){const m=s[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>m.next(r)):m.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re),c.LFG(c.R0b,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hee=(()=>{class n extends Y4{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Kg(s)},this._clickListener=s=>{const u=Kg(s),m="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const v=this._attachedOverlays.slice();for(let C=v.length-1;C>-1;C--){const M=v[C];if(M._outsidePointerEvents.observers.length<1||!M.hasAttached())continue;if(M.overlayElement.contains(u)||M.overlayElement.contains(m))break;const L=M._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>L.next(s)):L.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re),c.LFG(Ca),c.LFG(c.R0b,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q4=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||AL()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),AL()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Re),c.LFG(Ca))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class $ee{constructor(e,t,i,r,s,u,m,v,C,M=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=u,this._document=m,this._location=v,this._outsideClickDispatcher=C,this._animationsDisabled=M,this._backdropElement=null,this._backdropClick=new jn.x,this._attachments=new jn.x,this._detachments=new jn.x,this._locationChanges=$u.w0.EMPTY,this._backdropClickHandler=L=>this._backdropClick.next(L),this._backdropTransitionendHandler=L=>{this._disposeBackdrop(L.target)},this._keydownEvents=new jn.x,this._outsidePointerEvents=new jn.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Kc(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Js(this._config.width),e.height=Js(this._config.height),e.minWidth=Js(this._config.minWidth),e.minHeight=Js(this._config.minHeight),e.maxWidth=Js(this._config.maxWidth),e.maxHeight=Js(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=q1(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ud((0,kg.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const X4="cdk-overlay-connected-position-bounding-box",qee=/([A-Za-z%]+)$/;class Gee{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new jn.x,this._resizeSubscription=$u.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(X4),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let u;for(let m of this._preferredPositions){let v=this._getOriginPoint(e,r,m),C=this._getOverlayPoint(v,t,m),M=this._getOverlayFit(C,t,i,m);if(M.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(m,v);this._canFitWithFlexibleDimensions(M,C,i)?s.push({position:m,origin:v,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(v,m)}):(!u||u.overlayFit.visibleArea<M.visibleArea)&&(u={overlayFit:M,overlayPoint:C,originPoint:v,position:m,overlayRect:t})}if(s.length){let m=null,v=-1;for(const C of s){const M=C.boundingBoxRect.width*C.boundingBoxRect.height*(C.position.weight||1);M>v&&(v=M,m=C)}return this._isPushed=!1,void this._applyPosition(m.position,m.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ey(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(X4),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,m=this._isRtl()?e.left:e.right;r="start"==i.originX?u:m}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=e6(t);let{x:u,y:m}=e,v=this._getOffset(r,"x"),C=this._getOffset(r,"y");v&&(u+=v),C&&(m+=C);let q=0-m,ne=m+s.height-i.height,ae=this._subtractOverflows(s.width,0-u,u+s.width-i.width),ye=this._subtractOverflows(s.height,q,ne),We=ae*ye;return{visibleArea:We,isCompletelyWithinViewport:s.width*s.height===We,fitsInViewportVertically:ye===s.height,fitsInViewportHorizontally:ae==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,u=J4(this._overlayRef.getConfig().minHeight),m=J4(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=u&&u<=r)&&(e.fitsInViewportHorizontally||null!=m&&m<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=e6(t),s=this._viewportRect,u=Math.max(e.x+r.width-s.width,0),m=Math.max(e.y+r.height-s.height,0),v=Math.max(s.top-i.top-e.y,0),C=Math.max(s.left-i.left-e.x,0);let M=0,L=0;return M=r.width<=s.width?C||-u:e.x<this._viewportMargin?s.left-i.left-e.x:0,L=r.height<=s.height?v||-m:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:M,y:L},{x:e.x+M,y:e.y+L}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new jee(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,u,m,M,L,q;if("top"===t.overlayY)u=e.y,s=i.height-u+this._viewportMargin;else if("bottom"===t.overlayY)m=i.height-e.y+2*this._viewportMargin,s=i.height-m+this._viewportMargin;else{const ne=Math.min(i.bottom-e.y+i.top,e.y),ae=this._lastBoundingBoxSize.height;s=2*ne,u=e.y-ne,s>ae&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-ae/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)q=i.width-e.x+this._viewportMargin,M=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)L=e.x,M=i.right-e.x;else{const ne=Math.min(i.right-e.x+i.left,e.x),ae=this._lastBoundingBoxSize.width;M=2*ne,L=e.x-ne,M>ae&&!this._isInitialRender&&!this._growAfterOpen&&(L=e.x-ae/2)}return{top:u,left:L,bottom:m,right:q,width:M,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;r.height=Js(i.height),r.top=Js(i.top),r.bottom=Js(i.bottom),r.width=Js(i.width),r.left=Js(i.left),r.right=Js(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Js(s)),u&&(r.maxWidth=Js(u))}this._lastBoundingBoxSize=i,Ey(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ey(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ey(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(r){const M=this._viewportRuler.getViewportScrollPosition();Ey(i,this._getExactOverlayY(t,e,M)),Ey(i,this._getExactOverlayX(t,e,M))}else i.position="static";let m="",v=this._getOffset(t,"x"),C=this._getOffset(t,"y");v&&(m+=`translateX(${v}px) `),C&&(m+=`translateY(${C}px)`),i.transform=m.trim(),u.maxHeight&&(r?i.maxHeight=Js(u.maxHeight):s&&(i.maxHeight="")),u.maxWidth&&(r?i.maxWidth=Js(u.maxWidth):s&&(i.maxWidth="")),Ey(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Js(s.y),r}_getExactOverlayX(e,t,i){let u,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Js(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Z4(e,i),isOriginOutsideView:t2(e,i),isOverlayClipped:Z4(t,i),isOverlayOutsideView:t2(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&q1(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof c.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Ey(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function J4(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(qee);return t&&"px"!==t?null:parseFloat(e)}return n||null}function e6(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const t6="cdk-global-overlay-wrapper";class Wee{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(t6),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:u,maxHeight:m}=i,v=!("100%"!==r&&"100vw"!==r||u&&"100%"!==u&&"100vw"!==u),C=!("100%"!==s&&"100vh"!==s||m&&"100%"!==m&&"100vh"!==m),M=this._xPosition,L=this._xOffset,q="rtl"===this._overlayRef.getConfig().direction;let ne="",ae="",ye="";v?ye="flex-start":"center"===M?(ye="center",q?ae=L:ne=L):q?"left"===M||"end"===M?(ye="flex-end",ne=L):("right"===M||"start"===M)&&(ye="flex-start",ae=L):"left"===M||"start"===M?(ye="flex-start",ne=L):("right"===M||"end"===M)&&(ye="flex-end",ae=L),e.position=this._cssPosition,e.marginLeft=v?"0":ne,e.marginTop=C?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=v?"0":ae,t.justifyContent=ye,t.alignItems=C?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(t6),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Zee=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Wee}flexibleConnectedTo(t){return new Gee(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG($4),c.LFG(Re),c.LFG(Ca),c.LFG(Q4))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kee=0,cO=(()=>{class n{constructor(t,i,r,s,u,m,v,C,M,L,q,ne){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=u,this._injector=m,this._ngZone=v,this._document=C,this._directionality=M,this._location=L,this._outsideClickDispatcher=q,this._animationsModuleType=ne}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),u=new K4(t);return u.direction=u.direction||this._directionality.value,new $ee(s,i,r,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Kee++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new wee(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Bee),c.LFG(Q4),c.LFG(c._Vd),c.LFG(Zee),c.LFG(zee),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(Re),c.LFG(LL),c.LFG(mt),c.LFG(Hee),c.LFG(c.QbO,8))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Xee={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[cO],useFactory:function Qee(n){return()=>n.scrollStrategies.reposition()}};let Jee=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[cO,Xee],imports:[Qx,Eee,q4,q4]})}return n})();const ete=["mat-menu-item",""];function tte(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",3),c._UZ(1,"polygon",4),c.qZA())}const nte=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],ite=["mat-icon, [matMenuItemIcon]","*"];function rte(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",0),c.NdJ("keydown",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._handleKeydown(r))})("click",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.closed.emit("click"))})("@transformMenu.start",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._onAnimationStart(r))})("@transformMenu.done",function(r){c.CHM(t);const s=c.oxw();return c.KtG(s._onAnimationDone(r))}),c.TgZ(1,"div",1),c.Hsn(2),c.qZA()()}if(2&n){const t=c.oxw();c.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),c.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const ote=["*"],n2=new c.OlP("MAT_MENU_PANEL"),ste=UL(Y1(class{}));let lO=(()=>{class n extends ste{constructor(t,i,r,s,u){super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=u,this.role="menuitem",this._hovered=new jn.x,this._focused=new jn.x,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(Re),c.Y36(K1),c.Y36(n2,8),c.Y36(c.sBO))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(i,r){1&i&&c.NdJ("click",function(u){return r._checkDisabled(u)})("mouseenter",function(){return r._handleMouseEnter()}),2&i&&(c.uIk("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),c.ekj("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[c.qOj],attrs:ete,ngContentSelectors:ite,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false","aria-hidden","true",4,"ngIf"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,r){1&i&&(c.F$t(nte),c.Hsn(0),c.TgZ(1,"span",0),c.Hsn(2,1),c.qZA(),c._UZ(3,"div",1),c.YNc(4,tte,2,0,"svg",2)),2&i&&(c.xp6(3),c.Q6J("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),c.xp6(1),c.Q6J("ngIf",r._triggersSubmenu))},dependencies:[Qi,VL],encapsulation:2,changeDetection:0})}return n})();const ate=new c.OlP("MatMenuContent"),uO={transformMenu:fl("transformMenu",[qh("void",dr({opacity:0,transform:"scale(0.8)"})),qs("void => enter",sr("120ms cubic-bezier(0, 0, 0.2, 1)",dr({opacity:1,transform:"scale(1)"}))),qs("* => void",sr("100ms 25ms linear",dr({opacity:0})))]),fadeInItems:fl("fadeInItems",[qh("showing",dr({opacity:1})),qs("void => *",[dr({opacity:0}),sr("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let cte=0;const n6=new c.OlP("mat-menu-default-options",{providedIn:"root",factory:function lte(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let oT=(()=>{class n{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Qc(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Qc(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._changeDetectorRef=s,this._directDescendantItems=new c.n_E,this._classList={},this._panelAnimationState="void",this._animationDone=new jn.x,this.closed=new c.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+cte++,this.overlayPanelClass=r.overlayPanelClass||"",this._xPosition=r.xPosition,this._yPosition=r.yPosition,this.backdropClass=r.backdropClass,this._overlapTrigger=r.overlapTrigger,this._hasBackdrop=r.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new vX(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Sg(this._directDescendantItems),(0,qo.w)(t=>(0,kg.T)(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(Sg(this._directDescendantItems),(0,qo.w)(i=>(0,kg.T)(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:MH(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Kc(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(u=>u.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Sg(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(n6),c.Y36(c.sBO))};static#t=this.\u0275dir=c.lG2({type:n,contentQueries:function(i,r,s){if(1&i&&(c.Suo(s,ate,5),c.Suo(s,lO,5),c.Suo(s,lO,4)),2&i){let u;c.iGM(u=c.CRH())&&(r.lazyContent=u.first),c.iGM(u=c.CRH())&&(r._allItems=u),c.iGM(u=c.CRH())&&(r.items=u)}},viewQuery:function(i,r){if(1&i&&c.Gf(c.Rgc,5),2&i){let s;c.iGM(s=c.CRH())&&(r.templateRef=s.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}})}return n})(),ute=(()=>{class n extends oT{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(n6),c.Y36(c.sBO))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["mat-menu"]],hostAttrs:["ngSkipHydration",""],hostVars:3,hostBindings:function(i,r){2&i&&c.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[c._Bn([{provide:n2,useExisting:n}]),c.qOj],ngContentSelectors:ote,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content"]],template:function(i,r){1&i&&(c.F$t(),c.YNc(0,rte,3,6,"ng-template"))},dependencies:[Ko],styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;white-space:normal;font-family:var(--mat-menu-item-label-text-font);line-height:var(--mat-menu-item-label-text-line-height);font-size:var(--mat-menu-item-label-text-size);letter-spacing:var(--mat-menu-item-label-text-tracking);font-weight:var(--mat-menu-item-label-text-weight)}.mat-mdc-menu-panel{--mat-menu-container-shape:4px;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape);background-color:var(--mat-menu-container-color);will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;align-items:center;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color)}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color)}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[uO.transformMenu,uO.fadeInItems]},changeDetection:0})}return n})();const i6=new c.OlP("mat-menu-scroll-strategy"),hte={provide:i6,deps:[cO],useFactory:function dte(n){return()=>n.scrollStrategies.reposition()}},r6=hw({passive:!0});let fte=(()=>{class n{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,i,r,s,u,m,v,C,M){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=m,this._dir=v,this._focusMonitor=C,this._ngZone=M,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=$u.w0.EMPTY,this._hoverSubscription=$u.w0.EMPTY,this._menuCloseSubscription=$u.w0.EMPTY,this._changeDetectorRef=(0,c.f3M)(c.sBO),this._handleTouchStart=L=>{NL(L)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new c.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new c.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=u instanceof oT?u:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,r6)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,r6),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const i=this._createOverlay(t),r=i.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,i.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof oT&&(t._startAnimation(),t._directDescendantItems.changes.pipe(Ud(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof oT?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(or(r=>"void"===r.toState),Kc(1),Ud(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let i=0,r=t.parentMenu;for(;r;)i++,r=r.parentMenu;t.setElevation(i)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new K4({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",u="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,u)):t.setPositionClasses(s,u)})}_setPosition(t,i){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[u,m]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[v,C]=[u,m],[M,L]=[r,s],q=0;if(this.triggersSubmenu()){if(L=r="before"===t.xPosition?"start":"end",s=M="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const ne=this._parentMaterialMenu.items.first;this._parentInnerPadding=ne?ne._getHostElement().offsetTop:0}q="bottom"===u?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(v="top"===u?"bottom":"top",C="top"===m?"bottom":"top");i.withPositions([{originX:r,originY:v,overlayX:M,overlayY:u,offsetY:q},{originX:s,originY:v,overlayX:L,overlayY:u,offsetY:q},{originX:r,originY:C,overlayX:M,overlayY:m,offsetY:-q},{originX:s,originY:C,overlayX:L,overlayY:m,offsetY:-q}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,_n.of)(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(or(u=>u!==this._menuItemInstance),or(()=>this._menuOpen)):(0,_n.of)();return(0,kg.T)(t,r,s,i)}_handleMousedown(t){kL(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(or(t=>t===this._menuItemInstance&&!t.disabled),B4(0,QL)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof oT&&this.menu._isAnimating?this.menu._animationDone.pipe(Kc(1),B4(0,QL),Ud(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new j4(t.templateRef,this._viewContainerRef)),this._portal}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(cO),c.Y36(c.SBq),c.Y36(c.s_b),c.Y36(i6),c.Y36(n2,8),c.Y36(lO,10),c.Y36(LL,8),c.Y36(K1),c.Y36(c.R0b))};static#t=this.\u0275dir=c.lG2({type:n,hostVars:3,hostBindings:function(i,r){1&i&&c.NdJ("click",function(u){return r._handleClick(u)})("mousedown",function(u){return r._handleMousedown(u)})("keydown",function(u){return r._handleKeydown(u)}),2&i&&c.uIk("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}})}return n})(),pte=(()=>{class n extends fte{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=c.n5z(n)))(r||n)}}();static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[c.qOj]})}return n})(),o6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({providers:[hte],imports:[Oi,BL,Wa,Jee,e2,Wa]})}return n})();function mte(n,e){1&n&&(c.TgZ(0,"h1"),c._uU(1," El\u0151bb jelentkezzen be!"),c.qZA())}function gte(n,e){if(1&n&&(c.TgZ(0,"h1"),c._uU(1),c.qZA()),2&n){const t=e.ngIf;c.xp6(1),c.hij(" \xdcdv\xf6z\xf6lj\xfck, ",t.displayName,"!")}}function _te(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"button",9),c._UZ(2,"img",10),c.TgZ(3,"mat-icon"),c._uU(4,"expand_more"),c.qZA()(),c.BQk()),2&n){const t=e.ngIf;c.oxw();const i=c.MAs(12);let r;c.xp6(1),c.Q6J("matMenuTriggerFor",i),c.xp6(1),c.Q6J("src",null!==(r=t.photoURL)&&void 0!==r?r:"assets/image-placeholder.png",c.LSH)}}function vte(n,e){1&n&&(c.TgZ(0,"button",11)(1,"mat-icon"),c._uU(2,"login"),c.qZA(),c._uU(3," Bejelentkez\xe9s "),c.qZA())}let s6=(()=>{class n{constructor(t,i,r,s){this.authService=t,this.router=i,this.usersService=r,this.services=s,this.user$=this.usersService.currentUserProfile$,this.items=[],this.users=[],this.userOrders=[]}ngOnInit(){}logout(){this.authService.logout().subscribe(()=>{this.router.navigate(["/user"])})}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(yy),c.Y36(pc),c.Y36(Jx),c.Y36(Bf))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-user"]],decls:19,vars:10,consts:[["color","primary"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["loginButton",""],[1,"content"],["userMenu","matMenu"],["mat-menu-item","","routerLink","/home"],["mat-menu-item","","routerLink","/user/profile"],["mat-menu-item","",3,"click"],["mat-button","",3,"matMenuTriggerFor"],["width","30","height","30",1,"profile-image-toolbar",3,"src"],["mat-button","","routerLink","login"]],template:function(i,r){if(1&i&&(c.TgZ(0,"mat-toolbar",0),c.YNc(1,mte,2,0,"h1",1),c.ALo(2,"async"),c.YNc(3,gte,2,1,"h1",1),c.ALo(4,"async"),c.YNc(5,_te,5,2,"ng-container",2),c.ALo(6,"async"),c.YNc(7,vte,4,0,"ng-template",null,3,c.W1O),c.qZA(),c.TgZ(9,"div",4),c._UZ(10,"router-outlet"),c.qZA(),c.TgZ(11,"mat-menu",null,5)(13,"button",6),c._uU(14,"Rendel\xe9sek"),c.qZA(),c.TgZ(15,"button",7),c._uU(16,"Profil"),c.qZA(),c.TgZ(17,"button",8),c.NdJ("click",function(){return r.logout()}),c._uU(18,"Kijelentkez\xe9s"),c.qZA()()),2&i){const s=c.MAs(8);c.xp6(1),c.Q6J("ngIf",!c.lcZ(2,4,r.user$)),c.xp6(2),c.Q6J("ngIf",c.lcZ(4,6,r.user$)),c.xp6(2),c.Q6J("ngIf",c.lcZ(6,8,r.user$))("ngIfElse",s)}},dependencies:[Qi,BM,Rg,eT,KL,cee,ute,lO,pte,Mr],styles:["mat-toolbar[_ngcontent-%COMP%]{justify-content:space-between;margin-top:-15px;background-color:#17455c;border-radius:15px;box-shadow:0 6px 20px #00000063}.conent[_ngcontent-%COMP%]{padding:32px}.profile-image-toolbar[_ngcontent-%COMP%]{border-radius:100%;margin-right:8px;margin-top:10px}"]})}return n})();const a6=hw({passive:!0});let yte=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Lf.E;const i=Yg(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new jn.x,u="cdk-text-field-autofilled",m=v=>{"cdk-text-field-autofill-start"!==v.animationName||i.classList.contains(u)?"cdk-text-field-autofill-end"===v.animationName&&i.classList.contains(u)&&(i.classList.remove(u),this._ngZone.run(()=>s.next({target:v.target,isAutofilled:!1}))):(i.classList.add(u),this._ngZone.run(()=>s.next({target:v.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",m,a6),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",m,a6)}}),s}stopMonitoring(t){const i=Yg(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(Ca),c.LFG(c.R0b))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bte=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({})}return n})();class wte{constructor(e){this._box=e,this._destroyed=new jn.x,this._resizeSubject=new jn.x,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new rr.y(t=>{const i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(or(t=>t.some(i=>i.target===e)),QF({bufferSize:1,refCount:!0}),Ud(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Ete=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=(0,c.f3M)(c.R0b)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new wte(r)),this._observers.get(r).observe(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Cte=["notch"],Ite=["matFormFieldNotchedOutline",""],xte=["*"],Tte=["textField"],Dte=["iconPrefixContainer"],Ste=["textPrefixContainer"];function Ate(n,e){1&n&&c._UZ(0,"span",19)}function Mte(n,e){if(1&n&&(c.TgZ(0,"label",17),c.Hsn(1,1),c.YNc(2,Ate,1,0,"span",18),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),c.uIk("for",t._control.id),c.xp6(2),c.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required)}}function Ote(n,e){if(1&n&&c.YNc(0,Mte,3,5,"label",16),2&n){const t=c.oxw();c.Q6J("ngIf",t._hasFloatingLabel())}}function Pte(n,e){1&n&&c._UZ(0,"div",20)}function Rte(n,e){}function kte(n,e){if(1&n&&c.YNc(0,Rte,0,0,"ng-template",22),2&n){c.oxw(2);const t=c.MAs(1);c.Q6J("ngTemplateOutlet",t)}}function Nte(n,e){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,kte,1,1,"ng-template",9),c.qZA()),2&n){const t=c.oxw();c.Q6J("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),c.xp6(1),c.Q6J("ngIf",!t._forceDisplayInfixLabel())}}function Fte(n,e){1&n&&(c.TgZ(0,"div",23,24),c.Hsn(2,2),c.qZA())}function Lte(n,e){1&n&&(c.TgZ(0,"div",25,26),c.Hsn(2,3),c.qZA())}function Ute(n,e){}function Vte(n,e){if(1&n&&c.YNc(0,Ute,0,0,"ng-template",22),2&n){c.oxw();const t=c.MAs(1);c.Q6J("ngTemplateOutlet",t)}}function Bte(n,e){1&n&&(c.TgZ(0,"div",27),c.Hsn(1,4),c.qZA())}function jte(n,e){1&n&&(c.TgZ(0,"div",28),c.Hsn(1,5),c.qZA())}function zte(n,e){1&n&&c._UZ(0,"div",29)}function Hte(n,e){if(1&n&&(c.TgZ(0,"div",30),c.Hsn(1,6),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState)}}function $te(n,e){if(1&n&&(c.TgZ(0,"mat-hint",34),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("id",t._hintLabelId),c.xp6(1),c.Oqu(t.hintLabel)}}function qte(n,e){if(1&n&&(c.TgZ(0,"div",31),c.YNc(1,$te,2,2,"mat-hint",32),c.Hsn(2,7),c._UZ(3,"div",33),c.Hsn(4,8),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",t.hintLabel)}}const Gte=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Wte=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let pw=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]})}return n})(),Zte=0;const c6=new c.OlP("MatError");let l6=(()=>{class n{constructor(t,i){this.id="mat-mdc-error-"+Zte++,t||i.nativeElement.setAttribute("aria-live","polite")}static#e=this.\u0275fac=function(i){return new(i||n)(c.$8M("aria-live"),c.Y36(c.SBq))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(i,r){2&i&&c.Ikx("id",r.id)},inputs:{id:"id"},features:[c._Bn([{provide:c6,useExisting:n}])]})}return n})(),Kte=0,u6=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+Kte++}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(c.Ikx("id",r.id),c.uIk("align",null),c.ekj("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}return n})();const Yte=new c.OlP("MatPrefix"),Qte=new c.OlP("MatSuffix"),d6=new c.OlP("FloatingLabelParent");let h6=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,c.f3M)(Ete),this._ngZone=(0,c.f3M)(c.R0b),this._parent=(0,c.f3M)(d6),this._resizeSubscription=new $u.w0}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function Xte(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&c.ekj("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();const f6="mdc-line-ripple--active",dO="mdc-line-ripple--deactivating";let p6=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,u=s.contains(dO);"opacity"===r.propertyName&&u&&s.remove(f6,dO)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(dO),t.add(f6)}deactivate(){this._elementRef.nativeElement.classList.add(dO)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(c.R0b))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),m6=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(c.R0b))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&c.Gf(Cte,5),2&i){let s;c.iGM(s=c.CRH())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&c.ekj("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Ite,ngContentSelectors:xte,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(c.F$t(),c._UZ(0,"div",0),c.TgZ(1,"div",1,2),c.Hsn(3),c.qZA(),c._UZ(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const Jte={transitionMessages:fl("transitionMessages",[qh("enter",dr({opacity:1,transform:"translateY(0%)"})),qs("void => enter",[dr({opacity:0,transform:"translateY(-5px)"}),sr("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let g6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=c.lG2({type:n})}return n})();const _6=new c.OlP("MatFormField"),ene=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let v6=0,hO=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Qc(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,u,m,v,C){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=u,this._defaults=m,this._animationMode=v,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+v6++,this._hintLabelId="mat-mdc-hint-"+v6++,this._subscriptAnimationState="",this._destroyed=new jn.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,m&&(m.appearance&&(this.appearance=m.appearance),this._hideRequiredMarker=!!m?.hideRequiredMarker,m.color&&(this.color=m.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Ud(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,kg.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ud(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Ud(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,u=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+u}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(c.R0b),c.Y36(LL),c.Y36(Ca),c.Y36(ene,8),c.Y36(c.QbO,8),c.Y36(Re))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(c.Suo(s,pw,5),c.Suo(s,pw,7),c.Suo(s,g6,5),c.Suo(s,Yte,5),c.Suo(s,Qte,5),c.Suo(s,c6,5),c.Suo(s,u6,5)),2&i){let u;c.iGM(u=c.CRH())&&(r._labelChildNonStatic=u.first),c.iGM(u=c.CRH())&&(r._labelChildStatic=u.first),c.iGM(u=c.CRH())&&(r._formFieldControl=u.first),c.iGM(u=c.CRH())&&(r._prefixChildren=u),c.iGM(u=c.CRH())&&(r._suffixChildren=u),c.iGM(u=c.CRH())&&(r._errorChildren=u),c.iGM(u=c.CRH())&&(r._hintChildren=u)}},viewQuery:function(i,r){if(1&i&&(c.Gf(Tte,5),c.Gf(Dte,5),c.Gf(Ste,5),c.Gf(h6,5),c.Gf(m6,5),c.Gf(p6,5)),2&i){let s;c.iGM(s=c.CRH())&&(r._textField=s.first),c.iGM(s=c.CRH())&&(r._iconPrefixContainer=s.first),c.iGM(s=c.CRH())&&(r._textPrefixContainer=s.first),c.iGM(s=c.CRH())&&(r._floatingLabel=s.first),c.iGM(s=c.CRH())&&(r._notchedOutline=s.first),c.iGM(s=c.CRH())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&c.ekj("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:_6,useExisting:n},{provide:d6,useExisting:n}])],ngContentSelectors:Wte,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(i,r){1&i&&(c.F$t(Gte),c.YNc(0,Ote,1,1,"ng-template",null,0,c.W1O),c.TgZ(2,"div",1,2),c.NdJ("click",function(u){return r._control.onContainerClick(u)}),c.YNc(4,Pte,1,0,"div",3),c.TgZ(5,"div",4),c.YNc(6,Nte,2,2,"div",5),c.YNc(7,Fte,3,0,"div",6),c.YNc(8,Lte,3,0,"div",7),c.TgZ(9,"div",8),c.YNc(10,Vte,1,1,"ng-template",9),c.Hsn(11),c.qZA(),c.YNc(12,Bte,2,0,"div",10),c.YNc(13,jte,2,0,"div",11),c.qZA(),c.YNc(14,zte,1,0,"div",12),c.qZA(),c.TgZ(15,"div",13),c.YNc(16,Hte,2,1,"div",14),c.YNc(17,qte,5,2,"div",15),c.qZA()),2&i&&(c.xp6(2),c.ekj("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),c.xp6(2),c.Q6J("ngIf",!r._hasOutline()&&!r._control.disabled),c.xp6(2),c.Q6J("ngIf",r._hasOutline()),c.xp6(1),c.Q6J("ngIf",r._hasIconPrefix),c.xp6(1),c.Q6J("ngIf",r._hasTextPrefix),c.xp6(2),c.Q6J("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),c.xp6(2),c.Q6J("ngIf",r._hasTextSuffix),c.xp6(1),c.Q6J("ngIf",r._hasIconSuffix),c.xp6(1),c.Q6J("ngIf",!r._hasOutline()),c.xp6(1),c.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),c.Q6J("ngSwitch",r._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},dependencies:[Qi,ta,ks,Ya,u6,h6,m6,p6],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Jte.transitionMessages]},changeDetection:0})}return n})(),sT=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Wa,Oi,RH,Wa]})}return n})();const ine=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),rne=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let one=0;const sne=HX(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new jn.x}});let fO=(()=>{class n extends sne{get disabled(){return this._disabled}set disabled(t){this._disabled=Qc(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Ga.required)??!1}set required(t){this._required=Qc(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&DH().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Qc(t)}constructor(t,i,r,s,u,m,v,C,M,L){super(m,s,u,r),this._elementRef=t,this._platform=i,this._autofillMonitor=C,this._formField=L,this._uid="mat-input-"+one++,this.focused=!1,this.stateChanges=new jn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ae=>DH().has(ae)),this._iOSKeyupListener=ae=>{const ye=ae.target;!ye.value&&0===ye.selectionStart&&0===ye.selectionEnd&&(ye.setSelectionRange(1,1),ye.setSelectionRange(0,0))};const q=this._elementRef.nativeElement,ne=q.nodeName.toLowerCase();this._inputValueAccessor=v||q,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&M.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ne,this._isTextarea="textarea"===ne,this._isInFormField=!!L,this._isNativeSelect&&(this.controlType=q.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){rne.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.SBq),c.Y36(Ca),c.Y36(am,10),c.Y36(z1,8),c.Y36(Zg,8),c.Y36(qX),c.Y36(ine,10),c.Y36(yte),c.Y36(c.R0b),c.Y36(_6,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&c.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(c.Ikx("id",r.id)("disabled",r.disabled)("required",r.required),c.uIk("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),c.ekj("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:g6,useExisting:n}]),c.qOj,c.TTD]})}return n})(),w6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Wa,sT,sT,bte,Wa]})}return n})();function ane(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," E-mail sz\xfcks\xe9ges "),c.qZA())}function cne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Jelsz\xf3 sz\xfcks\xe9ges "),c.qZA())}let lne=(()=>{class n{constructor(t,i,r,s){this.authService=t,this.toast=i,this.router=r,this.fb=s,this.loginForm=this.fb.group({email:["",[Ga.required,Ga.email]],password:["",Ga.required]})}ngOnInit(){}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}submit(){const{email:t,password:i}=this.loginForm.value;!this.loginForm.valid||!t||!i||this.authService.login(t,i).pipe(this.toast.observe({success:"Sikeres bejelentkez\xe9s",loading:"Bejelentkez\xe9s...",error:"Hiba a bejelentkez\xe9sn\xe9l!"})).subscribe(()=>{this.router.navigate(["/user"])})}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(yy),c.Y36(Na),c.Y36(pc),c.Y36(H1))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:21,vars:3,consts:[[1,"form-container","mat-elevation-z5"],[3,"formGroup","ngSubmit"],["matInput","","formControlName","email"],[4,"ngIf"],["matInput","","formControlName","password","type","password"],[1,"center","margin-top"],["mat-raised-button","","color","primary","type","submit"],["routerLink","/user/sign-up",1,"sign-up-link"]],template:function(i,r){1&i&&(c.TgZ(0,"div",0)(1,"h1"),c._uU(2,"Bejelentkez\xe9s"),c.qZA(),c.TgZ(3,"form",1),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(4,"mat-form-field")(5,"mat-label"),c._uU(6,"E-mail c\xedm"),c.qZA(),c._UZ(7,"input",2),c.YNc(8,ane,2,0,"mat-error",3),c.qZA(),c.TgZ(9,"mat-form-field")(10,"mat-label"),c._uU(11,"Jelsz\xf3"),c.qZA(),c._UZ(12,"input",4),c.YNc(13,cne,2,0,"mat-error",3),c.qZA(),c.TgZ(14,"div",5)(15,"button",6),c._uU(16," Bejelentkez\xe9s "),c.qZA()(),c.TgZ(17,"span",5),c._uU(18,"\xdaj az oldalunkon? "),c.TgZ(19,"a",7),c._uU(20,"Regisztr\xe1ljon!"),c.qZA()()()()),2&i&&(c.xp6(3),c.Q6J("formGroup",r.loginForm),c.xp6(5),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),c.xp6(5),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email))},dependencies:[Qi,Rg,eT,Zx,py,cw,Bx,Zg,uw,fO,hO,pw,l6],styles:[".form-container[_ngcontent-%COMP%]{display:block;max-width:600px;margin:auto;background:#eceff1;padding:48px;border-radius:16px}.form-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;background:#eceff1}.mdc-text-field--filled[_ngcontent-%COMP%]:not(.mdc-text-field--disabled){background-color:#eceff1}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}.margin-top[_ngcontent-%COMP%]{margin-top:16px}.text-center[_ngcontent-%COMP%]{text-align:center}"]})}return n})();function une(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Adja meg a vezet\xe9knev\xe9t! "),c.qZA())}function dne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Adja meg a keresztnev\xe9t! "),c.qZA())}function hne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Adja meg az E-mail c\xedm\xe9t! "),c.qZA())}function fne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," K\xe9rem, val\xf3di E-mail c\xedmet haszn\xe1ljon! "),c.qZA())}function pne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Adja meg a telefonsz\xe1m\xe1t! "),c.qZA())}function mne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Adja meg a Sz\xe1ll\xedt\xe1si c\xedm\xe9t! "),c.qZA())}function gne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Adjon meg egy jelsz\xf3t! "),c.qZA())}function _ne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," Adja meg m\xe9gegyszer! "),c.qZA())}function vne(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," A jelsz\xf3nak egyeznie kell! "),c.qZA())}let bne=(()=>{class n{constructor(t,i,r,s,u){this.authService=t,this.fb=i,this.router=r,this.toast=s,this.usersService=u,this.signUpForm=this.fb.group({firstName:["",Ga.required],lastName:["",Ga.required],email:["",[Ga.required,Ga.email]],phone:["",Ga.required],address:["",Ga.required],password:["",Ga.required],confirmPassword:["",Ga.required]},{validators:n=>{const e=n.get("password")?.value,t=n.get("confirmPassword")?.value;return e&&t&&e!==t?{passwordsDontMatch:!0}:null}})}ngOnInit(){}get email(){return this.signUpForm.get("email")}get password(){return this.signUpForm.get("password")}get confirmPassword(){return this.signUpForm.get("confirmPassword")}get name(){return this.signUpForm.get("name")}submit(){const{lastName:t,firstName:i,address:r,phone:s,email:u,password:m}=this.signUpForm.value;!this.signUpForm.valid||!i||!i||!m||!u||this.authService.signUp(u,m).pipe((0,qo.w)(({user:{uid:v}})=>this.usersService.addUser({uid:v,email:u,lastName:t,firstName:i,address:r,phone:s,displayName:t})),this.toast.observe({success:"Sikeres regisztr\xe1ci\xf3!",loading:"Bejelentkez\xe9s",error:({message:v})=>`${v}`})).subscribe(()=>{this.router.navigate(["/user"])})}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(yy),c.Y36(H1),c.Y36(pc),c.Y36(Na),c.Y36(Jx))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-sign-up"]],decls:40,vars:10,consts:[[1,"form-container","mat-elevation-z5"],[3,"formGroup","ngSubmit"],["matInput","","formControlName","firstName"],[4,"ngIf"],["matInput","","formControlName","lastName"],["matInput","","formControlName","email","formControlName","email"],["type","number","matInput","","formControlName","phone"],["matInput","","formControlName","address"],["matInput","","type","password","placeholder","Jelsz\xf3","formControlName","password"],["matInput","","type","password","placeholder","Jelsz\xf3 \xfajra","formControlName","confirmPassword"],[1,"center","margin-top"],["type","submit","mat-raised-button","","color","primary"]],template:function(i,r){1&i&&(c.TgZ(0,"div",0)(1,"h1"),c._uU(2,"\xdaj fi\xf3k l\xe9trehoz\xe1sa!"),c.qZA(),c.TgZ(3,"form",1),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(4,"mat-form-field")(5,"mat-label"),c._uU(6,"Vezet\xe9kn\xe9v"),c.qZA(),c._UZ(7,"input",2),c.YNc(8,une,2,0,"mat-error",3),c.qZA(),c.TgZ(9,"mat-form-field")(10,"mat-label"),c._uU(11,"Keresztn\xe9v"),c.qZA(),c._UZ(12,"input",4),c.YNc(13,dne,2,0,"mat-error",3),c.qZA(),c.TgZ(14,"mat-form-field")(15,"mat-label"),c._uU(16,"E-mail c\xedm"),c.qZA(),c._UZ(17,"input",5),c.YNc(18,hne,2,0,"mat-error",3),c.YNc(19,fne,2,0,"mat-error",3),c.qZA(),c.TgZ(20,"mat-form-field")(21,"mat-label"),c._uU(22,"Telefonsz\xe1m"),c.qZA(),c._UZ(23,"input",6),c.YNc(24,pne,2,0,"mat-error",3),c.qZA(),c.TgZ(25,"mat-form-field")(26,"mat-label"),c._uU(27,"Sz\xe1ll\xedt\xe1si c\xedm"),c.qZA(),c._UZ(28,"input",7),c.YNc(29,mne,2,0,"mat-error",3),c.qZA(),c.TgZ(30,"mat-form-field"),c._UZ(31,"input",8),c.YNc(32,gne,2,0,"mat-error",3),c.qZA(),c.TgZ(33,"mat-form-field"),c._UZ(34,"input",9),c.YNc(35,_ne,2,0,"mat-error",3),c.qZA(),c.YNc(36,vne,2,0,"mat-error",3),c.TgZ(37,"div",10)(38,"button",11),c._uU(39,"Regisztr\xe1ci\xf3!"),c.qZA()()()()),2&i&&(c.xp6(3),c.Q6J("formGroup",r.signUpForm),c.xp6(5),c.Q6J("ngIf",null==r.name||null==r.name.errors?null:r.name.errors.required),c.xp6(5),c.Q6J("ngIf",null==r.name||null==r.name.errors?null:r.name.errors.required),c.xp6(5),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email),c.xp6(5),c.Q6J("ngIf",null==r.name||null==r.name.errors?null:r.name.errors.required),c.xp6(5),c.Q6J("ngIf",null==r.name||null==r.name.errors?null:r.name.errors.required),c.xp6(3),c.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.required),c.xp6(3),c.Q6J("ngIf",null==r.confirmPassword||null==r.confirmPassword.errors?null:r.confirmPassword.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.signUpForm.errors?null:r.signUpForm.errors.passwordsDontMatch))},dependencies:[Qi,eT,Zx,py,Kx,cw,Bx,Zg,uw,fO,hO,pw,l6],styles:[".form-container[_ngcontent-%COMP%]{display:block;max-width:600px;margin:auto;background:#eceff1;padding:48px;border-radius:16px}.form-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;background:#eceff1}.mdc-text-field--filled[_ngcontent-%COMP%]:not(.mdc-text-field--disabled){background-color:#eceff1}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}.margin-top[_ngcontent-%COMP%]{margin-top:16px}.text-center[_ngcontent-%COMP%]{text-align:center}"]})}return n})(),wne=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-landing"]],decls:2,vars:0,template:function(i,r){1&i&&(c.TgZ(0,"p"),c._uU(1,"landing works!"),c.qZA())}})}return n})();function Ene(n,e){if(1&n&&(c.TgZ(0,"div",14)(1,"div",15),c._UZ(2,"img",16),c.qZA(),c.TgZ(3,"div",17),c._uU(4),c.qZA(),c.TgZ(5,"div",18),c._uU(6),c.qZA(),c.TgZ(7,"div",19),c._uU(8),c.qZA()()),2&n){const t=e.$implicit;c.xp6(2),c.Q6J("src",t.product.imagePath,c.LSH),c.xp6(2),c.Oqu(t.product.description),c.xp6(2),c.hij("",t.quantity," db"),c.xp6(2),c.hij("",t.product.price," Ft/db")}}function Cne(n,e){if(1&n&&(c.TgZ(0,"div",6),c.YNc(1,Ene,9,4,"div",7),c.TgZ(2,"div",8)(3,"p",9),c._uU(4),c.qZA(),c.TgZ(5,"p",10),c._uU(6),c.qZA(),c.TgZ(7,"p",11),c._uU(8),c.qZA(),c.TgZ(9,"p",12),c._uU(10),c.ALo(11,"date"),c.qZA(),c.TgZ(12,"p",13),c._uU(13),c.qZA()()()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngForOf",t.items),c.xp6(3),c.hij("Aj\xe1nd\xe9kcsomagol\xe1s: ",t.gift?"Igen, +1590 Ft":"Nem",""),c.xp6(2),c.hij("K\xfcldem\xe9ny biztos\xedt\xe1sa: ",t.insurance?"Igen, +500 Ft":"Nem",""),c.xp6(2),c.hij("Sz\xe1ll\xedt\xe1s d\xedja: ",t.shippingPrice," Ft"),c.xp6(2),c.hij("Rendel\xe9s d\xe1tuma: ",c.xi3(11,6,t.orderDate.toDate(),"yyyy-MM-dd"),""),c.xp6(3),c.hij("\xd6sszesen: ",t.price," Ft")}}function Ine(n,e){if(1&n&&(c.TgZ(0,"div",4),c.YNc(1,Cne,14,9,"div",5),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",t.userOrders)}}function xne(n,e){if(1&n&&(c.TgZ(0,"div",1)(1,"div",2),c._uU(2,"Kor\xe1bbi rendel\xe9sek"),c.qZA(),c.YNc(3,Ine,2,1,"div",3),c.ALo(4,"async"),c.qZA()),2&n){const t=c.oxw();c.xp6(3),c.Q6J("ngIf",c.lcZ(4,1,t.user$))}}let Tne=(()=>{class n{constructor(t,i,r){this.authService=t,this.usersService=i,this.services=r,this.user$=this.authService.currentUser$,this.items=[],this.users=[],this.userOrders=[]}ngOnInit(){this.services.refreshData(()=>this.services.getOrders(),this.items),this.services.refreshData(()=>this.services.getUsers(),this.users),this.getUser()}getUser(){this.usersService.currentUserProfile$.subscribe(t=>{t&&t.email&&(this.userEmail=t.email,this.userOrders=this.findUserOrders(t.email))})}findUserOrders(t){return this.items.filter(i=>i.email===t)}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(yy),c.Y36(Jx),c.Y36(Bf))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:3,consts:[["class","orders-container",4,"ngIf"],[1,"orders-container"],[1,"orders-head"],["class","order-table",4,"ngIf"],[1,"order-table"],["class","order-row",4,"ngFor","ngForOf"],[1,"order-row"],["class","item-container",4,"ngFor","ngForOf"],[1,"order-data"],[1,"gift"],[1,"insurance"],[1,"shipping-price"],[1,"order-date"],[1,"total-price"],[1,"item-container"],[1,"product-image"],[3,"src"],[1,"description"],[1,"quantity"],[1,"product-price"]],template:function(i,r){1&i&&(c._UZ(0,"app-user"),c.YNc(1,xne,5,3,"div",0),c.ALo(2,"async")),2&i&&(c.xp6(1),c.Q6J("ngIf",c.lcZ(2,1,r.user$)))},dependencies:[ni,Qi,s6,Mr,xa],styles:[".order-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-weight:100}.order-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]{background-color:#fff;margin:20px 0 50px;box-shadow:0 6px 20px #00000030;border-radius:1rem;overflow:hidden;border:transparent}.order-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]   .order-data[_ngcontent-%COMP%]{padding:10px 10px 40px}.order-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]   .order-data[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]{width:300px;padding-top:10px;text-align:center;border-top:1px solid #edf1f7;float:right;font-size:16px}.order-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #edf1f7}.order-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1;text-align:center}.order-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:120px;float:left}"]})}return n})();const r2=(0,gn.U)(n=>!!n);let Dne=(()=>{class n{constructor(t,i){this.router=t,this.auth=i,this.canActivate=(r,s)=>{const u=r.data.authGuardPipe||(()=>r2);return Qs(this.auth).pipe(Kc(1),u(r,s),(0,gn.U)(m=>"boolean"==typeof m?m:Array.isArray(m)?this.router.createUrlTree(m):this.router.parseUrl(m)))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(pc),c.LFG(gp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const pO=n=>({canActivate:[Dne],data:{authGuardPipe:n}});var One=Q(7582);const Pne=c.GuJ,kne=Symbol("__destroy"),E6=Symbol("__decoratorApplied");function C6(n){return"string"==typeof n?Symbol(`__destroy__${n}`):kne}function I6(n,e){n[e]||(n[e]=new jn.x)}function x6(n,e){n[e]&&(n[e].next(),n[e].complete(),n[e]=null)}function T6(n){n instanceof $u.w0&&n.unsubscribe()}function D6(n,e){return function(){if(n&&n.call(this),x6(this,C6()),e.arrayName&&function Fne(n){Array.isArray(n)&&n.forEach(T6)}(this[e.arrayName]),e.checkProperties)for(const t in this)e.blackList?.includes(t)||T6(this[t])}}Symbol("CheckerHasBeenSet");function $ne(n,e){return t=>{const i=C6(e);"string"==typeof e?function Hne(n,e,t){const i=n[e];I6(n,t),n[e]=function(){i.apply(this,arguments),x6(this,t),n[e]=i}}(n,e,i):I6(n,i);const r=n[i];return t.pipe(Ud(r))}}let Gne=(()=>{class n{constructor(t){this.storage=t}uploadImage(t,i){const r=BG(this.storage,i);return(0,Sr.D)(jG(r,t)).pipe((0,qo.w)(u=>UG(u.ref)))}static#e=this.\u0275fac=function(i){return new(i||n)(c.LFG(TM))};static#t=this.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wne(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",1)(1,"h1"),c._uU(2,"Profil"),c.qZA(),c.TgZ(3,"div",2),c._UZ(4,"img",3),c.TgZ(5,"button",4),c.NdJ("click",function(){c.CHM(t);const r=c.MAs(9);return c.KtG(r.click())}),c.TgZ(6,"mat-icon"),c._uU(7,"edit"),c.qZA()()(),c.TgZ(8,"input",5,6),c.NdJ("change",function(r){const u=c.CHM(t).ngIf,m=c.oxw();return c.KtG(m.uploadImage(r,u))}),c.qZA(),c.TgZ(10,"form",7),c.NdJ("ngSubmit",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.saveProfile())}),c.TgZ(11,"div",8)(12,"mat-form-field")(13,"mat-label"),c._uU(14,"Vezet\xe9kn\xe9v"),c.qZA(),c._UZ(15,"input",9),c.qZA(),c.TgZ(16,"mat-form-field")(17,"mat-label"),c._uU(18,"Keresztn\xe9v"),c.qZA(),c._UZ(19,"input",10),c.qZA()(),c.TgZ(20,"div",8)(21,"mat-form-field")(22,"mat-label"),c._uU(23,"Profiln\xe9v"),c.qZA(),c._UZ(24,"input",11),c.qZA(),c.TgZ(25,"mat-form-field")(26,"mat-label"),c._uU(27,"Telefonsz\xe1m"),c.qZA(),c._UZ(28,"input",12),c.qZA()(),c.TgZ(29,"mat-form-field")(30,"mat-label"),c._uU(31,"Sz\xe1ll\xedt\xe1si c\xedm"),c.qZA(),c._UZ(32,"input",13),c.qZA(),c.TgZ(33,"button",14),c._uU(34," Ment\xe9s "),c.qZA()()()}if(2&n){const t=e.ngIf,i=c.oxw();let r;c.xp6(4),c.Q6J("src",null!==(r=t.photoURL)&&void 0!==r?r:"assets/image-placeholder.png",c.LSH),c.xp6(6),c.Q6J("formGroup",i.profileForm)}}let s2=class m2{constructor(e,t,i,r,s){this.authService=e,this.imageUploadService=t,this.toast=i,this.usersService=r,this.fb=s,this.user$=this.usersService.currentUserProfile$,this.profileForm=this.fb.group({uid:[""],displayName:[""],firstName:[""],lastName:[""],phone:[""],address:[""]})}ngOnInit(){this.usersService.currentUserProfile$.pipe($ne(this),(0,Xi.b)(console.log)).subscribe(e=>{this.profileForm.patchValue({...e})})}uploadImage(e,t){this.imageUploadService.uploadImage(e.target.files[0],`images/profile/${t.uid}`).pipe(this.toast.observe({loading:"A k\xe9p t\xf6lt\u0151dik...",success:"A k\xe9p sikeresen felt\xf6ltve!",error:"Hiba a k\xe9p felt\xf6lt\xe9se k\xf6zben"}),(0,qo.w)(i=>this.usersService.updateUser({uid:t.uid,photoURL:i}))).subscribe()}saveProfile(){const{uid:e,...t}=this.profileForm.value;e&&this.usersService.updateUser({uid:e,...t}).pipe(this.toast.observe({loading:"Profil ment\xe9se...",success:"Sikeres ment\xe9s!",error:"Hiba t\xf6rt\xe9nt a profil ment\xe9se sor\xe1n!"})).subscribe()}static#e=this.\u0275fac=function(t){return new(t||m2)(c.Y36(yy),c.Y36(Gne),c.Y36(Na),c.Y36(Jx),c.Y36(H1))};static#t=this.\u0275cmp=c.Xpm({type:m2,selectors:[["app-profile"]],decls:2,vars:3,consts:[["class","form-container mat-elevation-z5 text-center",4,"ngIf"],[1,"form-container","mat-elevation-z5","text-center"],[1,"profile-image"],["width","120","height","120",3,"src"],["mat-mini-fab","",3,"click"],["type","file","hidden","",3,"change"],["inputField",""],[1,"margin-top",3,"formGroup","ngSubmit"],[1,"row"],["type","text","matInput","","formControlName","firstName"],["type","text","matInput","","formControlName","lastName"],["type","text","matInput","","formControlName","displayName"],["type","number","matInput","","formControlName","phone"],["type","text","matInput","","formControlName","address"],["type","submit","mat-raised-button","","color","primary",1,"save-button","margin-top"]],template:function(t,i){1&t&&(c.YNc(0,Wne,35,2,"div",0),c.ALo(1,"async")),2&t&&c.Q6J("ngIf",c.lcZ(1,1,i.user$))},dependencies:[Qi,eT,yJ,KL,Zx,py,Kx,cw,Bx,Zg,uw,fO,hO,pw,Mr],styles:[".profile-image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{border-radius:100%;object-fit:cover;object-position:center;box-shadow:0 .25rem .5rem #000}.profile-image[_ngcontent-%COMP%]{position:relative}.profile-image[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:35%}.form-container[_ngcontent-%COMP%]{max-width:600px;margin-top:25px}.row[_ngcontent-%COMP%]{display:flex;gap:16px}.save-button[_ngcontent-%COMP%]{background-color:#17455c}.test[_ngcontent-%COMP%]{background:yellow}"]})};s2=(0,One.gn)([function Vne(n={}){return e=>{!function Rne(n){return!!n[Pne]}(e)?function Lne(n,e){n.prototype.ngOnDestroy=D6(n.prototype.ngOnDestroy,e)}(e,n):function Une(n,e){const t=n.\u0275pipe;t.onDestroy=D6(t.onDestroy,e)}(e,n),function Nne(n){n.prototype[E6]=!0}(e)}}()],s2);const Zne=function(){return["/products"]};function Kne(n,e){1&n&&(c.TgZ(0,"div",2),c._UZ(1,"img",3),c.TgZ(2,"div",4),c._uU(3,"A kosara \xfcres!"),c.TgZ(4,"p",5),c._uU(5,"Vissza a term\xe9kekhez!"),c.qZA()()()),2&n&&(c.xp6(4),c.Q6J("routerLink",c.DdM(1,Zne)))}function Yne(n,e){1&n&&(c.TgZ(0,"mat-form-field")(1,"mat-label"),c._uU(2,"Vezet\xe9kn\xe9v"),c.qZA(),c._UZ(3,"input",16),c.qZA())}function Qne(n,e){1&n&&(c.TgZ(0,"mat-form-field")(1,"mat-label"),c._uU(2,"Keresztn\xe9v"),c.qZA(),c._UZ(3,"input",17),c.qZA())}function Xne(n,e){1&n&&(c.TgZ(0,"mat-form-field")(1,"mat-label"),c._uU(2,"E-mail c\xedm"),c.qZA(),c._UZ(3,"input",18),c.qZA())}function Jne(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",6)(1,"div",7)(2,"form",8,9),c.NdJ("ngSubmit",function(){c.CHM(t);const r=c.MAs(3),s=c.oxw();return c.KtG(s.rendelesFormSubmit(r.value))}),c.YNc(4,Yne,4,0,"mat-form-field",10),c.ALo(5,"async"),c.YNc(6,Qne,4,0,"mat-form-field",10),c.ALo(7,"async"),c.YNc(8,Xne,4,0,"mat-form-field",10),c.ALo(9,"async"),c.TgZ(10,"mat-form-field")(11,"mat-label"),c._uU(12,"Telefonsz\xe1m"),c.qZA(),c._UZ(13,"input",11),c.qZA(),c.TgZ(14,"mat-form-field")(15,"mat-label"),c._uU(16,"Szall\xedt\xe1si c\xedm"),c.qZA(),c._UZ(17,"input",12),c.qZA(),c.TgZ(18,"div",13)(19,"button",14),c._uU(20,"Rendel\xe9s meger\u0151s\xedt\xe9se"),c.qZA(),c.TgZ(21,"p",15),c._uU(22),c.qZA()()()()()}if(2&n){const t=c.oxw();c.xp6(2),c.Q6J("formGroup",t.shippingForm),c.xp6(2),c.Q6J("ngIf",!c.lcZ(5,5,t.user$)),c.xp6(2),c.Q6J("ngIf",!c.lcZ(7,7,t.user$)),c.xp6(2),c.Q6J("ngIf",!c.lcZ(9,9,t.user$)),c.xp6(14),c.hij("v\xe9g\xf6sszeg: ",t.price," Ft")}}let eie=(()=>{class n{constructor(t,i,r,s,u,m,v,C,M){this.fb=t,this.services=i,this.authService=r,this.shoppingService=s,this.usersService=u,this.toast=m,this.router=v,this.firestore=C,this.formbuilder=M,this.shippingForm=this.fb.group({firstName:["",Ga.required],lastName:["",Ga.required],email:["",[Ga.required,Ga.email]],phone:["",Ga.required],address:["",Ga.required]}),this.user$=this.usersService.currentUserProfile$,this.price=this.shoppingService.calculateTotalPayment(),this.items=this.services.getCartItems(),this.gift=this.shoppingService.giftIsChecked,this.insurance=this.shoppingService.insuranceIsChecked,this.shippingPrice=this.shoppingService.shippingPrice,this.orderDate=new Date}ngOnInit(){this.user$.subscribe(t=>{t&&this.shippingForm.patchValue({firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,address:t.address})})}rendelesFormSubmit(t){var i=this;return(0,dt.Z)(function*(){const{firstName:r,lastName:s,email:u,phone:m,address:v}=i.shippingForm.value;if(i.shippingForm.valid&&r&&s&&u&&m&&v)try{const C=yield i.user$.pipe(Kc(1)).toPromise();let M;M=zI(i.firestore,C?"*orders":"*guest"),t.items=i.items,t.gift=i.gift,t.insurance=i.insurance,t.shippingPrice=i.shippingPrice,t.price=i.price,t.orderDate=i.orderDate,yield eq(M,t),console.log("Rendel\xe9s elk\xfcldve a Firestore-ba"),i.router.navigate(["/dashboard"]),i.shippingForm.reset(),i.services.exit()}catch(C){console.error("Hiba t\xf6rt\xe9nt a rendel\xe9s elk\xfcld\xe9se sor\xe1n: ",C)}})()}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(H1),c.Y36(Bf),c.Y36(yy),c.Y36(wz),c.Y36(Jx),c.Y36(Na),c.Y36(pc),c.Y36(Dg),c.Y36(IH))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-shipping"]],decls:2,vars:2,consts:[["class","empty-cart",4,"ngIf"],["class","shopping-cart-component",4,"ngIf"],[1,"empty-cart"],["src","./assets/images/empty-cart.jpg",1,"empty-cart-img"],[1,"empty-cart-desc"],[1,"empty-cart-button",3,"routerLink"],[1,"shopping-cart-component"],[1,"shipping-container"],[3,"formGroup","ngSubmit"],["rendelesForm","ngForm"],[4,"ngIf"],["type","number","matInput","","formControlName","phone"],["type","text","matInput","","formControlName","address"],[1,"button-container"],["type","submit","mat-raised-button","button-submit","color","primary"],[1,"price"],["type","text","matInput","","formControlName","firstName"],["type","text","matInput","","formControlName","lastName"],["type","email","matInput","","formControlName","email"]],template:function(i,r){1&i&&(c.YNc(0,Kne,6,2,"div",0),c.YNc(1,Jne,23,11,"div",1)),2&i&&(c.Q6J("ngIf",0===r.services.getCartItems().length),c.xp6(1),c.Q6J("ngIf",r.services.getCartItems().length>0))},dependencies:[Qi,Rg,eT,Zx,py,Kx,cw,Bx,Zg,uw,fO,hO,pw,Mr],styles:[".shipping-container[_ngcontent-%COMP%]{display:block;max-width:600px;margin:auto;background:#eceff1;padding:48px;border-radius:16px}.shipping-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;background:#eceff1}.center[_ngcontent-%COMP%]{display:flex;justify-content:center}.margin-top[_ngcontent-%COMP%]{margin-top:16px}.text-center[_ngcontent-%COMP%]{text-align:center}.button-container[_ngcontent-%COMP%]{margin-top:25px}.button-container[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{float:right;font-size:18px;font-weight:100}",'@charset "UTF-8";.shopping-cart-card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:auto;position:relative;-webkit-user-select:none;user-select:none}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]{padding:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .shopping-cart-head[_ngcontent-%COMP%]{color:#f0f8ff;font-size:15px;margin-bottom:5px;display:flex;flex:1}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .shopping-cart-price[_ngcontent-%COMP%]{color:#f0f8ff;font-size:18px;flex:0 0 100px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{color:#f0f8ff;border-radius:10px;background-color:#092c3d;flex:1;display:flex;align-items:center;margin:10px 10px 5px;border-bottom:1px solid #ccc;position:relative;gap:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:120px;height:auto;border-radius:5px;margin-right:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-head[_ngcontent-%COMP%]{font-size:15px;margin-right:30px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-price[_ngcontent-%COMP%]{font-size:18px;overflow:hidden;margin-left:50px;flex:0 0 70px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-quantity[_ngcontent-%COMP%]{font-size:15px;display:flex;align-items:center;margin-left:auto;color:#f0f8ff}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .decreaseQuantity[_ngcontent-%COMP%], .shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .increaseQuantity[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px;display:flex;justify-content:center;align-items:center;font-size:20px;margin:0 5px;border-radius:50%;padding:10px;border:1px solid #a5beda;cursor:pointer;color:#f0f8ff}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .removeFromCart[_ngcontent-%COMP%]{cursor:pointer;font-size:15px;margin-right:15px;margin-left:40px;color:#f0f8ff}@media screen and (max-width: 700px){.shopping-cart-card-container[_ngcontent-%COMP%]{display:flex;margin:0;gap:0px;width:auto}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]{padding:0;margin-left:-5px}}@media screen and (max-width: 700px) and (max-width: 365px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]{margin-left:-25px}}@media screen and (max-width: 700px) and (max-width: 365px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]{margin-left:0}}@media screen and (max-width: 700px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{gap:2px;margin:0}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-head[_ngcontent-%COMP%]{margin-right:5px;font-size:10px}}@media screen and (max-width: 700px) and (max-width: 365px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-head[_ngcontent-%COMP%]{padding-left:5px}}@media screen and (max-width: 700px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-quantity[_ngcontent-%COMP%]{font-size:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .decreaseQuantity[_ngcontent-%COMP%], .shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .increaseQuantity[_ngcontent-%COMP%]{width:25px;height:25px;font-size:18px;padding:0;margin:10px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .shopping-cart-price[_ngcontent-%COMP%]{margin-left:4px;font-size:11.5px;flex:0 0 40px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .removeFromCart[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;font-size:12px}.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{margin-right:0;width:70px}}@media screen and (max-width: 700px) and (max-width: 300px){.shopping-cart-card-container[_ngcontent-%COMP%]   .shopping-cart-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{display:none}}.empty-cart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.empty-cart-img[_ngcontent-%COMP%]{position:absolute;top:10%;left:50%;transform:translate(-50%,-22%);width:100%;max-width:600px;display:flex;overflow:hidden}.empty-cart-desc[_ngcontent-%COMP%]{text-align:center;position:absolute;width:300px;top:55%;left:50%;transform:translate(-50%,-10%);font-size:26px;font-weight:300;border-top:1px solid #ccc;padding-top:15px;transition:all .4s ease-in-out}.empty-cart-button[_ngcontent-%COMP%]{margin-top:10px;cursor:pointer;transition:all .3s ease-in-out;font-weight:100}.empty-cart-button[_ngcontent-%COMP%]:after{background:none repeat scroll 0 0 transparent;bottom:0;content:"";display:block;height:1px;left:50%;position:absolute;background:#191818;transition:width .3s ease 0s,left .3s ease 0s;width:0}.empty-cart-button[_ngcontent-%COMP%]:hover:after{width:100%;left:0}@media screen and (max-width: 500px){.empty-cart-desc[_ngcontent-%COMP%]{top:41%;left:50%}.empty-cart-button[_ngcontent-%COMP%]{top:48%;left:50%;font-size:22px}}.bonus[_ngcontent-%COMP%]   .bonus-desc[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;font-size:13px;margin-top:15px;width:600px}.insurance[_ngcontent-%COMP%], .gift[_ngcontent-%COMP%], .bonus[_ngcontent-%COMP%], .shipping[_ngcontent-%COMP%]{font-size:15px;border-top:1px solid #ccc;margin-top:20px;padding-top:10px}.checkout-container-desc[_ngcontent-%COMP%]{font-size:13px;margin-top:15px;opacity:.5;width:600px}.shipping[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{opacity:1}h3[_ngcontent-%COMP%]{float:right;opacity:.5;font-weight:800}h3.active[_ngcontent-%COMP%]{opacity:1}.disabled-button[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.checkout-container[_ngcontent-%COMP%]{background-color:#f4f7fa;padding:10px;height:100px;display:grid;position:relative;max-width:1000px}.checkout-container[_ngcontent-%COMP%]   .checkout-card[_ngcontent-%COMP%]{padding-top:20px}.checkout-container[_ngcontent-%COMP%]   .checkout-card[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{opacity:1;font-size:18px;font-weight:200}.checkout-container[_ngcontent-%COMP%]   .checkout-card[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:800;float:right;top:0;margin-left:40px}@media screen and (max-width: 750px){.checkout-container[_ngcontent-%COMP%]{padding:2px;display:block}.checkout-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:100%}.checkout-container[_ngcontent-%COMP%]   .insurance[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .gift[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .shipping[_ngcontent-%COMP%]{font-size:14px;margin-top:20px;padding-top:10px}}@media screen and (max-width: 750px) and (max-width: 340px){.checkout-container[_ngcontent-%COMP%]   .insurance[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .gift[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%], .checkout-container[_ngcontent-%COMP%]   .shipping[_ngcontent-%COMP%]{font-size:12px}}@media screen and (max-width: 750px){.checkout-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:-4px}.checkout-container[_ngcontent-%COMP%]   .btn-hover[_ngcontent-%COMP%]{float:right}.checkout-container[_ngcontent-%COMP%]   .checkout-card[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;font-size:16px}}.btn-hover[_ngcontent-%COMP%]{width:200px;font-size:16px;font-weight:400;color:#f0f8ff;cursor:pointer;margin-left:auto;height:55px;text-align:center;border:none;background-size:300% 100%;border-radius:5px;transition:all .4s ease-in-out}[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background-position:100% 0;transition:all .4s ease-in-out}.btn-hover[_ngcontent-%COMP%]:hover{background-position:100% 0;transition:all .4s ease-in-out}.btn-hover[_ngcontent-%COMP%]:focus{outline:none}.btn-hover.color-8[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#455669,#485563,#203542,#092c3d);box-shadow:0 4px 15px #2d3641bf}']})}return n})();function tie(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"img",18),c.NdJ("mouseover",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.changeMainImage(s))}),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("src",t,c.LSH)}}function nie(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.services.selectSize(s))}),c.TgZ(1,"div",20),c._uU(2),c.qZA()()}if(2&n){const t=e.$implicit,i=c.oxw();c.xp6(1),c.ekj("selected",i.services.selectedSize===t),c.xp6(1),c.AsE("",t.size," ",t.price," Ft")}}let iie=(()=>{class n{constructor(t,i,r){this.db=t,this.services=i,this.renderer=r,this.closeModalEvent=new c.vpe,this.currentImage=""}ngOnInit(){}changeMainImage(t){this.currentImage=t,console.log("imagePath value: ",t)}closeModal(){this.closeModalEvent.emit(),this.services.selectedSize=null,this.services.selectedSizePrice=null,console.log("bez\xe1rt modal \xe9rt\xe9ke: ",this.services.selectedSize,this.services.selectedSizePrice)}addToCart(t){this.services.addToCartService(t),this.closeModal()}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(aL),c.Y36(Bf),c.Y36(c.Qsj))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-modal"]],inputs:{product:"product"},outputs:{closeModalEvent:"closeModalEvent"},decls:40,vars:12,consts:[[1,"modal-container"],[1,"modal-content"],[1,"left-section"],[1,"product-name"],[1,"product-description"],[1,"product-price"],[1,"modal-image",3,"src"],[1,"modal-image-selection-container"],[4,"ngFor","ngForOf"],[1,"right-section"],[1,"composition-container"],[1,"composition-description"],[1,"comp-desc-p"],[1,"comp-desc-pe"],[1,"item-size-buttons-container"],[3,"click",4,"ngFor","ngForOf"],[1,"cart-btn",3,"click"],[1,"close-btn",3,"click"],["alt","Image",1,"modal-image-selection",3,"src","mouseover"],[3,"click"],["tabindex","0",1,"item-size-buttons"]],template:function(i,r){1&i&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c._uU(4),c.qZA(),c.TgZ(5,"div",4),c._uU(6),c.qZA(),c.TgZ(7,"div",5),c._uU(8),c.qZA(),c._UZ(9,"img",6),c.TgZ(10,"div",7),c.YNc(11,tie,2,1,"div",8),c.qZA()(),c.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"p",12),c._uU(16,"Fejillat: "),c.qZA(),c._uU(17),c.qZA(),c.TgZ(18,"div",11)(19,"p",12),c._uU(20,"Sz\xedvillat: "),c.qZA(),c._uU(21),c.qZA(),c.TgZ(22,"div",11)(23,"p",12),c._uU(24,"Alapillat: "),c.qZA(),c._uU(25),c.qZA(),c.TgZ(26,"div",11)(27,"p",12),c._uU(28,"Illat: "),c.qZA(),c._uU(29),c.qZA(),c.TgZ(30,"div",11)(31,"p",13),c._uU(32,"Term\xe9kjellemz\u0151: "),c.qZA(),c._uU(33),c.qZA()(),c.TgZ(34,"div",14),c.YNc(35,nie,3,4,"div",15),c.qZA(),c.TgZ(36,"div",16),c.NdJ("click",function(){return r.addToCart(r.product)}),c._uU(37,"Hozz\xe1ad\xe1s a kos\xe1rhoz"),c.qZA()(),c.TgZ(38,"button",17),c.NdJ("click",function(){return r.closeModal()}),c._uU(39,"x"),c.qZA()()()),2&i&&(c.xp6(4),c.AsE(" ",r.product.productName," ",r.services.selectedSize,""),c.xp6(2),c.hij("",r.product.scent," "),c.xp6(2),c.hij("",r.services.selectedSizePrice," Ft"),c.xp6(1),c.Q6J("src",r.currentImage||r.product.modalImagePath[0],c.LSH),c.xp6(2),c.Q6J("ngForOf",r.product.modalImagePath),c.xp6(6),c.hij("",r.product.composition.head," "),c.xp6(4),c.hij("",r.product.composition.hearth," "),c.xp6(4),c.hij("",r.product.composition.base," "),c.xp6(4),c.hij("",r.product.composition.scentType," "),c.xp6(4),c.hij("",r.product.composition.compDescription," "),c.xp6(2),c.Q6J("ngForOf",r.product.type))},dependencies:[ni],styles:['@charset "UTF-8";.modal-container[_ngcontent-%COMP%]{background-color:#00000080;display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 2px 10px #0003;width:900px;height:700px;position:relative;display:flex;flex-direction:column}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]{width:66.6%}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:24px;padding-bottom:10px;color:#333;border-bottom:1px solid #aeaeae}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:16px;color:#666}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:14px;color:#333}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .modal-image[_ngcontent-%COMP%]{max-width:420px;max-height:420px;width:auto;height:auto;position:absolute;top:50%;left:33%;transform:translate(-50%,-50%);-webkit-user-select:none;user-select:none}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .modal-image-selection-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:absolute;bottom:0}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .modal-image-selection-container[_ngcontent-%COMP%]   .modal-image-selection[_ngcontent-%COMP%]{max-height:70px;width:auto;height:auto;margin-left:15px;cursor:pointer}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]{background-color:#092c3d;position:absolute;right:0;top:0;height:100%;width:33.3%;padding:5px}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   .composition-description[_ngcontent-%COMP%]:nth-child(1), .modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2), .modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3), .modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(4){display:flex;color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   .composition-description[_ngcontent-%COMP%]:nth-child(5){color:#fff}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .composition-container[_ngcontent-%COMP%]   .comp-desc-p[_ngcontent-%COMP%]{margin-right:5px}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .cart-btn[_ngcontent-%COMP%]{position:absolute;background-color:#fff;right:10px;bottom:10px;padding:10px 30px;cursor:pointer;transition:ease .4s;-webkit-user-select:none;user-select:none;color:#333}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .cart-btn[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .cart-btn[_ngcontent-%COMP%]:active{background-color:#acacac;color:#000}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .item-size-buttons-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;position:absolute;top:65%;left:10px;-webkit-user-select:none;user-select:none}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .item-size-buttons-container[_ngcontent-%COMP%]   .item-size-buttons[_ngcontent-%COMP%]{border:1.5px solid #aeaeae;padding-left:5px;padding-right:5px;width:90px;height:40px;align-items:center;text-align:center;background-color:#fff;cursor:pointer;border-radius:3px;transition:ease .2s;font-weight:500;color:#333}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .item-size-buttons-container[_ngcontent-%COMP%]   .item-size-buttons[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]   .item-size-buttons-container[_ngcontent-%COMP%]   .item-size-buttons[_ngcontent-%COMP%]:focus{border:1.2px solid #333;background-color:#acacac;color:#000}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background-color:red;color:#fff;position:absolute;top:-10px;right:-10px;font-size:15px;width:30px;height:30px;border:none;border-radius:50%;cursor:pointer;z-index:100}.modal-container[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#ef2158}']})}return n})();function rie(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",5),c.NdJ("click",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.openModal(s))})("mouseover",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.mouseOver(s))})("mouseleave",function(){const s=c.CHM(t).$implicit,u=c.oxw();return c.KtG(u.mouseLeave(s))}),c.TgZ(1,"div",6),c._uU(2),c.TgZ(3,"p",7),c._uU(4),c.qZA(),c.TgZ(5,"p",8),c._uU(6),c.qZA()(),c.TgZ(7,"div",9),c._UZ(8,"img",10),c.qZA(),c.TgZ(9,"div",11),c._uU(10),c.TgZ(11,"p",12),c._uU(12,"Ft-t\xf3l"),c.qZA()()()}if(2&n){const t=e.$implicit;c.xp6(2),c.hij(" ",t.brand," "),c.xp6(2),c.Oqu(t.brandName),c.xp6(2),c.Oqu(t.scent),c.xp6(2),c.Q6J("src",t.imagePath,c.LSH),c.xp6(2),c.hij("",t.type[0].price," ")}}function oie(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"app-modal",13),c.NdJ("closeModalEvent",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.closeModal())}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("product",t.selectedProduct)}}let sie=(()=>{class n{constructor(t,i){this.services=t,this.firestore=i,this.fragrances$=nN(zI(this.firestore,"fragrances")),this.isModalOpen=!1}closeModal(){this.isModalOpen=!1}ngOnInit(){this.fragrances$.subscribe(t=>console.log("task$ observable:",t)),console.log(this.fragrances$)}mouseOver(t){t.imagePath=t.modalImagePath[1]}mouseLeave(t){t.imagePath=t.modalImagePath[0]}openModal(t){this.selectedProduct=t,this.isModalOpen=!0,console.log("Kiv\xe1lasztott term\xe9k:",t),t.type&&t.type.length>0&&this.services.selectSize(t.type[0])}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(Bf),c.Y36(Dg))};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-fragrances"]],decls:6,vars:4,consts:[[1,"brands-container"],[1,"brands"],[1,"product-card-container"],["class","product-card",3,"click","mouseover","mouseleave",4,"ngFor","ngForOf"],[3,"product","closeModalEvent",4,"ngIf"],[1,"product-card",3,"click","mouseover","mouseleave"],[1,"product-card-head"],[1,"brand-name"],[1,"scent"],[1,"main-image-container"],[1,"main-image",3,"src"],[1,"product-card-price"],[1,"tol"],[3,"product","closeModalEvent"]],template:function(i,r){1&i&&(c.TgZ(0,"div",0),c._UZ(1,"div",1),c.qZA(),c.TgZ(2,"div",2),c.YNc(3,rie,13,5,"div",3),c.ALo(4,"async"),c.qZA(),c.YNc(5,oie,1,1,"app-modal",4)),2&i&&(c.xp6(3),c.Q6J("ngForOf",c.lcZ(4,2,r.fragrances$)),c.xp6(2),c.Q6J("ngIf",r.isModalOpen))},dependencies:[ni,Qi,iie,Mr],styles:['@charset "UTF-8";.product-card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{cursor:pointer;display:flex;color:#333;flex-direction:column;border-radius:.5rem;background-color:#fff;margin:1.25rem 0;box-shadow:0 .25rem .5rem #000;width:calc(33.33% - 20px);margin:10px;width:350px;overflow:hidden}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-head[_ngcontent-%COMP%]{padding:10px 0 5px 15px;border-bottom:2px solid #edf1f7;font-size:18px;font-weight:500}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-head[_ngcontent-%COMP%]   .brand-name[_ngcontent-%COMP%]{font-size:16px;font-weight:300}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-head[_ngcontent-%COMP%]   .scent[_ngcontent-%COMP%]{margin:-10px 0 -5px;font-size:14px}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-body[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-weight:300;border-bottom:1px solid #edf1f7}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{max-width:300px;max-height:300px;width:auto;height:auto}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .scent[_ngcontent-%COMP%]{font-weight:100;font-size:15px}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-price[_ngcontent-%COMP%]{display:flex;align-items:center;padding:25px 0 0 15px;font-weight:400;font-size:22px;background-color:#edf1f7}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-price[_ngcontent-%COMP%]   .tol[_ngcontent-%COMP%]{font-size:15px;font-weight:100;padding:15px 0 0 5px}.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]   .product-card-price[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{font-size:15px;padding:10px;margin-left:auto;margin-bottom:5px}.product-card-price[_ngcontent-%COMP%]{padding-top:25px}@media screen and (max-width: 1200px){.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{width:calc(50% - 20px)}}@media screen and (max-width: 768px){.product-card-container[_ngcontent-%COMP%]   .product-card[_ngcontent-%COMP%]{width:95%}}']})}return n})();const O6=()=>(n=>(0,_N.z)(r2,(0,gn.U)(e=>e||n)))(["login"]),P6=()=>(n=>(0,_N.z)(r2,(0,gn.U)(e=>e&&n||!0)))(["user"]),aie=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:TZ},{path:"products",component:$Y},{path:"accessories",component:qY},{path:"fragrances",component:sie},{path:"media",component:GY},{path:"shopping-cart",component:dJ},{path:"shipping",component:eie},{path:"user",component:s6,children:[{path:"profile",component:s2,...pO(O6)}]},{path:"user/login",component:lne,...pO(P6)},{path:"user/sign-up",component:bne,...pO(P6)},{path:"home",component:Tne,...pO(O6)},{path:"",component:wne,pathMatch:"full"}];let cie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[YB.forRoot(aie,{useHash:!0}),YB]})}return n})(),lie=(()=>{class n{constructor(){this.collapsed=!1,this.screenWidth=0}getBodyClass(){let t="";return this.collapsed&&this.screenWidth>968?t="body-trimmed":this.collapsed&&this.screenWidth<=968&&this.screenWidth>0&&(t="body-md-screen"),t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-body"]],inputs:{collapsed:"collapsed",screenWidth:"screenWidth"},decls:2,vars:1,consts:[[1,"body",3,"ngClass"]],template:function(i,r){1&i&&(c.TgZ(0,"div",0),c._UZ(1,"router-outlet"),c.qZA()),2&i&&c.Q6J("ngClass",r.getBodyClass())},dependencies:[Ko,BM],styles:[".body[_ngcontent-%COMP%]{width:calc(100% - 5rem);height:100%;margin-left:5rem;z-index:0;position:relative;top:0;transition:all .5s ease;padding:3rem;background:linear-gradient(to bottom,#f4f7fa,#f4f7fa);background-attachment:fixed;overflow:auto}.body-trimmed[_ngcontent-%COMP%]{width:calc(100% - 16.5625rem);margin-left:16.5625rem}.body-md-screen[_ngcontent-%COMP%]{width:calc(100% - 5rem);margin-left:5rem}@media screen and (max-width: 450px){.body[_ngcontent-%COMP%]{padding:1rem .5rem .25rem .25rem;width:calc(100% - 3rem);margin-left:3rem}}@media screen and (max-width: 1000px){.body[_ngcontent-%COMP%]{padding:1rem .5rem .25rem .25rem}}"]})}return n})(),uie=0;const die=Y1(class{}),R6="mat-badge-content";let hie=(()=>{class n extends die{get color(){return this._color}set color(t){this._setColor(t),this._color=t}get overlap(){return this._overlap}set overlap(t){this._overlap=Qc(t)}get content(){return this._content}set content(t){this._updateRenderedContent(t)}get description(){return this._description}set description(t){this._updateDescription(t)}get hidden(){return this._hidden}set hidden(t){this._hidden=Qc(t)}constructor(t,i,r,s,u){super(),this._ngZone=t,this._elementRef=i,this._ariaDescriber=r,this._renderer=s,this._animationMode=u,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=uie++,this._isInitialized=!1,this._interactivityChecker=(0,c.f3M)(yX),this._document=(0,c.f3M)(Re)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){const t=this._renderer.createElement("span"),i="mat-badge-active";return t.setAttribute("id",`mat-badge-content-${this._id}`),t.setAttribute("aria-hidden","true"),t.classList.add(R6),"NoopAnimations"===this._animationMode&&t.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(t),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{t.classList.add(i)})}):t.classList.add(i),t}_updateRenderedContent(t){const i=`${t??""}`.trim();this._isInitialized&&i&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=i),this._content=i}_updateDescription(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!t||this._isHostInteractive())&&this._removeInlineDescription(),this._description=t,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,t):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(t){const i=this._elementRef.nativeElement.classList;i.remove(`mat-badge-${this._color}`),t&&i.add(`mat-badge-${t}`)}_clearExistingBadges(){const t=this._elementRef.nativeElement.querySelectorAll(`:scope > .${R6}`);for(const i of Array.from(t))i!==this._badgeElement&&i.remove()}static#e=this.\u0275fac=function(i){return new(i||n)(c.Y36(c.R0b),c.Y36(c.SBq),c.Y36(gX),c.Y36(c.Qsj),c.Y36(c.QbO,8))};static#t=this.\u0275dir=c.lG2({type:n,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(i,r){2&i&&c.ekj("mat-badge-overlap",r.overlap)("mat-badge-above",r.isAbove())("mat-badge-below",!r.isAbove())("mat-badge-before",!r.isAfter())("mat-badge-after",r.isAfter())("mat-badge-small","small"===r.size)("mat-badge-medium","medium"===r.size)("mat-badge-large","large"===r.size)("mat-badge-hidden",r.hidden||!r.content)("mat-badge-disabled",r.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[c.qOj]})}return n})(),k6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[NX,Wa,Wa]})}return n})();function fie(n,e){1&n&&(c.TgZ(0,"div",7),c._uU(1,"Astra"),c.qZA()),2&n&&c.Q6J("@fadeInOut",void 0)}function pie(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",8),c.NdJ("click",function(){c.CHM(t);const r=c.oxw();return c.KtG(r.closeSidenav())}),c._UZ(1,"i",9),c.qZA()}2&n&&c.Q6J("@rotate",void 0)}function mie(n,e){if(1&n&&(c.TgZ(0,"span",15),c._uU(1),c.qZA()),2&n){const t=c.oxw().$implicit;c.Q6J("@fadeInOut",void 0),c.xp6(1),c.hij(" ",t.label," ")}}const gie=function(n){return[n]},_ie=function(){return{exact:!0}};function vie(n,e){if(1&n&&(c.TgZ(0,"li",10)(1,"a",11),c._UZ(2,"i",12),c.YNc(3,mie,2,2,"span",13),c._UZ(4,"mat-icon",14),c.qZA()()),2&n){const t=e.$implicit,i=c.oxw();c.xp6(1),c.Q6J("routerLink",c.VKq(7,gie,t.routerLink))("routerLinkActiveOptions",c.DdM(9,_ie)),c.xp6(1),c.Tol(t.icon),c.xp6(1),c.Q6J("ngIf",i.collapsed),c.xp6(1),c.s9C("matBadge",t.badge),c.Q6J("matBadgeHidden",!t.badge)}}let yie=(()=>{class n{constructor(){this.onToggleSideNav=new c.vpe,this.collapsed=!1,this.screenwidth=0,this.navData=ZM}onResize(t){this.screenwidth=window.innerWidth,this.screenwidth<=968&&(this.collapsed=!1,this.onToggleSideNav.emit({collapsed:this.collapsed,screenwidth:this.screenwidth}))}ngOnInit(){this.screenwidth=window.innerWidth}toggleCollapse(){this.collapsed=!this.collapsed,this.onToggleSideNav.emit({collapsed:this.collapsed,screenwidth:this.screenwidth})}closeSidenav(){this.collapsed=!1,this.onToggleSideNav.emit({collapsed:this.collapsed,screenwidth:this.screenwidth})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-sidenav"]],hostBindings:function(i,r){1&i&&c.NdJ("resize",function(u){return r.onResize(u)},!1,c.Jf7)},outputs:{onToggleSideNav:"onToggleSideNav"},decls:8,vars:4,consts:[[1,"sidenav",3,"ngClass"],[1,"logo-container"],[1,"logo",3,"click"],["class","logo-text",4,"ngIf"],["class","btn-close",3,"click",4,"ngIf"],[1,"sidenav-nav"],["class","sidenav-nav-item",4,"ngFor","ngForOf"],[1,"logo-text"],[1,"btn-close",3,"click"],[1,"fal","fa-times","close-icon"],[1,"sidenav-nav-item"],["href","","routerLinkActive","active",1,"sidenav-nav-link",3,"routerLink","routerLinkActiveOptions"],[1,"sidenav-link-icon"],["class","sidenav-link-text",4,"ngIf"],["matBadgeColor","warn","matBadgeOverlap","false",1,"cart-badge",3,"matBadge","matBadgeHidden"],[1,"sidenav-link-text"]],template:function(i,r){1&i&&(c.TgZ(0,"div",0)(1,"div",1)(2,"button",2),c.NdJ("click",function(){return r.toggleCollapse()}),c._uU(3,">"),c.qZA(),c.YNc(4,fie,2,1,"div",3),c.YNc(5,pie,2,1,"button",4),c.qZA(),c.TgZ(6,"ul",5),c.YNc(7,vie,5,10,"li",6),c.qZA()()),2&i&&(c.Q6J("ngClass",r.collapsed?"sidenav-collapsed":""),c.xp6(4),c.Q6J("ngIf",r.collapsed),c.xp6(1),c.Q6J("ngIf",r.collapsed),c.xp6(2),c.Q6J("ngForOf",r.navData))},dependencies:[Ko,ni,Qi,Rg,zB,hie,KL],styles:[".sidenav[_ngcontent-%COMP%]{background:#092c3d;-webkit-user-select:none;user-select:none;transition:all .5s ease;position:fixed;z-index:1;top:0;width:5rem;height:100vh;box-shadow:.063rem 0 1.25rem #000}.sidenav[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.938rem .938rem 0;width:100%}.sidenav[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{background:#fff;text-align:center;width:3rem;min-width:3rem;border-radius:.313rem;padding:.313rem;font-size:24px;font-weight:900;cursor:pointer;border:none}.sidenav[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{margin-left:1.5rem;font-size:24px;font-weight:700;color:#fff}.sidenav[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{margin-left:auto;cursor:pointer;width:2rem;height:2rem;border-radius:50%;background-color:transparent;border:none}.sidenav[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{color:#fff;font-size:24px}@media screen and (max-width: 450px){.sidenav[_ngcontent-%COMP%]{width:3rem}.sidenav[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0rem;margin-top:5px;margin-left:4px;margin-bottom:15px;width:100%}.sidenav[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{background:#fff;text-align:center;width:2.5rem;min-width:2.5rem;border-radius:.613rem;padding:.313rem;font-size:24px;font-weight:900;cursor:pointer;border:none}.sidenav[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{margin-left:1.5rem;font-size:24px;font-weight:700;color:#fff}}.sidenav-collapsed[_ngcontent-%COMP%]{width:16.55625rem}.sidenav-nav[_ngcontent-%COMP%]{list-style:none;padding:.938rem;margin:0;display:flex;flex-direction:column;align-items:center;height:calc(100% - 3.65rem);cursor:pointer}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]{width:100%;margin-bottom:.625rem}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]   .sidenav-nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;height:3rem;color:#f3f3f3;text-decoration:none;border-radius:.625rem;transition:all .3s ease}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]   .sidenav-nav-link[_ngcontent-%COMP%]   .sidenav-link-icon[_ngcontent-%COMP%]{font-size:22px;width:2rem;min-width:2rem;margin:0 .5rem;text-align:center}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]   .sidenav-nav-link[_ngcontent-%COMP%]   .cart-badge[_ngcontent-%COMP%]{position:fixed}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]   .sidenav-nav-link[_ngcontent-%COMP%]   .sidenav-link-text[_ngcontent-%COMP%]{margin-left:1.5rem}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]:hover   .sidenav-nav-link[_ngcontent-%COMP%]{background-color:#fff;color:#000}.active[_ngcontent-%COMP%]{background-color:#fff}.active[_ngcontent-%COMP%]   .sidenav-link-icon[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]   .sidenav-link-text[_ngcontent-%COMP%]{color:#000}@media screen and (max-width: 450px){.sidenav-nav[_ngcontent-%COMP%]{padding:.2rem}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]   .sidenav-nav-link[_ngcontent-%COMP%]{height:2.6rem}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]   .sidenav-nav-link[_ngcontent-%COMP%]   .sidenav-link-icon[_ngcontent-%COMP%]{font-size:18px;text-align:center;margin-left:5px}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]   .sidenav-nav-link[_ngcontent-%COMP%]   .cart-badge[_ngcontent-%COMP%]{position:fixed}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]   .sidenav-nav-link[_ngcontent-%COMP%]   .sidenav-link-text[_ngcontent-%COMP%]{margin-left:1.5rem}.sidenav-nav[_ngcontent-%COMP%]   .sidenav-nav-item[_ngcontent-%COMP%]:hover   .sidenav-nav-link[_ngcontent-%COMP%]{background-color:#fff;color:#000}}"],data:{animation:[fl("fadeInOut",[qs(":enter",[dr({opacity:0}),sr("90ms 300ms",dr({opacity:1}))]),qs(":leave",[dr({opacity:1}),sr("90ms",dr({opacity:0}))])]),fl("rotate",[qs(":enter",[sr("430ms",Jf([dr({transform:"rotate(0deg)",offset:"0"}),dr({transform:"rotate(0.5turn)",offset:"1"})]))])])]}})}return n})(),bie=(()=>{class n{constructor(){this.title="webshop",this.isSideNavCollapsed=!1,this.screenWidth=0}onToggleSideNav(t){this.screenWidth=t.screenwidth,this.isSideNavCollapsed=t.collapsed}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:2,consts:[[3,"onToggleSideNav"],[3,"collapsed","screenWidth"]],template:function(i,r){1&i&&(c.TgZ(0,"app-sidenav",0),c.NdJ("onToggleSideNav",function(u){return r.onToggleSideNav(u)}),c.qZA(),c._UZ(1,"app-body",1)),2&i&&(c.xp6(1),c.Q6J("collapsed",r.isSideNavCollapsed)("screenWidth",r.screenWidth))},dependencies:[lie,yie]})}return n})(),wie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Oi,o4,p4,k6,R4,xH,k4,w6,sT,o6,p4,o4,k6,R4,xH,k4,w6,sT,o6]})}return n})();function a2(){return(0,Nr.e)((n,e)=>{let t,i=!1;n.subscribe((0,ci.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}function c2(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new vt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function N6(){if(typeof Uint8Array>"u")throw new vt("unimplemented","Uint8Arrays are not available in this environment.")}function F6(){if(!function cR(){return typeof atob<"u"}())throw new vt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class aT{constructor(e){this._delegate=e}static fromBase64String(e){return F6(),new aT(kf.fromBase64String(e))}static fromUint8Array(e){return N6(),new aT(kf.fromUint8Array(e))}toBase64(){return F6(),this._delegate.toBase64()}toUint8Array(){return N6(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function l2(n){return function Iie(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class xie{enableIndexedDbPersistence(e,t){return function U$(n,e){UU(n=zi(n,Po));const t=Rs(n);if(t._uninitializedComponentsProvider)throw new vt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");ru("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new M0;return LU(t,r,new Dk(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function V$(n){UU(n=zi(n,Po));const e=Rs(n);if(e._uninitializedComponentsProvider)throw new vt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");ru("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new M0;return LU(e,i,new yU(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function B$(n){if(n._initialized&&!n._terminated)throw new vt(tt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,dt.Z)(function*(){try{yield(t=(0,dt.Z)(function*(i){if(!ou.D())return Promise.resolve();const r=i+"main";yield ou.delete(r)}),function(i){return t.apply(this,arguments)})(aI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class L6{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ch||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ru("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){kU(this._delegate,e,t,i)}enableNetwork(){return function z$(n){return function x$(n){return n.asyncQueue.enqueue((0,dt.Z)(function*(){const e=yield EU(n),t=yield CU(n);return e.setNetworkEnabled(!0),function(i){const r=Gt(i);return r.vu.delete(0),jv(r)}(t)}))}(Rs(n=zi(n,Po)))}(this._delegate)}disableNetwork(){return function H$(n){return function T$(n){return n.asyncQueue.enqueue((0,dt.Z)(function*(){const e=yield EU(n),t=yield CU(n);return e.setNetworkEnabled(!1),(i=(0,dt.Z)(function*(r){const s=Gt(r);s.vu.add(0),yield yg(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(Rs(n=zi(n,Po)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,AU("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function j$(n){return function(e){const t=new fs;return e.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return function AI(n,e){return MI.apply(this,arguments)}(yield kk(e),t)})),t.promise}(Rs(n=zi(n,Po)))}(this._delegate)}onSnapshotsInSync(e){return function b5(n,e){return function A$(n,e){const t=new rM(e);return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return i=yield O0(n),r=t,Gt(i).ku.add(r),void r.next();var i,r})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return i=yield O0(n),r=t,void Gt(i).ku.delete(r);var i,r}))}}(Rs(n=zi(n,Po)),Vk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new vt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mw(this,Lk(this._delegate,e))}catch(t){throw Ol(t,"collection()","Firestore.collection()")}}doc(e){try{return new zd(this,kI(this._delegate,e))}catch(t){throw Ol(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pl(this,function R$(n,e){if(n=zi(n,RI),Fk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vt(tt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fc(n,null,(t=e,new vf(ji.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ol(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function O5(n,e,t){n=zi(n,Po);const i=Object.assign(Object.assign({},A5),t);return function(r){if(r.maxAttempts<1)throw new vt(tt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,u){const m=new fs;return r.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){const v=yield function IU(n){return sM(n).then(e=>e.datastore)}(r);new C$(r.asyncQueue,v,u,s,m).run()})),m.promise}(Rs(n),r=>e(new M5(n,r)),i)}(this._delegate,t=>e(new U6(this,t)))}batch(){return Rs(this._delegate),new V6(new tV(this._delegate,e=>R0(this._delegate,e)))}loadBundle(e){return function $$(n,e){const t=Rs(n=zi(n,Po)),i=new N$;return function M$(n,e,t,i){const r=function(s,u){let m;return m="string"==typeof s?jC().encode(s):s,v=function(v,C){if(v instanceof Uint8Array)return bU(v,C);if(v instanceof ArrayBuffer)return bU(new Uint8Array(v),C);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new w$(v,u);var v}(t,Kp(e));n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){!function y$(n,e,t){const i=Gt(n);var r;(r=(0,dt.Z)(function*(s,u,m){try{const v=yield u.getMetadata();if(yield function(q,ne){const ae=Gt(q),ye=rs(ne.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",We=>ae.qs.getBundleMetadata(We,ne.id)).then(We=>!!We&&We.createTime.compareTo(ye)>=0)}(s.localStore,v))return yield u.close(),m._completeWith({taskState:"Success",documentsLoaded:(q=v).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);m._updateProgress(a(v));const C=new o(v,s.localStore,u.serializer);let M=yield u.bc();for(;M;){const q=yield C.zu(M);q&&m._updateProgress(q),M=yield u.bc()}const L=yield C.complete();return yield Xp(s,L.Ju,void 0),yield function(q,ne){const ae=Gt(q);return ae.persistence.runTransaction("Save bundle","readwrite",ye=>ae.qs.saveBundleMetadata(ye,ne))}(s.localStore,v),m._completeWith(L.progress),Promise.resolve(L.Hu)}catch(v){return ru("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v),Promise.resolve(new Set)}var q}),function(s,u,m){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield kk(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function q$(n,e){return function O$(n,e){return n.asyncQueue.enqueue((0,dt.Z)(function*(){return function(t,i){const r=Gt(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield aM(n),e)}))}(Rs(n=zi(n,Po)),e).then(t=>t?new fc(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Pl(this,t):null)}}class mO extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new aT(new kf(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zd.forKey(t,this.firestore,null)}}class U6{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mO(e)}get(e){const t=Iy(e);return this._delegate.get(t).then(i=>new cT(this._firestore,new em(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Iy(e);return i?(c2("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Iy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Iy(e);return this._delegate.delete(t),this}}class V6{constructor(e){this._delegate=e}set(e,t,i){const r=Iy(e);return i?(c2("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Iy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Iy(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cy{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new jI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lT(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Cy.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Cy(e,new mO(e),t),r.set(t,s)),s}}Cy.INSTANCES=new WeakMap;class zd{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mO(e)}static forPath(e,t,i){if(e.length%2!=0)throw new vt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zd(t,new Oo(t._delegate,i,new qt(e)))}static forKey(e,t,i){return new zd(t,new Oo(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new mw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mw(this.firestore,Lk(this._delegate,e))}catch(t){throw Ol(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ie.m9)(e))instanceof Oo&&NU(this._delegate,e)}set(e,t){t=c2("DocumentReference.set",t);try{return t?Wk(this._delegate,e,t):Wk(this._delegate,e)}catch(i){throw Ol(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?Zk(this._delegate,e):Zk(this._delegate,e,t,...i)}catch(r){throw Ol(r,"updateDoc()","DocumentReference.update()")}}delete(){return function y5(n){return R0(zi(n.firestore,Po),[new og(n._key,Dr.none())])}(this._delegate)}onSnapshot(...e){const t=B6(e),i=j6(e,r=>new cT(this.firestore,new em(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Kk(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function p5(n){n=zi(n,Oo);const e=zi(n.firestore,Po),t=Rs(e),i=new xg(e);return function D$(n,e){const t=new fs;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return(i=(0,dt.Z)(function*(r,s,u){try{const m=yield function(v,C){const M=Gt(v);return M.persistence.runTransaction("read document","readonly",L=>M.localDocuments.getDocument(L,C))}(r,s);m.isFoundDocument()?u.resolve(m):m.isNoDocument()?u.resolve(null):u.reject(new vt(tt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Gv(m,`Failed to get document '${s} from cache`);u.reject(v)}}),function(r,s,u){return i.apply(this,arguments)})(yield aM(n),e,t);var i})),t.promise}(t,n._key).then(r=>new em(e,i,n._key,r,new Qv(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function m5(n){n=zi(n,Oo);const e=zi(n.firestore,Po);return xU(Rs(e),n._key,{source:"server"}).then(t=>Yk(e,n,t))}(this._delegate):function f5(n){n=zi(n,Oo);const e=zi(n.firestore,Po);return xU(Rs(e),n._key).then(t=>Yk(e,n,t))}(this._delegate),t.then(i=>new cT(this.firestore,new em(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new zd(this.firestore,this._delegate.withConverter(e?Cy.getInstance(this.firestore,e):null))}}function Ol(n,e,t){return n.message=n.message.replace(e,t),n}function B6(n){for(const e of n)if("object"==typeof e&&!l2(e))return e;return{}}function j6(n,e){var t,i;let r;return r=l2(n[0])?n[0]:l2(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class cT{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zd(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return JU(this._delegate,e._delegate)}}class lT extends cT{data(e){const t=this._delegate.data(e);return function QD(n,e){n||ln()}(void 0!==t),t}}class Pl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mO(e)}where(e,t,i){try{return new Pl(this.firestore,Cg(this._delegate,function t5(n,e,t){const i=e,r=pM("where",n);return BI._create(r,i,t)}(e,t,i)))}catch(r){throw Ol(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Pl(this.firestore,Cg(this._delegate,function n5(n,e="asc"){const t=e,i=pM("orderBy",n);return qk._create(i,t)}(e,t)))}catch(i){throw Ol(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pl(this.firestore,Cg(this._delegate,function r5(n){return PU("limit",n),mM._create("limit",n,"F")}(e)))}catch(t){throw Ol(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Pl(this.firestore,Cg(this._delegate,function o5(n){return PU("limitToLast",n),mM._create("limitToLast",n,"L")}(e)))}catch(t){throw Ol(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pl(this.firestore,Cg(this._delegate,function s5(...n){return gM._create("startAt",n,!0)}(...e)))}catch(t){throw Ol(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pl(this.firestore,Cg(this._delegate,function a5(...n){return gM._create("startAfter",n,!1)}(...e)))}catch(t){throw Ol(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pl(this.firestore,Cg(this._delegate,function c5(...n){return _M._create("endBefore",n,!1)}(...e)))}catch(t){throw Ol(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pl(this.firestore,Cg(this._delegate,function l5(...n){return _M._create("endAt",n,!0)}(...e)))}catch(t){throw Ol(t,"endAt()","Query.endAt()")}}isEqual(e){return Uk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function _5(n){n=zi(n,fc);const e=zi(n.firestore,Po),t=Rs(e),i=new xg(e);return function S$(n,e){const t=new fs;return n.asyncQueue.enqueueAndForget((0,dt.Z)(function*(){return(i=(0,dt.Z)(function*(r,s,u){try{const m=yield Uv(r,s,!0),v=new _(s,m.ir),C=v.sc(m.documents),M=v.applyChanges(C,!1);u.resolve(M.snapshot)}catch(m){const v=Gv(m,`Failed to execute query '${s} against cache`);u.reject(v)}}),function(r,s,u){return i.apply(this,arguments)})(yield aM(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Ig(e,i,n,r))}(this._delegate):"server"===e?.source?function v5(n){n=zi(n,fc);const e=zi(n.firestore,Po),t=Rs(e),i=new xg(e);return TU(t,n._query,{source:"server"}).then(r=>new Ig(e,i,n,r))}(this._delegate):function g5(n){n=zi(n,fc);const e=zi(n.firestore,Po),t=Rs(e),i=new xg(e);return GU(n._query),TU(t,n._query).then(r=>new Ig(e,i,n,r))}(this._delegate),t.then(i=>new u2(this.firestore,new Ig(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=B6(e),i=j6(e,r=>new u2(this.firestore,new Ig(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Kk(this._delegate,t,i)}withConverter(e){return new Pl(this.firestore,this._delegate.withConverter(e?Cy.getInstance(this.firestore,e):null))}}class Die{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new lT(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class u2{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Pl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lT(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Die(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new lT(this._firestore,i))})}isEqual(e){return JU(this._delegate,e._delegate)}}class mw extends Pl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zd(this.firestore,e):null}doc(e){try{return new zd(this.firestore,void 0===e?kI(this._delegate):kI(this._delegate,e))}catch(t){throw Ol(t,"doc()","CollectionReference.doc()")}}add(e){return eV(this._delegate,e).then(t=>new zd(this.firestore,t))}isEqual(e){return NU(this._delegate,e._delegate)}withConverter(e){return new mw(this.firestore,this._delegate.withConverter(e?Cy.getInstance(this.firestore,e):null))}}function Iy(n){return zi(n,Oo)}class d2{constructor(...e){this._delegate=new Jp(...e)}static documentId(){return new d2(Ho.keyField().canonicalString())}isEqual(e){return(e=(0,ie.m9)(e))instanceof Jp&&this._delegate._internalPath.isEqual(e._internalPath)}}class xy{constructor(e){this._delegate=e}static serverTimestamp(){const e=function R5(){return new Bk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xy(e)}static delete(){const e=function P5(){return new FI("deleteField")}();return e._methodName="FieldValue.delete",new xy(e)}static arrayUnion(...e){const t=function k5(...n){return new Y$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xy(t)}static arrayRemove(...e){const t=function N5(...n){return new Q$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xy(t)}static increment(e){const t=function F5(n){return new X$("increment",n)}(e);return t._methodName="FieldValue.increment",new xy(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Sie={Firestore:L6,GeoPoint:lM,Timestamp:ho,Blob:aT,Transaction:U6,WriteBatch:V6,DocumentReference:zd,DocumentSnapshot:cT,Query:Pl,QueryDocumentSnapshot:lT,QuerySnapshot:u2,CollectionReference:mw,FieldPath:d2,FieldValue:xy,setLogLevel:function Tie(n){!function YP(n){mf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function z6(n,e){return function Oie(n,e=K0.z){return new rr.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function h2(n,e){return z6(n,e).pipe((0,gn.U)(t=>({payload:t,type:"query"})))}function gO(n,e){return h2(n,e).pipe(Sg(void 0),a2(),(0,gn.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,m)=>{const v=r.find(M=>M.doc.ref.isEqual(u.ref)),C=t?.payload.docs.find(M=>M.ref.isEqual(u.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(u.metadata)||!v&&C&&JSON.stringify(C.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:u}})}),s}))}function H6(n,e,t){return gO(n,t).pipe(V0((i,r)=>function Rie(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function kie(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return f2(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return f2(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return f2(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),(0,zN.x)(),(0,gn.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function f2(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function $6(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Mie(n){(function Aie(n,e){n.INTERNAL.registerComponent(new tu.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Sie)))})(n,(e,t)=>new L6(e,t,new xie)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(XB.Z);class q6{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=gO(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gn.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Sg(void 0),a2(),or(([i,r])=>r.length>0||!i),(0,gn.U)(([i,r])=>r),An.iC)}auditTrail(e){return this.stateChanges(e).pipe(V0((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=$6(e);return H6(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return h2(this.query,this.afs.schedulers.outsideAngular).pipe((0,gn.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),An.iC)}get(e){return(0,Sr.D)(this.query.get(e)).pipe(An.iC)}add(e){return this.ref.add(e)}doc(e){return new G6(this.ref.doc(e),this.afs)}}class G6{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=K6(i,t);return new q6(r,s,this.afs)}snapshotChanges(){return function Pie(n,e){return z6(n,e).pipe(Sg(void 0),a2(),(0,gn.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Sr.D)(this.ref.get(e)).pipe(An.iC)}}class Nie{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gO(this.query,this.afs.schedulers.outsideAngular).pipe((0,gn.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),or(t=>t.length>0),An.iC):gO(this.query,this.afs.schedulers.outsideAngular).pipe(An.iC)}auditTrail(e){return this.stateChanges(e).pipe(V0((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=$6(e);return H6(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return h2(this.query,this.afs.schedulers.outsideAngular).pipe((0,gn.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),An.iC)}get(e){return(0,Sr.D)(this.query.get(e)).pipe(An.iC)}}const W6=new c.OlP("angularfire2.enableFirestorePersistence"),Z6=new c.OlP("angularfire2.firestore.persistenceSettings"),Fie=new c.OlP("angularfire2.firestore.settings"),Lie=new c.OlP("angularfire2.firestore.use-emulator");function K6(n,e=(t=>t)){return{query:e(n),ref:n}}let Y6=(()=>{class n{constructor(t,i,r,s,u,m,v,C,M,L,q,ne,ae,ye,We,wt,Ot){this.schedulers=v;const Mt=(0,Sl.on)(t,m,i),Lt=M;L&&oL(Mt,m,q,ae,ye,We,ne,wt),[this.firestore,this.persistenceEnabled$]=(0,Sl.cc)(`${Mt.name}.firestore`,"AngularFirestore",Mt.name,()=>{const Mn=m.runOutsideAngular(()=>Mt.firestore());if(s&&Mn.settings(s),Lt&&Mn.useEmulator(...Lt),r&&!wr(u)){const Rn=()=>{try{return(0,Sr.D)(Mn.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Ui){return typeof console<"u"&&console.warn(Ui),(0,_n.of)(!1)}};return[Mn,m.runOutsideAngular(Rn)]}return[Mn,(0,_n.of)(!1)]},[s,Lt,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=K6(r,i),m=this.schedulers.ngZone.run(()=>s);return new q6(m,u,this)}collectionGroup(t,i){const r=i||(u=>u),s=this.firestore.collectionGroup(t);return new Nie(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new G6(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sl.Dh),c.LFG(Sl.xv,8),c.LFG(W6,8),c.LFG(Fie,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(An.HU),c.LFG(Z6,8),c.LFG(Lie,8),c.LFG(sL,8),c.LFG(JF,8),c.LFG(eL,8),c.LFG(tL,8),c.LFG(nL,8),c.LFG(iL,8),c.LFG(rL,8),c.LFG(pp,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Uie=(()=>{class n{constructor(){lz.Z.registerVersion("angularfire",An.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:W6,useValue:!0},{provide:Z6,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Y6]}),n})(),Vie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n});static#n=this.\u0275inj=c.cJS({imports:[Oi]})}return n})();const Q6={apiKey:"AIzaSyBUhtsLE6mKhnLFA4hrTdgtPRvT9DFPews",authDomain:"pelda-4422f.firebaseapp.com",projectId:"pelda-4422f",storageBucket:"pelda-4422f.appspot.com",messagingSenderId:"999999888137",appId:"1:999999888137:web:c55fe757b0ce70c8fcd1d8",useEmulator:!0,experimentalForceLongPolling:!0};let Bie=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=c.oAB({type:n,bootstrap:[bie]});static#n=this.\u0275inj=c.cJS({providers:[Bf,Y6],imports:[BO(()=>FT(Q6)),X5(()=>tq()),LG(()=>VG()),ih.forRoot(),Fc,ph,cie,wie,VQ,sT,cV,Oi,Vie,bz,Uie,Sl.hO.initializeApp(Q6),bz,oP(()=>lP())]})}return n})();Br().bootstrapModule(Bie).catch(n=>console.error(n))},3219:(en,Ae,Q)=>{Object.defineProperty(Ae,"__esModule",{value:!0});var ce,Ce,c=Q(8005),U=Q(3661),K=Q(6553),pe=Q(8836),Re=((ce={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ce["bad-app-name"]="Illegal App name: '{$appName}",ce["duplicate-app"]="Firebase App named '{$appName}' already exists",ce["app-deleted"]="Firebase App named '{$appName}' already deleted",ce["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ce["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ce),Oe=new U.ErrorFactory("app","Firebase",Re),ut="@firebase/app",nt="[DEFAULT]",$e=((Ce={})[ut]="fire-core",Ce["@firebase/analytics"]="fire-analytics",Ce["@firebase/auth"]="fire-auth",Ce["@firebase/database"]="fire-rtdb",Ce["@firebase/functions"]="fire-fn",Ce["@firebase/installations"]="fire-iid",Ce["@firebase/messaging"]="fire-fcm",Ce["@firebase/performance"]="fire-perf",Ce["@firebase/remote-config"]="fire-rc",Ce["@firebase/storage"]="fire-gcs",Ce["@firebase/firestore"]="fire-fst",Ce["fire-js"]="fire-js",Ce["firebase-wrapper"]="fire-js-all",Ce),it=new pe.Logger("@firebase/app"),he=function(){function De(Ee,He,je){var ct,gt,At=this;this.firebase_=je,this.isDeleted_=!1,this.name_=He.name,this.automaticDataCollectionEnabled_=He.automaticDataCollectionEnabled||!1,this.options_=U.deepCopy(Ee),this.container=new K.ComponentContainer(He.name),this._addComponent(new K.Component("app",function(){return At},"PUBLIC"));try{for(var bt=c.__values(this.firebase_.INTERNAL.components.values()),Tn=bt.next();!Tn.done;Tn=bt.next())this._addComponent(Tn.value)}catch(Nn){ct={error:Nn}}finally{try{Tn&&!Tn.done&&(gt=bt.return)&&gt.call(bt)}finally{if(ct)throw ct.error}}}return Object.defineProperty(De.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Ee){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Ee},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),De.prototype.delete=function(){var Ee=this;return new Promise(function(He){Ee.checkDestroyed_(),He()}).then(function(){return Ee.firebase_.INTERNAL.removeApp(Ee.name_),Promise.all(Ee.container.getProviders().map(function(He){return He.delete()}))}).then(function(){Ee.isDeleted_=!0})},De.prototype._getService=function(Ee,He){return void 0===He&&(He=nt),this.checkDestroyed_(),this.container.getProvider(Ee).getImmediate({identifier:He})},De.prototype._removeServiceInstance=function(Ee,He){void 0===He&&(He=nt),this.container.getProvider(Ee).clearInstance(He)},De.prototype._addComponent=function(Ee){try{this.container.addComponent(Ee)}catch(He){it.debug("Component "+Ee.name+" failed to register with FirebaseApp "+this.name,He)}},De.prototype._addOrOverwriteComponent=function(Ee){this.container.addOrOverwriteComponent(Ee)},De.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Oe.create("app-deleted",{appName:this.name_})},De}();he.prototype.name&&he.prototype.options||he.prototype.delete||console.log("dc");var Et=function Le(){var De=function Ge(De){var Ee={},He=new Map,je={__esModule:!0,initializeApp:function At(tn,Dn){void 0===Dn&&(Dn={}),("object"!=typeof Dn||null===Dn)&&(Dn={name:Dn});var cn=Dn;void 0===cn.name&&(cn.name=nt);var Fn=cn.name;if("string"!=typeof Fn||!Fn)throw Oe.create("bad-app-name",{appName:String(Fn)});if(U.contains(Ee,Fn))throw Oe.create("duplicate-app",{appName:Fn});var Un=new De(tn,cn,je);return Ee[Fn]=Un,Un},app:gt,registerVersion:function dn(tn,Dn,Ut){var cn,Fn=null!==(cn=$e[tn])&&void 0!==cn?cn:tn;Ut&&(Fn+="-"+Ut);var Un=Fn.match(/\s|\//),wi=Dn.match(/\s|\//);if(Un||wi){var Si=['Unable to register library "'+Fn+'" with version "'+Dn+'":'];return Un&&Si.push('library name "'+Fn+'" contains illegal characters (whitespace or "/")'),Un&&wi&&Si.push("and"),wi&&Si.push('version name "'+Dn+'" contains illegal characters (whitespace or "/")'),void it.warn(Si.join(" "))}Tn(new K.Component(Fn+"-version",function(){return{library:Fn,version:Dn}},"VERSION"))},setLogLevel:pe.setLogLevel,onLog:function Nn(tn,Dn){if(null!==tn&&"function"!=typeof tn)throw Oe.create("invalid-log-argument",{appName:name});pe.setUserLogHandler(tn,Dn)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:Tn,removeApp:function ct(tn){delete Ee[tn]},components:He,useAsService:function fn(tn,Dn){return"serverAuth"===Dn?null:Dn}}};function gt(tn){if(!U.contains(Ee,tn=tn||nt))throw Oe.create("no-app",{appName:tn});return Ee[tn]}function Tn(tn){var Dn,Ut,cn=tn.name;if(He.has(cn))return it.debug("There were multiple attempts to register component "+cn+"."),"PUBLIC"===tn.type?je[cn]:null;if(He.set(cn,tn),"PUBLIC"===tn.type){var Fn=function(ti){if(void 0===ti&&(ti=gt()),"function"!=typeof ti[cn])throw Oe.create("invalid-app-argument",{appName:cn});return ti[cn]()};void 0!==tn.serviceProps&&U.deepExtend(Fn,tn.serviceProps),je[cn]=Fn,De.prototype[cn]=function(){for(var ti=[],Vi=0;Vi<arguments.length;Vi++)ti[Vi]=arguments[Vi];return this._getService.bind(this,cn).apply(this,tn.multipleInstances?ti:[])}}try{for(var Un=c.__values(Object.keys(Ee)),wi=Un.next();!wi.done;wi=Un.next())Ee[wi.value]._addComponent(tn)}catch(ti){Dn={error:ti}}finally{try{wi&&!wi.done&&(Ut=Un.return)&&Ut.call(Un)}finally{if(Dn)throw Dn.error}}return"PUBLIC"===tn.type?je[cn]:null}return je.default=je,Object.defineProperty(je,"apps",{get:function bt(){return Object.keys(Ee).map(function(tn){return Ee[tn]})}}),gt.App=De,je}(he);return De.INTERNAL=c.__assign(c.__assign({},De.INTERNAL),{createFirebaseNamespace:Le,extendNamespace:function Ee(He){U.deepExtend(De,He)},createSubscribe:U.createSubscribe,ErrorFactory:U.ErrorFactory,deepExtend:U.deepExtend}),De}(),ot=function(){function De(Ee){this.container=Ee}return De.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(He){if(function Kt(De){var Ee=De.getComponent();return"VERSION"===Ee?.type}(He)){var je=He.getImmediate();return je.library+"/"+je.version}return null}).filter(function(He){return He}).join(" ")},De}();if(U.isBrowser()&&void 0!==self.firebase){it.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var un=self.firebase.SDK_VERSION;un&&un.indexOf("LITE")>=0&&it.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var rn=Et.initializeApp;Et.initializeApp=function(){for(var De=[],Ee=0;Ee<arguments.length;Ee++)De[Ee]=arguments[Ee];return U.isNode()&&it.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),rn.apply(void 0,De)};var fi=Et;(function nn(De,Ee){De.INTERNAL.registerComponent(new K.Component("platform-logger",function(He){return new ot(He)},"PRIVATE")),De.registerVersion(ut,"0.6.11",Ee),De.registerVersion("fire-js","")})(fi),Ae.default=fi,Ae.firebase=fi},6553:(en,Ae,Q)=>{Object.defineProperty(Ae,"__esModule",{value:!0});var c=Q(8005),U=Q(3661),K=function(){function Ve(z,G,de){this.name=z,this.instanceFactory=G,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return Ve.prototype.setInstantiationMode=function(z){return this.instantiationMode=z,this},Ve.prototype.setMultipleInstances=function(z){return this.multipleInstances=z,this},Ve.prototype.setServiceProps=function(z){return this.serviceProps=z,this},Ve}(),pe="[DEFAULT]",ce=function(){function Ve(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return Ve.prototype.get=function(z){void 0===z&&(z=pe);var G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){var de=new U.Deferred;this.instancesDeferred.set(G,de);try{var Ne=this.getOrInitializeService(G);Ne&&de.resolve(Ne)}catch{}}return this.instancesDeferred.get(G).promise},Ve.prototype.getImmediate=function(z){var G=c.__assign({identifier:pe,optional:!1},z),Ne=G.optional,me=this.normalizeInstanceIdentifier(G.identifier);try{var lt=this.getOrInitializeService(me);if(!lt){if(Ne)return null;throw Error("Service "+this.name+" is not available")}return lt}catch(st){if(Ne)return null;throw st}},Ve.prototype.getComponent=function(){return this.component},Ve.prototype.setComponent=function(z){var G,de;if(z.name!==this.name)throw Error("Mismatching Component "+z.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=z,function Oe(Ve){return"EAGER"===Ve.instantiationMode}(z))try{this.getOrInitializeService(pe)}catch{}try{for(var Ne=c.__values(this.instancesDeferred.entries()),me=Ne.next();!me.done;me=Ne.next()){var lt=c.__read(me.value,2),mt=lt[1],ke=this.normalizeInstanceIdentifier(lt[0]);try{var at=this.getOrInitializeService(ke);mt.resolve(at)}catch{}}}catch(Ze){G={error:Ze}}finally{try{me&&!me.done&&(de=Ne.return)&&de.call(Ne)}finally{if(G)throw G.error}}},Ve.prototype.clearInstance=function(z){void 0===z&&(z=pe),this.instancesDeferred.delete(z),this.instances.delete(z)},Ve.prototype.delete=function(){return c.__awaiter(this,void 0,void 0,function(){var z;return c.__generator(this,function(G){switch(G.label){case 0:return z=Array.from(this.instances.values()),[4,Promise.all(c.__spread(z.filter(function(de){return"INTERNAL"in de}).map(function(de){return de.INTERNAL.delete()}),z.filter(function(de){return"_delete"in de}).map(function(de){return de._delete()})))];case 1:return G.sent(),[2]}})})},Ve.prototype.isComponentSet=function(){return null!=this.component},Ve.prototype.getOrInitializeService=function(z){var G=this.instances.get(z);return!G&&this.component&&(G=this.component.instanceFactory(this.container,function Re(Ve){return Ve===pe?void 0:Ve}(z)),this.instances.set(z,G)),G||null},Ve.prototype.normalizeInstanceIdentifier=function(z){return this.component?this.component.multipleInstances?z:pe:z},Ve}(),ut=function(){function Ve(z){this.name=z,this.providers=new Map}return Ve.prototype.addComponent=function(z){var G=this.getProvider(z.name);if(G.isComponentSet())throw new Error("Component "+z.name+" has already been registered with "+this.name);G.setComponent(z)},Ve.prototype.addOrOverwriteComponent=function(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)},Ve.prototype.getProvider=function(z){if(this.providers.has(z))return this.providers.get(z);var G=new ce(z,this);return this.providers.set(z,G),G},Ve.prototype.getProviders=function(){return Array.from(this.providers.values())},Ve}();Ae.Component=K,Ae.ComponentContainer=ut,Ae.Provider=ce},4467:(en,Ae,Q)=>{var U=Q(8005),K=Q(3219),pe=Q(8836),ce=Q(3661),Re=Q(8602),Oe=Q(6553),Ve=function ut(f){return f&&"object"==typeof f&&"default"in f?f:{default:f}}(K),z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=function(f){function l(h,g){var y=this;return(y=f.call(this,g)||this).code=h,y.message=g,y.name="FirebaseError",y.toString=function(){return y.name+": [code="+y.code+"]: "+y.message},y}return U.__extends(l,f),l}(Error),de=new pe.Logger("@firebase/firestore");function Ne(){return de.logLevel}function me(f){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];if(de.logLevel<=pe.LogLevel.DEBUG){var g=l.map(mt);de.debug.apply(de,U.__spreadArrays(["Firestore (7.24.0): "+f],g))}}function lt(f){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];if(de.logLevel<=pe.LogLevel.ERROR){var g=l.map(mt);de.error.apply(de,U.__spreadArrays(["Firestore (7.24.0): "+f],g))}}function st(f){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];if(de.logLevel<=pe.LogLevel.WARN){var g=l.map(mt);de.warn.apply(de,U.__spreadArrays(["Firestore (7.24.0): "+f],g))}}function mt(f){if("string"==typeof f)return f;try{return JSON.stringify(f)}catch{return f}}function ke(f){void 0===f&&(f="Unexpected state");var l="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+f;throw lt(l),new Error(l)}function at(f,l){f||ke()}function Ze(f,l){return f}function Ce(f){var l=0;for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&l++;return l}function nt(f,l){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&l(h,f[h])}function $e(f){for(var l in f)if(Object.prototype.hasOwnProperty.call(f,l))return!1;return!0}var it=function(){function f(l,h,g){void 0===h?h=0:h>l.length&&ke(),void 0===g?g=l.length-h:g>l.length-h&&ke(),this.segments=l,this.offset=h,this.t=g}return Object.defineProperty(f.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),f.prototype.isEqual=function(l){return 0===f.i(this,l)},f.prototype.child=function(l){var h=this.segments.slice(this.offset,this.limit());return l instanceof f?l.forEach(function(g){h.push(g)}):h.push(l),this.o(h)},f.prototype.limit=function(){return this.offset+this.length},f.prototype.u=function(l){return this.o(this.segments,this.offset+(l=void 0===l?1:l),this.length-l)},f.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},f.prototype.l=function(){return this.segments[this.offset]},f.prototype._=function(){return this.get(this.length-1)},f.prototype.get=function(l){return this.segments[this.offset+l]},f.prototype.m=function(){return 0===this.length},f.prototype.T=function(l){if(l.length<this.length)return!1;for(var h=0;h<this.length;h++)if(this.get(h)!==l.get(h))return!1;return!0},f.prototype.I=function(l){if(this.length+1!==l.length)return!1;for(var h=0;h<this.length;h++)if(this.get(h)!==l.get(h))return!1;return!0},f.prototype.forEach=function(l){for(var h=this.offset,g=this.limit();h<g;h++)l(this.segments[h])},f.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},f.i=function(l,h){for(var g=Math.min(l.length,h.length),y=0;y<g;y++){var I=l.get(y),D=h.get(y);if(I<D)return-1;if(I>D)return 1}return l.length<h.length?-1:l.length>h.length?1:0},f}(),he=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.prototype.o=function(h,g,y){return new l(h,g,y)},l.prototype.R=function(){return this.A().join("/")},l.prototype.toString=function(){return this.R()},l.g=function(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];for(var y=[],I=0,D=h;I<D.length;I++){var k=D[I];if(k.indexOf("//")>=0)throw new G(z.INVALID_ARGUMENT,"Invalid segment ("+k+"). Paths must not contain // in them.");y.push.apply(y,k.split("/").filter(function(V){return V.length>0}))}return new l(y)},l.P=function(){return new l([])},l}(it),ue=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ge=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.prototype.o=function(h,g,y){return new l(h,g,y)},l.V=function(h){return ue.test(h)},l.prototype.R=function(){return this.A().map(function(h){return h=h.replace("\\","\\\\").replace("`","\\`"),l.V(h)||(h="`"+h+"`"),h}).join(".")},l.prototype.toString=function(){return this.R()},l.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},l.v=function(){return new l(["__name__"])},l.S=function(h){for(var g=[],y="",I=0,D=function(){if(0===y.length)throw new G(z.INVALID_ARGUMENT,"Invalid field path ("+h+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");g.push(y),y=""},k=!1;I<h.length;){var V=h[I];if("\\"===V){if(I+1===h.length)throw new G(z.INVALID_ARGUMENT,"Path has trailing escape character: "+h);var Z=h[I+1];if("\\"!==Z&&"."!==Z&&"`"!==Z)throw new G(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+h);y+=Z,I+=2}else"`"===V?(k=!k,I++):"."!==V||k?(y+=V,I++):(D(),I++)}if(D(),k)throw new G(z.INVALID_ARGUMENT,"Unterminated ` in path: "+h);return new l(g)},l.P=function(){return new l([])},l}(it),Le=function(){function f(l){this.path=l}return f.D=function(l){return new f(he.g(l))},f.C=function(l){return new f(he.g(l).u(5))},f.prototype.N=function(l){return this.path.length>=2&&this.path.get(this.path.length-2)===l},f.prototype.isEqual=function(l){return null!==l&&0===he.i(this.path,l.path)},f.prototype.toString=function(){return this.path.toString()},f.i=function(l,h){return he.i(l.path,h.path)},f.F=function(l){return l.length%2==0},f.$=function(l){return new f(new he(l.slice()))},f}();function Et(f,l){if(0!==l.length)throw new G(z.INVALID_ARGUMENT,"Function "+f+"() does not support arguments, but was called with "+fn(l.length,"argument")+".")}function ot(f,l,h){if(l.length!==h)throw new G(z.INVALID_ARGUMENT,"Function "+f+"() requires "+fn(h,"argument")+", but was called with "+fn(l.length,"argument")+".")}function Kt(f,l,h){if(l.length<h)throw new G(z.INVALID_ARGUMENT,"Function "+f+"() requires at least "+fn(h,"argument")+", but was called with "+fn(l.length,"argument")+".")}function nn(f,l,h,g){if(l.length<h||l.length>g)throw new G(z.INVALID_ARGUMENT,"Function "+f+"() requires between "+h+" and "+g+" arguments, but was called with "+fn(l.length,"argument")+".")}function un(f,l,h,g){je(f,l,Nn(h)+" argument",g)}function rn(f,l,h,g){void 0!==g&&un(f,l,h,g)}function fi(f,l,h,g){je(f,l,h+" option",g)}function De(f,l,h,g){void 0!==g&&fi(f,l,h,g)}function Ee(f,l,h,g,y){void 0!==g&&function(I,D,k,V,Z){for(var re=[],ge=0,_e=Z;ge<_e.length;ge++){var Pe=_e[ge];if(Pe===V)return;re.push(gt(Pe))}var et=gt(V);throw new G(z.INVALID_ARGUMENT,"Invalid value "+et+" provided to function "+I+'() for option "'+k+'". Acceptable values: '+re.join(", "))}(f,0,h,g,y)}function He(f,l,h,g){if(!l.some(function(y){return y===g}))throw new G(z.INVALID_ARGUMENT,"Invalid value "+gt(g)+" provided to function "+f+"() for its "+Nn(h)+" argument. Acceptable values: "+l.join(", "));return g}function je(f,l,h,g){if(!("object"===l?ct(g):"non-empty string"===l?"string"==typeof g&&""!==g:typeof g===l)){var y=gt(g);throw new G(z.INVALID_ARGUMENT,"Function "+f+"() requires its "+h+" to be of type "+l+", but it was: "+y)}}function ct(f){return"object"==typeof f&&null!==f&&(Object.getPrototypeOf(f)===Object.prototype||null===Object.getPrototypeOf(f))}function gt(f){if(void 0===f)return"undefined";if(null===f)return"null";if("string"==typeof f)return f.length>20&&(f=f.substring(0,20)+"..."),JSON.stringify(f);if("number"==typeof f||"boolean"==typeof f)return""+f;if("object"==typeof f){if(f instanceof Array)return"an array";var l=function(h){if(h.constructor){var g=/function\s+([^\s(]+)\s*\(/.exec(h.constructor.toString());if(g&&g.length>1)return g[1]}return null}(f);return l?"a custom "+l+" object":"an object"}return"function"==typeof f?"a function":ke()}function At(f,l,h){if(void 0===h)throw new G(z.INVALID_ARGUMENT,"Function "+f+"() requires a valid "+Nn(l)+" argument, but it was undefined.")}function bt(f,l,h){nt(l,function(g,y){if(h.indexOf(g)<0)throw new G(z.INVALID_ARGUMENT,"Unknown option '"+g+"' passed to function "+f+"(). Available options: "+h.join(", "))})}function Tn(f,l,h,g){var y=gt(g);return new G(z.INVALID_ARGUMENT,"Function "+f+"() requires its "+Nn(h)+" argument to be a "+l+", but it was: "+y)}function dn(f,l,h){if(h<=0)throw new G(z.INVALID_ARGUMENT,"Function "+f+"() requires its "+Nn(l)+" argument to be a positive number, but it was: "+h+".")}function Nn(f){switch(f){case 1:return"first";case 2:return"second";case 3:return"third";default:return f+"th"}}function fn(f,l){return f+" "+l+(1===f?"":"s")}function tn(f){var l=typeof self<"u"&&(self.crypto||self.msCrypto),h=new Uint8Array(f);if(l&&"function"==typeof l.getRandomValues)l.getRandomValues(h);else for(var g=0;g<f;g++)h[g]=Math.floor(256*Math.random());return h}var Dn=function(){function f(){}return f.k=function(){for(var h=62*Math.floor(256/62),g="";g.length<20;)for(var y=tn(40),I=0;I<y.length;++I)g.length<20&&y[I]<h&&(g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(y[I]%62));return g},f}();function Ut(f,l){return f<l?-1:f>l?1:0}function cn(f,l,h){return f.length===l.length&&f.every(function(g,y){return h(g,l[y])})}function Fn(f){return f+"\0"}var Un=function(){function f(l){this.M=l}return f.fromBase64String=function(l){return new f(atob(l))},f.fromUint8Array=function(l){return new f(function(h){for(var g="",y=0;y<h.length;++y)g+=String.fromCharCode(h[y]);return g}(l))},f.prototype.toBase64=function(){return btoa(this.M)},f.prototype.toUint8Array=function(){return function(l){for(var h=new Uint8Array(l.length),g=0;g<l.length;g++)h[g]=l.charCodeAt(g);return h}(this.M)},f.prototype.O=function(){return 2*this.M.length},f.prototype.L=function(l){return Ut(this.M,l.M)},f.prototype.isEqual=function(l){return this.M===l.M},f}();Un.B=new Un("");var wi=function(){function f(l){this.q=l}return f.fromBase64String=function(l){try{return new f(Un.fromBase64String(l))}catch(h){throw new G(z.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+h)}},f.fromUint8Array=function(l){return new f(Un.fromUint8Array(l))},f.prototype.toBase64=function(){return this.q.toBase64()},f.prototype.toUint8Array=function(){return this.q.toUint8Array()},f.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},f.prototype.isEqual=function(l){return this.q.isEqual(l.q)},f}();function Si(){if(typeof Uint8Array>"u")throw new G(z.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ti(){if(typeof atob>"u")throw new G(z.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Vi=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.fromBase64String=function(h){ot("Blob.fromBase64String",arguments,1),un("Blob.fromBase64String","string",1,h),ti();try{return new l(Un.fromBase64String(h))}catch(g){throw new G(z.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+g)}},l.fromUint8Array=function(h){if(ot("Blob.fromUint8Array",arguments,1),Si(),!(h instanceof Uint8Array))throw Tn("Blob.fromUint8Array","Uint8Array",1,h);return new l(Un.fromUint8Array(h))},l.prototype.toBase64=function(){return ot("Blob.toBase64",arguments,0),ti(),f.prototype.toBase64.call(this)},l.prototype.toUint8Array=function(){return ot("Blob.toUint8Array",arguments,0),Si(),f.prototype.toUint8Array.call(this)},l.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},l}(wi),Ro=function(f,l,h,g,y,I){this.U=f,this.persistenceKey=l,this.host=h,this.ssl=g,this.forceLongPolling=y,this.W=I},sn=function(){function f(l,h){this.projectId=l,this.database=h||"(default)"}return Object.defineProperty(f.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),f.prototype.isEqual=function(l){return l instanceof f&&l.projectId===this.projectId&&l.database===this.database},f.prototype.L=function(l){return Ut(this.projectId,l.projectId)||Ut(this.database,l.database)},f}(),Yt=function(){function f(l,h){this.K=l,this.G=h,this.H={}}return f.prototype.get=function(l){var h=this.K(l),g=this.H[h];if(void 0!==g)for(var y=0,I=g;y<I.length;y++){var D=I[y],V=D[1];if(this.G(D[0],l))return V}},f.prototype.has=function(l){return void 0!==this.get(l)},f.prototype.set=function(l,h){var g=this.K(l),y=this.H[g];if(void 0!==y){for(var I=0;I<y.length;I++)if(this.G(y[I][0],l))return void(y[I]=[l,h]);y.push([l,h])}else this.H[g]=[[l,h]]},f.prototype.delete=function(l){var h=this.K(l),g=this.H[h];if(void 0===g)return!1;for(var y=0;y<g.length;y++)if(this.G(g[y][0],l))return 1===g.length?delete this.H[h]:g.splice(y,1),!0;return!1},f.prototype.forEach=function(l){nt(this.H,function(h,g){for(var y=0,I=g;y<I.length;y++){var D=I[y];l(D[0],D[1])}})},f.prototype.m=function(){return $e(this.H)},f}(),Qt=function(){function f(l,h){if(this.seconds=l,this.nanoseconds=h,h<0)throw new G(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+h);if(h>=1e9)throw new G(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+h);if(l<-62135596800)throw new G(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+l);if(l>=253402300800)throw new G(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+l)}return f.now=function(){return f.fromMillis(Date.now())},f.fromDate=function(l){return f.fromMillis(l.getTime())},f.fromMillis=function(l){var h=Math.floor(l/1e3);return new f(h,1e6*(l-1e3*h))},f.prototype.toDate=function(){return new Date(this.toMillis())},f.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},f.prototype.Y=function(l){return this.seconds===l.seconds?Ut(this.nanoseconds,l.nanoseconds):Ut(this.seconds,l.seconds)},f.prototype.isEqual=function(l){return l.seconds===this.seconds&&l.nanoseconds===this.nanoseconds},f.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},f.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},f.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},f}(),zt=function(){function f(l){this.timestamp=l}return f.J=function(l){return new f(l)},f.min=function(){return new f(new Qt(0,0))},f.prototype.L=function(l){return this.timestamp.Y(l.timestamp)},f.prototype.isEqual=function(l){return this.timestamp.isEqual(l.timestamp)},f.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},f.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},f.prototype.Z=function(){return this.timestamp},f}();function Te(f){return null==f}function we(f){return 0===f&&1/f==-1/0}function Ie(f){return"number"==typeof f&&Number.isInteger(f)&&!we(f)&&f<=Number.MAX_SAFE_INTEGER&&f>=Number.MIN_SAFE_INTEGER}var qe=function(f,l,h,g,y,I,D){void 0===l&&(l=null),void 0===h&&(h=[]),void 0===g&&(g=[]),void 0===y&&(y=null),void 0===I&&(I=null),void 0===D&&(D=null),this.path=f,this.collectionGroup=l,this.orderBy=h,this.filters=g,this.limit=y,this.startAt=I,this.endAt=D,this.tt=null};function Fe(f,l,h,g,y,I,D){return void 0===l&&(l=null),void 0===h&&(h=[]),void 0===g&&(g=[]),void 0===y&&(y=null),void 0===I&&(I=null),void 0===D&&(D=null),new qe(f,l,h,g,y,I,D)}function Ct(f){var l=Ze(f);if(null===l.tt){var h=l.path.R();null!==l.collectionGroup&&(h+="|cg:"+l.collectionGroup),h+="|f:",h+=l.filters.map(function(g){return(y=g).field.R()+y.op.toString()+cs(y.value);var y}).join(","),h+="|ob:",h+=l.orderBy.map(function(g){return(y=g).field.R()+y.dir;var y}).join(","),Te(l.limit)||(h+="|l:",h+=l.limit),l.startAt&&(h+="|lb:",h+=nc(l.startAt)),l.endAt&&(h+="|ub:",h+=nc(l.endAt)),l.tt=h}return l.tt}function mn(f,l){if(f.limit!==l.limit||f.orderBy.length!==l.orderBy.length)return!1;for(var h=0;h<f.orderBy.length;h++)if(!yi(f.orderBy[h],l.orderBy[h]))return!1;if(f.filters.length!==l.filters.length)return!1;for(var g=0;g<f.filters.length;g++)if((y=f.filters[g]).op!==(I=l.filters[g]).op||!y.field.isEqual(I.field)||!Ur(y.value,I.value))return!1;var y,I;return f.collectionGroup===l.collectionGroup&&!!f.path.isEqual(l.path)&&!!Vs(f.startAt,l.startAt)&&Vs(f.endAt,l.endAt)}function jt(f){return Le.F(f.path)&&null===f.collectionGroup&&0===f.filters.length}var Jt,Ht,Ei=function(){function f(l,h,g,y,I,D,k){void 0===I&&(I=zt.min()),void 0===D&&(D=zt.min()),void 0===k&&(k=Un.B),this.target=l,this.targetId=h,this.et=g,this.sequenceNumber=y,this.nt=I,this.lastLimboFreeSnapshotVersion=D,this.resumeToken=k}return f.prototype.st=function(l){return new f(this.target,this.targetId,this.et,l,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},f.prototype.it=function(l,h){return new f(this.target,this.targetId,this.et,this.sequenceNumber,h,this.lastLimboFreeSnapshotVersion,l)},f.prototype.rt=function(l){return new f(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,l,this.resumeToken)},f}(),vi=function(f){this.count=f};function zn(f){switch(f){case z.OK:return ke();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ke()}}function ki(f){if(void 0===f)return lt("GRPC error has no .code"),z.UNKNOWN;switch(f){case Jt.OK:return z.OK;case Jt.CANCELLED:return z.CANCELLED;case Jt.UNKNOWN:return z.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return z.INTERNAL;case Jt.UNAVAILABLE:return z.UNAVAILABLE;case Jt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Jt.NOT_FOUND:return z.NOT_FOUND;case Jt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Jt.ABORTED:return z.ABORTED;case Jt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Jt.DATA_LOSS:return z.DATA_LOSS;default:return ke()}}(Ht=Jt||(Jt={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";var Hn=function(){function f(l,h){this.i=l,this.root=h||pi.EMPTY}return f.prototype.ot=function(l,h){return new f(this.i,this.root.ot(l,h,this.i).copy(null,null,pi.at,null,null))},f.prototype.remove=function(l){return new f(this.i,this.root.remove(l,this.i).copy(null,null,pi.at,null,null))},f.prototype.get=function(l){for(var h=this.root;!h.m();){var g=this.i(l,h.key);if(0===g)return h.value;g<0?h=h.left:g>0&&(h=h.right)}return null},f.prototype.indexOf=function(l){for(var h=0,g=this.root;!g.m();){var y=this.i(l,g.key);if(0===y)return h+g.left.size;y<0?g=g.left:(h+=g.left.size+1,g=g.right)}return-1},f.prototype.m=function(){return this.root.m()},Object.defineProperty(f.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),f.prototype.ct=function(){return this.root.ct()},f.prototype.ut=function(){return this.root.ut()},f.prototype.ht=function(l){return this.root.ht(l)},f.prototype.forEach=function(l){this.ht(function(h,g){return l(h,g),!1})},f.prototype.toString=function(){var l=[];return this.ht(function(h,g){return l.push(h+":"+g),!1}),"{"+l.join(", ")+"}"},f.prototype.lt=function(l){return this.root.lt(l)},f.prototype._t=function(){return new mr(this.root,null,this.i,!1)},f.prototype.ft=function(l){return new mr(this.root,l,this.i,!1)},f.prototype.dt=function(){return new mr(this.root,null,this.i,!0)},f.prototype.wt=function(l){return new mr(this.root,l,this.i,!0)},f}(),mr=function(){function f(l,h,g,y){this.Tt=y,this.Et=[];for(var I=1;!l.m();)if(I=h?g(l.key,h):1,y&&(I*=-1),I<0)l=this.Tt?l.left:l.right;else{if(0===I){this.Et.push(l);break}this.Et.push(l),l=this.Tt?l.right:l.left}}return f.prototype.It=function(){var l=this.Et.pop(),h={key:l.key,value:l.value};if(this.Tt)for(l=l.left;!l.m();)this.Et.push(l),l=l.right;else for(l=l.right;!l.m();)this.Et.push(l),l=l.left;return h},f.prototype.At=function(){return this.Et.length>0},f.prototype.Rt=function(){if(0===this.Et.length)return null;var l=this.Et[this.Et.length-1];return{key:l.key,value:l.value}},f}(),pi=function(){function f(l,h,g,y,I){this.key=l,this.value=h,this.color=g??f.RED,this.left=y??f.EMPTY,this.right=I??f.EMPTY,this.size=this.left.size+1+this.right.size}return f.prototype.copy=function(l,h,g,y,I){return new f(l??this.key,h??this.value,g??this.color,y??this.left,I??this.right)},f.prototype.m=function(){return!1},f.prototype.ht=function(l){return this.left.ht(l)||l(this.key,this.value)||this.right.ht(l)},f.prototype.lt=function(l){return this.right.lt(l)||l(this.key,this.value)||this.left.lt(l)},f.prototype.min=function(){return this.left.m()?this:this.left.min()},f.prototype.ct=function(){return this.min().key},f.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},f.prototype.ot=function(l,h,g){var y=this,I=g(l,y.key);return(y=I<0?y.copy(null,null,null,y.left.ot(l,h,g),null):0===I?y.copy(null,h,null,null,null):y.copy(null,null,null,null,y.right.ot(l,h,g))).gt()},f.prototype.Pt=function(){if(this.left.m())return f.EMPTY;var l=this;return l.left.yt()||l.left.left.yt()||(l=l.Vt()),(l=l.copy(null,null,null,l.left.Pt(),null)).gt()},f.prototype.remove=function(l,h){var g,y=this;if(h(l,y.key)<0)y.left.m()||y.left.yt()||y.left.left.yt()||(y=y.Vt()),y=y.copy(null,null,null,y.left.remove(l,h),null);else{if(y.left.yt()&&(y=y.bt()),y.right.m()||y.right.yt()||y.right.left.yt()||(y=y.vt()),0===h(l,y.key)){if(y.right.m())return f.EMPTY;g=y.right.min(),y=y.copy(g.key,g.value,null,null,y.right.Pt())}y=y.copy(null,null,null,null,y.right.remove(l,h))}return y.gt()},f.prototype.yt=function(){return this.color},f.prototype.gt=function(){var l=this;return l.right.yt()&&!l.left.yt()&&(l=l.St()),l.left.yt()&&l.left.left.yt()&&(l=l.bt()),l.left.yt()&&l.right.yt()&&(l=l.Dt()),l},f.prototype.Vt=function(){var l=this.Dt();return l.right.left.yt()&&(l=(l=(l=l.copy(null,null,null,null,l.right.bt())).St()).Dt()),l},f.prototype.vt=function(){var l=this.Dt();return l.left.left.yt()&&(l=(l=l.bt()).Dt()),l},f.prototype.St=function(){var l=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)},f.prototype.bt=function(){var l=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)},f.prototype.Dt=function(){var l=this.left.copy(null,null,!this.left.color,null,null),h=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,h)},f.prototype.Ct=function(){var l=this.Nt();return Math.pow(2,l)<=this.size+1},f.prototype.Nt=function(){if(this.yt()&&this.left.yt()||this.right.yt())throw ke();var l=this.left.Nt();if(l!==this.right.Nt())throw ke();return l+(this.yt()?0:1)},f}();pi.EMPTY=null,pi.RED=!0,pi.at=!1,pi.EMPTY=new(function(){function f(){this.size=0}return Object.defineProperty(f.prototype,"key",{get:function(){throw ke()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"value",{get:function(){throw ke()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"color",{get:function(){throw ke()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"left",{get:function(){throw ke()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"right",{get:function(){throw ke()},enumerable:!1,configurable:!0}),f.prototype.copy=function(l,h,g,y,I){return this},f.prototype.ot=function(l,h,g){return new pi(l,h)},f.prototype.remove=function(l,h){return this},f.prototype.m=function(){return!0},f.prototype.ht=function(l){return!1},f.prototype.lt=function(l){return!1},f.prototype.ct=function(){return null},f.prototype.ut=function(){return null},f.prototype.yt=function(){return!1},f.prototype.Ct=function(){return!0},f.prototype.Nt=function(){return 0},f}());var Ci=function(){function f(l){this.i=l,this.data=new Hn(this.i)}return f.prototype.has=function(l){return null!==this.data.get(l)},f.prototype.first=function(){return this.data.ct()},f.prototype.last=function(){return this.data.ut()},Object.defineProperty(f.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),f.prototype.indexOf=function(l){return this.data.indexOf(l)},f.prototype.forEach=function(l){this.data.ht(function(h,g){return l(h),!1})},f.prototype.Ft=function(l,h){for(var g=this.data.ft(l[0]);g.At();){var y=g.It();if(this.i(y.key,l[1])>=0)return;h(y.key)}},f.prototype.xt=function(l,h){var g;for(g=void 0!==h?this.data.ft(h):this.data._t();g.At();)if(!l(g.It().key))return},f.prototype.$t=function(l){var h=this.data.ft(l);return h.At()?h.It().key:null},f.prototype._t=function(){return new gr(this.data._t())},f.prototype.ft=function(l){return new gr(this.data.ft(l))},f.prototype.add=function(l){return this.copy(this.data.remove(l).ot(l,!0))},f.prototype.delete=function(l){return this.has(l)?this.copy(this.data.remove(l)):this},f.prototype.m=function(){return this.data.m()},f.prototype.kt=function(l){var h=this;return h.size<l.size&&(h=l,l=this),l.forEach(function(g){h=h.add(g)}),h},f.prototype.isEqual=function(l){if(!(l instanceof f)||this.size!==l.size)return!1;for(var h=this.data._t(),g=l.data._t();h.At();){var y=h.It().key,I=g.It().key;if(0!==this.i(y,I))return!1}return!0},f.prototype.A=function(){var l=[];return this.forEach(function(h){l.push(h)}),l},f.prototype.toString=function(){var l=[];return this.forEach(function(h){return l.push(h)}),"SortedSet("+l.toString()+")"},f.prototype.copy=function(l){var h=new f(this.i);return h.data=l,h},f}(),gr=function(){function f(l){this.Mt=l}return f.prototype.It=function(){return this.Mt.It().key},f.prototype.At=function(){return this.Mt.At()},f}(),mo=new Hn(Le.i);function fe(){return mo}function le(){return fe()}var J=new Hn(Le.i);function te(){return J}var Y=new Hn(Le.i),Me=new Ci(Le.i);function Qe(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];for(var h=Me,g=0,y=f;g<y.length;g++)h=h.add(y[g]);return h}var St=new Ci(Ut);function yn(){return St}var Vt=function(){function f(l){this.i=l?function(h,g){return l(h,g)||Le.i(h.key,g.key)}:function(h,g){return Le.i(h.key,g.key)},this.Ot=te(),this.Lt=new Hn(this.i)}return f.Bt=function(l){return new f(l.i)},f.prototype.has=function(l){return null!=this.Ot.get(l)},f.prototype.get=function(l){return this.Ot.get(l)},f.prototype.first=function(){return this.Lt.ct()},f.prototype.last=function(){return this.Lt.ut()},f.prototype.m=function(){return this.Lt.m()},f.prototype.indexOf=function(l){var h=this.Ot.get(l);return h?this.Lt.indexOf(h):-1},Object.defineProperty(f.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),f.prototype.forEach=function(l){this.Lt.ht(function(h,g){return l(h),!1})},f.prototype.add=function(l){var h=this.delete(l.key);return h.copy(h.Ot.ot(l.key,l),h.Lt.ot(l,null))},f.prototype.delete=function(l){var h=this.get(l);return h?this.copy(this.Ot.remove(l),this.Lt.remove(h)):this},f.prototype.isEqual=function(l){if(!(l instanceof f)||this.size!==l.size)return!1;for(var h=this.Lt._t(),g=l.Lt._t();h.At();){var y=h.It().key,I=g.It().key;if(!y.isEqual(I))return!1}return!0},f.prototype.toString=function(){var l=[];return this.forEach(function(h){l.push(h.toString())}),0===l.length?"DocumentSet ()":"DocumentSet (\n  "+l.join("  \n")+"\n)"},f.prototype.copy=function(l,h){var g=new f;return g.i=this.i,g.Ot=l,g.Lt=h,g},f}(),Xn=function(){function f(){this.qt=new Hn(Le.i)}return f.prototype.track=function(l){var h=l.doc.key,g=this.qt.get(h);g?0!==l.type&&3===g.type?this.qt=this.qt.ot(h,l):3===l.type&&1!==g.type?this.qt=this.qt.ot(h,{type:g.type,doc:l.doc}):2===l.type&&2===g.type?this.qt=this.qt.ot(h,{type:2,doc:l.doc}):2===l.type&&0===g.type?this.qt=this.qt.ot(h,{type:0,doc:l.doc}):1===l.type&&0===g.type?this.qt=this.qt.remove(h):1===l.type&&2===g.type?this.qt=this.qt.ot(h,{type:1,doc:g.doc}):0===l.type&&1===g.type?this.qt=this.qt.ot(h,{type:2,doc:l.doc}):ke():this.qt=this.qt.ot(h,l)},f.prototype.Ut=function(){var l=[];return this.qt.ht(function(h,g){l.push(g)}),l},f}(),En=function(){function f(l,h,g,y,I,D,k,V){this.query=l,this.docs=h,this.Qt=g,this.docChanges=y,this.Wt=I,this.fromCache=D,this.jt=k,this.Kt=V}return f.Gt=function(l,h,g,y){var I=[];return h.forEach(function(D){I.push({type:0,doc:D})}),new f(l,h,Vt.Bt(h),I,g,y,!0,!1)},Object.defineProperty(f.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),f.prototype.isEqual=function(l){if(!(this.fromCache===l.fromCache&&this.jt===l.jt&&this.Wt.isEqual(l.Wt)&&tc(this.query,l.query)&&this.docs.isEqual(l.docs)&&this.Qt.isEqual(l.Qt)))return!1;var h=this.docChanges,g=l.docChanges;if(h.length!==g.length)return!1;for(var y=0;y<h.length;y++)if(h[y].type!==g[y].type||!h[y].doc.isEqual(g[y].doc))return!1;return!0},f}(),ai=function(){function f(l,h,g,y,I){this.nt=l,this.zt=h,this.Ht=g,this.Yt=y,this.Jt=I}return f.Xt=function(l,h){var g=new Map;return g.set(l,kn.Zt(l,h)),new f(zt.min(),g,yn(),fe(),Qe())},f}(),kn=function(){function f(l,h,g,y,I){this.resumeToken=l,this.te=h,this.ee=g,this.ne=y,this.se=I}return f.Zt=function(l,h){return new f(Un.B,h,Qe(),Qe(),Qe())},f}(),_r=function(f,l,h,g){this.ie=f,this.removedTargetIds=l,this.key=h,this.re=g},Zo=function(f,l){this.targetId=f,this.oe=l},Xe=function(f,l,h,g){void 0===h&&(h=Un.B),void 0===g&&(g=null),this.state=f,this.targetIds=l,this.resumeToken=h,this.cause=g},ze=function(){function f(){this.ae=0,this.ce=Rt(),this.ue=Un.B,this.he=!1,this.le=!0}return Object.defineProperty(f.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),f.prototype.de=function(l){l.O()>0&&(this.le=!0,this.ue=l)},f.prototype.we=function(){var l=Qe(),h=Qe(),g=Qe();return this.ce.forEach(function(y,I){switch(I){case 0:l=l.add(y);break;case 2:h=h.add(y);break;case 1:g=g.add(y);break;default:ke()}}),new kn(this.ue,this.he,l,h,g)},f.prototype.me=function(){this.le=!1,this.ce=Rt()},f.prototype.Te=function(l,h){this.le=!0,this.ce=this.ce.ot(l,h)},f.prototype.Ee=function(l){this.le=!0,this.ce=this.ce.remove(l)},f.prototype.Ie=function(){this.ae+=1},f.prototype.Ae=function(){this.ae-=1},f.prototype.Re=function(){this.le=!0,this.he=!0},f}(),_t=function(){function f(l){this.ge=l,this.Pe=new Map,this.ye=fe(),this.Ve=Zt(),this.pe=new Ci(Ut)}return f.prototype.be=function(l){for(var h=0,g=l.ie;h<g.length;h++){var y=g[h];l.re instanceof oi?this.ve(y,l.re):l.re instanceof Rr&&this.Se(y,l.key,l.re)}for(var I=0,D=l.removedTargetIds;I<D.length;I++)this.Se(D[I],l.key,l.re)},f.prototype.De=function(l){var h=this;this.Ce(l,function(g){var y=h.Ne(g);switch(l.state){case 0:h.Fe(g)&&y.de(l.resumeToken);break;case 1:y.Ae(),y._e||y.me(),y.de(l.resumeToken);break;case 2:y.Ae(),y._e||h.removeTarget(g);break;case 3:h.Fe(g)&&(y.Re(),y.de(l.resumeToken));break;case 4:h.Fe(g)&&(h.xe(g),y.de(l.resumeToken));break;default:ke()}})},f.prototype.Ce=function(l,h){var g=this;l.targetIds.length>0?l.targetIds.forEach(h):this.Pe.forEach(function(y,I){g.Fe(I)&&h(I)})},f.prototype.$e=function(l){var h=l.targetId,g=l.oe.count,y=this.ke(h);if(y){var I=y.target;if(jt(I))if(0===g){var D=new Le(I.path);this.Se(h,D,new Rr(D,zt.min()))}else at(1===g);else this.Me(h)!==g&&(this.xe(h),this.pe=this.pe.add(h))}},f.prototype.Oe=function(l){var h=this,g=new Map;this.Pe.forEach(function(D,k){var V=h.ke(k);if(V){if(D.te&&jt(V.target)){var Z=new Le(V.target.path);null!==h.ye.get(Z)||h.Le(k,Z)||h.Se(k,Z,new Rr(Z,l))}D.fe&&(g.set(k,D.we()),D.me())}});var y=Qe();this.Ve.forEach(function(D,k){var V=!0;k.xt(function(Z){var re=h.ke(Z);return!re||2===re.et||(V=!1,!1)}),V&&(y=y.add(D))});var I=new ai(l,g,this.pe,this.ye,y);return this.ye=fe(),this.Ve=Zt(),this.pe=new Ci(Ut),I},f.prototype.ve=function(l,h){if(this.Fe(l)){var g=this.Le(l,h.key)?2:0;this.Ne(l).Te(h.key,g),this.ye=this.ye.ot(h.key,h),this.Ve=this.Ve.ot(h.key,this.Be(h.key).add(l))}},f.prototype.Se=function(l,h,g){if(this.Fe(l)){var y=this.Ne(l);this.Le(l,h)?y.Te(h,1):y.Ee(h),this.Ve=this.Ve.ot(h,this.Be(h).delete(l)),g&&(this.ye=this.ye.ot(h,g))}},f.prototype.removeTarget=function(l){this.Pe.delete(l)},f.prototype.Me=function(l){var h=this.Ne(l).we();return this.ge.qe(l).size+h.ee.size-h.se.size},f.prototype.Ie=function(l){this.Ne(l).Ie()},f.prototype.Ne=function(l){var h=this.Pe.get(l);return h||(h=new ze,this.Pe.set(l,h)),h},f.prototype.Be=function(l){var h=this.Ve.get(l);return h||(h=new Ci(Ut),this.Ve=this.Ve.ot(l,h)),h},f.prototype.Fe=function(l){var h=null!==this.ke(l);return h||me("WatchChangeAggregator","Detected inactive target",l),h},f.prototype.ke=function(l){var h=this.Pe.get(l);return h&&h._e?null:this.ge.Ue(l)},f.prototype.xe=function(l){var h=this;this.Pe.set(l,new ze),this.ge.qe(l).forEach(function(g){h.Se(l,g,null)})},f.prototype.Le=function(l,h){return this.ge.qe(l).has(h)},f}();function Zt(){return new Hn(Le.i)}function Rt(){return new Hn(Le.i)}function On(f){var l,h;return"server_timestamp"===(null===(h=((null===(l=f?.mapValue)||void 0===l?void 0:l.fields)||{}).__type__)||void 0===h?void 0:h.stringValue)}function ri(f){var l=f.mapValue.fields.__previous_value__;return On(l)?ri(l):l}function Hi(f){var l=Yo(f.mapValue.fields.__local_write_time__.timestampValue);return new Qt(l.seconds,l.nanos)}var qi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(f){return"nullValue"in f?0:"booleanValue"in f?1:"integerValue"in f||"doubleValue"in f?2:"timestampValue"in f?3:"stringValue"in f?5:"bytesValue"in f?6:"referenceValue"in f?7:"geoPointValue"in f?8:"arrayValue"in f?9:"mapValue"in f?On(f)?4:10:ke()}function Ur(f,l){var y,h=Yi(f);if(h!==Yi(l))return!1;switch(h){case 0:return!0;case 1:return f.booleanValue===l.booleanValue;case 4:return Hi(f).isEqual(Hi(l));case 3:return function(g,y){if("string"==typeof g.timestampValue&&"string"==typeof y.timestampValue&&g.timestampValue.length===y.timestampValue.length)return g.timestampValue===y.timestampValue;var I=Yo(g.timestampValue),D=Yo(y.timestampValue);return I.seconds===D.seconds&&I.nanos===D.nanos}(f,l);case 5:return f.stringValue===l.stringValue;case 6:return y=l,Ai(f.bytesValue).isEqual(Ai(y.bytesValue));case 7:return f.referenceValue===l.referenceValue;case 8:return function(g,y){return ni(g.geoPointValue.latitude)===ni(y.geoPointValue.latitude)&&ni(g.geoPointValue.longitude)===ni(y.geoPointValue.longitude)}(f,l);case 2:return function(g,y){if("integerValue"in g&&"integerValue"in y)return ni(g.integerValue)===ni(y.integerValue);if("doubleValue"in g&&"doubleValue"in y){var I=ni(g.doubleValue),D=ni(y.doubleValue);return I===D?we(I)===we(D):isNaN(I)&&isNaN(D)}return!1}(f,l);case 9:return cn(f.arrayValue.values||[],l.arrayValue.values||[],Ur);case 10:return function(g,y){var I=g.mapValue.fields||{},D=y.mapValue.fields||{};if(Ce(I)!==Ce(D))return!1;for(var k in I)if(I.hasOwnProperty(k)&&(void 0===D[k]||!Ur(I[k],D[k])))return!1;return!0}(f,l);default:return ke()}}function go(f,l){return void 0!==(f.values||[]).find(function(h){return Ur(h,l)})}function Ia(f,l){var y,I,D,k,h=Yi(f),g=Yi(l);if(h!==g)return Ut(h,g);switch(h){case 0:return 0;case 1:return Ut(f.booleanValue,l.booleanValue);case 2:return I=l,(D=ni((y=f).integerValue||y.doubleValue))<(k=ni(I.integerValue||I.doubleValue))?-1:D>k?1:D===k?0:isNaN(D)?isNaN(k)?0:-1:1;case 3:return Ko(f.timestampValue,l.timestampValue);case 4:return Ko(Hi(f),Hi(l));case 5:return Ut(f.stringValue,l.stringValue);case 6:return function(y,I){var D=Ai(y),k=Ai(I);return D.L(k)}(f.bytesValue,l.bytesValue);case 7:return function(y,I){for(var D=y.split("/"),k=I.split("/"),V=0;V<D.length&&V<k.length;V++){var Z=Ut(D[V],k[V]);if(0!==Z)return Z}return Ut(D.length,k.length)}(f.referenceValue,l.referenceValue);case 8:return function(y,I){var D=Ut(ni(y.latitude),ni(I.latitude));return 0!==D?D:Ut(ni(y.longitude),ni(I.longitude))}(f.geoPointValue,l.geoPointValue);case 9:return function(y,I){for(var D=y.values||[],k=I.values||[],V=0;V<D.length&&V<k.length;++V){var Z=Ia(D[V],k[V]);if(Z)return Z}return Ut(D.length,k.length)}(f.arrayValue,l.arrayValue);case 10:return function(y,I){var D=y.fields||{},k=Object.keys(D),V=I.fields||{},Z=Object.keys(V);k.sort(),Z.sort();for(var re=0;re<k.length&&re<Z.length;++re){var ge=Ut(k[re],Z[re]);if(0!==ge)return ge;var _e=Ia(D[k[re]],V[Z[re]]);if(0!==_e)return _e}return Ut(k.length,Z.length)}(f.mapValue,l.mapValue);default:throw ke()}}function Ko(f,l){if("string"==typeof f&&"string"==typeof l&&f.length===l.length)return Ut(f,l);var h=Yo(f),g=Yo(l),y=Ut(h.seconds,g.seconds);return 0!==y?y:Ut(h.nanos,g.nanos)}function cs(f){return ms(f)}function ms(f){return"nullValue"in f?"null":"booleanValue"in f?""+f.booleanValue:"integerValue"in f?""+f.integerValue:"doubleValue"in f?""+f.doubleValue:"timestampValue"in f?"time("+(y=Yo(f.timestampValue)).seconds+","+y.nanos+")":"stringValue"in f?f.stringValue:"bytesValue"in f?Ai(f.bytesValue).toBase64():"referenceValue"in f?Le.C(f.referenceValue).toString():"geoPointValue"in f?"geo("+(l=f.geoPointValue).latitude+","+l.longitude+")":"arrayValue"in f?function(g){for(var y="[",I=!0,D=0,k=g.values||[];D<k.length;D++)I?I=!1:y+=",",y+=ms(k[D]);return y+"]"}(f.arrayValue):"mapValue"in f?function(g){for(var y="{",I=!0,D=0,k=Object.keys(g.fields||{}).sort();D<k.length;D++){var V=k[D];I?I=!1:y+=",",y+=V+":"+ms(g.fields[V])}return y+"}"}(f.mapValue):ke();var y,l}function Yo(f){if(at(!!f),"string"==typeof f){var l=0,h=qi.exec(f);if(at(!!h),h[1]){var g=h[1];g=(g+"000000000").substr(0,9),l=Number(g)}var y=new Date(f);return{seconds:Math.floor(y.getTime()/1e3),nanos:l}}return{seconds:ni(f.seconds),nanos:ni(f.nanos)}}function ni(f){return"number"==typeof f?f:"string"==typeof f?Number(f):0}function Ai(f){return"string"==typeof f?Un.fromBase64String(f):Un.fromUint8Array(f)}function _o(f,l){return{referenceValue:"projects/"+f.projectId+"/databases/"+f.database+"/documents/"+l.path.R()}}function Qi(f){return!!f&&"integerValue"in f}function _c(f){return!!f&&"arrayValue"in f}function Ka(f){return!!f&&"nullValue"in f}function $r(f){return!!f&&"doubleValue"in f&&isNaN(Number(f.doubleValue))}function ks(f){return!!f&&"mapValue"in f}var Ya={asc:"ASCENDING",desc:"DESCENDING"},Zu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ea=function(f,l){this.U=f,this.Qe=l};function vc(f){return{integerValue:""+f}}function yc(f,l){if(f.Qe){if(isNaN(l))return{doubleValue:"NaN"};if(l===1/0)return{doubleValue:"Infinity"};if(l===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:we(l)?"-0":l}}function Ns(f,l){return Ie(l)?vc(l):yc(f,l)}function ta(f,l){return f.Qe?new Date(1e3*l.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+l.nanoseconds).slice(-9)+"Z":{seconds:""+l.seconds,nanos:l.nanoseconds}}function el(f,l){return f.Qe?l.toBase64():l.toUint8Array()}function ko(f,l){return ta(f,l.Z())}function vo(f){return at(!!f),zt.J((h=Yo(f),new Qt(h.seconds,h.nanos)));var h}function vr(f,l){return(h=f,new he(["projects",h.projectId,"databases",h.database])).child("documents").child(l).R();var h}function Qa(f){var l=he.g(f);return at($n(l)),l}function na(f,l){return vr(f.U,l.path)}function Mr(f,l){var h=Qa(l);return at(h.get(1)===f.U.projectId),at(!h.get(3)&&!f.U.database||h.get(3)===f.U.database),new Le(Xa(h))}function bc(f,l){return vr(f.U,l)}function ia(f){var l=Qa(f);return 4===l.length?he.P():Xa(l)}function gs(f){return new he(["projects",f.U.projectId,"databases",f.U.database]).R()}function Xa(f){return at(f.length>4&&"documents"===f.get(4)),f.u(5)}function Bn(f,l,h){return{name:na(f,l),fields:h.proto.mapValue.fields}}function Ni(f,l){var h,y;if(l instanceof tr)h={update:Bn(f,l.key,l.value)};else if(l instanceof xr)h={delete:na(f,l.key)};else if(l instanceof Wr)h={update:Bn(f,l.key,l.data),updateMask:Ls(l.We)};else if(l instanceof Bi)h={transform:{document:na(f,l.key),fieldTransforms:l.fieldTransforms.map(function(g){return function(y,I){var D=I.transform;if(D instanceof on)return{fieldPath:I.field.R(),setToServerValue:"REQUEST_TIME"};if(D instanceof qr)return{fieldPath:I.field.R(),appendMissingElements:{values:D.elements}};if(D instanceof wr)return{fieldPath:I.field.R(),removeAllFromArray:{values:D.elements}};if(D instanceof _s)return{fieldPath:I.field.R(),increment:D.je};throw ke()}(0,g)})}};else{if(!(l instanceof nl))return ke();h={verify:na(f,l.key)}}return l.Ge.Ke||(h.currentDocument=void 0!==(y=l.Ge).updateTime?{updateTime:ko(f,y.updateTime)}:void 0!==y.exists?{exists:y.exists}:ke()),h}function yr(f,l){var re,h=l.currentDocument?void 0!==(re=l.currentDocument).updateTime?Fi.updateTime(vo(re.updateTime)):void 0!==re.exists?Fi.exists(re.exists):Fi.ze():Fi.ze();if(l.update){var g=Mr(f,l.update.name),y=new Pr({mapValue:{fields:l.update.fields}});if(l.updateMask){var I=function(re){return new Ir((re.fieldPaths||[]).map(function(_e){return Ge.S(_e)}))}(l.updateMask);return new Wr(g,y,I,h)}return new tr(g,y,h)}if(l.delete){var D=Mr(f,l.delete);return new xr(D,h)}if(l.transform){var k=Mr(f,l.transform.document),V=l.transform.fieldTransforms.map(function(re){return function(ge,_e){var Pe=null;"setToServerValue"in _e?(at("REQUEST_TIME"===_e.setToServerValue),Pe=new on):"appendMissingElements"in _e?Pe=new qr(_e.appendMissingElements.values||[]):"removeAllFromArray"in _e?Pe=new wr(_e.removeAllFromArray.values||[]):"increment"in _e?Pe=new _s(ge,_e.increment):ke();var an=Ge.S(_e.fieldPath);return new oa(an,Pe)}(f,re)});return at(!0===h.exists),new Bi(k,V)}if(l.verify){var Z=Mr(f,l.verify);return new nl(Z,h)}return ke()}function xa(f,l){return{documents:[bc(f,l.path)]}}function br(f,l){var h={structuredQuery:{}},g=l.path;null!==l.collectionGroup?(h.parent=bc(f,g),h.structuredQuery.from=[{collectionId:l.collectionGroup,allDescendants:!0}]):(h.parent=bc(f,g.h()),h.structuredQuery.from=[{collectionId:g._()}]);var y=function(k){if(0!==k.length){var V=k.map(function(Z){return function(re){if("=="===re.op){if($r(re.value))return{unaryFilter:{field:It(re.field),op:"IS_NAN"}};if(Ka(re.value))return{unaryFilter:{field:It(re.field),op:"IS_NULL"}}}else if("!="===re.op){if($r(re.value))return{unaryFilter:{field:It(re.field),op:"IS_NOT_NAN"}};if(Ka(re.value))return{unaryFilter:{field:It(re.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:It(re.field),op:Mi(re.op),value:re.value}}}(Z)});return 1===V.length?V[0]:{compositeFilter:{op:"AND",filters:V}}}}(l.filters);y&&(h.structuredQuery.where=y);var I=function(k){if(0!==k.length)return k.map(function(V){return{field:It((Z=V).field),direction:Cc(Z.dir)};var Z})}(l.orderBy);I&&(h.structuredQuery.orderBy=I);var V,D=(V=l.limit,f.Qe||Te(V)?V:{value:V});return null!==D&&(h.structuredQuery.limit=D),l.startAt&&(h.structuredQuery.startAt=No(l.startAt)),l.endAt&&(h.structuredQuery.endAt=No(l.endAt)),h}function wc(f){var l=ia(f.parent),h=f.structuredQuery,g=h.from?h.from.length:0,y=null;if(g>0){at(1===g);var I=h.from[0];I.allDescendants?y=I.collectionId:l=l.child(I.collectionId)}var D=[];h.where&&(D=Ec(h.where));var k=[];h.orderBy&&(k=h.orderBy.map(function(ge){return new ua(Cn((_e=ge).field),function(Pe){switch(Pe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_e.direction));var _e}));var ge,_e,V=null;h.limit&&(V=Te(_e="object"==typeof(ge=h.limit)?ge.value:ge)?null:_e);var Z=null;h.startAt&&(Z=Fs(h.startAt));var re=null;return h.endAt&&(re=Fs(h.endAt)),Uo(xc(l,y,k,D,V,"F",Z,re))}function Ec(f){return f?void 0!==f.unaryFilter?[so(f)]:void 0!==f.fieldFilter?[Ii(f)]:void 0!==f.compositeFilter?f.compositeFilter.filters.map(function(l){return Ec(l)}).reduce(function(l,h){return l.concat(h)}):ke():[]}function No(f){return{before:f.before,values:f.position}}function Fs(f){return new bo(f.values||[],!!f.before)}function Cc(f){return Ya[f]}function Mi(f){return Zu[f]}function It(f){return{fieldPath:f.R()}}function Cn(f){return Ge.S(f.fieldPath)}function Ii(f){return kr.create(Cn(f.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(f.fieldFilter.op),f.fieldFilter.value)}function so(f){switch(f.unaryFilter.op){case"IS_NAN":var l=Cn(f.unaryFilter.field);return kr.create(l,"==",{doubleValue:NaN});case"IS_NULL":var h=Cn(f.unaryFilter.field);return kr.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var g=Cn(f.unaryFilter.field);return kr.create(g,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var y=Cn(f.unaryFilter.field);return kr.create(y,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}function Ls(f){var l=[];return f.fields.forEach(function(h){return l.push(h.R())}),{fieldPaths:l}}function $n(f){return f.length>=4&&"projects"===f.get(0)&&"databases"===f.get(2)}var Qo=function(){this.He=void 0};function Oi(f,l,h){return f instanceof on?(I={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(g=h).seconds,nanos:g.nanoseconds}}}},(y=l)&&(I.fields.__previous_value__=y),{mapValue:I}):f instanceof qr?Rl(f,l):f instanceof wr?Er(f,l):function(g,y){var I=Xo(g,y),D=Fo(I)+Fo(g.je);return Qi(I)&&Qi(g.je)?vc(D):yc(g.serializer,D)}(f,l);var g,y,I}function ra(f,l,h){return f instanceof qr?Rl(f,l):f instanceof wr?Er(f,l):h}function Xo(f,l){return f instanceof _s?Qi(h=l)||(g=h)&&"doubleValue"in g?l:{integerValue:0}:null;var g,h}var on=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l}(Qo),qr=function(f){function l(h){var g=this;return(g=f.call(this)||this).elements=h,g}return U.__extends(l,f),l}(Qo);function Rl(f,l){for(var h=Cr(l),g=function(D){h.some(function(k){return Ur(k,D)})||h.push(D)},y=0,I=f.elements;y<I.length;y++)g(I[y]);return{arrayValue:{values:h}}}var wr=function(f){function l(h){var g=this;return(g=f.call(this)||this).elements=h,g}return U.__extends(l,f),l}(Qo);function Er(f,l){for(var h=Cr(l),g=function(D){h=h.filter(function(k){return!Ur(k,D)})},y=0,I=f.elements;y<I.length;y++)g(I[y]);return{arrayValue:{values:h}}}var _s=function(f){function l(h,g){var y=this;return(y=f.call(this)||this).serializer=h,y.je=g,y}return U.__extends(l,f),l}(Qo);function Fo(f){return ni(f.integerValue||f.doubleValue)}function Cr(f){return _c(f)&&f.arrayValue.values?f.arrayValue.values.slice():[]}var Ir=function(){function f(l){this.fields=l,l.sort(Ge.i)}return f.prototype.Ye=function(l){for(var h=0,g=this.fields;h<g.length;h++)if(g[h].T(l))return!0;return!1},f.prototype.isEqual=function(l){return cn(this.fields,l.fields,function(h,g){return h.isEqual(g)})},f}(),oa=function(f,l){this.field=f,this.transform=l},Ta=function(f,l){this.version=f,this.transformResults=l},Fi=function(){function f(l,h){this.updateTime=l,this.exists=h}return f.ze=function(){return new f},f.exists=function(l){return new f(void 0,l)},f.updateTime=function(l){return new f(l)},Object.defineProperty(f.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),f.prototype.isEqual=function(l){return this.exists===l.exists&&(this.updateTime?!!l.updateTime&&this.updateTime.isEqual(l.updateTime):!l.updateTime)},f}();function Lo(f,l){return void 0!==f.updateTime?l instanceof oi&&l.version.isEqual(f.updateTime):void 0===f.exists||f.exists===l instanceof oi}var Gr=function(){};function Jn(f,l,h){return f instanceof tr?new oi((g=f).key,h.version,g.value,{hasCommittedMutations:!0}):f instanceof Wr?function(g,y,I){if(!Lo(g.Ge,y))return new kl(g.key,I.version);var D=sa(g,y);return new oi(g.key,I.version,D,{hasCommittedMutations:!0})}(f,l,h):f instanceof Bi?function(g,y,I){if(at(null!=I.transformResults),!Lo(g.Ge,y))return new kl(g.key,I.version);var D=tl(0,y),k=function(re,ge,_e){var Pe=[];at(re.length===_e.length);for(var et=0;et<_e.length;et++){var ht=re[et],an=ht.transform,Xt=null;ge instanceof oi&&(Xt=ge.field(ht.field)),Pe.push(ra(an,Xt,_e[et]))}return Pe}(g.fieldTransforms,y,I.transformResults),V=I.version,Z=Zr(g,D.data(),k);return new oi(g.key,V,Z,{hasCommittedMutations:!0})}(f,l,h):function(g,y,I){return new Rr(g.key,I.version,{hasCommittedMutations:!0})}(f,0,h);var g}function Ic(f,l,h,g){return f instanceof tr?function(y,I){if(!Lo(y.Ge,I))return I;var D=Or(I);return new oi(y.key,D,y.value,{Je:!0})}(f,l):f instanceof Wr?function(y,I){if(!Lo(y.Ge,I))return I;var D=Or(I),k=sa(y,I);return new oi(y.key,D,k,{Je:!0})}(f,l):f instanceof Bi?function(y,I,D,k){if(!Lo(y.Ge,I))return I;var V=tl(0,I),Z=function(ge,_e,Pe,et){for(var ht=[],an=0,Xt=ge;an<Xt.length;an++){var Pn=Xt[an],Qn=Pn.transform,gi=null;Pe instanceof oi&&(gi=Pe.field(Pn.field)),null===gi&&et instanceof oi&&(gi=et.field(Pn.field)),ht.push(Oi(Qn,gi,_e))}return ht}(y.fieldTransforms,D,I,k),re=Zr(y,V.data(),Z);return new oi(y.key,V.version,re,{Je:!0})}(f,l,g,h):Lo((y=f).Ge,I=l)?new Rr(y.key,zt.min()):I;var y,I}function hu(f,l){return f instanceof Bi?function(h,g){for(var y=null,I=0,D=h.fieldTransforms;I<D.length;I++){var k=D[I],V=g instanceof oi?g.field(k.field):void 0,Z=Xo(k.transform,V||null);null!=Z&&(y=null==y?(new Kr).set(k.field,Z):y.set(k.field,Z))}return y?y.Xe():null}(f,l):null}function Da(f,l){return f.type===l.type&&!!f.key.isEqual(l.key)&&!!f.Ge.isEqual(l.Ge)&&(0===f.type?f.value.isEqual(l.value):1===f.type?f.data.isEqual(l.data)&&f.We.isEqual(l.We):2!==f.type||cn(f.fieldTransforms,f.fieldTransforms,function(h,g){return(y=h).field.isEqual((I=g).field)&&(k=I.transform,(D=y.transform)instanceof qr&&k instanceof qr||D instanceof wr&&k instanceof wr?cn(D.elements,k.elements,Ur):D instanceof _s&&k instanceof _s?Ur(D.je,k.je):D instanceof on&&k instanceof on);var y,I,D,k}))}function Or(f){return f instanceof oi?f.version:zt.min()}var tr=function(f){function l(h,g,y){var I=this;return(I=f.call(this)||this).key=h,I.value=g,I.Ge=y,I.type=0,I}return U.__extends(l,f),l}(Gr),Wr=function(f){function l(h,g,y,I){var D=this;return(D=f.call(this)||this).key=h,D.data=g,D.We=y,D.Ge=I,D.type=1,D}return U.__extends(l,f),l}(Gr);function sa(f,l){return h=f,g=l instanceof oi?l.data():Pr.empty(),y=new Kr(g),h.We.fields.forEach(function(I){if(!I.m()){var D=h.data.field(I);null!==D?y.set(I,D):y.delete(I)}}),y.Xe();var h,g,y}var Bi=function(f){function l(h,g){var y=this;return(y=f.call(this)||this).key=h,y.fieldTransforms=g,y.type=2,y.Ge=Fi.exists(!0),y}return U.__extends(l,f),l}(Gr);function tl(f,l){return l}function Zr(f,l,h){for(var g=new Kr(l),y=0;y<f.fieldTransforms.length;y++)g.set(f.fieldTransforms[y].field,h[y]);return g.Xe()}var xr=function(f){function l(h,g){var y=this;return(y=f.call(this)||this).key=h,y.Ge=g,y.type=3,y}return U.__extends(l,f),l}(Gr),nl=function(f){function l(h,g){var y=this;return(y=f.call(this)||this).key=h,y.Ge=g,y.type=4,y}return U.__extends(l,f),l}(Gr),Pr=function(){function f(l){this.proto=l}return f.empty=function(){return new f({mapValue:{}})},f.prototype.field=function(l){if(l.m())return this.proto;for(var h=this.proto,g=0;g<l.length-1;++g)if(!h.mapValue.fields||!ks(h=h.mapValue.fields[l.get(g)]))return null;return(h=(h.mapValue.fields||{})[l._()])||null},f.prototype.isEqual=function(l){return Ur(this.proto,l.proto)},f}(),Kr=function(){function f(l){void 0===l&&(l=Pr.empty()),this.Ze=l,this.tn=new Map}return f.prototype.set=function(l,h){return this.en(l,h),this},f.prototype.delete=function(l){return this.en(l,null),this},f.prototype.en=function(l,h){for(var g=this.tn,y=0;y<l.length-1;++y){var I=l.get(y),D=g.get(I);D instanceof Map?g=D:D&&10===Yi(D)?(D=new Map(Object.entries(D.mapValue.fields||{})),g.set(I,D),g=D):(g.set(I,D=new Map),g=D)}g.set(l._(),h)},f.prototype.Xe=function(){var l=this.nn(Ge.P(),this.tn);return null!=l?new Pr(l):this.Ze},f.prototype.nn=function(l,h){var g=this,y=!1,I=this.Ze.field(l),D=ks(I)?Object.assign({},I.mapValue.fields):{};return h.forEach(function(k,V){if(k instanceof Map){var Z=g.nn(l.child(V),k);null!=Z&&(D[V]=Z,y=!0)}else null!==k?(D[V]=k,y=!0):D.hasOwnProperty(V)&&(delete D[V],y=!0)}),y?{mapValue:{fields:D}}:null},f}();function di(f){var l=[];return nt(f.fields||{},function(h,g){var y=new Ge([h]);if(ks(g)){var I=di(g.mapValue).fields;if(0===I.length)l.push(y);else for(var D=0,k=I;D<k.length;D++)l.push(y.child(k[D]))}else l.push(y)}),new Ir(l)}var aa=function(f,l){this.key=f,this.version=l},oi=function(f){function l(h,g,y,I){var D=this;return(D=f.call(this,h,g)||this).sn=y,D.Je=!!I.Je,D.hasCommittedMutations=!!I.hasCommittedMutations,D}return U.__extends(l,f),l.prototype.field=function(h){return this.sn.field(h)},l.prototype.data=function(){return this.sn},l.prototype.rn=function(){return this.sn.proto},l.prototype.isEqual=function(h){return h instanceof l&&this.key.isEqual(h.key)&&this.version.isEqual(h.version)&&this.Je===h.Je&&this.hasCommittedMutations===h.hasCommittedMutations&&this.sn.isEqual(h.sn)},l.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(l.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),l}(aa),Rr=function(f){function l(h,g,y){var I=this;return(I=f.call(this,h,g)||this).hasCommittedMutations=!(!y||!y.hasCommittedMutations),I}return U.__extends(l,f),l.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(l.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),l.prototype.isEqual=function(h){return h instanceof l&&h.hasCommittedMutations===this.hasCommittedMutations&&h.version.isEqual(this.version)&&h.key.isEqual(this.key)},l}(aa),kl=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(l.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),l.prototype.isEqual=function(h){return h instanceof l&&h.version.isEqual(this.version)&&h.key.isEqual(this.key)},l}(aa),vs=function(f,l,h,g,y,I,D,k){void 0===l&&(l=null),void 0===h&&(h=[]),void 0===g&&(g=[]),void 0===y&&(y=null),void 0===I&&(I="F"),void 0===D&&(D=null),void 0===k&&(k=null),this.path=f,this.collectionGroup=l,this.on=h,this.filters=g,this.limit=y,this.an=I,this.startAt=D,this.endAt=k,this.cn=null,this.un=null};function xc(f,l,h,g,y,I,D,k){return new vs(f,l,h,g,y,I,D,k)}function Sa(f){return new vs(f)}function Tc(f){return!Te(f.limit)&&"F"===f.an}function Ja(f){return!Te(f.limit)&&"L"===f.an}function Nl(f){return f.on.length>0?f.on[0].field:null}function mi(f){for(var l=0,h=f.filters;l<h.length;l++){var g=h[l];if(g.hn())return g.field}return null}function fu(f){return null!==f.collectionGroup}function Dc(f){var l=Ze(f);if(null===l.cn){l.cn=[];var h=mi(l),g=Nl(l);if(null!==h&&null===g)h.p()||l.cn.push(new ua(h)),l.cn.push(new ua(Ge.v(),"asc"));else{for(var y=!1,I=0,D=l.on;I<D.length;I++){var k=D[I];l.cn.push(k),k.field.p()&&(y=!0)}if(!y){var V=l.on.length>0?l.on[l.on.length-1].dir:"asc";l.cn.push(new ua(Ge.v(),V))}}}return l.cn}function Uo(f){var l=Ze(f);if(!l.un)if("F"===l.an)l.un=Fe(l.path,l.collectionGroup,Dc(l),l.filters,l.limit,l.startAt,l.endAt);else{for(var h=[],g=0,y=Dc(l);g<y.length;g++){var I=y[g];h.push(new ua(I.field,"desc"===I.dir?"asc":"desc"))}var k=l.endAt?new bo(l.endAt.position,!l.endAt.before):null,V=l.startAt?new bo(l.startAt.position,!l.startAt.before):null;l.un=Fe(l.path,l.collectionGroup,h,l.filters,l.limit,k,V)}return l.un}function $d(f,l,h){return new vs(f.path,f.collectionGroup,f.on.slice(),f.filters.slice(),l,h,f.startAt,f.endAt)}function ec(f,l){return new vs(f.path,f.collectionGroup,f.on.slice(),f.filters.slice(),f.limit,f.an,l,f.endAt)}function yo(f,l){return new vs(f.path,f.collectionGroup,f.on.slice(),f.filters.slice(),f.limit,f.an,f.startAt,l)}function tc(f,l){return mn(Uo(f),Uo(l))&&f.an===l.an}function ca(f){return Ct(Uo(f))+"|lt:"+f.an}function ys(f){return"Query(target="+(h=(l=Uo(f)).path.R(),null!==l.collectionGroup&&(h+=" collectionGroup="+l.collectionGroup),l.filters.length>0&&(h+=", filters: ["+l.filters.map(function(g){return(y=g).field.R()+" "+y.op+" "+cs(y.value);var y}).join(", ")+"]"),Te(l.limit)||(h+=", limit: "+l.limit),l.orderBy.length>0&&(h+=", orderBy: ["+l.orderBy.map(function(g){return(y=g).field.R()+" ("+y.dir+")";var y}).join(", ")+"]"),l.startAt&&(h+=", startAt: "+nc(l.startAt)),l.endAt&&(h+=", endAt: "+nc(l.endAt)),"Target("+h+"); limitType=")+f.an+")";var l,h}function Fl(f,l){return y=(g=l).key.path,(null!==(h=f).collectionGroup?g.key.N(h.collectionGroup)&&h.path.T(y):Le.F(h.path)?h.path.isEqual(y):h.path.I(y))&&function(h,g){for(var y=0,I=h.on;y<I.length;y++){var D=I[y];if(!D.field.p()&&null===g.field(D.field))return!1}return!0}(f,l)&&function(h,g){for(var y=0,I=h.filters;y<I.length;y++)if(!I[y].matches(g))return!1;return!0}(f,l)&&function(h,g){return!(h.startAt&&!Ll(h.startAt,Dc(h),g)||h.endAt&&Ll(h.endAt,Dc(h),g))}(f,l);var h,g,y}function pu(f){return function(l,h){for(var g=!1,y=0,I=Dc(f);y<I.length;y++){var D=I[y],k=il(D,l,h);if(0!==k)return k;g=g||D.field.p()}return 0}}var kr=function(f){function l(h,g,y){var I=this;return(I=f.call(this)||this).field=h,I.op=g,I.value=y,I}return U.__extends(l,f),l.create=function(h,g,y){if(h.p())return"in"===g||"not-in"===g?this.ln(h,g,y):new Us(h,g,y);if(Ka(y)){if("=="!==g&&"!="!==g)throw new G(z.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new l(h,g,y)}if($r(y)){if("=="!==g&&"!="!==g)throw new G(z.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new l(h,g,y)}return"array-contains"===g?new cr(h,y):"in"===g?new Aa(h,y):"not-in"===g?new Yr(h,y):"array-contains-any"===g?new Ac(h,y):new l(h,g,y)},l.ln=function(h,g,y){return"in"===g?new la(h,y):new Sc(h,y)},l.prototype.matches=function(h){var g=h.field(this.field);return"!="===this.op?null!==g&&this._n(Ia(g,this.value)):null!==g&&Yi(this.value)===Yi(g)&&this._n(Ia(g,this.value))},l.prototype._n=function(h){switch(this.op){case"<":return h<0;case"<=":return h<=0;case"==":return 0===h;case"!=":return 0!==h;case">":return h>0;case">=":return h>=0;default:return ke()}},l.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},l}(function(){}),Us=function(f){function l(h,g,y){var I=this;return(I=f.call(this,h,g,y)||this).key=Le.C(y.referenceValue),I}return U.__extends(l,f),l.prototype.matches=function(h){var g=Le.i(h.key,this.key);return this._n(g)},l}(kr),la=function(f){function l(h,g){var y=this;return(y=f.call(this,h,"in",g)||this).keys=Vo(0,g),y}return U.__extends(l,f),l.prototype.matches=function(h){return this.keys.some(function(g){return g.isEqual(h.key)})},l}(kr),Sc=function(f){function l(h,g){var y=this;return(y=f.call(this,h,"not-in",g)||this).keys=Vo(0,g),y}return U.__extends(l,f),l.prototype.matches=function(h){return!this.keys.some(function(g){return g.isEqual(h.key)})},l}(kr);function Vo(f,l){var h;return((null===(h=l.arrayValue)||void 0===h?void 0:h.values)||[]).map(function(g){return Le.C(g.referenceValue)})}var cr=function(f){function l(h,g){return f.call(this,h,"array-contains",g)||this}return U.__extends(l,f),l.prototype.matches=function(h){var g=h.field(this.field);return _c(g)&&go(g.arrayValue,this.value)},l}(kr),Aa=function(f){function l(h,g){return f.call(this,h,"in",g)||this}return U.__extends(l,f),l.prototype.matches=function(h){var g=h.field(this.field);return null!==g&&go(this.value.arrayValue,g)},l}(kr),Yr=function(f){function l(h,g){return f.call(this,h,"not-in",g)||this}return U.__extends(l,f),l.prototype.matches=function(h){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var g=h.field(this.field);return null!==g&&!go(this.value.arrayValue,g)},l}(kr),Ac=function(f){function l(h,g){return f.call(this,h,"array-contains-any",g)||this}return U.__extends(l,f),l.prototype.matches=function(h){var g=this,y=h.field(this.field);return!(!_c(y)||!y.arrayValue.values)&&y.arrayValue.values.some(function(I){return go(g.value.arrayValue,I)})},l}(kr),bo=function(f,l){this.position=f,this.before=l};function nc(f){return(f.before?"b":"a")+":"+f.position.map(function(l){return cs(l)}).join(",")}function Ll(f,l,h){for(var g=0,y=0;y<f.position.length;y++){var I=l[y],D=f.position[y];if(g=I.field.p()?Le.i(Le.C(D.referenceValue),h.key):Ia(D,h.field(I.field)),"desc"===I.dir&&(g*=-1),0!==g)break}return f.before?g<=0:g<0}function Vs(f,l){if(null===f)return null===l;if(null===l||f.before!==l.before||f.position.length!==l.position.length)return!1;for(var h=0;h<f.position.length;h++)if(!Ur(f.position[h],l.position[h]))return!1;return!0}var ua=function(f,l){void 0===l&&(l="asc"),this.field=f,this.dir=l};function il(f,l,h){var y,D,k,V,g=f.field.p()?Le.i(l.key,h.key):(D=h,k=l.field(y=f.field),V=D.field(y),null!==k&&null!==V?Ia(k,V):ke());switch(f.dir){case"asc":return g;case"desc":return-1*g;default:return ke()}}function yi(f,l){return f.dir===l.dir&&f.field.isEqual(l.field)}var Bo=function(){var f=this;this.promise=new Promise(function(l,h){f.resolve=l,f.reject=h})},Ma=function(){function f(l,h,g,y,I){void 0===g&&(g=1e3),void 0===y&&(y=1.5),void 0===I&&(I=6e4),this.fn=l,this.dn=h,this.wn=g,this.mn=y,this.Tn=I,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return f.prototype.reset=function(){this.En=0},f.prototype.Rn=function(){this.En=this.Tn},f.prototype.gn=function(l){var h=this;this.cancel();var g=Math.floor(this.En+this.Pn()),y=Math.max(0,Date.now()-this.An),I=Math.max(0,g-y);I>0&&me("ExponentialBackoff","Backing off for "+I+" ms (base delay: "+this.En+" ms, delay with jitter: "+g+" ms, last attempt: "+y+" ms ago)"),this.In=this.fn.yn(this.dn,I,function(){return h.An=Date.now(),l()}),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},f.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},f.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},f.prototype.Pn=function(){return(Math.random()-.5)*this.En},f}(),xt=function(){function f(l){var h=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,l(function(g){h.Sn=!0,h.result=g,h.bn&&h.bn(g)},function(g){h.Sn=!0,h.error=g,h.vn&&h.vn(g)})}return f.prototype.catch=function(l){return this.next(void 0,l)},f.prototype.next=function(l,h){var g=this;return this.Dn&&ke(),this.Dn=!0,this.Sn?this.error?this.Cn(h,this.error):this.Nn(l,this.result):new f(function(y,I){g.bn=function(D){g.Nn(l,D).next(y,I)},g.vn=function(D){g.Cn(h,D).next(y,I)}})},f.prototype.Fn=function(){var l=this;return new Promise(function(h,g){l.next(h,g)})},f.prototype.xn=function(l){try{var h=l();return h instanceof f?h:f.resolve(h)}catch(g){return f.reject(g)}},f.prototype.Nn=function(l,h){return l?this.xn(function(){return l(h)}):f.resolve(h)},f.prototype.Cn=function(l,h){return l?this.xn(function(){return l(h)}):f.reject(h)},f.resolve=function(l){return new f(function(h,g){h(l)})},f.reject=function(l){return new f(function(h,g){g(l)})},f.$n=function(l){return new f(function(h,g){var y=0,I=0,D=!1;l.forEach(function(k){++y,k.next(function(){++I,D&&I===y&&h()},function(V){return g(V)})}),D=!0,I===y&&h()})},f.kn=function(l){for(var h=f.resolve(!1),g=function(D){h=h.next(function(k){return k?f.resolve(k):D()})},y=0,I=l;y<I.length;y++)g(I[y]);return h},f.forEach=function(l,h){var g=this,y=[];return l.forEach(function(I,D){y.push(h.call(g,I,D))}),this.$n(y)},f}(),Jo=function(){function f(l,h,g){this.name=l,this.version=h,this.Mn=g,12.2===f.On(ce.getUA())&&lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return f.delete=function(l){return me("SimpleDb","Removing database:",l),Oa(window.indexedDB.deleteDatabase(l)).Fn()},f.Ln=function(){if(typeof indexedDB>"u")return!1;if(f.Bn())return!0;var l=ce.getUA(),h=f.On(l),g=0<h&&h<10,y=f.qn(l),I=0<y&&y<4.5;return!(l.indexOf("MSIE ")>0||l.indexOf("Trident/")>0||l.indexOf("Edge/")>0||g||I)},f.Bn=function(){var l;return typeof process<"u"&&"YES"===(null===(l=process.env)||void 0===l?void 0:l.Un)},f.Qn=function(l,h){return l.store(h)},f.On=function(l){var h=l.match(/i(?:phone|pad|pod) os ([\d_]+)/i),g=h?h[1].split("_").slice(0,2).join("."):"-1";return Number(g)},f.qn=function(l){var h=l.match(/Android ([\d.]+)/i),g=h?h[1].split(".").slice(0,2).join("."):"-1";return Number(g)},f.prototype.Wn=function(l){return U.__awaiter(this,void 0,void 0,function(){var h,g=this;return U.__generator(this,function(y){switch(y.label){case 0:return this.db?[3,2]:(me("SimpleDb","Opening database:",this.name),h=this,[4,new Promise(function(I,D){var k=indexedDB.open(g.name,g.version);k.onsuccess=function(V){I(V.target.result)},k.onblocked=function(){D(new wo(l,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},k.onerror=function(V){var Z=V.target.error;D("VersionError"===Z.name?new G(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new wo(l,Z))},k.onupgradeneeded=function(V){me("SimpleDb",'Database "'+g.name+'" requires upgrade from version:',V.oldVersion),g.Mn.createOrUpgrade(V.target.result,k.transaction,V.oldVersion,g.version).next(function(){me("SimpleDb","Database upgrade to version "+g.version+" complete")})}})]);case 1:h.db=y.sent(),y.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(I){return g.jn(I)}),this.db)]}})})},f.prototype.Kn=function(l){this.jn=l,this.db&&(this.db.onversionchange=function(h){return l(h)})},f.prototype.runTransaction=function(l,h,g,y){return U.__awaiter(this,void 0,void 0,function(){var I,D,k,V,Z;return U.__generator(this,function(re){switch(re.label){case 0:I="readonly"===h,D=0,k=function(){var ge,_e,Pe,et,ht;return U.__generator(this,function(an){switch(an.label){case 0:++D,an.label=1;case 1:return an.trys.push([1,4,,5]),[4,V.Wn(l)];case 2:return V.db=an.sent(),ge=Oc.open(V.db,l,I?"readonly":"readwrite",g),_e=y(ge).catch(function(Xt){return ge.abort(Xt),xt.reject(Xt)}).Fn(),Pe={},_e.catch(function(){}),[4,ge.Gn];case 3:return[2,(Pe.value=(an.sent(),_e),Pe)];case 4:return me("SimpleDb","Transaction failed with error:",(et=an.sent()).message,"Retrying:",ht="FirebaseError"!==et.name&&D<3),V.close(),ht?[3,5]:[2,{value:Promise.reject(et)}];case 5:return[2]}})},V=this,re.label=1;case 1:return[5,k()];case 2:if("object"==typeof(Z=re.sent()))return[2,Z.value];re.label=3;case 3:return[3,1];case 4:return[2]}})})},f.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},f}(),Mc=function(){function f(l){this.zn=l,this.Hn=!1,this.Yn=null}return Object.defineProperty(f.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"cursor",{set:function(l){this.zn=l},enumerable:!1,configurable:!0}),f.prototype.done=function(){this.Hn=!0},f.prototype.Xn=function(l){this.Yn=l},f.prototype.delete=function(){return Oa(this.zn.delete())},f}(),wo=function(f){function l(h,g){var y=this;return(y=f.call(this,z.UNAVAILABLE,"IndexedDB transaction '"+h+"' failed: "+g)||this).name="IndexedDbTransactionError",y}return U.__extends(l,f),l}(G);function Bs(f){return"IndexedDbTransactionError"===f.name}var Oc=function(){function f(l,h){var g=this;this.action=l,this.transaction=h,this.aborted=!1,this.Zn=new Bo,this.transaction.oncomplete=function(){g.Zn.resolve()},this.transaction.onabort=function(){h.error?g.Zn.reject(new wo(l,h.error)):g.Zn.resolve()},this.transaction.onerror=function(y){var I=N(y.target.error);g.Zn.reject(new wo(l,I))}}return f.open=function(l,h,g,y){try{return new f(h,l.transaction(y,g))}catch(I){throw new wo(h,I)}},Object.defineProperty(f.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),f.prototype.abort=function(l){l&&this.Zn.reject(l),this.aborted||(me("SimpleDb","Aborting transaction:",l?l.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},f.prototype.store=function(l){var h=this.transaction.objectStore(l);return new Ku(h)},f}(),Ku=function(){function f(l){this.store=l}return f.prototype.put=function(l,h){var g;return void 0!==h?(me("SimpleDb","PUT",this.store.name,l,h),g=this.store.put(h,l)):(me("SimpleDb","PUT",this.store.name,"<auto-key>",l),g=this.store.put(l)),Oa(g)},f.prototype.add=function(l){return me("SimpleDb","ADD",this.store.name,l,l),Oa(this.store.add(l))},f.prototype.get=function(l){var h=this;return Oa(this.store.get(l)).next(function(g){return void 0===g&&(g=null),me("SimpleDb","GET",h.store.name,l,g),g})},f.prototype.delete=function(l){return me("SimpleDb","DELETE",this.store.name,l),Oa(this.store.delete(l))},f.prototype.count=function(){return me("SimpleDb","COUNT",this.store.name),Oa(this.store.count())},f.prototype.ts=function(l,h){var g=this.cursor(this.options(l,h)),y=[];return this.es(g,function(I,D){y.push(D)}).next(function(){return y})},f.prototype.ns=function(l,h){me("SimpleDb","DELETE ALL",this.store.name);var g=this.options(l,h);g.ss=!1;var y=this.cursor(g);return this.es(y,function(I,D,k){return k.delete()})},f.prototype.rs=function(l,h){var g;h?g=l:(g={},h=l);var y=this.cursor(g);return this.es(y,h)},f.prototype.os=function(l){var h=this.cursor({});return new xt(function(g,y){h.onerror=function(I){var D=N(I.target.error);y(D)},h.onsuccess=function(I){var D=I.target.result;D?l(D.primaryKey,D.value).next(function(k){k?D.continue():g()}):g()}})},f.prototype.es=function(l,h){var g=[];return new xt(function(y,I){l.onerror=function(D){I(D.target.error)},l.onsuccess=function(D){var k=D.target.result;if(k){var V=new Mc(k),Z=h(k.primaryKey,k.value,V);if(Z instanceof xt){var re=Z.catch(function(ge){return V.done(),xt.reject(ge)});g.push(re)}V.Sn?y():null===V.Jn?k.continue():k.continue(V.Jn)}else y()}}).next(function(){return xt.$n(g)})},f.prototype.options=function(l,h){var g=void 0;return void 0!==l&&("string"==typeof l?g=l:h=l),{index:g,range:h}},f.prototype.cursor=function(l){var h="next";if(l.reverse&&(h="prev"),l.index){var g=this.store.index(l.index);return l.ss?g.openKeyCursor(l.range,h):g.openCursor(l.range,h)}return this.store.openCursor(l.range,h)},f}();function Oa(f){return new xt(function(l,h){f.onsuccess=function(g){l(g.target.result)},f.onerror=function(g){var y=N(g.target.error);h(y)}})}var E=!1;function N(f){var l=Jo.On(ce.getUA());if(l>=12.2&&l<13){var h="An internal error was encountered in the Indexed Database server";if(f.message.indexOf(h)>=0){var g=new G("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+h+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return E||(E=!0,setTimeout(function(){throw g},0)),g}}return f}function j(){return typeof window<"u"?window:null}function ee(){return typeof document<"u"?document:null}var ve=function(){function f(l,h,g,y,I){this.cs=l,this.dn=h,this.us=g,this.op=y,this.hs=I,this.ls=new Bo,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch(function(D){})}return f._s=function(l,h,g,y,I){var D=new f(l,h,Date.now()+g,y,I);return D.start(g),D},f.prototype.start=function(l){var h=this;this.fs=setTimeout(function(){return h.ds()},l)},f.prototype.pn=function(){return this.ds()},f.prototype.cancel=function(l){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new G(z.CANCELLED,"Operation cancelled"+(l?": "+l:""))))},f.prototype.ds=function(){var l=this;this.cs.ws(function(){return null!==l.fs?(l.clearTimeout(),l.op().then(function(h){return l.ls.resolve(h)})):Promise.resolve()})},f.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},f}(),Ye=function(){function f(){var l=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new Ma(this,"async_queue_retry"),this.Vs=function(){var g=ee();g&&me("AsyncQueue","Visibility state changed to  ",g.visibilityState),l.ys.Vn()};var h=ee();h&&"function"==typeof h.addEventListener&&h.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(f.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),f.prototype.ws=function(l){this.enqueue(l)},f.prototype.bs=function(l){this.vs(),this.Ss(l)},f.prototype.Ds=function(){if(!this.Is){this.Is=!0;var l=ee();l&&"function"==typeof l.removeEventListener&&l.removeEventListener("visibilitychange",this.Vs)}},f.prototype.enqueue=function(l){return this.vs(),this.Is?new Promise(function(h){}):this.Ss(l)},f.prototype.Cs=function(l){var h=this;this.ws(function(){return h.Es.push(l),h.Ns()})},f.prototype.Ns=function(){return U.__awaiter(this,void 0,void 0,function(){var l,h=this;return U.__generator(this,function(g){switch(g.label){case 0:if(0===this.Es.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return g.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!Bs(l=g.sent()))throw l;return me("AsyncQueue","Operation failed with retryable error: "+l),[3,4];case 4:this.Es.length>0&&this.ys.gn(function(){return h.Ns()}),g.label=5;case 5:return[2]}})})},f.prototype.Ss=function(l){var h=this,g=this.Ts.then(function(){return h.gs=!0,l().catch(function(y){throw h.Rs=y,h.gs=!1,lt("INTERNAL UNHANDLED ERROR: ",(D=(I=y).message||"",I.stack&&(D=I.stack.includes(I.message)?I.stack:I.message+"\n"+I.stack),D)),y;var I,D}).then(function(y){return h.gs=!1,y})});return this.Ts=g,g},f.prototype.yn=function(l,h,g){var y=this;this.vs(),this.Ps.indexOf(l)>-1&&(h=0);var I=ve._s(this,l,h,g,function(D){return y.Fs(D)});return this.As.push(I),I},f.prototype.vs=function(){this.Rs&&ke()},f.prototype.xs=function(){},f.prototype.$s=function(){return U.__awaiter(this,void 0,void 0,function(){var l;return U.__generator(this,function(h){switch(h.label){case 0:return[4,l=this.Ts];case 1:h.sent(),h.label=2;case 2:if(l!==this.Ts)return[3,0];h.label=3;case 3:return[2]}})})},f.prototype.ks=function(l){for(var h=0,g=this.As;h<g.length;h++)if(g[h].dn===l)return!0;return!1},f.prototype.Ms=function(l){var h=this;return this.$s().then(function(){h.As.sort(function(D,k){return D.us-k.us});for(var g=0,y=h.As;g<y.length;g++){var I=y[g];if(I.pn(),"all"!==l&&I.dn===l)break}return h.$s()})},f.prototype.Os=function(l){this.Ps.push(l)},f.prototype.Fs=function(l){var h=this.As.indexOf(l);this.As.splice(h,1)},f}();function kt(f,l){if(lt("AsyncQueue",l+": "+f),Bs(f))return new G(z.UNAVAILABLE,l+": "+f);throw f}var qn=function(){this.Ls=void 0,this.listeners=[]},ei=function(){this.Bs=new Yt(function(f){return ca(f)},tc),this.onlineState="Unknown",this.qs=new Set};function lr(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,g,y,I,D,k,V;return U.__generator(this,function(Z){switch(Z.label){case 0:if(h=Ze(f),y=!1,(I=h.Bs.get(g=l.query))||(y=!0,I=new qn),!y)return[3,4];Z.label=1;case 1:return Z.trys.push([1,3,,4]),D=I,[4,h.Us(g)];case 2:return D.Ls=Z.sent(),[3,4];case 3:return k=Z.sent(),V=kt(k,"Initialization of query '"+ys(l.query)+"' failed"),[2,void l.onError(V)];case 4:return h.Bs.set(g,I),I.listeners.push(l),l.Qs(h.onlineState),I.Ls&&l.Ws(I.Ls)&&js(h),[2]}})})}function Eo(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,g,y,I,D;return U.__generator(this,function(k){return h=Ze(f),y=!1,(I=h.Bs.get(g=l.query))&&(D=I.listeners.indexOf(l))>=0&&(I.listeners.splice(D,1),y=0===I.listeners.length),y?[2,(h.Bs.delete(g),h.js(g))]:[2]})})}function es(f,l){for(var h=Ze(f),g=!1,y=0,I=l;y<I.length;y++){var D=I[y],V=h.Bs.get(D.query);if(V){for(var Z=0,re=V.listeners;Z<re.length;Z++)re[Z].Ws(D)&&(g=!0);V.Ls=D}}g&&js(h)}function Pc(f,l,h){var g=Ze(f),y=g.Bs.get(l);if(y)for(var I=0,D=y.listeners;I<D.length;I++)D[I].onError(h);g.Bs.delete(l)}function js(f){f.qs.forEach(function(l){l.next()})}var rl=function(){function f(l,h,g){this.query=l,this.Ks=h,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=g||{}}return f.prototype.Ws=function(l){if(!this.options.includeMetadataChanges){for(var h=[],g=0,y=l.docChanges;g<y.length;g++){var I=y[g];3!==I.type&&h.push(I)}l=new En(l.query,l.docs,l.Qt,h,l.Wt,l.fromCache,l.jt,!0)}var D=!1;return this.Gs?this.Hs(l)&&(this.Ks.next(l),D=!0):this.Ys(l,this.onlineState)&&(this.Js(l),D=!0),this.zs=l,D},f.prototype.onError=function(l){this.Ks.error(l)},f.prototype.Qs=function(l){this.onlineState=l;var h=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,l)&&(this.Js(this.zs),h=!0),h},f.prototype.Ys=function(l,h){return!l.fromCache||!(this.options.Xs&&"Offline"!==h||l.docs.m()&&"Offline"!==h)},f.prototype.Hs=function(l){return l.docChanges.length>0||!!(l.jt||this.zs&&this.zs.hasPendingWrites!==l.hasPendingWrites)&&!0===this.options.includeMetadataChanges},f.prototype.Js=function(l){l=En.Gt(l.query,l.docs,l.Wt,l.fromCache),this.Gs=!0,this.Ks.next(l)},f}(),Co=function(){function f(l){this.uid=l}return f.prototype.Zs=function(){return null!=this.uid},f.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},f.prototype.isEqual=function(l){return l.uid===this.uid},f}();Co.UNAUTHENTICATED=new Co(null),Co.ei=new Co("google-credentials-uid"),Co.ni=new Co("first-party-uid");var Io=function(){function f(l,h){var g=this;this.previousValue=l,h&&(h.si=function(y){return g.ii(y)},this.ri=function(y){return h.oi(y)})}return f.prototype.ii=function(l){return this.previousValue=Math.max(l,this.previousValue),this.previousValue},f.prototype.next=function(){var l=++this.previousValue;return this.ri&&this.ri(l),l},f}();function Yu(f,l){return"firestore_clients_"+f+"_"+l}function Fh(f,l,h){var g="firestore_mutations_"+f+"_"+h;return l.Zs()&&(g+="_"+l.uid),g}function mu(f,l){return"firestore_targets_"+f+"_"+l}Io.ai=-1;var Lh=function(){function f(l,h,g,y){this.user=l,this.batchId=h,this.state=g,this.error=y}return f.ci=function(l,h,g){var y=JSON.parse(g),I="object"==typeof y&&-1!==["pending","acknowledged","rejected"].indexOf(y.state)&&(void 0===y.error||"object"==typeof y.error),D=void 0;return I&&y.error&&(I="string"==typeof y.error.message&&"string"==typeof y.error.code)&&(D=new G(y.error.code,y.error.message)),I?new f(l,h,y.state,D):(lt("SharedClientState","Failed to parse mutation state for ID '"+h+"': "+g),null)},f.prototype.ui=function(){var l={state:this.state,updateTimeMs:Date.now()};return this.error&&(l.error={code:this.error.code,message:this.error.message}),JSON.stringify(l)},f}(),Ul=function(){function f(l,h,g){this.targetId=l,this.state=h,this.error=g}return f.ci=function(l,h){var g=JSON.parse(h),y="object"==typeof g&&-1!==["not-current","current","rejected"].indexOf(g.state)&&(void 0===g.error||"object"==typeof g.error),I=void 0;return y&&g.error&&(y="string"==typeof g.error.message&&"string"==typeof g.error.code)&&(I=new G(g.error.code,g.error.message)),y?new f(l,g.state,I):(lt("SharedClientState","Failed to parse target state for ID '"+l+"': "+h),null)},f.prototype.ui=function(){var l={state:this.state,updateTimeMs:Date.now()};return this.error&&(l.error={code:this.error.code,message:this.error.message}),JSON.stringify(l)},f}(),Vl=function(){function f(l,h){this.clientId=l,this.activeTargetIds=h}return f.ci=function(l,h){for(var g=JSON.parse(h),y="object"==typeof g&&g.activeTargetIds instanceof Array,I=yn(),D=0;y&&D<g.activeTargetIds.length;++D)y=Ie(g.activeTargetIds[D]),I=I.add(g.activeTargetIds[D]);return y?new f(l,I):(lt("SharedClientState","Failed to parse client data for instance '"+l+"': "+h),null)},f}(),Qu=function(){function f(l,h){this.clientId=l,this.onlineState=h}return f.ci=function(l){var h=JSON.parse(l);return"object"==typeof h&&-1!==["Unknown","Online","Offline"].indexOf(h.onlineState)&&"string"==typeof h.clientId?new f(h.clientId,h.onlineState):(lt("SharedClientState","Failed to parse online state: "+l),null)},f}(),bs=function(){function f(){this.activeTargetIds=yn()}return f.prototype.hi=function(l){this.activeTargetIds=this.activeTargetIds.add(l)},f.prototype.li=function(l){this.activeTargetIds=this.activeTargetIds.delete(l)},f.prototype.ui=function(){var l={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(l)},f}(),Rc=function(){function f(l,h,g,y,I){this.window=l,this.fn=h,this.persistenceKey=g,this._i=y,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new Hn(Ut),this.Ei=!1,this.Ii=[];var D=g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=I,this.Ai=Yu(this.persistenceKey,this._i),this.Ri="firestore_sequence_number_"+this.persistenceKey,this.Ti=this.Ti.ot(this._i,new bs),this.gi=new RegExp("^firestore_clients_"+D+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+D+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+D+"_(\\d+)$"),this.Vi="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.wi)}return f.Ln=function(l){return!(!l||!l.localStorage)},f.prototype.start=function(){return U.__awaiter(this,void 0,void 0,function(){var l,h,g,y,I,D,k,V,Z,re,_e=this;return U.__generator(this,function(Pe){switch(Pe.label){case 0:return[4,this.fi.pi()];case 1:for(l=Pe.sent(),h=0,g=l;h<g.length;h++)(y=g[h])!==this._i&&(I=this.getItem(Yu(this.persistenceKey,y)))&&(D=Vl.ci(y,I))&&(this.Ti=this.Ti.ot(D.clientId,D));for(this.bi(),(k=this.storage.getItem(this.Vi))&&(V=this.vi(k))&&this.Si(V),Z=0,re=this.Ii;Z<re.length;Z++)this.mi(re[Z]);return this.Ii=[],this.window.addEventListener("unload",function(){return _e.Di()}),this.Ei=!0,[2]}})})},f.prototype.oi=function(l){this.setItem(this.Ri,JSON.stringify(l))},f.prototype.Ci=function(){return this.Ni(this.Ti)},f.prototype.Fi=function(l){var h=!1;return this.Ti.forEach(function(g,y){y.activeTargetIds.has(l)&&(h=!0)}),h},f.prototype.xi=function(l){this.$i(l,"pending")},f.prototype.ki=function(l,h,g){this.$i(l,h,g),this.Mi(l)},f.prototype.Oi=function(l){var h="not-current";if(this.Fi(l)){var g=this.storage.getItem(mu(this.persistenceKey,l));if(g){var y=Ul.ci(l,g);y&&(h=y.state)}}return this.Li.hi(l),this.bi(),h},f.prototype.Bi=function(l){this.Li.li(l),this.bi()},f.prototype.qi=function(l){return this.Li.activeTargetIds.has(l)},f.prototype.Ui=function(l){this.removeItem(mu(this.persistenceKey,l))},f.prototype.Qi=function(l,h,g){this.Wi(l,h,g)},f.prototype.ji=function(l,h,g){var y=this;h.forEach(function(I){y.Mi(I)}),this.currentUser=l,g.forEach(function(I){y.xi(I)})},f.prototype.Ki=function(l){this.Gi(l)},f.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},f.prototype.getItem=function(l){var h=this.storage.getItem(l);return me("SharedClientState","READ",l,h),h},f.prototype.setItem=function(l,h){me("SharedClientState","SET",l,h),this.storage.setItem(l,h)},f.prototype.removeItem=function(l){me("SharedClientState","REMOVE",l),this.storage.removeItem(l)},f.prototype.mi=function(l){var h=this,g=l;if(g.storageArea===this.storage){if(me("SharedClientState","EVENT",g.key,g.newValue),g.key===this.Ai)return void lt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs(function(){return U.__awaiter(h,void 0,void 0,function(){var y,I,D,k,V,Z;return U.__generator(this,function(re){if(this.Ei){if(null!==g.key)if(this.gi.test(g.key)){if(null==g.newValue)return y=this.zi(g.key),[2,this.Hi(y,null)];if(I=this.Yi(g.key,g.newValue))return[2,this.Hi(I.clientId,I)]}else if(this.Pi.test(g.key)){if(null!==g.newValue&&(D=this.Ji(g.key,g.newValue)))return[2,this.Xi(D)]}else if(this.yi.test(g.key)){if(null!==g.newValue&&(k=this.Zi(g.key,g.newValue)))return[2,this.tr(k)]}else if(g.key===this.Vi){if(null!==g.newValue&&(V=this.vi(g.newValue)))return[2,this.Si(V)]}else g.key===this.Ri&&(Z=function(ge){var _e=Io.ai;if(null!=ge)try{var Pe=JSON.parse(ge);at("number"==typeof Pe),_e=Pe}catch(et){lt("SharedClientState","Failed to read sequence number from WebStorage",et)}return _e}(g.newValue))!==Io.ai&&this.si(Z)}else this.Ii.push(g);return[2]})})})}},Object.defineProperty(f.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),f.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},f.prototype.$i=function(l,h,g){var y=new Lh(this.currentUser,l,h,g),I=Fh(this.persistenceKey,this.currentUser,l);this.setItem(I,y.ui())},f.prototype.Mi=function(l){var h=Fh(this.persistenceKey,this.currentUser,l);this.removeItem(h)},f.prototype.Gi=function(l){this.storage.setItem(this.Vi,JSON.stringify({clientId:this._i,onlineState:l}))},f.prototype.Wi=function(l,h,g){var y=mu(this.persistenceKey,l),I=new Ul(l,h,g);this.setItem(y,I.ui())},f.prototype.zi=function(l){var h=this.gi.exec(l);return h?h[1]:null},f.prototype.Yi=function(l,h){var g=this.zi(l);return Vl.ci(g,h)},f.prototype.Ji=function(l,h){var g=this.Pi.exec(l),y=Number(g[1]);return Lh.ci(new Co(void 0!==g[2]?g[2]:null),y,h)},f.prototype.Zi=function(l,h){var g=this.yi.exec(l),y=Number(g[1]);return Ul.ci(y,h)},f.prototype.vi=function(l){return Qu.ci(l)},f.prototype.Xi=function(l){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(h){return l.user.uid===this.currentUser.uid?[2,this.fi.er(l.batchId,l.state,l.error)]:(me("SharedClientState","Ignoring mutation for non-active user "+l.user.uid),[2])})})},f.prototype.tr=function(l){return this.fi.nr(l.targetId,l.state,l.error)},f.prototype.Hi=function(l,h){var g=this,y=h?this.Ti.ot(l,h):this.Ti.remove(l),I=this.Ni(this.Ti),D=this.Ni(y),k=[],V=[];return D.forEach(function(Z){I.has(Z)||k.push(Z)}),I.forEach(function(Z){D.has(Z)||V.push(Z)}),this.fi.sr(k,V).then(function(){g.Ti=y})},f.prototype.Si=function(l){this.Ti.get(l.clientId)&&this.di(l.onlineState)},f.prototype.Ni=function(l){var h=yn();return l.forEach(function(g,y){h=h.kt(y.activeTargetIds)}),h},f}(),ol=function(){function f(){this.ir=new bs,this.rr={},this.di=null,this.si=null}return f.prototype.xi=function(l){},f.prototype.ki=function(l,h,g){},f.prototype.Oi=function(l){return this.ir.hi(l),this.rr[l]||"not-current"},f.prototype.Qi=function(l,h,g){this.rr[l]=h},f.prototype.Bi=function(l){this.ir.li(l)},f.prototype.qi=function(l){return this.ir.activeTargetIds.has(l)},f.prototype.Ui=function(l){delete this.rr[l]},f.prototype.Ci=function(){return this.ir.activeTargetIds},f.prototype.Fi=function(l){return this.ir.activeTargetIds.has(l)},f.prototype.start=function(){return this.ir=new bs,Promise.resolve()},f.prototype.ji=function(l,h,g){},f.prototype.Ki=function(l){},f.prototype.Di=function(){},f.prototype.oi=function(l){},f}(),Xu=function(){function f(l,h,g,y){this.batchId=l,this.ar=h,this.baseMutations=g,this.mutations=y}return f.prototype.cr=function(l,h,g){for(var y=g.ur,I=0;I<this.mutations.length;I++){var D=this.mutations[I];D.key.isEqual(l)&&(h=Jn(D,h,y[I]))}return h},f.prototype.hr=function(l,h){for(var g=0,y=this.baseMutations;g<y.length;g++){var I=y[g];I.key.isEqual(l)&&(h=Ic(I,h,h,this.ar))}for(var D=h,k=0,V=this.mutations;k<V.length;k++){var Z=V[k];Z.key.isEqual(l)&&(h=Ic(Z,h,D,this.ar))}return h},f.prototype.lr=function(l){var h=this,g=l;return this.mutations.forEach(function(y){var I=h.hr(y.key,l.get(y.key));I&&(g=g.ot(y.key,I))}),g},f.prototype.keys=function(){return this.mutations.reduce(function(l,h){return l.add(h.key)},Qe())},f.prototype.isEqual=function(l){return this.batchId===l.batchId&&cn(this.mutations,l.mutations,function(h,g){return Da(h,g)})&&cn(this.baseMutations,l.baseMutations,function(h,g){return Da(h,g)})},f}(),gu=function(){function f(l,h,g,y){this.batch=l,this._r=h,this.ur=g,this.dr=y}return f.from=function(l,h,g){at(l.mutations.length===g.length);for(var y=Y,I=l.mutations,D=0;D<I.length;D++)y=y.ot(I[D].key,g[D].version);return new f(l,h,g,y)},f}(),Gf=function(){function f(){this.wr=new Yt(function(l){return l.toString()},function(l,h){return l.isEqual(h)}),this.mr=!1}return Object.defineProperty(f.prototype,"readTime",{get:function(){return this.Tr},set:function(l){this.Tr=l},enumerable:!1,configurable:!0}),f.prototype.Er=function(l,h){this.Ir(),this.readTime=h,this.wr.set(l.key,l)},f.prototype.Ar=function(l,h){this.Ir(),h&&(this.readTime=h),this.wr.set(l,null)},f.prototype.Rr=function(l,h){this.Ir();var g=this.wr.get(h);return void 0!==g?xt.resolve(g):this.gr(l,h)},f.prototype.getEntries=function(l,h){return this.Pr(l,h)},f.prototype.apply=function(l){return this.Ir(),this.mr=!0,this.yr(l)},f.prototype.Ir=function(){},f}(),ws="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qd=function(){function f(){this.Vr=[]}return f.prototype.pr=function(l){this.Vr.push(l)},f.prototype.br=function(){this.Vr.forEach(function(l){return l()})},f}(),_u=function(){function f(l,h,g){this.vr=l,this.Sr=h,this.Dr=g}return f.prototype.Cr=function(l,h){var g=this;return this.Sr.Nr(l,h).next(function(y){return g.Fr(l,h,y)})},f.prototype.Fr=function(l,h,g){return this.vr.Rr(l,h).next(function(y){for(var I=0,D=g;I<D.length;I++)y=D[I].hr(h,y);return y})},f.prototype.$r=function(l,h,g){var y=le();return h.forEach(function(I,D){for(var k=0,V=g;k<V.length;k++)D=V[k].hr(I,D);y=y.ot(I,D)}),y},f.prototype.kr=function(l,h){var g=this;return this.vr.getEntries(l,h).next(function(y){return g.Mr(l,y)})},f.prototype.Mr=function(l,h){var g=this;return this.Sr.Or(l,h).next(function(y){var I=g.$r(l,h,y),D=fe();return I.forEach(function(k,V){V||(V=new Rr(k,zt.min())),D=D.ot(k,V)}),D})},f.prototype.Lr=function(l,h,g){return Le.F((y=h).path)&&null===y.collectionGroup&&0===y.filters.length?this.Br(l,h.path):fu(h)?this.qr(l,h,g):this.Ur(l,h,g);var y},f.prototype.Br=function(l,h){return this.Cr(l,new Le(h)).next(function(g){var y=te();return g instanceof oi&&(y=y.ot(g.key,g)),y})},f.prototype.qr=function(l,h,g){var y=this,I=h.collectionGroup,D=te();return this.Dr.Qr(l,I).next(function(k){return xt.forEach(k,function(V){var re,ge,Z=(re=h,ge=V.child(I),new vs(ge,null,re.on.slice(),re.filters.slice(),re.limit,re.an,re.startAt,re.endAt));return y.Ur(l,Z,g).next(function(re){re.forEach(function(ge,_e){D=D.ot(ge,_e)})})}).next(function(){return D})})},f.prototype.Ur=function(l,h,g){var y,I,D=this;return this.vr.Lr(l,h,g).next(function(k){return y=k,D.Sr.Wr(l,h)}).next(function(k){return D.jr(l,I=k,y).next(function(V){y=V;for(var Z=0,re=I;Z<re.length;Z++)for(var ge=re[Z],_e=0,Pe=ge.mutations;_e<Pe.length;_e++){var et=Pe[_e],ht=et.key,an=y.get(ht),Xt=Ic(et,an,an,ge.ar);y=Xt instanceof oi?y.ot(ht,Xt):y.remove(ht)}})}).next(function(){return y.forEach(function(k,V){Fl(h,V)||(y=y.remove(k))}),y})},f.prototype.jr=function(l,h,g){for(var y=Qe(),I=0,D=h;I<D.length;I++)for(var k=0,V=D[I].mutations;k<V.length;k++){var Z=V[k];Z instanceof Wr&&null===g.get(Z.key)&&(y=y.add(Z.key))}var re=g;return this.vr.getEntries(l,y).next(function(ge){return ge.forEach(function(_e,Pe){null!==Pe&&Pe instanceof oi&&(re=re.ot(_e,Pe))}),re})},f}(),xi=function(){function f(l,h,g,y){this.targetId=l,this.fromCache=h,this.Kr=g,this.Gr=y}return f.zr=function(l,h){for(var g=Qe(),y=Qe(),I=0,D=h.docChanges;I<D.length;I++){var k=D[I];switch(k.type){case 0:g=g.add(k.doc.key);break;case 1:y=y.add(k.doc.key)}}return new f(l,h.fromCache,g,y)},f}();function sl(f,l){var g=f[1],I=l[1],D=Ut(f[0],l[0]);return 0===D?Ut(g,I):D}var Pa=function(){function f(l){this.Hr=l,this.buffer=new Ci(sl),this.Yr=0}return f.prototype.Jr=function(){return++this.Yr},f.prototype.Xr=function(l){var h=[l,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(h);else{var g=this.buffer.last();sl(h,g)<0&&(this.buffer=this.buffer.delete(g).add(h))}},Object.defineProperty(f.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),f}(),jo={Zr:!1,eo:0,no:0,so:0},Qr=function(){function f(l,h,g){this.io=l,this.ro=h,this.oo=g}return f.ao=function(l){return new f(l,f.co,f.uo)},f}();Qr.ho=-1,Qr.lo=1048576,Qr._o=41943040,Qr.co=10,Qr.uo=1e3,Qr.fo=new Qr(Qr._o,Qr.co,Qr.uo),Qr.do=new Qr(Qr.ho,0,0);var Gd=function(){function f(l,h){this.wo=l,this.cs=h,this.mo=!1,this.To=null}return f.prototype.start=function(l){this.wo.params.io!==Qr.ho&&this.Eo(l)},f.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(f.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),f.prototype.Eo=function(l){var h=this,g=this.mo?3e5:6e4;me("LruGarbageCollector","Garbage collection scheduled in "+g+"ms"),this.To=this.cs.yn("lru_garbage_collection",g,function(){return U.__awaiter(h,void 0,void 0,function(){var y;return U.__generator(this,function(I){switch(I.label){case 0:this.To=null,this.mo=!0,I.label=1;case 1:return I.trys.push([1,3,,7]),[4,l.Io(this.wo)];case 2:return I.sent(),[3,7];case 3:return Bs(y=I.sent())?(me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",y),[3,6]):[3,4];case 4:return[4,ci(y)];case 5:I.sent(),I.label=6;case 6:return[3,7];case 7:return[4,this.Eo(l)];case 8:return I.sent(),[2]}})})})},f}(),al=function(){function f(l,h){this.Ao=l,this.params=h}return f.prototype.Ro=function(l,h){return this.Ao.Po(l).next(function(g){return Math.floor(h/100*g)})},f.prototype.yo=function(l,h){var g=this;if(0===h)return xt.resolve(Io.ai);var y=new Pa(h);return this.Ao.Ce(l,function(I){return y.Xr(I.sequenceNumber)}).next(function(){return g.Ao.Vo(l,function(I){return y.Xr(I)})}).next(function(){return y.maxValue})},f.prototype.po=function(l,h,g){return this.Ao.po(l,h,g)},f.prototype.bo=function(l,h){return this.Ao.bo(l,h)},f.prototype.vo=function(l,h){var g=this;return this.params.io===Qr.ho?(me("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(jo)):this.So(l).next(function(y){return y<g.params.io?(me("LruGarbageCollector","Garbage collection skipped; Cache size "+y+" is lower than threshold "+g.params.io),jo):g.Do(l,h)})},f.prototype.So=function(l){return this.Ao.So(l)},f.prototype.Do=function(l,h){var g,y,I,D,k,V,Z,re=this,ge=Date.now();return this.Ro(l,this.params.ro).next(function(_e){return _e>re.params.oo?(me("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+re.params.oo+" from "+_e),y=re.params.oo):y=_e,D=Date.now(),re.yo(l,y)}).next(function(_e){return g=_e,k=Date.now(),re.po(l,g,h)}).next(function(_e){return I=_e,V=Date.now(),re.bo(l,g)}).next(function(_e){return Z=Date.now(),Ne()<=pe.LogLevel.DEBUG&&me("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(D-ge)+"ms\n\tDetermined least recently used "+y+" in "+(k-D)+"ms\n\tRemoved "+I+" targets in "+(V-k)+"ms\n\tRemoved "+_e+" documents in "+(Z-V)+"ms\nTotal Duration: "+(Z-ge)+"ms"),xt.resolve({Zr:!0,eo:y,no:I,so:_e})})},f}();function Gi(f){for(var l="",h=0;h<f.length;h++)l.length>0&&(l=Zd(l)),l=Wd(f.get(h),l);return Zd(l)}function Wd(f,l){for(var h=l,g=f.length,y=0;y<g;y++){var I=f.charAt(y);switch(I){case"\0":h+="\x01\x10";break;case"\x01":h+="\x01\x11";break;default:h+=I}}return h}function Zd(f){return f+"\x01\x01"}function zs(f){var l=f.length;if(at(l>=2),2===l)return at("\x01"===f.charAt(0)&&"\x01"===f.charAt(1)),he.P();for(var h=l-2,g=[],y="",I=0;I<l;){var D=f.indexOf("\x01",I);switch((D<0||D>h)&&ke(),f.charAt(D+1)){case"\x01":var k=f.substring(I,D),V=void 0;0===y.length?V=k:(V=y+=k,y=""),g.push(V);break;case"\x10":y+=f.substring(I,D),y+="\0";break;case"\x11":y+=f.substring(I,D+1);break;default:ke()}I=D+2}return new he(g)}var cl=function(f){this.Co=f};function Kd(f,l){if(l.document)return V=!!l.hasCommittedMutations,Z=Mr(f.Co,(k=l.document).name),re=vo(k.updateTime),ge=new Pr({mapValue:{fields:k.fields}}),new oi(Z,re,ge,{hasCommittedMutations:!!V});var k,V,Z,re,ge;if(l.noDocument){var h=Le.$(l.noDocument.path),g=vu(l.noDocument.readTime);return new Rr(h,g,{hasCommittedMutations:!!l.hasCommittedMutations})}if(l.unknownDocument){var y=Le.$(l.unknownDocument.path),I=vu(l.unknownDocument.version);return new kl(y,I)}return ke()}function kc(f,l,h){var _e,Pe,g=Uh(h),y=l.key.path.h().A();if(l instanceof oi){var I={name:na(_e=f.Co,(Pe=l).key),fields:Pe.rn().mapValue.fields,updateTime:ta(_e,Pe.version.Z())};return new nr(null,null,I,l.hasCommittedMutations,g,y)}if(l instanceof Rr){var k=l.key.path.A(),V=ic(l.version),Z=l.hasCommittedMutations;return new nr(null,new Kf(k,V),null,Z,g,y)}if(l instanceof kl){var re=l.key.path.A(),ge=ic(l.version);return new nr(new e_(re,ge),null,null,!0,g,y)}return ke()}function Uh(f){var l=f.Z();return[l.seconds,l.nanoseconds]}function Vr(f){var l=new Qt(f[0],f[1]);return zt.J(l)}function ic(f){var l=f.Z();return new ed(l.seconds,l.nanoseconds)}function vu(f){var l=new Qt(f.seconds,f.nanoseconds);return zt.J(l)}function In(f,l){var h=(l.baseMutations||[]).map(function(I){return yr(f.Co,I)}),g=l.mutations.map(function(I){return yr(f.Co,I)}),y=Qt.fromMillis(l.localWriteTimeMs);return new Xu(l.batchId,y,h,g)}function Nc(f){var l,h,g=vu(f.readTime),y=void 0!==f.lastLimboFreeSnapshotVersion?vu(f.lastLimboFreeSnapshotVersion):zt.min();return void 0!==f.query.documents?(at(1===(h=f.query).documents.length),l=Uo(Sa(ia(h.documents[0])))):l=wc(f.query),new Ei(l,f.targetId,0,f.lastListenSequenceNumber,g,y,Un.fromBase64String(f.resumeToken))}function Wf(f,l){var h,g=ic(l.nt),y=ic(l.lastLimboFreeSnapshotVersion);h=jt(l.target)?xa(f.Co,l.target):br(f.Co,l.target);var I=l.resumeToken.toBase64();return new ur(l.targetId,Ct(l.target),g,I,l.sequenceNumber,y,h)}var Ju=function(){function f(l,h,g,y){this.userId=l,this.serializer=h,this.Dr=g,this.No=y,this.Fo={}}return f.xo=function(l,h,g,y){return at(""!==l.uid),new f(l.Zs()?l.uid:"",h,g,y)},f.prototype.$o=function(l){var h=!0,g=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $i(l).rs({index:Wi.userMutationsIndex,range:g},function(y,I,D){h=!1,D.done()}).next(function(){return h})},f.prototype.ko=function(l,h,g,y){var I=this,D=Es(l),k=$i(l);return k.add({}).next(function(V){at("number"==typeof V);for(var Z=new Xu(V,h,g,y),re=function(Xt,Pn,Qn){var gi=Qn.baseMutations.map(function(hr){return Ni(Xt.Co,hr)}),bi=Qn.mutations.map(function(hr){return Ni(Xt.Co,hr)});return new Wi(Pn,Qn.batchId,Qn.ar.toMillis(),gi,bi)}(I.serializer,I.userId,Z),ge=[],_e=new Ci(function(Xt,Pn){return Ut(Xt.R(),Pn.R())}),Pe=0,et=y;Pe<et.length;Pe++){var ht=et[Pe],an=ao.key(I.userId,ht.key.path,V);_e=_e.add(ht.key.path.h()),ge.push(k.put(re)),ge.push(D.put(an,ao.PLACEHOLDER))}return _e.forEach(function(Xt){ge.push(I.Dr.Mo(l,Xt))}),l.pr(function(){I.Fo[V]=Z.keys()}),xt.$n(ge).next(function(){return Z})})},f.prototype.Oo=function(l,h){var g=this;return $i(l).get(h).next(function(y){return y?(at(y.userId===g.userId),In(g.serializer,y)):null})},f.prototype.Lo=function(l,h){var g=this;return this.Fo[h]?xt.resolve(this.Fo[h]):this.Oo(l,h).next(function(y){if(y){var I=y.keys();return g.Fo[h]=I,I}return null})},f.prototype.Bo=function(l,h){var g=this,y=h+1,I=IDBKeyRange.lowerBound([this.userId,y]),D=null;return $i(l).rs({index:Wi.userMutationsIndex,range:I},function(k,V,Z){V.userId===g.userId&&(at(V.batchId>=y),D=In(g.serializer,V)),Z.done()}).next(function(){return D})},f.prototype.qo=function(l){var h=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),g=-1;return $i(l).rs({index:Wi.userMutationsIndex,range:h,reverse:!0},function(y,I,D){g=I.batchId,D.done()}).next(function(){return g})},f.prototype.Uo=function(l){var h=this,g=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $i(l).ts(Wi.userMutationsIndex,g).next(function(y){return y.map(function(I){return In(h.serializer,I)})})},f.prototype.Nr=function(l,h){var g=this,y=ao.prefixForPath(this.userId,h.path),I=IDBKeyRange.lowerBound(y),D=[];return Es(l).rs({range:I},function(k,V,Z){var re=k[0],_e=k[2],Pe=zs(k[1]);if(re===g.userId&&h.path.isEqual(Pe))return $i(l).get(_e).next(function(et){if(!et)throw ke();at(et.userId===g.userId),D.push(In(g.serializer,et))});Z.done()}).next(function(){return D})},f.prototype.Or=function(l,h){var g=this,y=new Ci(Ut),I=[];return h.forEach(function(D){var k=ao.prefixForPath(g.userId,D.path),V=IDBKeyRange.lowerBound(k),Z=Es(l).rs({range:V},function(re,ge,_e){var Pe=re[0],ht=re[2],an=zs(re[1]);Pe===g.userId&&D.path.isEqual(an)?y=y.add(ht):_e.done()});I.push(Z)}),xt.$n(I).next(function(){return g.Qo(l,y)})},f.prototype.Wr=function(l,h){var g=this,y=h.path,I=y.length+1,D=ao.prefixForPath(this.userId,y),k=IDBKeyRange.lowerBound(D),V=new Ci(Ut);return Es(l).rs({range:k},function(Z,re,ge){var _e=Z[0],et=Z[2],ht=zs(Z[1]);_e===g.userId&&y.T(ht)?ht.length===I&&(V=V.add(et)):ge.done()}).next(function(){return g.Qo(l,V)})},f.prototype.Qo=function(l,h){var g=this,y=[],I=[];return h.forEach(function(D){I.push($i(l).get(D).next(function(k){if(null===k)throw ke();at(k.userId===g.userId),y.push(In(g.serializer,k))}))}),xt.$n(I).next(function(){return y})},f.prototype.Wo=function(l,h){var g=this;return Vh(l.jo,this.userId,h).next(function(y){return l.pr(function(){g.Ko(h.batchId)}),xt.forEach(y,function(I){return g.No.Go(l,I)})})},f.prototype.Ko=function(l){delete this.Fo[l]},f.prototype.zo=function(l){var h=this;return this.$o(l).next(function(g){if(!g)return xt.resolve();var y=IDBKeyRange.lowerBound(ao.prefixForUser(h.userId)),I=[];return Es(l).rs({range:y},function(D,k,V){if(D[0]===h.userId){var Z=zs(D[1]);I.push(Z)}else V.done()}).next(function(){at(0===I.length)})})},f.prototype.Ho=function(l,h){return Br(l,this.userId,h)},f.prototype.Yo=function(l){var h=this;return Fc(l).get(this.userId).next(function(g){return g||new Do(h.userId,-1,"")})},f}();function Br(f,l,h){var g=ao.prefixForPath(l,h.path),y=g[1],I=IDBKeyRange.lowerBound(g),D=!1;return Es(f).rs({range:I,ss:!0},function(k,V,Z){k[0]===l&&k[1]===y&&(D=!0),Z.done()}).next(function(){return D})}function Vh(f,l,h){var g=f.store(Wi.store),y=f.store(ao.store),I=[],D=IDBKeyRange.only(h.batchId),k=0,V=g.rs({range:D},function(et,ht,an){return k++,an.delete()});I.push(V.next(function(){at(1===k)}));for(var Z=[],re=0,ge=h.mutations;re<ge.length;re++){var _e=ge[re],Pe=ao.key(l,_e.key.path,h.batchId);I.push(y.delete(Pe)),Z.push(_e.key)}return xt.$n(I).next(function(){return Z})}function $i(f){return ls.Qn(f,Wi.store)}function Es(f){return ls.Qn(f,ao.store)}function Fc(f){return ls.Qn(f,Do.store)}var Yd=function(){function f(l,h){this.serializer=l,this.Dr=h}return f.prototype.Er=function(l,h,g){return rc(l).put(pt(h),g)},f.prototype.Ar=function(l,h){var g=rc(l),y=pt(h);return g.delete(y)},f.prototype.updateMetadata=function(l,h){var g=this;return this.getMetadata(l).next(function(y){return y.byteSize+=h,g.Jo(l,y)})},f.prototype.Rr=function(l,h){var g=this;return rc(l).get(pt(h)).next(function(y){return g.Xo(y)})},f.prototype.Zo=function(l,h){var g=this;return rc(l).get(pt(h)).next(function(y){var I=g.Xo(y);return I?{ta:I,size:ii(y)}:null})},f.prototype.getEntries=function(l,h){var g=this,y=le();return this.ea(l,h,function(I,D){var k=g.Xo(D);y=y.ot(I,k)}).next(function(){return y})},f.prototype.na=function(l,h){var g=this,y=le(),I=new Hn(Le.i);return this.ea(l,h,function(D,k){var V=g.Xo(k);V?(y=y.ot(D,V),I=I.ot(D,ii(k))):(y=y.ot(D,null),I=I.ot(D,0))}).next(function(){return{sa:y,ia:I}})},f.prototype.ea=function(l,h,g){if(h.m())return xt.resolve();var y=IDBKeyRange.bound(h.first().path.A(),h.last().path.A()),I=h._t(),D=I.It();return rc(l).rs({range:y},function(k,V,Z){for(var re=Le.$(k);D&&Le.i(D,re)<0;)g(D,null),D=I.It();D&&D.isEqual(re)&&(g(D,V),D=I.At()?I.It():null),D?Z.Xn(D.path.A()):Z.done()}).next(function(){for(;D;)g(D,null),D=I.At()?I.It():null})},f.prototype.Lr=function(l,h,g){var y=this,I=te(),D=h.path.length+1,k={};if(g.isEqual(zt.min())){var V=h.path.A();k.range=IDBKeyRange.lowerBound(V)}else{var Z=h.path.A(),re=Uh(g);k.range=IDBKeyRange.lowerBound([Z,re],!0),k.index=nr.collectionReadTimeIndex}return rc(l).rs(k,function(ge,_e,Pe){if(ge.length===D){var et=Kd(y.serializer,_e);h.path.T(et.key.path)?et instanceof oi&&Fl(h,et)&&(I=I.ot(et.key,et)):Pe.done()}}).next(function(){return I})},f.prototype.ra=function(l){return new Zf(this,!!l&&l.oa)},f.prototype.aa=function(l){return this.getMetadata(l).next(function(h){return h.byteSize})},f.prototype.getMetadata=function(l){return Qd(l).get(Zi.key).next(function(h){return at(!!h),h})},f.prototype.Jo=function(l,h){return Qd(l).put(Zi.key,h)},f.prototype.Xo=function(l){if(l){var h=Kd(this.serializer,l);return h instanceof Rr&&h.version.isEqual(zt.min())?null:h}return null},f}(),Zf=function(f){function l(h,g){var y=this;return(y=f.call(this)||this).ca=h,y.oa=g,y.ua=new Yt(function(I){return I.toString()},function(I,D){return I.isEqual(D)}),y}return U.__extends(l,f),l.prototype.yr=function(h){var g=this,y=[],I=0,D=new Ci(function(k,V){return Ut(k.R(),V.R())});return this.wr.forEach(function(k,V){var Z=g.ua.get(k);if(V){var re=kc(g.ca.serializer,V,g.readTime);D=D.add(k.path.h());var ge=ii(re);I+=ge-Z,y.push(g.ca.Er(h,k,re))}else if(I-=Z,g.oa){var _e=kc(g.ca.serializer,new Rr(k,zt.min()),g.readTime);y.push(g.ca.Er(h,k,_e))}else y.push(g.ca.Ar(h,k))}),D.forEach(function(k){y.push(g.ca.Dr.Mo(h,k))}),y.push(this.ca.updateMetadata(h,I)),xt.$n(y)},l.prototype.gr=function(h,g){var y=this;return this.ca.Zo(h,g).next(function(I){return null===I?(y.ua.set(g,0),null):(y.ua.set(g,I.size),I.ta)})},l.prototype.Pr=function(h,g){var y=this;return this.ca.na(h,g).next(function(I){var D=I.sa;return I.ia.forEach(function(k,V){y.ua.set(k,V)}),D})},l}(Gf);function Qd(f){return ls.Qn(f,Zi.store)}function rc(f){return ls.Qn(f,nr.store)}function pt(f){return f.path.A()}function ii(f){var l;if(f.document)l=f.document;else if(f.unknownDocument)l=f.unknownDocument;else{if(!f.noDocument)throw ke();l=f.noDocument}return JSON.stringify(l).length}var Cs=function(){function f(){this.ha=new yu}return f.prototype.Mo=function(l,h){return this.ha.add(h),xt.resolve()},f.prototype.Qr=function(l,h){return xt.resolve(this.ha.getEntries(h))},f}(),yu=function(){function f(){this.index={}}return f.prototype.add=function(l){var h=l._(),g=l.h(),y=this.index[h]||new Ci(he.i),I=!y.has(g);return this.index[h]=y.add(g),I},f.prototype.has=function(l){var h=l._(),g=l.h(),y=this.index[h];return y&&y.has(g)},f.prototype.getEntries=function(l){return(this.index[l]||new Ci(he.i)).A()},f}(),xo=function(){function f(l){this.serializer=l}return f.prototype.createOrUpgrade=function(l,h,g,y){var I=this;at(g<y&&g>=0&&y<=10);var V,D=new Oc("createOrUpgrade",h);g<1&&y>=1&&(l.createObjectStore(To.store),(V=l).createObjectStore(Do.store,{keyPath:Do.keyPath}),V.createObjectStore(Wi.store,{keyPath:Wi.keyPath,autoIncrement:!0}).createIndex(Wi.userMutationsIndex,Wi.userMutationsKeyPath,{unique:!0}),V.createObjectStore(ao.store),Bh(l),function(V){V.createObjectStore(nr.store)}(l));var k=xt.resolve();return g<3&&y>=3&&(0!==g&&(function(V){V.deleteObjectStore(co.store),V.deleteObjectStore(ur.store),V.deleteObjectStore(Xr.store)}(l),Bh(l)),k=k.next(function(){return function(V){var Z=V.store(Xr.store),re=new Xr(0,0,zt.min().Z(),0);return Z.put(Xr.key,re)}(D)})),g<4&&y>=4&&(0!==g&&(k=k.next(function(){return function(V,Z){return Z.store(Wi.store).ts().next(function(re){V.deleteObjectStore(Wi.store),V.createObjectStore(Wi.store,{keyPath:Wi.keyPath,autoIncrement:!0}).createIndex(Wi.userMutationsIndex,Wi.userMutationsKeyPath,{unique:!0});var ge=Z.store(Wi.store),_e=re.map(function(Pe){return ge.put(Pe)});return xt.$n(_e)})}(l,D)})),k=k.next(function(){!function(V){V.createObjectStore(da.store,{keyPath:da.keyPath})}(l)})),g<5&&y>=5&&(k=k.next(function(){return I.removeAcknowledgedMutations(D)})),g<6&&y>=6&&(k=k.next(function(){return function(V){V.createObjectStore(Zi.store)}(l),I.addDocumentGlobal(D)})),g<7&&y>=7&&(k=k.next(function(){return I.ensureSequenceNumbers(D)})),g<8&&y>=8&&(k=k.next(function(){return I.createCollectionParentIndex(l,D)})),g<9&&y>=9&&(k=k.next(function(){(function(V){V.objectStoreNames.contains("remoteDocumentChanges")&&V.deleteObjectStore("remoteDocumentChanges")})(l),function(V){var Z=V.objectStore(nr.store);Z.createIndex(nr.readTimeIndex,nr.readTimeIndexPath,{unique:!1}),Z.createIndex(nr.collectionReadTimeIndex,nr.collectionReadTimeIndexPath,{unique:!1})}(h)})),g<10&&y>=10&&(k=k.next(function(){return I.rewriteCanonicalIds(D)})),k},f.prototype.addDocumentGlobal=function(l){var h=0;return l.store(nr.store).rs(function(g,y){h+=ii(y)}).next(function(){var g=new Zi(h);return l.store(Zi.store).put(Zi.key,g)})},f.prototype.removeAcknowledgedMutations=function(l){var h=this,g=l.store(Do.store),y=l.store(Wi.store);return g.ts().next(function(I){return xt.forEach(I,function(D){var k=IDBKeyRange.bound([D.userId,-1],[D.userId,D.lastAcknowledgedBatchId]);return y.ts(Wi.userMutationsIndex,k).next(function(V){return xt.forEach(V,function(Z){at(Z.userId===D.userId);var re=In(h.serializer,Z);return Vh(l,D.userId,re).next(function(){})})})})})},f.prototype.ensureSequenceNumbers=function(l){var h=l.store(co.store),g=l.store(nr.store);return l.store(Xr.store).get(Xr.key).next(function(y){var I=[];return g.rs(function(D,k){var V=new he(D),Z=[0,Gi(V)];I.push(h.get(Z).next(function(re){return re?xt.resolve():h.put(new co(0,Gi(V),y.highestListenSequenceNumber))}))}).next(function(){return xt.$n(I)})})},f.prototype.createCollectionParentIndex=function(l,h){l.createObjectStore(Jr.store,{keyPath:Jr.keyPath});var g=h.store(Jr.store),y=new yu,I=function(D){if(y.add(D)){var k=D._(),V=D.h();return g.put({collectionId:k,parent:Gi(V)})}};return h.store(nr.store).rs({ss:!0},function(D,k){var V=new he(D);return I(V.h())}).next(function(){return h.store(ao.store).rs({ss:!0},function(D,k){var Z=zs(D[1]);return I(Z.h())})})},f.prototype.rewriteCanonicalIds=function(l){var h=this,g=l.store(ur.store);return g.rs(function(y,I){var D=Nc(I),k=Wf(h.serializer,D);return g.put(k)})},f}(),ed=function(f,l){this.seconds=f,this.nanoseconds=l},To=function(f,l,h){this.ownerId=f,this.allowTabSynchronization=l,this.leaseTimestampMs=h};To.store="owner",To.key="owner";var Do=function(f,l,h){this.userId=f,this.lastAcknowledgedBatchId=l,this.lastStreamToken=h};Do.store="mutationQueues",Do.keyPath="userId";var Wi=function(f,l,h,g,y){this.userId=f,this.batchId=l,this.localWriteTimeMs=h,this.baseMutations=g,this.mutations=y};Wi.store="mutations",Wi.keyPath="batchId",Wi.userMutationsIndex="userMutationsIndex",Wi.userMutationsKeyPath=["userId","batchId"];var ao=function(){function f(){}return f.prefixForUser=function(l){return[l]},f.prefixForPath=function(l,h){return[l,Gi(h)]},f.key=function(l,h,g){return[l,Gi(h),g]},f}();ao.store="documentMutations",ao.PLACEHOLDER=new ao;var Kf=function(f,l){this.path=f,this.readTime=l},e_=function(f,l){this.path=f,this.version=l},nr=function(f,l,h,g,y,I){this.unknownDocument=f,this.noDocument=l,this.document=h,this.hasCommittedMutations=g,this.readTime=y,this.parentPath=I};nr.store="remoteDocuments",nr.readTimeIndex="readTimeIndex",nr.readTimeIndexPath="readTime",nr.collectionReadTimeIndex="collectionReadTimeIndex",nr.collectionReadTimeIndexPath=["parentPath","readTime"];var Zi=function(f){this.byteSize=f};Zi.store="remoteDocumentGlobal",Zi.key="remoteDocumentGlobalKey";var ur=function(f,l,h,g,y,I,D){this.targetId=f,this.canonicalId=l,this.readTime=h,this.resumeToken=g,this.lastListenSequenceNumber=y,this.lastLimboFreeSnapshotVersion=I,this.query=D};ur.store="targets",ur.keyPath="targetId",ur.queryTargetsIndexName="queryTargetsIndex",ur.queryTargetsKeyPath=["canonicalId","targetId"];var co=function(f,l,h){this.targetId=f,this.path=l,this.sequenceNumber=h};co.store="targetDocuments",co.keyPath=["targetId","path"],co.documentTargetsIndex="documentTargetsIndex",co.documentTargetsKeyPath=["path","targetId"];var Xr=function(f,l,h,g){this.highestTargetId=f,this.highestListenSequenceNumber=l,this.lastRemoteSnapshotVersion=h,this.targetCount=g};Xr.key="targetGlobalKey",Xr.store="targetGlobal";var Jr=function(f,l){this.collectionId=f,this.parent=l};function Bh(f){f.createObjectStore(co.store,{keyPath:co.keyPath}).createIndex(co.documentTargetsIndex,co.documentTargetsKeyPath,{unique:!0}),f.createObjectStore(ur.store,{keyPath:ur.keyPath}).createIndex(ur.queryTargetsIndexName,ur.queryTargetsKeyPath,{unique:!0}),f.createObjectStore(Xr.store)}Jr.store="collectionParents",Jr.keyPath=["collectionId","parent"];var da=function(f,l,h,g){this.clientId=f,this.updateTimeMs=l,this.networkEnabled=h,this.inForeground=g};da.store="clientMetadata",da.keyPath="clientId";var td=U.__spreadArrays(U.__spreadArrays(U.__spreadArrays([Do.store,Wi.store,ao.store,nr.store,ur.store,To.store,Xr.store,co.store],[da.store]),[Zi.store]),[Jr.store]),um=function(){function f(){this.la=new yu}return f.prototype.Mo=function(l,h){var g=this;if(!this.la.has(h)){var y=h._(),I=h.h();l.pr(function(){g.la.add(h)});var D={collectionId:y,parent:Gi(I)};return bu(l).put(D)}return xt.resolve()},f.prototype.Qr=function(l,h){var g=[],y=IDBKeyRange.bound([h,""],[Fn(h),""],!1,!0);return bu(l).ts(y).next(function(I){for(var D=0,k=I;D<k.length;D++){var V=k[D];if(V.collectionId!==h)break;g.push(zs(V.parent))}return g})},f}();function bu(f){return ls.Qn(f,Jr.store)}var Bl=function(){function f(l){this._a=l}return f.prototype.next=function(){return this._a+=2,this._a},f.fa=function(){return new f(0)},f.da=function(){return new f(-1)},f}(),Xd=function(){function f(l,h){this.No=l,this.serializer=h}return f.prototype.wa=function(l){var h=this;return this.ma(l).next(function(g){var y=new Bl(g.highestTargetId);return g.highestTargetId=y.next(),h.Ta(l,g).next(function(){return g.highestTargetId})})},f.prototype.Ea=function(l){return this.ma(l).next(function(h){return zt.J(new Qt(h.lastRemoteSnapshotVersion.seconds,h.lastRemoteSnapshotVersion.nanoseconds))})},f.prototype.Ia=function(l){return this.ma(l).next(function(h){return h.highestListenSequenceNumber})},f.prototype.Aa=function(l,h,g){var y=this;return this.ma(l).next(function(I){return I.highestListenSequenceNumber=h,g&&(I.lastRemoteSnapshotVersion=g.Z()),h>I.highestListenSequenceNumber&&(I.highestListenSequenceNumber=h),y.Ta(l,I)})},f.prototype.Ra=function(l,h){var g=this;return this.ga(l,h).next(function(){return g.ma(l).next(function(y){return y.targetCount+=1,g.Pa(h,y),g.Ta(l,y)})})},f.prototype.ya=function(l,h){return this.ga(l,h)},f.prototype.Va=function(l,h){var g=this;return this.pa(l,h.targetId).next(function(){return ll(l).delete(h.targetId)}).next(function(){return g.ma(l)}).next(function(y){return at(y.targetCount>0),y.targetCount-=1,g.Ta(l,y)})},f.prototype.po=function(l,h,g){var y=this,I=0,D=[];return ll(l).rs(function(k,V){var Z=Nc(V);Z.sequenceNumber<=h&&null===g.get(Z.targetId)&&(I++,D.push(y.Va(l,Z)))}).next(function(){return xt.$n(D)}).next(function(){return I})},f.prototype.Ce=function(l,h){return ll(l).rs(function(g,y){var I=Nc(y);h(I)})},f.prototype.ma=function(l){return Jd(l).get(Xr.key).next(function(h){return at(null!==h),h})},f.prototype.Ta=function(l,h){return Jd(l).put(Xr.key,h)},f.prototype.ga=function(l,h){return ll(l).put(Wf(this.serializer,h))},f.prototype.Pa=function(l,h){var g=!1;return l.targetId>h.highestTargetId&&(h.highestTargetId=l.targetId,g=!0),l.sequenceNumber>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=l.sequenceNumber,g=!0),g},f.prototype.ba=function(l){return this.ma(l).next(function(h){return h.targetCount})},f.prototype.va=function(l,h){var g=Ct(h),y=IDBKeyRange.bound([g,Number.NEGATIVE_INFINITY],[g,Number.POSITIVE_INFINITY]),I=null;return ll(l).rs({range:y,index:ur.queryTargetsIndexName},function(D,k,V){var Z=Nc(k);mn(h,Z.target)&&(I=Z,V.done())}).next(function(){return I})},f.prototype.Sa=function(l,h,g){var y=this,I=[],D=Ra(l);return h.forEach(function(k){var V=Gi(k.path);I.push(D.put(new co(g,V))),I.push(y.No.Da(l,g,k))}),xt.$n(I)},f.prototype.Ca=function(l,h,g){var y=this,I=Ra(l);return xt.forEach(h,function(D){var k=Gi(D.path);return xt.$n([I.delete([g,k]),y.No.Na(l,g,D)])})},f.prototype.pa=function(l,h){var g=Ra(l),y=IDBKeyRange.bound([h],[h+1],!1,!0);return g.delete(y)},f.prototype.Fa=function(l,h){var g=IDBKeyRange.bound([h],[h+1],!1,!0),y=Ra(l),I=Qe();return y.rs({range:g,ss:!0},function(D,k,V){var Z=zs(D[1]),re=new Le(Z);I=I.add(re)}).next(function(){return I})},f.prototype.Ho=function(l,h){var g=Gi(h.path),y=IDBKeyRange.bound([g],[Fn(g)],!1,!0),I=0;return Ra(l).rs({index:co.documentTargetsIndex,ss:!0,range:y},function(D,k,V){0!==D[0]&&(I++,V.done())}).next(function(){return I>0})},f.prototype.Ue=function(l,h){return ll(l).get(h).next(function(g){return g?Nc(g):null})},f}();function ll(f){return ls.Qn(f,ur.store)}function Jd(f){return ls.Qn(f,Xr.store)}function Ra(f){return ls.Qn(f,co.store)}var jl="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wu=function(f){function l(h,g){var y=this;return(y=f.call(this)||this).jo=h,y.xa=g,y}return U.__extends(l,f),l}(qd),ls=function(){function f(l,h,g,y,I,D,k,V,Z,re){if(this.allowTabSynchronization=l,this.persistenceKey=h,this.clientId=g,this.fn=I,this.window=D,this.document=k,this.$a=Z,this.ka=re,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(ge){return Promise.resolve()},!f.Ln())throw new G(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new sc(this,y),this.Wa=h+"main",this.serializer=new cl(V),this.ja=new Jo(this.Wa,10,new xo(this.serializer)),this.Ka=new Xd(this.No,this.serializer),this.Dr=new um,this.vr=new Yd(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===re&&lt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return f.Qn=function(l,h){if(l instanceof wu)return Jo.Qn(l.jo,h);throw ke()},f.prototype.start=function(){var l=this;return this.za().then(function(){if(!l.isPrimary&&!l.allowTabSynchronization)throw new G(z.FAILED_PRECONDITION,jl);return l.Ha(),l.Ya(),l.Ja(),l.runTransaction("getHighestListenSequenceNumber","readonly",function(h){return l.Ka.Ia(h)})}).then(function(h){l.Ma=new Io(h,l.$a)}).then(function(){l.Oa=!0}).catch(function(h){return l.ja&&l.ja.close(),Promise.reject(h)})},f.prototype.Xa=function(l){var h=this;return this.Qa=function(g){return U.__awaiter(h,void 0,void 0,function(){return U.__generator(this,function(y){return this.Ei?[2,l(g)]:[2]})})},l(this.isPrimary)},f.prototype.Za=function(l){var h=this;this.ja.Kn(function(g){return U.__awaiter(h,void 0,void 0,function(){return U.__generator(this,function(y){switch(y.label){case 0:return null===g.newVersion?[4,l()]:[3,2];case 1:y.sent(),y.label=2;case 2:return[2]}})})})},f.prototype.tc=function(l){var h=this;this.networkEnabled!==l&&(this.networkEnabled=l,this.fn.ws(function(){return U.__awaiter(h,void 0,void 0,function(){return U.__generator(this,function(g){switch(g.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:g.sent(),g.label=2;case 2:return[2]}})})}))},f.prototype.za=function(){var l=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(h){return oc(h).put(new da(l.clientId,Date.now(),l.networkEnabled,l.inForeground)).next(function(){if(l.isPrimary)return l.ec(h).next(function(g){g||(l.isPrimary=!1,l.fn.Cs(function(){return l.Qa(!1)}))})}).next(function(){return l.nc(h)}).next(function(g){return l.isPrimary&&!g?l.sc(h).next(function(){return!1}):!!g&&l.ic(h).next(function(){return!0})})}).catch(function(h){if(Bs(h))return me("IndexedDbPersistence","Failed to extend owner lease: ",h),l.isPrimary;if(!l.allowTabSynchronization)throw h;return me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",h),!1}).then(function(h){l.isPrimary!==h&&l.fn.Cs(function(){return l.Qa(h)}),l.isPrimary=h})},f.prototype.ec=function(l){var h=this;return ul(l).get(To.key).next(function(g){return xt.resolve(h.rc(g))})},f.prototype.oc=function(l){return oc(l).delete(this.clientId)},f.prototype.ac=function(){return U.__awaiter(this,void 0,void 0,function(){var l,h,g,I=this;return U.__generator(this,function(D){switch(D.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(k){var V=f.Qn(k,da.store);return V.ts().next(function(Z){var re=I.uc(Z,18e5),ge=Z.filter(function(_e){return-1===re.indexOf(_e)});return xt.forEach(ge,function(_e){return V.delete(_e.clientId)}).next(function(){return ge})})}).catch(function(){return[]})]);case 1:if(l=D.sent(),this.Ga)for(h=0,g=l;h<g.length;h++)this.Ga.removeItem(this.hc(g[h].clientId));D.label=2;case 2:return[2]}})})},f.prototype.Ja=function(){var l=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,function(){return l.za().then(function(){return l.ac()}).then(function(){return l.Ja()})})},f.prototype.rc=function(l){return!!l&&l.ownerId===this.clientId},f.prototype.nc=function(l){var h=this;return this.ka?xt.resolve(!0):ul(l).get(To.key).next(function(g){if(null!==g&&h.cc(g.leaseTimestampMs,5e3)&&!h.lc(g.ownerId)){if(h.rc(g)&&h.networkEnabled)return!0;if(!h.rc(g)){if(!g.allowTabSynchronization)throw new G(z.FAILED_PRECONDITION,jl);return!1}}return!(!h.networkEnabled||!h.inForeground)||oc(l).ts().next(function(y){return void 0===h.uc(y,5e3).find(function(I){return!(h.clientId===I.clientId||!(!h.networkEnabled&&I.networkEnabled||!h.inForeground&&I.inForeground&&h.networkEnabled===I.networkEnabled))})})}).next(function(g){return h.isPrimary!==g&&me("IndexedDbPersistence","Client "+(g?"is":"is not")+" eligible for a primary lease."),g})},f.prototype.Di=function(){return U.__awaiter(this,void 0,void 0,function(){var l=this;return U.__generator(this,function(h){switch(h.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[To.store,da.store],function(g){var y=new wu(g,Io.ai);return l.sc(y).next(function(){return l.oc(y)})})];case 1:return h.sent(),this.ja.close(),this.wc(),[2]}})})},f.prototype.uc=function(l,h){var g=this;return l.filter(function(y){return g.cc(y.updateTimeMs,h)&&!g.lc(y.clientId)})},f.prototype.pi=function(){var l=this;return this.runTransaction("getActiveClients","readonly",function(h){return oc(h).ts().next(function(g){return l.uc(g,18e5).map(function(y){return y.clientId})})})},Object.defineProperty(f.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),f.prototype.mc=function(l){return Ju.xo(l,this.serializer,this.Dr,this.No)},f.prototype.Tc=function(){return this.Ka},f.prototype.Ec=function(){return this.vr},f.prototype.Ic=function(){return this.Dr},f.prototype.runTransaction=function(l,h,g){var I,y=this;return me("IndexedDbPersistence","Starting transaction:",l),this.ja.runTransaction(l,"readonly"===h?"readonly":"readwrite",td,function(k){return I=new wu(k,y.Ma?y.Ma.next():Io.ai),"readwrite-primary"===h?y.ec(I).next(function(V){return!!V||y.nc(I)}).next(function(V){if(!V)throw lt("Failed to obtain primary lease for action '"+l+"'."),y.isPrimary=!1,y.fn.Cs(function(){return y.Qa(!1)}),new G(z.FAILED_PRECONDITION,ws);return g(I)}).next(function(V){return y.ic(I).next(function(){return V})}):y.Ac(I).next(function(){return g(I)})}).then(function(k){return I.br(),k})},f.prototype.Ac=function(l){var h=this;return ul(l).get(To.key).next(function(g){if(null!==g&&h.cc(g.leaseTimestampMs,5e3)&&!h.lc(g.ownerId)&&!h.rc(g)&&!(h.ka||h.allowTabSynchronization&&g.allowTabSynchronization))throw new G(z.FAILED_PRECONDITION,jl)})},f.prototype.ic=function(l){var h=new To(this.clientId,this.allowTabSynchronization,Date.now());return ul(l).put(To.key,h)},f.Ln=function(){return Jo.Ln()},f.prototype.sc=function(l){var h=this,g=ul(l);return g.get(To.key).next(function(y){return h.rc(y)?(me("IndexedDbPersistence","Releasing primary lease."),g.delete(To.key)):xt.resolve()})},f.prototype.cc=function(l,h){var g=Date.now();return!(l<g-h||l>g&&(lt("Detected an update time that is in the future: "+l+" > "+g),1))},f.prototype.Ha=function(){var l=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){l.fn.ws(function(){return l.inForeground="visible"===l.document.visibilityState,l.za()})},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},f.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},f.prototype.Ya=function(){var l,h=this;"function"==typeof(null===(l=this.window)||void 0===l?void 0:l.addEventListener)&&(this.La=function(){h._c(),h.fn.ws(function(){return h.Di()})},this.window.addEventListener("unload",this.La))},f.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},f.prototype.lc=function(l){var h;try{var g=null!==(null===(h=this.Ga)||void 0===h?void 0:h.getItem(this.hc(l)));return me("IndexedDbPersistence","Client '"+l+"' "+(g?"is":"is not")+" zombied in LocalStorage"),g}catch(y){return lt("IndexedDbPersistence","Failed to get zombied client id.",y),!1}},f.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(l){lt("Failed to set zombie client id.",l)}},f.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch{}},f.prototype.hc=function(l){return"firestore_zombie_"+this.persistenceKey+"_"+l},f}();function ul(f){return ls.Qn(f,To.store)}function oc(f){return ls.Qn(f,da.store)}var sc=function(){function f(l,h){this.db=l,this.wo=new al(this,h)}return f.prototype.Po=function(l){var h=this.Rc(l);return this.db.Tc().ba(l).next(function(g){return h.next(function(y){return g+y})})},f.prototype.Rc=function(l){var h=0;return this.Vo(l,function(g){h++}).next(function(){return h})},f.prototype.Ce=function(l,h){return this.db.Tc().Ce(l,h)},f.prototype.Vo=function(l,h){return this.gc(l,function(g,y){return h(y)})},f.prototype.Da=function(l,h,g){return ac(l,g)},f.prototype.Na=function(l,h,g){return ac(l,g)},f.prototype.po=function(l,h,g){return this.db.Tc().po(l,h,g)},f.prototype.Go=function(l,h){return ac(l,h)},f.prototype.Pc=function(l,h){return y=h,I=!1,Fc(g=l).os(function(D){return Br(g,D,y).next(function(k){return k&&(I=!0),xt.resolve(!k)})}).next(function(){return I});var g,y,I},f.prototype.bo=function(l,h){var g=this,y=this.db.Ec().ra(),I=[],D=0;return this.gc(l,function(k,V){if(V<=h){var Z=g.Pc(l,k).next(function(re){if(!re)return D++,y.Rr(l,k).next(function(){return y.Ar(k),Ra(l).delete([0,Gi(k.path)])})});I.push(Z)}}).next(function(){return xt.$n(I)}).next(function(){return y.apply(l)}).next(function(){return D})},f.prototype.removeTarget=function(l,h){var g=h.st(l.xa);return this.db.Tc().ya(l,g)},f.prototype.yc=function(l,h){return ac(l,h)},f.prototype.gc=function(l,h){var g,y=Ra(l),I=Io.ai;return y.rs({index:co.documentTargetsIndex},function(D,k){var Z=k.path,re=k.sequenceNumber;0===D[0]?(I!==Io.ai&&h(new Le(zs(g)),I),I=re,g=Z):I=Io.ai}).next(function(){I!==Io.ai&&h(new Le(zs(g)),I)})},f.prototype.So=function(l){return this.db.Ec().aa(l)},f}();function ac(f,l){return Ra(f).put((g=f.xa,new co(0,Gi(l.path),g)));var g}function zl(f,l){var h=f.projectId;return f.j||(h+="."+f.database),"firestore/"+l+"/"+h+"/"}var ts=function(){function f(l,h,g){this.persistence=l,this.Vc=h,this.bc=new Hn(Ut),this.vc=new Yt(function(y){return Ct(y)},mn),this.Sc=zt.min(),this.Sr=l.mc(g),this.Dc=l.Ec(),this.Ka=l.Tc(),this.Cc=new _u(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return f.prototype.Io=function(l){var h=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(g){return l.vo(g,h.bc)})},f}();function ha(f,l){var h=Ze(f);return h.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(g){var D,k,V,Z,re,ge,_e,y=l.batch.keys(),I=h.Dc.ra({oa:!0});return(D=h,k=g,V=l,Z=I,re=V.batch,ge=re.keys(),_e=xt.resolve(),ge.forEach(function(Pe){_e=_e.next(function(){return Z.Rr(k,Pe)}).next(function(et){var ht=et,an=V.dr.get(Pe);at(null!==an),(!ht||ht.version.L(an)<0)&&(ht=re.cr(Pe,ht,V))&&Z.Er(ht,V._r)})}),_e.next(function(){return D.Sr.Wo(k,re)})).next(function(){return I.apply(g)}).next(function(){return h.Sr.zo(g)}).next(function(){return h.Cc.kr(g,y)})})}function ir(f){var l=Ze(f);return l.persistence.runTransaction("Get last remote snapshot version","readonly",function(h){return l.Ka.Ea(h)})}function fa(f,l){var h=Ze(f),g=l.nt,y=h.bc;return h.persistence.runTransaction("Apply remote event","readwrite-primary",function(I){var D=h.Dc.ra({oa:!0});y=h.bc;var k=[];l.zt.forEach(function(ge,_e){var an,Xt,Pn,Pe=y.get(_e);if(Pe){k.push(h.Ka.Ca(I,ge.se,_e).next(function(){return h.Ka.Sa(I,ge.ee,_e)}));var et=ge.resumeToken;if(et.O()>0){var ht=Pe.it(et,g).st(I.xa);y=y.ot(_e,ht),an=Pe,Pn=ge,at((Xt=ht).resumeToken.O()>0),(0===an.resumeToken.O()||Xt.nt.X()-an.nt.X()>=3e8||Pn.ee.size+Pn.ne.size+Pn.se.size>0)&&k.push(h.Ka.ya(I,ht))}}});var V=fe(),Z=Qe();if(l.Yt.forEach(function(ge,_e){Z=Z.add(ge)}),k.push(D.getEntries(I,Z).next(function(ge){l.Yt.forEach(function(_e,Pe){var et=ge.get(_e);Pe instanceof Rr&&Pe.version.isEqual(zt.min())?(D.Ar(_e,g),V=V.ot(_e,Pe)):null==et||Pe.version.L(et.version)>0||0===Pe.version.L(et.version)&&et.hasPendingWrites?(D.Er(Pe,g),V=V.ot(_e,Pe)):me("LocalStore","Ignoring outdated watch update for ",_e,". Current version:",et.version," Watch version:",Pe.version),l.Jt.has(_e)&&k.push(h.persistence.No.yc(I,_e))})})),!g.isEqual(zt.min())){var re=h.Ka.Ea(I).next(function(ge){return h.Ka.Aa(I,I.xa,g)});k.push(re)}return xt.$n(k).next(function(){return D.apply(I)}).next(function(){return h.Cc.Mr(I,V)})}).then(function(I){return h.bc=y,I})}function eh(f,l){var h=Ze(f);return h.persistence.runTransaction("Get next mutation batch","readonly",function(g){return void 0===l&&(l=-1),h.Sr.Bo(g,l)})}function Is(f,l){var h=Ze(f);return h.persistence.runTransaction("Allocate target","readwrite",function(g){var y;return h.Ka.va(g,l).next(function(I){return I?xt.resolve(y=I):h.Ka.wa(g).next(function(D){return y=new Ei(l,D,0,g.xa),h.Ka.Ra(g,y).next(function(){return y})})})}).then(function(g){var y=h.bc.get(g.targetId);return(null===y||g.nt.L(y.nt)>0)&&(h.bc=h.bc.ot(g.targetId,g),h.vc.set(l,g.targetId)),g})}function jn(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g,y,I,D;return U.__generator(this,function(k){switch(k.label){case 0:g=Ze(f),y=g.bc.get(l),I=h?"readwrite":"readwrite-primary",k.label=1;case 1:return k.trys.push([1,4,,5]),h?[3,3]:[4,g.persistence.runTransaction("Release target",I,function(V){return g.persistence.No.removeTarget(V,y)})];case 2:k.sent(),k.label=3;case 3:return[3,5];case 4:if(!Bs(D=k.sent()))throw D;return me("LocalStore","Failed to update sequence numbers for target "+l+": "+D),[3,5];case 5:return g.bc=g.bc.remove(l),g.vc.delete(y.target),[2]}})})}function rr(f,l,h){var g=Ze(f),y=zt.min(),I=Qe();return g.persistence.runTransaction("Execute query","readonly",function(D){return(k=g,V=D,Z=Uo(l),re=Ze(k),ge=re.vc.get(Z),void 0!==ge?xt.resolve(re.bc.get(ge)):re.Ka.va(V,Z)).next(function(k){if(k)return y=k.lastLimboFreeSnapshotVersion,g.Ka.Fa(D,k.targetId).next(function(V){I=V})}).next(function(){return g.Vc.Lr(D,l,h?y:zt.min(),h?I:Qe())}).next(function(k){return{documents:k,Fc:I}});var k,V,Z,re,ge})}function So(f,l){var h=Ze(f),g=Ze(h.Ka),y=h.bc.get(l);return y?Promise.resolve(y.target):h.persistence.runTransaction("Get target data","readonly",function(I){return g.Ue(I,l).next(function(D){return D?D.target:null})})}function Hl(f){var l=Ze(f);return l.persistence.runTransaction("Get new document changes","readonly",function(h){return y=h,I=l.Sc,D=Ze(l.Dc),k=fe(),V=Uh(I),Z=rc(y),re=IDBKeyRange.lowerBound(V,!0),Z.rs({index:nr.readTimeIndex,range:re},function(ge,_e){var Pe=Kd(D.serializer,_e);k=k.ot(Pe.key,Pe),V=_e.readTime}).next(function(){return{xc:k,readTime:Vr(V)}});var y,I,D,k,V,Z,re}).then(function(h){var g=h.xc;return l.Sc=h.readTime,g})}function cc(f){return U.__awaiter(this,void 0,void 0,function(){var l;return U.__generator(this,function(h){return[2,(l=Ze(f)).persistence.runTransaction("Synchronize last document change read time","readonly",function(g){return I=rc(g),D=zt.min(),I.rs({index:nr.readTimeIndex,reverse:!0},function(k,V,Z){V.readTime&&(D=Vr(V.readTime)),Z.done()}).next(function(){return D});var I,D}).then(function(g){l.Sc=g})]})})}function ci(f){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(l){if(f.code!==z.FAILED_PRECONDITION||f.message!==ws)throw f;return me("LocalStore","Unexpectedly lost primary lease"),[2]})})}var ka=function(){function f(){this.$c=new Ci(jr.kc),this.Mc=new Ci(jr.Oc)}return f.prototype.m=function(){return this.$c.m()},f.prototype.Da=function(l,h){var g=new jr(l,h);this.$c=this.$c.add(g),this.Mc=this.Mc.add(g)},f.prototype.Lc=function(l,h){var g=this;l.forEach(function(y){return g.Da(y,h)})},f.prototype.Na=function(l,h){this.Bc(new jr(l,h))},f.prototype.qc=function(l,h){var g=this;l.forEach(function(y){return g.Na(y,h)})},f.prototype.Uc=function(l){var h=this,g=new Le(new he([])),y=new jr(g,l),I=new jr(g,l+1),D=[];return this.Mc.Ft([y,I],function(k){h.Bc(k),D.push(k.key)}),D},f.prototype.Qc=function(){var l=this;this.$c.forEach(function(h){return l.Bc(h)})},f.prototype.Bc=function(l){this.$c=this.$c.delete(l),this.Mc=this.Mc.delete(l)},f.prototype.Wc=function(l){var h=new Le(new he([])),g=new jr(h,l),y=new jr(h,l+1),I=Qe();return this.Mc.Ft([g,y],function(D){I=I.add(D.key)}),I},f.prototype.Ho=function(l){var h=new jr(l,0),g=this.$c.$t(h);return null!==g&&l.isEqual(g.key)},f}(),jr=function(){function f(l,h){this.key=l,this.jc=h}return f.kc=function(l,h){return Le.i(l.key,h.key)||Ut(l.jc,h.jc)},f.Oc=function(l,h){return Ut(l.jc,h.jc)||Le.i(l.key,h.key)},f}(),Lc=function(f,l){this.user=l,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+f},Nr=function(){function f(){this.Gc=null}return f.prototype.getToken=function(){return Promise.resolve(null)},f.prototype.zc=function(){},f.prototype.Hc=function(l){this.Gc=l,l(Co.UNAUTHENTICATED)},f.prototype.Yc=function(){this.Gc=null},f}(),or=function(){function f(l){var h=this;this.Jc=null,this.currentUser=Co.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){h.Zc++,h.currentUser=h.tu(),h.Xc=!0,h.Gc&&h.Gc(h.currentUser)},this.Zc=0,this.auth=l.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),l.get().then(function(g){h.auth=g,h.Jc&&h.auth.addAuthTokenListener(h.Jc)},function(){}))}return f.prototype.getToken=function(){var l=this,h=this.Zc,g=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(g).then(function(y){return l.Zc!==h?(me("FirebaseCredentialsProvider","getToken aborted due to token change."),l.getToken()):y?(at("string"==typeof y.accessToken),new Lc(y.accessToken,l.currentUser)):null}):Promise.resolve(null)},f.prototype.zc=function(){this.forceRefresh=!0},f.prototype.Hc=function(l){this.Gc=l,this.Xc&&l(this.currentUser)},f.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},f.prototype.tu=function(){var l=this.auth&&this.auth.getUid();return at(null===l||"string"==typeof l),new Co(l)},f}(),Xi=function(){function f(l,h){this.eu=l,this.nu=h,this.type="FirstParty",this.user=Co.ni}return Object.defineProperty(f.prototype,"Kc",{get:function(){var l={"X-Goog-AuthUser":this.nu},h=this.eu.auth.getAuthHeaderValueForFirstParty([]);return h&&(l.Authorization=h),l},enumerable:!1,configurable:!0}),f}(),Yf=function(){function f(l,h){this.eu=l,this.nu=h}return f.prototype.getToken=function(){return Promise.resolve(new Xi(this.eu,this.nu))},f.prototype.Hc=function(l){l(Co.ni)},f.prototype.Yc=function(){},f.prototype.zc=function(){},f}(),xs=function(){function f(l,h,g,y,I,D){this.fn=l,this.su=g,this.iu=y,this.ru=I,this.listener=D,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new Ma(l,h)}return f.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},f.prototype.uu=function(){return 2===this.state},f.prototype.start=function(){3!==this.state?this.auth():this.hu()},f.prototype.stop=function(){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(l){switch(l.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},f.prototype.lu=function(){this.state=0,this.ys.reset()},f.prototype._u=function(){var l=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,function(){return l.fu()}))},f.prototype.du=function(l){this.wu(),this.stream.send(l)},f.prototype.fu=function(){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(l){return this.uu()?[2,this.close(0)]:[2]})})},f.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},f.prototype.close=function(l,h){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(g){switch(g.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==l?this.ys.reset():h&&h.code===z.RESOURCE_EXHAUSTED?(lt(h.toString()),lt("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):h&&h.code===z.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=l,[4,this.listener.Tu(h)];case 1:return g.sent(),[2]}})})},f.prototype.mu=function(){},f.prototype.auth=function(){var l=this;this.state=1;var h=this.Eu(this.ou),g=this.ou;this.ru.getToken().then(function(y){l.ou===g&&l.Iu(y)},function(y){h(function(){var I=new G(z.UNKNOWN,"Fetching auth token failed: "+y.message);return l.Au(I)})})},f.prototype.Iu=function(l){var h=this,g=this.Eu(this.ou);this.stream=this.Ru(l),this.stream.gu(function(){g(function(){return h.state=2,h.listener.gu()})}),this.stream.Tu(function(y){g(function(){return h.Au(y)})}),this.stream.onMessage(function(y){g(function(){return h.onMessage(y)})})},f.prototype.hu=function(){var l=this;this.state=4,this.ys.gn(function(){return U.__awaiter(l,void 0,void 0,function(){return U.__generator(this,function(h){return this.state=0,this.start(),[2]})})})},f.prototype.Au=function(l){return me("PersistentStream","close with error: "+l),this.stream=null,this.close(3,l)},f.prototype.Eu=function(l){var h=this;return function(g){h.fn.ws(function(){return h.ou===l?g():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},f}(),nd=function(f){function l(h,g,y,I,D){var k=this;return(k=f.call(this,h,"listen_stream_connection_backoff","listen_stream_idle",g,y,D)||this).serializer=I,k}return U.__extends(l,f),l.prototype.Ru=function(h){return this.iu.Pu("Listen",h)},l.prototype.onMessage=function(h){this.ys.reset();var g=function(I,D){var k,Ks;if("targetChange"in D){var V="NO_CHANGE"===(Ks=D.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Ks?1:"REMOVE"===Ks?2:"CURRENT"===Ks?3:"RESET"===Ks?4:ke(),Z=D.targetChange.targetIds||[],re=function(Ks,uc){return Ks.Qe?(at(void 0===uc||"string"==typeof uc),Un.fromBase64String(uc||"")):(at(void 0===uc||uc instanceof Uint8Array),Un.fromUint8Array(uc||new Uint8Array))}(I,D.targetChange.resumeToken),ge=D.targetChange.cause,_e=ge&&function(Ks){var uc=void 0===Ks.code?z.UNKNOWN:ki(Ks.code);return new G(uc,Ks.message||"")}(ge);k=new Xe(V,Z,re,_e||null)}else if("documentChange"in D){var Pe=D.documentChange,et=Mr(I,Pe.document.name),ht=vo(Pe.document.updateTime),an=new Pr({mapValue:{fields:Pe.document.fields}}),Xt=new oi(et,ht,an,{});k=new _r(Pe.targetIds||[],Pe.removedTargetIds||[],Xt.key,Xt)}else if("documentDelete"in D){var gi=D.documentDelete,bi=Mr(I,gi.document),hr=gi.readTime?vo(gi.readTime):zt.min(),Zs=new Rr(bi,hr);k=new _r([],gi.removedTargetIds||[],Zs.key,Zs)}else if("documentRemove"in D){var ef=D.documentRemove,rp=Mr(I,ef.document);k=new _r([],ef.removedTargetIds||[],rp,null)}else{if(!("filter"in D))return ke();var dh=D.filter,vd=new vi(dh.count||0);k=new Zo(dh.targetId,vd)}return k}(this.serializer,h),y=function(I){if(!("targetChange"in I))return zt.min();var D=I.targetChange;return D.targetIds&&D.targetIds.length?zt.min():D.readTime?vo(D.readTime):zt.min()}(h);return this.listener.yu(g,y)},l.prototype.Vu=function(h){var I,D,k,V,g={};g.database=gs(this.serializer),g.addTarget=(I=this.serializer,(k=jt(V=(D=h).target)?{documents:xa(I,V)}:{query:br(I,V)}).targetId=D.targetId,D.resumeToken.O()>0&&(k.resumeToken=el(I,D.resumeToken)),k);var y=function(I,D){var k=function(V,Z){switch(Z){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ke()}}(0,D.et);return null==k?null:{"goog-listen-tags":k}}(0,h);y&&(g.labels=y),this.du(g)},l.prototype.pu=function(h){var g={};g.database=gs(this.serializer),g.removeTarget=h,this.du(g)},l}(xs),dm=function(f){function l(h,g,y,I,D){var k=this;return(k=f.call(this,h,"write_stream_connection_backoff","write_stream_idle",g,y,D)||this).serializer=I,k.bu=!1,k}return U.__extends(l,f),Object.defineProperty(l.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),l.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,f.prototype.start.call(this)},l.prototype.mu=function(){this.bu&&this.Su([])},l.prototype.Ru=function(h){return this.iu.Pu("Write",h)},l.prototype.onMessage=function(h){if(at(!!h.streamToken),this.lastStreamToken=h.streamToken,this.bu){this.ys.reset();var g=(D=h.commitTime,(I=h.writeResults)&&I.length>0?(at(void 0!==D),I.map(function(k){return function(V,Z){var re=vo(V.updateTime?V.updateTime:Z);re.isEqual(zt.min())&&(re=vo(Z));var ge=null;return V.transformResults&&V.transformResults.length>0&&(ge=V.transformResults),new Ta(re,ge)}(k,D)})):[]),y=vo(h.commitTime);return this.listener.Du(y,g)}var I,D;return at(!h.writeResults||0===h.writeResults.length),this.bu=!0,this.listener.Cu()},l.prototype.Nu=function(){var h={};h.database=gs(this.serializer),this.du(h)},l.prototype.Su=function(h){var g=this,y={streamToken:this.lastStreamToken,writes:h.map(function(I){return Ni(g.serializer,I)})};this.du(y)},l}(xs),id=function(f){function l(h,g,y){var I=this;return(I=f.call(this)||this).credentials=h,I.iu=g,I.serializer=y,I.Fu=!1,I}return U.__extends(l,f),l.prototype.xu=function(){if(this.Fu)throw new G(z.FAILED_PRECONDITION,"The client has already been terminated.")},l.prototype.$u=function(h,g,y){var I=this;return this.xu(),this.credentials.getToken().then(function(D){return I.iu.$u(h,g,y,D)}).catch(function(D){throw D.code===z.UNAUTHENTICATED&&I.credentials.zc(),D})},l.prototype.ku=function(h,g,y){var I=this;return this.xu(),this.credentials.getToken().then(function(D){return I.iu.ku(h,g,y,D)}).catch(function(D){throw D.code===z.UNAUTHENTICATED&&I.credentials.zc(),D})},l.prototype.terminate=function(){this.Fu=!1},l}(function(){}),rd=function(){function f(l,h){this.cs=l,this.di=h,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return f.prototype.Bu=function(){var l=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,function(){return l.Ou=null,l.Uu("Backend didn't respond within 10 seconds."),l.qu("Offline"),Promise.resolve()}))},f.prototype.Qu=function(l){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+l.toString()),this.qu("Offline")))},f.prototype.set=function(l){this.Wu(),this.Mu=0,"Online"===l&&(this.Lu=!1),this.qu(l)},f.prototype.qu=function(l){l!==this.state&&(this.state=l,this.di(l))},f.prototype.Uu=function(l){var h="Could not reach Cloud Firestore backend. "+l+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(lt(h),this.Lu=!1):me("OnlineStateTracker",h)},f.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},f}(),Qf=function(f,l,h,g,y){var I=this;this.ju=f,this.Ku=l,this.cs=h,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=y,this.Xu.Zu(function(D){h.ws(function(){return U.__awaiter(I,void 0,void 0,function(){return U.__generator(this,function(k){switch(k.label){case 0:return us(this)?(me("RemoteStore","Restarting streams for network reachability change."),[4,function(V){return U.__awaiter(this,void 0,void 0,function(){var Z;return U.__generator(this,function(re){switch(re.label){case 0:return(Z=Ze(V)).Yu.add(4),[4,$l(Z)];case 1:return re.sent(),Z.th.set("Unknown"),Z.Yu.delete(4),[4,od(Z)];case 2:return re.sent(),[2]}})})}(this)]):[3,2];case 1:k.sent(),k.label=2;case 2:return[2]}})})})}),this.th=new rd(h,g)};function od(f){return U.__awaiter(this,void 0,void 0,function(){var l,h;return U.__generator(this,function(g){switch(g.label){case 0:if(!us(f))return[3,4];l=0,h=f.Ju,g.label=1;case 1:return l<h.length?[4,(0,h[l])(!0)]:[3,4];case 2:g.sent(),g.label=3;case 3:return l++,[3,1];case 4:return[2]}})})}function $l(f){return U.__awaiter(this,void 0,void 0,function(){var l,h;return U.__generator(this,function(g){switch(g.label){case 0:l=0,h=f.Ju,g.label=1;case 1:return l<h.length?[4,(0,h[l])(!1)]:[3,4];case 2:g.sent(),g.label=3;case 3:return l++,[3,1];case 4:return[2]}})})}function jh(f){return U.__awaiter(this,void 0,void 0,function(){var l;return U.__generator(this,function(h){switch(h.label){case 0:return l=Ze(f),me("RemoteStore","RemoteStore shutting down."),l.Yu.add(5),[4,$l(l)];case 1:return h.sent(),l.Xu.Di(),l.th.set("Unknown"),[2]}})})}function th(f,l){var h=Ze(f);h.Hu.has(l.targetId)||(h.Hu.set(l.targetId,l),Eu(h)?dl(h):$s(h).uu()&&Vc(h,l))}function Uc(f,l){var h=Ze(f),g=$s(h);h.Hu.delete(l),g.uu()&&sd(h,l),0===h.Hu.size&&(g.uu()?g._u():us(h)&&h.th.set("Unknown"))}function Vc(f,l){f.eh.Ie(l.targetId),$s(f).Vu(l)}function sd(f,l){f.eh.Ie(l),$s(f).pu(l)}function dl(f){f.eh=new _t({qe:function(l){return f.Gu.qe(l)},Ue:function(l){return f.Hu.get(l)||null}}),$s(f).start(),f.th.Bu()}function Eu(f){return us(f)&&!$s(f).cu()&&f.Hu.size>0}function us(f){return 0===Ze(f).Yu.size}function zh(f){f.eh=void 0}function Hh(f){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(l){return f.Hu.forEach(function(h,g){Vc(f,h)}),[2]})})}function nh(f,l){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(h){return zh(f),Eu(f)?(f.th.Qu(l),dl(f)):f.th.set("Unknown"),[2]})})}function $h(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g,y,I;return U.__generator(this,function(D){switch(D.label){case 0:if(f.th.set("Online"),!(l instanceof Xe&&2===l.state&&l.cause))return[3,6];D.label=1;case 1:return D.trys.push([1,3,,5]),[4,function(k,V){return U.__awaiter(this,void 0,void 0,function(){var Z,re,ge,_e;return U.__generator(this,function(Pe){switch(Pe.label){case 0:Z=V.cause,re=0,ge=V.targetIds,Pe.label=1;case 1:return re<ge.length?k.Hu.has(_e=ge[re])?[4,k.Gu.nh(_e,Z)]:[3,3]:[3,5];case 2:Pe.sent(),k.Hu.delete(_e),k.eh.removeTarget(_e),Pe.label=3;case 3:Pe.label=4;case 4:return re++,[3,1];case 5:return[2]}})})}(f,l)];case 2:return D.sent(),[3,5];case 3:return g=D.sent(),me("RemoteStore","Failed to remove targets %s: %s ",l.targetIds.join(","),g),[4,zo(f,g)];case 4:return D.sent(),[3,5];case 5:return[3,13];case 6:if(l instanceof _r?f.eh.be(l):l instanceof Zo?f.eh.$e(l):f.eh.De(l),h.isEqual(zt.min()))return[3,13];D.label=7;case 7:return D.trys.push([7,11,,13]),[4,ir(f.ju)];case 8:return y=D.sent(),h.L(y)>=0?[4,(k=f,V=h,Z=k.eh.Oe(V),Z.zt.forEach(function(re,ge){if(re.resumeToken.O()>0){var _e=k.Hu.get(ge);_e&&k.Hu.set(ge,_e.it(re.resumeToken,V))}}),Z.Ht.forEach(function(re){var ge=k.Hu.get(re);if(ge){k.Hu.set(re,ge.it(Un.B,ge.nt)),sd(k,re);var _e=new Ei(ge.target,re,1,ge.sequenceNumber);Vc(k,_e)}}),k.Gu.sh(Z))]:[3,10];case 9:D.sent(),D.label=10;case 10:return[3,13];case 11:return me("RemoteStore","Failed to raise snapshot:",I=D.sent()),[4,zo(f,I)];case 12:return D.sent(),[3,13];case 13:return[2]}var k,V,Z})})}function zo(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g=this;return U.__generator(this,function(y){switch(y.label){case 0:if(!Bs(l))throw l;return f.Yu.add(1),[4,$l(f)];case 1:return y.sent(),f.th.set("Offline"),h||(h=function(){return ir(f.ju)}),f.cs.Cs(function(){return U.__awaiter(g,void 0,void 0,function(){return U.__generator(this,function(I){switch(I.label){case 0:return me("RemoteStore","Retrying IndexedDB access"),[4,h()];case 1:return I.sent(),f.Yu.delete(1),[4,od(f)];case 2:return I.sent(),[2]}})})}),[2]}})})}function ad(f,l){return l().catch(function(h){return zo(f,h,l)})}function Hs(f){return U.__awaiter(this,void 0,void 0,function(){var l,h,g,y,I;return U.__generator(this,function(D){switch(D.label){case 0:l=Ze(f),h=Ts(l),g=l.zu.length>0?l.zu[l.zu.length-1].batchId:-1,D.label=1;case 1:if(!(us(k=l)&&k.zu.length<10))return[3,7];D.label=2;case 2:return D.trys.push([2,4,,6]),[4,eh(l.ju,g)];case 3:return null===(y=D.sent())?(0===l.zu.length&&h._u(),[3,7]):(g=y.batchId,function(k,V){k.zu.push(V);var Z=Ts(k);Z.uu()&&Z.vu&&Z.Su(V.mutations)}(l,y),[3,6]);case 4:return I=D.sent(),[4,zo(l,I)];case 5:return D.sent(),[3,6];case 6:return[3,1];case 7:return ql(l)&&Cu(l),[2]}var k})})}function ql(f){return us(f)&&!Ts(f).cu()&&f.zu.length>0}function Cu(f){Ts(f).start()}function Gl(f){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(l){return Ts(f).Nu(),[2]})})}function Wl(f){return U.__awaiter(this,void 0,void 0,function(){var l,h,g;return U.__generator(this,function(I){for(l=Ts(f),h=0,g=f.zu;h<g.length;h++)l.Su(g[h].mutations);return[2]})})}function cd(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g,y;return U.__generator(this,function(I){switch(I.label){case 0:return g=f.zu.shift(),y=gu.from(g,l,h),[4,ad(f,function(){return f.Gu.ih(y)})];case 1:return I.sent(),[4,Hs(f)];case 2:return I.sent(),[2]}})})}function Zl(f,l){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(h){switch(h.label){case 0:return l&&Ts(f).vu?[4,function(g,y){return U.__awaiter(this,void 0,void 0,function(){var I,D;return U.__generator(this,function(k){switch(k.label){case 0:return zn(D=y.code)&&D!==z.ABORTED?(I=g.zu.shift(),Ts(g).lu(),[4,ad(g,function(){return g.Gu.rh(I.batchId,y)})]):[3,3];case 1:return k.sent(),[4,Hs(g)];case 2:k.sent(),k.label=3;case 3:return[2]}})})}(f,l)]:[3,2];case 1:h.sent(),h.label=2;case 2:return ql(f)&&Cu(f),[2]}})})}function Kl(f,l){return U.__awaiter(this,void 0,void 0,function(){var h;return U.__generator(this,function(y){switch(y.label){case 0:return h=Ze(f),l?(h.Yu.delete(2),[4,od(h)]):[3,2];case 1:return y.sent(),[3,5];case 2:return l?[3,4]:(h.Yu.add(2),[4,$l(h)]);case 3:y.sent(),h.th.set("Unknown"),y.label=4;case 4:y.label=5;case 5:return[2]}})})}function $s(f){var h,g,y,I,l=this;return f.oh||(f.oh=(h=f.Ku,g=f.cs,y={gu:Hh.bind(null,f),Tu:nh.bind(null,f),yu:$h.bind(null,f)},(I=Ze(h)).xu(),new nd(g,I.iu,I.credentials,I.serializer,y)),f.Ju.push(function(h){return U.__awaiter(l,void 0,void 0,function(){return U.__generator(this,function(g){switch(g.label){case 0:return h?(f.oh.lu(),Eu(f)?dl(f):f.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,f.oh.stop()];case 2:g.sent(),zh(f),g.label=3;case 3:return[2]}})})})),f.oh}function Ts(f){var h,g,y,I,l=this;return f.ah||(f.ah=(h=f.Ku,g=f.cs,y={gu:Gl.bind(null,f),Tu:Zl.bind(null,f),Cu:Wl.bind(null,f),Du:cd.bind(null,f)},(I=Ze(h)).xu(),new dm(g,I.iu,I.credentials,I.serializer,y)),f.Ju.push(function(h){return U.__awaiter(l,void 0,void 0,function(){return U.__generator(this,function(g){switch(g.label){case 0:return h?(f.ah.lu(),[4,Hs(f)]):[3,2];case 1:return g.sent(),[3,4];case 2:return[4,f.ah.stop()];case 3:g.sent(),f.zu.length>0&&(me("RemoteStore","Stopping write stream with "+f.zu.length+" pending writes"),f.zu=[]),g.label=4;case 4:return[2]}})})})),f.ah}var Xf=function(f){this.key=f},ld=function(f){this.key=f},Na=function(){function f(l,h){this.query=l,this.uh=h,this.hh=null,this.te=!1,this.lh=Qe(),this.Wt=Qe(),this._h=pu(l),this.fh=new Vt(this._h)}return Object.defineProperty(f.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),f.prototype.wh=function(l,h){var g=this,y=h?h.mh:new Xn,I=h?h.fh:this.fh,D=h?h.Wt:this.Wt,k=I,V=!1,Z=Tc(this.query)&&I.size===this.query.limit?I.last():null,re=Ja(this.query)&&I.size===this.query.limit?I.first():null;if(l.ht(function(_e,Pe){var et=I.get(_e),ht=Pe instanceof oi?Pe:null;ht&&(ht=Fl(g.query,ht)?ht:null);var an=!!et&&g.Wt.has(et.key),Xt=!!ht&&(ht.Je||g.Wt.has(ht.key)&&ht.hasCommittedMutations),Pn=!1;et&&ht?et.data().isEqual(ht.data())?an!==Xt&&(y.track({type:3,doc:ht}),Pn=!0):g.Th(et,ht)||(y.track({type:2,doc:ht}),Pn=!0,(Z&&g._h(ht,Z)>0||re&&g._h(ht,re)<0)&&(V=!0)):!et&&ht?(y.track({type:0,doc:ht}),Pn=!0):et&&!ht&&(y.track({type:1,doc:et}),Pn=!0,(Z||re)&&(V=!0)),Pn&&(ht?(k=k.add(ht),D=Xt?D.add(_e):D.delete(_e)):(k=k.delete(_e),D=D.delete(_e)))}),Tc(this.query)||Ja(this.query))for(;k.size>this.query.limit;){var ge=Tc(this.query)?k.last():k.first();k=k.delete(ge.key),D=D.delete(ge.key),y.track({type:1,doc:ge})}return{fh:k,mh:y,Eh:V,Wt:D}},f.prototype.Th=function(l,h){return l.Je&&h.hasCommittedMutations&&!h.Je},f.prototype.yr=function(l,h,g){var y=this,I=this.fh;this.fh=l.fh,this.Wt=l.Wt;var D=l.mh.Ut();D.sort(function(re,ge){return Pe=ge.type,(et=function(ht){switch(ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}})(re.type)-et(Pe)||y._h(re.doc,ge.doc);var Pe,et}),this.Ih(g);var k=h?this.Ah():[],V=0===this.lh.size&&this.te?1:0,Z=V!==this.hh;return this.hh=V,0!==D.length||Z?{snapshot:new En(this.query,l.fh,I,D,l.Wt,0===V,Z,!1),Rh:k}:{Rh:k}},f.prototype.Qs=function(l){return this.te&&"Offline"===l?(this.te=!1,this.yr({fh:this.fh,mh:new Xn,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},f.prototype.gh=function(l){return!this.uh.has(l)&&!!this.fh.has(l)&&!this.fh.get(l).Je},f.prototype.Ih=function(l){var h=this;l&&(l.ee.forEach(function(g){return h.uh=h.uh.add(g)}),l.ne.forEach(function(g){}),l.se.forEach(function(g){return h.uh=h.uh.delete(g)}),this.te=l.te)},f.prototype.Ah=function(){var l=this;if(!this.te)return[];var h=this.lh;this.lh=Qe(),this.fh.forEach(function(y){l.gh(y.key)&&(l.lh=l.lh.add(y.key))});var g=[];return h.forEach(function(y){l.lh.has(y)||g.push(new ld(y))}),this.lh.forEach(function(y){h.has(y)||g.push(new Xf(y))}),g},f.prototype.Ph=function(l){this.uh=l.Fc,this.lh=Qe();var h=this.wh(l.documents);return this.yr(h,!0)},f.prototype.yh=function(){return En.Gt(this.query,this.fh,this.Wt,0===this.hh)},f}(),ih=function(f,l,h){this.query=f,this.targetId=l,this.view=h},rh=function(f){this.key=f,this.Vh=!1},hl=function(){function f(l,h,g,y,I,D){this.ju=l,this.ph=h,this.bh=g,this.Sh=y,this.currentUser=I,this.Dh=D,this.Ch={},this.Nh=new Yt(function(k){return ca(k)},tc),this.Fh=new Map,this.xh=[],this.$h=new Hn(Le.i),this.kh=new Map,this.Mh=new ka,this.Oh={},this.Lh=new Map,this.Bh=Bl.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(f.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),f}();function ns(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,y,I,D,k;return U.__generator(this,function(V){switch(V.label){case 0:return h=Ki(f),(I=h.Nh.get(l))?(h.Sh.Oi(I.targetId),y=I.view.yh(),[3,4]):[3,1];case 1:return[4,Is(h.ju,Uo(l))];case 2:return D=V.sent(),k=h.Sh.Oi(D.targetId),[4,fl(h,l,D.targetId,"current"===k)];case 3:y=V.sent(),h.Uh&&th(h.ph,D),V.label=4;case 4:return[2,y]}})})}function fl(f,l,h,g){return U.__awaiter(this,void 0,void 0,function(){var y,I,D,k,V,Z;return U.__generator(this,function(re){switch(re.label){case 0:return f.Qh=function(ge,_e,Pe){return function(et,ht,an,Xt){return U.__awaiter(this,void 0,void 0,function(){var Pn,Qn,gi;return U.__generator(this,function(bi){switch(bi.label){case 0:return(Pn=ht.view.wh(an)).Eh?[4,rr(et.ju,ht.query,!1).then(function(hr){return ht.view.wh(hr.documents,Pn)})]:[3,2];case 1:Pn=bi.sent(),bi.label=2;case 2:return Qn=Xt&&Xt.zt.get(ht.targetId),gi=ht.view.yr(Pn,et.Uh,Qn),[2,(O(et,ht.targetId,gi.Rh),gi.snapshot)]}})})}(f,ge,_e,Pe)},[4,rr(f.ju,l,!0)];case 1:return y=re.sent(),I=new Na(l,y.Fc),D=I.wh(y.documents),k=kn.Zt(h,g&&"Offline"!==f.onlineState),V=I.yr(D,f.Uh,k),O(f,h,V.Rh),Z=new ih(l,h,I),[2,(f.Nh.set(l,Z),f.Fh.has(h)?f.Fh.get(h).push(l):f.Fh.set(h,[l]),V.snapshot)]}})})}function sr(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,g,y;return U.__generator(this,function(I){switch(I.label){case 0:return h=Ze(f),g=h.Nh.get(l),(y=h.Fh.get(g.targetId)).length>1?[2,(h.Fh.set(g.targetId,y.filter(function(D){return!tc(D,l)})),void h.Nh.delete(l))]:h.Uh?(h.Sh.Bi(g.targetId),h.Sh.Fi(g.targetId)?[3,2]:[4,jn(h.ju,g.targetId,!1).then(function(){h.Sh.Ui(g.targetId),Uc(h.ph,g.targetId),Fa(h,g.targetId)}).catch(ci)]):[3,3];case 1:I.sent(),I.label=2;case 2:return[3,5];case 3:return Fa(h,g.targetId),[4,jn(h.ju,g.targetId,!0)];case 4:I.sent(),I.label=5;case 5:return[2]}})})}function pl(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,g;return U.__generator(this,function(y){switch(y.label){case 0:h=Ze(f),y.label=1;case 1:return y.trys.push([1,4,,6]),[4,fa(h.ju,l)];case 2:return g=y.sent(),l.zt.forEach(function(I,D){var k=h.kh.get(D);k&&(at(I.ee.size+I.ne.size+I.se.size<=1),I.ee.size>0?k.Vh=!0:I.ne.size>0?at(k.Vh):I.se.size>0&&(at(k.Vh),k.Vh=!1))}),[4,oe(h,g,l)];case 3:return y.sent(),[3,6];case 4:return[4,ci(y.sent())];case 5:return y.sent(),[3,6];case 6:return[2]}})})}function ud(f,l,h){var g=Ze(f);if(g.Uh&&0===h||!g.Uh&&1===h){var y=[];g.Nh.forEach(function(I,D){var k=D.view.Qs(l);k.snapshot&&y.push(k.snapshot)}),function(I,D){var k=Ze(I);k.onlineState=D;var V=!1;k.Bs.forEach(function(Z,re){for(var ge=0,_e=re.listeners;ge<_e.length;ge++)_e[ge].Qs(D)&&(V=!0)}),V&&js(k)}(g.bh,l),y.length&&g.Ch.yu(y),g.onlineState=l,g.Uh&&g.Sh.Ki(l)}}function dr(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g,y,I,D,k,V;return U.__generator(this,function(Z){switch(Z.label){case 0:return(g=Ze(f)).Sh.Qi(l,"rejected",h),y=g.kh.get(l),(I=y&&y.key)?(D=(D=new Hn(Le.i)).ot(I,new Rr(I,zt.min())),k=Qe().add(I),V=new ai(zt.min(),new Map,new Ci(Ut),D,k),[4,pl(g,V)]):[3,2];case 1:return Z.sent(),g.$h=g.$h.remove(I),g.kh.delete(l),H(g),[3,4];case 2:return[4,jn(g.ju,l,!1).then(function(){return Fa(g,l,h)}).catch(ci)];case 3:Z.sent(),Z.label=4;case 4:return[2]}})})}function qh(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,g,y;return U.__generator(this,function(I){switch(I.label){case 0:h=Ze(f),g=l.batch.batchId,I.label=1;case 1:return I.trys.push([1,4,,6]),[4,ha(h.ju,l)];case 2:return y=I.sent(),ml(h,g,null),qs(h,g),h.Sh.ki(g,"acknowledged"),[4,oe(h,y)];case 3:return I.sent(),[3,6];case 4:return[4,ci(I.sent())];case 5:return I.sent(),[3,6];case 6:return[2]}})})}function Jf(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g,y;return U.__generator(this,function(I){switch(I.label){case 0:g=Ze(f),I.label=1;case 1:return I.trys.push([1,4,,6]),[4,(D=g.ju,k=l,V=Ze(D),V.persistence.runTransaction("Reject batch","readwrite-primary",function(Z){var re;return V.Sr.Oo(Z,k).next(function(ge){return at(null!==ge),re=ge.keys(),V.Sr.Wo(Z,ge)}).next(function(){return V.Sr.zo(Z)}).next(function(){return V.Cc.kr(Z,re)})}))];case 2:return y=I.sent(),ml(g,l,h),qs(g,l),g.Sh.ki(l,"rejected",h),[4,oe(g,y)];case 3:return I.sent(),[3,6];case 4:return[4,ci(I.sent())];case 5:return I.sent(),[3,6];case 6:return[2]}var D,k,V})})}function qs(f,l){(f.Lh.get(l)||[]).forEach(function(h){h.resolve()}),f.Lh.delete(l)}function ml(f,l,h){var g=Ze(f),y=g.Oh[g.currentUser.ti()];if(y){var I=y.get(l);I&&(h?I.reject(h):I.resolve(),y=y.remove(l)),g.Oh[g.currentUser.ti()]=y}}function Fa(f,l,h){void 0===h&&(h=null),f.Sh.Bi(l);for(var g=0,y=f.Fh.get(l);g<y.length;g++){var I=y[g];f.Nh.delete(I),h&&f.Ch.Wh(I,h)}f.Fh.delete(l),f.Uh&&f.Mh.Uc(l).forEach(function(D){f.Mh.Ho(D)||Bc(f,D)})}function Bc(f,l){var h=f.$h.get(l);null!==h&&(Uc(f.ph,h),f.$h=f.$h.remove(l),f.kh.delete(h),H(f))}function O(f,l,h){for(var g=0,y=h;g<y.length;g++){var I=y[g];I instanceof Xf?(f.Mh.Da(I.key,l),F(f,I)):I instanceof ld?(me("SyncEngine","Document no longer in limbo: "+I.key),f.Mh.Na(I.key,l),f.Mh.Ho(I.key)||Bc(f,I.key)):ke()}}function F(f,l){var h=l.key;f.$h.get(h)||(me("SyncEngine","New document in limbo: "+h),f.xh.push(h),H(f))}function H(f){for(;f.xh.length>0&&f.$h.size<f.Dh;){var l=f.xh.shift(),h=f.Bh.next();f.kh.set(h,new rh(l)),f.$h=f.$h.ot(l,h),th(f.ph,new Ei(Uo(Sa(l.path)),h,2,Io.ai))}}function oe(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g,y,I,D;return U.__generator(this,function(k){switch(k.label){case 0:return g=Ze(f),y=[],I=[],D=[],g.Nh.m()?[3,3]:(g.Nh.forEach(function(V,Z){D.push(g.Qh(Z,l,h).then(function(re){if(re){g.Uh&&g.Sh.Qi(Z.targetId,re.fromCache?"not-current":"current"),y.push(re);var ge=xi.zr(Z.targetId,re);I.push(ge)}}))}),[4,Promise.all(D)]);case 1:return k.sent(),g.Ch.yu(y),[4,function(V,Z){return U.__awaiter(this,void 0,void 0,function(){var re,ge,_e,Pe,et,ht,an,Pn;return U.__generator(this,function(Qn){switch(Qn.label){case 0:re=Ze(V),Qn.label=1;case 1:return Qn.trys.push([1,3,,4]),[4,re.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(gi){return xt.forEach(Z,function(bi){return xt.forEach(bi.Kr,function(hr){return re.persistence.No.Da(gi,bi.targetId,hr)}).next(function(){return xt.forEach(bi.Gr,function(hr){return re.persistence.No.Na(gi,bi.targetId,hr)})})})})];case 2:return Qn.sent(),[3,4];case 3:if(!Bs(ge=Qn.sent()))throw ge;return me("LocalStore","Failed to update sequence numbers: "+ge),[3,4];case 4:for(_e=0,Pe=Z;_e<Pe.length;_e++)ht=(et=Pe[_e]).targetId,et.fromCache||(an=re.bc.get(ht),Pn=an.rt(an.nt),re.bc=re.bc.ot(ht,Pn));return[2]}})})}(g.ju,I)];case 2:k.sent(),k.label=3;case 3:return[2]}})})}function be(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,g;return U.__generator(this,function(y){switch(y.label){case 0:return(h=Ze(f)).currentUser.isEqual(l)?[3,3]:(me("SyncEngine","User change. New user:",l.ti()),[4,function(I,D){return U.__awaiter(this,void 0,void 0,function(){var k,V,Z,re;return U.__generator(this,function(ge){switch(ge.label){case 0:return k=Ze(I),V=k.Sr,Z=k.Cc,[4,k.persistence.runTransaction("Handle user change","readonly",function(_e){var Pe;return k.Sr.Uo(_e).next(function(et){return Pe=et,V=k.persistence.mc(D),Z=new _u(k.Dc,V,k.persistence.Ic()),V.Uo(_e)}).next(function(et){for(var ht=[],an=[],Xt=Qe(),Pn=0,Qn=Pe;Pn<Qn.length;Pn++){var gi=Qn[Pn];ht.push(gi.batchId);for(var bi=0,hr=gi.mutations;bi<hr.length;bi++)Xt=Xt.add(hr[bi].key)}for(var zc=0,ef=et;zc<ef.length;zc++){var rp=ef[zc];an.push(rp.batchId);for(var tf=0,dh=rp.mutations;tf<dh.length;tf++)Xt=Xt.add(dh[tf].key)}return Z.kr(_e,Xt).next(function(vd){return{jh:vd,Kh:ht,Gh:an}})})})];case 1:return re=ge.sent(),[2,(k.Sr=V,k.Cc=Z,k.Vc.Nc(k.Cc),re)]}})})}(h.ju,l)]);case 1:return g=y.sent(),h.currentUser=l,(I=h).Lh.forEach(function(k){k.forEach(function(V){V.reject(new G(z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),I.Lh.clear(),h.Sh.ji(l,g.Kh,g.Gh),[4,oe(h,g.jh)];case 2:y.sent(),y.label=3;case 3:return[2]}var I})})}function Ue(f,l){var h=Ze(f),g=h.kh.get(l);if(g&&g.Vh)return Qe().add(g.key);var y=Qe(),I=h.Fh.get(l);if(!I)return y;for(var D=0,k=I;D<k.length;D++){var Z=h.Nh.get(k[D]);y=y.kt(Z.view.dh)}return y}function rt(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,g,y;return U.__generator(this,function(I){switch(I.label){case 0:return[4,rr((h=Ze(f)).ju,l.query,!0)];case 1:return g=I.sent(),y=l.view.Ph(g),[2,(h.Uh&&O(h,l.targetId,y.Rh),y)]}})})}function Bt(f,l,h,g){return U.__awaiter(this,void 0,void 0,function(){var y,I;return U.__generator(this,function(D){switch(D.label){case 0:return[4,(k=(y=Ze(f)).ju,V=l,Z=Ze(k),re=Ze(Z.Sr),Z.persistence.runTransaction("Lookup mutation documents","readonly",function(ge){return re.Lo(ge,V).next(function(_e){return _e?Z.Cc.kr(ge,_e):xt.resolve(null)})}))];case 1:return null===(I=D.sent())?[3,6]:"pending"!==h?[3,3]:[4,Hs(y.ph)];case 2:return D.sent(),[3,4];case 3:"acknowledged"===h||"rejected"===h?(ml(y,l,g||null),qs(y,l),function(k,V){Ze(Ze(k).Sr).Ko(V)}(y.ju,l)):ke(),D.label=4;case 4:return[4,oe(y,I)];case 5:return D.sent(),[3,7];case 6:me("SyncEngine","Cannot apply mutation batch with id: "+l),D.label=7;case 7:return[2]}var k,V,Z,re})})}function Ft(f,l){return U.__awaiter(this,void 0,void 0,function(){var h,g,y,I,D,V,Z;return U.__generator(this,function(re){switch(re.label){case 0:return Ki(h=Ze(f)),Iu(h),!0!==l||!0===h.qh?[3,3]:(g=h.Sh.Ci(),[4,hn(h,g.A())]);case 1:return y=re.sent(),h.qh=!0,[4,Kl(h.ph,!0)];case 2:for(re.sent(),I=0,D=y;I<D.length;I++)th(h.ph,D[I]);return[3,7];case 3:return!1!==l||!1===h.qh?[3,7]:(V=[],Z=Promise.resolve(),h.Fh.forEach(function(ge,_e){h.Sh.qi(_e)?V.push(_e):Z=Z.then(function(){return Fa(h,_e),jn(h.ju,_e,!0)}),Uc(h.ph,_e)}),[4,Z]);case 4:return re.sent(),[4,hn(h,V)];case 5:return re.sent(),(_e=Ze(h)).kh.forEach(function(Pe,et){Uc(_e.ph,et)}),_e.Mh.Qc(),_e.kh=new Map,_e.$h=new Hn(Le.i),h.qh=!1,[4,Kl(h.ph,!1)];case 6:re.sent(),re.label=7;case 7:return[2]}var _e})})}function hn(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g,y,I,D,k,V,Z,re,ge,_e,et,ht,an;return U.__generator(this,function(Xt){switch(Xt.label){case 0:g=Ze(f),y=[],I=[],D=0,k=l,Xt.label=1;case 1:return D<k.length?(Z=void 0,(re=g.Fh.get(V=k[D]))&&0!==re.length?[4,Is(g.ju,Uo(re[0]))]:[3,7]):[3,13];case 2:Z=Xt.sent(),ge=0,_e=re,Xt.label=3;case 3:return ge<_e.length?(et=g.Nh.get(_e[ge]),[4,rt(g,et)]):[3,6];case 4:(ht=Xt.sent()).snapshot&&I.push(ht.snapshot),Xt.label=5;case 5:return ge++,[3,3];case 6:return[3,11];case 7:return[4,So(g.ju,V)];case 8:return an=Xt.sent(),[4,Is(g.ju,an)];case 9:return Z=Xt.sent(),[4,fl(g,Ln(an),V,!1)];case 10:Xt.sent(),Xt.label=11;case 11:y.push(Z),Xt.label=12;case 12:return D++,[3,1];case 13:return[2,(g.Ch.yu(I),y)]}})})}function Ln(f){return xc(f.path,f.collectionGroup,f.orderBy,f.filters,f.limit,"F",f.startAt,f.endAt)}function Sn(f){var l=Ze(f);return Ze(Ze(l.ju).persistence).pi()}function ds(f,l,h,g){return U.__awaiter(this,void 0,void 0,function(){var y,I,D;return U.__generator(this,function(k){switch(k.label){case 0:return(y=Ze(f)).qh?(me("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!y.Fh.has(l))return[3,8];switch(h){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Hl(y.ju)];case 3:return I=k.sent(),D=ai.Xt(l,"current"===h),[4,oe(y,I,D)];case 4:return k.sent(),[3,8];case 5:return[4,jn(y.ju,l,!0)];case 6:return k.sent(),Fa(y,l,g),[3,8];case 7:ke(),k.label=8;case 8:return[2]}})})}function Ao(f,l,h){return U.__awaiter(this,void 0,void 0,function(){var g,y,I,D,k,V,Z,re,ge;return U.__generator(this,function(Pe){switch(Pe.label){case 0:if(!(g=Ki(f)).qh)return[3,10];y=0,I=l,Pe.label=1;case 1:return y<I.length?g.Fh.has(D=I[y])?(me("SyncEngine","Adding an already active target "+D),[3,5]):[4,So(g.ju,D)]:[3,6];case 2:return k=Pe.sent(),[4,Is(g.ju,k)];case 3:return V=Pe.sent(),[4,fl(g,Ln(k),V.targetId,!1)];case 4:Pe.sent(),th(g.ph,V),Pe.label=5;case 5:return y++,[3,1];case 6:Z=function(et){return U.__generator(this,function(ht){switch(ht.label){case 0:return g.Fh.has(et)?[4,jn(g.ju,et,!1).then(function(){Uc(g.ph,et),Fa(g,et)}).catch(ci)]:[3,2];case 1:ht.sent(),ht.label=2;case 2:return[2]}})},re=0,ge=h,Pe.label=7;case 7:return re<ge.length?[5,Z(ge[re])]:[3,10];case 8:Pe.sent(),Pe.label=9;case 9:return re++,[3,7];case 10:return[2]}})})}function Ki(f){var l=Ze(f);return l.ph.Gu.sh=pl.bind(null,l),l.ph.Gu.qe=Ue.bind(null,l),l.ph.Gu.nh=dr.bind(null,l),l.Ch.yu=es.bind(null,l.bh),l.Ch.Wh=Pc.bind(null,l.bh),l}function Iu(f){var l=Ze(f);return l.ph.Gu.ih=qh.bind(null,l),l.ph.Gu.rh=Jf.bind(null,l),l}var La=function(){function f(){}return f.prototype.Nc=function(l){this.zh=l},f.prototype.Lr=function(l,h,g,y){var D,I=this;return 0===(D=h).filters.length&&null===D.limit&&null==D.startAt&&null==D.endAt&&(0===D.on.length||1===D.on.length&&D.on[0].field.p())||g.isEqual(zt.min())?this.Hh(l,h):this.zh.kr(l,y).next(function(D){var k=I.Yh(h,D);return(Tc(h)||Ja(h))&&I.Eh(h.an,k,y,g)?I.Hh(l,h):(Ne()<=pe.LogLevel.DEBUG&&me("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",g.toString(),ys(h)),I.zh.Lr(l,h,g).next(function(V){return k.forEach(function(Z){V=V.ot(Z.key,Z)}),V}))})},f.prototype.Yh=function(l,h){var g=new Ci(pu(l));return h.forEach(function(y,I){I instanceof oi&&Fl(l,I)&&(g=g.add(I))}),g},f.prototype.Eh=function(l,h,g,y){if(g.size!==h.size)return!0;var I="F"===l?h.last():h.first();return!!I&&(I.hasPendingWrites||I.version.L(y)>0)},f.prototype.Hh=function(l,h){return Ne()<=pe.LogLevel.DEBUG&&me("IndexFreeQueryEngine","Using full collection scan to execute query:",ys(h)),this.zh.Lr(l,h,zt.min())},f}(),Ua=function(){function f(l,h){this.Dr=l,this.No=h,this.Sr=[],this.Jh=1,this.Xh=new Ci(jr.kc)}return f.prototype.$o=function(l){return xt.resolve(0===this.Sr.length)},f.prototype.ko=function(l,h,g,y){var I=this.Jh;this.Jh++;var D=new Xu(I,h,g,y);this.Sr.push(D);for(var k=0,V=y;k<V.length;k++){var Z=V[k];this.Xh=this.Xh.add(new jr(Z.key,I)),this.Dr.Mo(l,Z.key.path.h())}return xt.resolve(D)},f.prototype.Oo=function(l,h){return xt.resolve(this.Zh(h))},f.prototype.Bo=function(l,h){var y=this.tl(h+1),I=y<0?0:y;return xt.resolve(this.Sr.length>I?this.Sr[I]:null)},f.prototype.qo=function(){return xt.resolve(0===this.Sr.length?-1:this.Jh-1)},f.prototype.Uo=function(l){return xt.resolve(this.Sr.slice())},f.prototype.Nr=function(l,h){var g=this,y=new jr(h,0),I=new jr(h,Number.POSITIVE_INFINITY),D=[];return this.Xh.Ft([y,I],function(k){var V=g.Zh(k.jc);D.push(V)}),xt.resolve(D)},f.prototype.Or=function(l,h){var g=this,y=new Ci(Ut);return h.forEach(function(I){var D=new jr(I,0),k=new jr(I,Number.POSITIVE_INFINITY);g.Xh.Ft([D,k],function(V){y=y.add(V.jc)})}),xt.resolve(this.el(y))},f.prototype.Wr=function(l,h){var g=h.path,y=g.length+1,I=g;Le.F(I)||(I=I.child(""));var D=new jr(new Le(I),0),k=new Ci(Ut);return this.Xh.xt(function(V){var Z=V.key.path;return!!g.T(Z)&&(Z.length===y&&(k=k.add(V.jc)),!0)},D),xt.resolve(this.el(k))},f.prototype.el=function(l){var h=this,g=[];return l.forEach(function(y){var I=h.Zh(y);null!==I&&g.push(I)}),g},f.prototype.Wo=function(l,h){var g=this;at(0===this.nl(h.batchId,"removed")),this.Sr.shift();var y=this.Xh;return xt.forEach(h.mutations,function(I){var D=new jr(I.key,h.batchId);return y=y.delete(D),g.No.Go(l,I.key)}).next(function(){g.Xh=y})},f.prototype.Ko=function(l){},f.prototype.Ho=function(l,h){var g=new jr(h,0),y=this.Xh.$t(g);return xt.resolve(h.isEqual(y&&y.key))},f.prototype.zo=function(l){return xt.resolve()},f.prototype.nl=function(l,h){return this.tl(l)},f.prototype.tl=function(l){return 0===this.Sr.length?0:l-this.Sr[0].batchId},f.prototype.Zh=function(l){var h=this.tl(l);return h<0||h>=this.Sr.length?null:this.Sr[h]},f}(),Fr=function(){function f(l,h){this.Dr=l,this.sl=h,this.docs=new Hn(Le.i),this.size=0}return f.prototype.Er=function(l,h,g){var y=h.key,I=this.docs.get(y),D=I?I.size:0,k=this.sl(h);return this.docs=this.docs.ot(y,{ta:h,size:k,readTime:g}),this.size+=k-D,this.Dr.Mo(l,y.path.h())},f.prototype.Ar=function(l){var h=this.docs.get(l);h&&(this.docs=this.docs.remove(l),this.size-=h.size)},f.prototype.Rr=function(l,h){var g=this.docs.get(h);return xt.resolve(g?g.ta:null)},f.prototype.getEntries=function(l,h){var g=this,y=le();return h.forEach(function(I){var D=g.docs.get(I);y=y.ot(I,D?D.ta:null)}),xt.resolve(y)},f.prototype.Lr=function(l,h,g){for(var y=te(),I=new Le(h.path.child("")),D=this.docs.ft(I);D.At();){var k=D.It(),Z=k.value,re=Z.ta,ge=Z.readTime;if(!h.path.T(k.key.path))break;ge.L(g)<=0||re instanceof oi&&Fl(h,re)&&(y=y.ot(re.key,re))}return xt.resolve(y)},f.prototype.il=function(l,h){return xt.forEach(this.docs,function(g){return h(g)})},f.prototype.ra=function(l){return new gl(this)},f.prototype.aa=function(l){return xt.resolve(this.size)},f}(),gl=function(f){function l(h){var g=this;return(g=f.call(this)||this).ca=h,g}return U.__extends(l,f),l.prototype.yr=function(h){var g=this,y=[];return this.wr.forEach(function(I,D){D?y.push(g.ca.Er(h,D,g.readTime)):g.ca.Ar(I)}),xt.$n(y)},l.prototype.gr=function(h,g){return this.ca.Rr(h,g)},l.prototype.Pr=function(h,g){return this.ca.getEntries(h,g)},l}(Gf),t_=function(){function f(l){this.persistence=l,this.rl=new Yt(function(h){return Ct(h)},mn),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.ol=0,this.al=new ka,this.targetCount=0,this.cl=Bl.fa()}return f.prototype.Ce=function(l,h){return this.rl.forEach(function(g,y){return h(y)}),xt.resolve()},f.prototype.Ea=function(l){return xt.resolve(this.lastRemoteSnapshotVersion)},f.prototype.Ia=function(l){return xt.resolve(this.ol)},f.prototype.wa=function(l){return this.highestTargetId=this.cl.next(),xt.resolve(this.highestTargetId)},f.prototype.Aa=function(l,h,g){return g&&(this.lastRemoteSnapshotVersion=g),h>this.ol&&(this.ol=h),xt.resolve()},f.prototype.ga=function(l){this.rl.set(l.target,l);var h=l.targetId;h>this.highestTargetId&&(this.cl=new Bl(h),this.highestTargetId=h),l.sequenceNumber>this.ol&&(this.ol=l.sequenceNumber)},f.prototype.Ra=function(l,h){return this.ga(h),this.targetCount+=1,xt.resolve()},f.prototype.ya=function(l,h){return this.ga(h),xt.resolve()},f.prototype.Va=function(l,h){return this.rl.delete(h.target),this.al.Uc(h.targetId),this.targetCount-=1,xt.resolve()},f.prototype.po=function(l,h,g){var y=this,I=0,D=[];return this.rl.forEach(function(k,V){V.sequenceNumber<=h&&null===g.get(V.targetId)&&(y.rl.delete(k),D.push(y.pa(l,V.targetId)),I++)}),xt.$n(D).next(function(){return I})},f.prototype.ba=function(l){return xt.resolve(this.targetCount)},f.prototype.va=function(l,h){var g=this.rl.get(h)||null;return xt.resolve(g)},f.prototype.Sa=function(l,h,g){return this.al.Lc(h,g),xt.resolve()},f.prototype.Ca=function(l,h,g){this.al.qc(h,g);var y=this.persistence.No,I=[];return y&&h.forEach(function(D){I.push(y.Go(l,D))}),xt.$n(I)},f.prototype.pa=function(l,h){return this.al.Uc(h),xt.resolve()},f.prototype.Fa=function(l,h){var g=this.al.Wc(h);return xt.resolve(g)},f.prototype.Ho=function(l,h){return xt.resolve(this.al.Ho(h))},f}(),dd=function(){function f(l){var h=this;this.ul={},this.Ma=new Io(0),this.Oa=!1,this.Oa=!0,this.No=l(this),this.Ka=new t_(this),this.Dr=new Cs,this.vr=new Fr(this.Dr,function(I){return h.No.hl(I)})}return f.prototype.start=function(){return Promise.resolve()},f.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(f.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),f.prototype.Za=function(){},f.prototype.tc=function(){},f.prototype.Ic=function(){return this.Dr},f.prototype.mc=function(l){var h=this.ul[l.ti()];return h||(h=new Ua(this.Dr,this.No),this.ul[l.ti()]=h),h},f.prototype.Tc=function(){return this.Ka},f.prototype.Ec=function(){return this.vr},f.prototype.runTransaction=function(l,h,g){var y=this;me("MemoryPersistence","Starting transaction:",l);var I=new hd(this.Ma.next());return this.No.ll(),g(I).next(function(D){return y.No._l(I).next(function(){return D})}).Fn().then(function(D){return I.br(),D})},f.prototype.fl=function(l,h){return xt.kn(Object.values(this.ul).map(function(g){return function(){return g.Ho(l,h)}}))},f}(),hd=function(f){function l(h){var g=this;return(g=f.call(this)||this).xa=h,g}return U.__extends(l,f),l}(qd),Gh=function(){function f(l){this.persistence=l,this.dl=new ka,this.wl=null}return f.ml=function(l){return new f(l)},Object.defineProperty(f.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw ke()},enumerable:!1,configurable:!0}),f.prototype.Da=function(l,h,g){return this.dl.Da(g,h),this.Tl.delete(g.toString()),xt.resolve()},f.prototype.Na=function(l,h,g){return this.dl.Na(g,h),this.Tl.add(g.toString()),xt.resolve()},f.prototype.Go=function(l,h){return this.Tl.add(h.toString()),xt.resolve()},f.prototype.removeTarget=function(l,h){var g=this;this.dl.Uc(h.targetId).forEach(function(I){return g.Tl.add(I.toString())});var y=this.persistence.Tc();return y.Fa(l,h.targetId).next(function(I){I.forEach(function(D){return g.Tl.add(D.toString())})}).next(function(){return y.Va(l,h)})},f.prototype.ll=function(){this.wl=new Set},f.prototype._l=function(l){var h=this,g=this.persistence.Ec().ra();return xt.forEach(this.Tl,function(y){var I=Le.D(y);return h.El(l,I).next(function(D){D||g.Ar(I)})}).next(function(){return h.wl=null,g.apply(l)})},f.prototype.yc=function(l,h){var g=this;return this.El(l,h).next(function(y){y?g.Tl.delete(h.toString()):g.Tl.add(h.toString())})},f.prototype.hl=function(l){return 0},f.prototype.El=function(l,h){var g=this;return xt.kn([function(){return xt.resolve(g.dl.Ho(h))},function(){return g.persistence.Tc().Ho(l,h)},function(){return g.persistence.fl(l,h)}])},f}(),n_=function(){function f(l){this.Il=l.Il,this.Al=l.Al}return f.prototype.gu=function(l){this.Rl=l},f.prototype.Tu=function(l){this.gl=l},f.prototype.onMessage=function(l){this.Pl=l},f.prototype.close=function(){this.Al()},f.prototype.send=function(l){this.Il(l)},f.prototype.yl=function(){this.Rl()},f.prototype.Vl=function(l){this.gl(l)},f.prototype.pl=function(l){this.Pl(l)},f}(),hm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sy=function(f){function l(h){var g=this;return(g=f.call(this,h)||this).forceLongPolling=h.forceLongPolling,g.W=h.W,g}return U.__extends(l,f),l.prototype.Nl=function(h,g,y,I){return new Promise(function(D,k){var V=new Re.XhrIo;V.listenOnce(Re.EventType.COMPLETE,function(){try{switch(V.getLastErrorCode()){case Re.ErrorCode.NO_ERROR:var re=V.getResponseJson();me("Connection","XHR received:",JSON.stringify(re)),D(re);break;case Re.ErrorCode.TIMEOUT:me("Connection",'RPC "'+h+'" timed out'),k(new G(z.DEADLINE_EXCEEDED,"Request time out"));break;case Re.ErrorCode.HTTP_ERROR:var ge=V.getStatus();if(me("Connection",'RPC "'+h+'" failed with status:',ge,"response text:",V.getResponseText()),ge>0){var _e=V.getResponseJson().error;if(_e&&_e.status&&_e.message){var Pe=(ht=_e.status.toLowerCase().replace("_","-"),Object.values(z).indexOf(ht)>=0?ht:z.UNKNOWN);k(new G(Pe,_e.message))}else k(new G(z.UNKNOWN,"Server responded with status "+V.getStatus()))}else k(new G(z.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{me("Connection",'RPC "'+h+'" completed.')}var ht});var Z=JSON.stringify(I);V.send(g,"POST",Z,y,15)})},l.prototype.Pu=function(h,g){var y=[this.vl,"/","google.firestore.v1.Firestore","/",h,"/channel"],I=Re.createWebChannelTransport(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(D.initMessageHeaders,g),ce.isMobileCordova()||ce.isReactNative()||ce.isElectron()||ce.isIE()||ce.isUWP()||ce.isBrowserExtension()||(D.httpHeadersOverwriteParam="$httpHeaders");var k=y.join("");me("Connection","Creating WebChannel: "+k,D);var V=I.createWebChannel(k,D),Z=!1,re=!1,ge=new n_({Il:function(Pe){re?me("Connection","Not sending because WebChannel is closed:",Pe):(Z||(me("Connection","Opening WebChannel transport."),V.open(),Z=!0),me("Connection","WebChannel sending:",Pe),V.send(Pe))},Al:function(){return V.close()}}),_e=function(Pe,et){V.listen(Pe,function(ht){try{et(ht)}catch(an){setTimeout(function(){throw an},0)}})};return _e(Re.WebChannel.EventType.OPEN,function(){re||me("Connection","WebChannel transport opened.")}),_e(Re.WebChannel.EventType.CLOSE,function(){re||(re=!0,me("Connection","WebChannel transport closed"),ge.Vl())}),_e(Re.WebChannel.EventType.ERROR,function(Pe){re||(re=!0,st("Connection","WebChannel transport errored:",Pe),ge.Vl(new G(z.UNAVAILABLE,"The operation could not be completed")))}),_e(Re.WebChannel.EventType.MESSAGE,function(Pe){var et;if(!re){var ht=Pe.data[0];at(!!ht);var Xt=ht.error||(null===(et=ht[0])||void 0===et?void 0:et.error);if(Xt){me("Connection","WebChannel received error:",Xt);var Pn=Xt.status,Qn=function(bi){var hr=Jt[bi];if(void 0!==hr)return ki(hr)}(Pn),gi=Xt.message;void 0===Qn&&(Qn=z.INTERNAL,gi="Unknown error status: "+Pn+" with message "+Xt.message),re=!0,ge.Vl(new G(Qn,gi)),V.close()}else me("Connection","WebChannel received:",ht),ge.pl(ht)}}),setTimeout(function(){ge.yl()},0),ge},l}(function(){function f(l){this.bl=l,this.U=l.U,this.vl=(l.ssl?"https":"http")+"://"+l.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return f.prototype.$u=function(l,h,g,y){var I=this.Dl(l,h);me("RestConnection","Sending: ",I,g);var D={};return this.Cl(D,y),this.Nl(l,I,D,g).then(function(k){return me("RestConnection","Received: ",k),k},function(k){throw st("RestConnection",l+" failed with error: ",k,"url: ",I,"request:",g),k})},f.prototype.ku=function(l,h,g,y){return this.$u(l,h,g,y)},f.prototype.Cl=function(l,h){if(l["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",l["Content-Type"]="text/plain",h)for(var g in h.Kc)h.Kc.hasOwnProperty(g)&&(l[g]=h.Kc[g])},f.prototype.Dl=function(l,h){return this.vl+"/v1/"+h+":"+hm[l]},f}()),Gs=function(){function f(){var l=this;this.Fl=function(){return l.xl()},this.$l=function(){return l.kl()},this.Ml=[],this.Ol()}return f.prototype.Zu=function(l){this.Ml.push(l)},f.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},f.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},f.prototype.xl=function(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var l=0,h=this.Ml;l<h.length;l++)(0,h[l])(0)},f.prototype.kl=function(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var l=0,h=this.Ml;l<h.length;l++)(0,h[l])(1)},f.Ln=function(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},f}(),ep=function(){function f(){}return f.prototype.Zu=function(l){},f.prototype.Di=function(){},f}();function Yl(f){return new ea(f,!0)}var i_="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",fd=function(){function f(){}return f.prototype.initialize=function(l){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(h){switch(h.label){case 0:return this.Sh=this.Ll(l),this.persistence=this.Bl(l),[4,this.persistence.start()];case 1:return h.sent(),this.ql=this.Ul(l),this.ju=this.Ql(l),[2]}})})},f.prototype.Ul=function(l){return null},f.prototype.Ql=function(l){return h=this.persistence,g=new La,new ts(h,g,l.Wl);var h,g},f.prototype.Bl=function(l){if(l.persistenceSettings.jl)throw new G(z.FAILED_PRECONDITION,i_);return new dd(Gh.ml)},f.prototype.Ll=function(l){return new ol},f.prototype.terminate=function(){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(l){switch(l.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return l.sent(),[4,this.persistence.Di()];case 2:return l.sent(),[2]}})})},f.prototype.clearPersistence=function(l,h){throw new G(z.FAILED_PRECONDITION,i_)},f}(),r_=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.prototype.initialize=function(h){return U.__awaiter(this,void 0,void 0,function(){var g,y=this;return U.__generator(this,function(I){switch(I.label){case 0:return[4,f.prototype.initialize.call(this,h)];case 1:return I.sent(),g=this.Kl.fi,this.Sh instanceof Rc?(this.Sh.fi={er:Bt.bind(null,g),nr:ds.bind(null,g),sr:Ao.bind(null,g),pi:Sn.bind(null,g)},[4,this.Sh.start()]):[3,3];case 2:I.sent(),I.label=3;case 3:return[4,this.persistence.Xa(function(D){return U.__awaiter(y,void 0,void 0,function(){return U.__generator(this,function(k){switch(k.label){case 0:return[4,Ft(this.Kl.fi,D)];case 1:return k.sent(),this.ql&&(D&&!this.ql.Ei?this.ql.start(this.ju):D||this.ql.stop()),[2]}})})})];case 4:return I.sent(),[2]}})})},l.prototype.Ll=function(h){if(h.persistenceSettings.jl&&h.persistenceSettings.synchronizeTabs){var g=j();if(!Rc.Ln(g))throw new G(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var y=zl(h.bl.U,h.bl.persistenceKey);return new Rc(g,h.cs,y,h.clientId,h.Wl)}return new ol},l}(function(f){function l(h){var g=this;return(g=f.call(this)||this).Kl=h,g}return U.__extends(l,f),l.prototype.initialize=function(h){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(g){switch(g.label){case 0:return[4,f.prototype.initialize.call(this,h)];case 1:return g.sent(),[4,cc(this.ju)];case 2:return g.sent(),[4,this.Kl.initialize(this,h)];case 3:return g.sent(),[4,Iu(this.Kl.fi)];case 4:return g.sent(),[4,Hs(this.Kl.ph)];case 5:return g.sent(),[2]}})})},l.prototype.Ul=function(h){return new Gd(this.persistence.No.wo,h.cs)},l.prototype.Bl=function(h){var g=zl(h.bl.U,h.bl.persistenceKey),y=Yl(h.bl.U);return new ls(h.persistenceSettings.synchronizeTabs,g,h.clientId,Qr.ao(h.persistenceSettings.cacheSizeBytes),h.cs,j(),ee(),y,this.Sh,h.persistenceSettings.ka)},l.prototype.Ll=function(h){return new ol},l.prototype.clearPersistence=function(h,g){return function(y){return U.__awaiter(this,void 0,void 0,function(){return U.__generator(this,function(D){switch(D.label){case 0:return Jo.Ln()?[4,Jo.delete(y+"main")]:[2,Promise.resolve()];case 1:return D.sent(),[2]}})})}(zl(h,g))},l}(fd)),Wh=function(){function f(){}return f.prototype.initialize=function(l,h){return U.__awaiter(this,void 0,void 0,function(){var g=this;return U.__generator(this,function(y){switch(y.label){case 0:return this.ju?[3,2]:(this.ju=l.ju,this.Sh=l.Sh,this.Ku=this.Gl(h),this.ph=this.zl(h),this.bh=this.Hl(h),this.fi=this.Yl(h),this.Sh.di=function(I){return ud(g.fi,I,1)},this.ph.Gu.Jl=be.bind(null,this.fi),[4,Kl(this.ph,this.fi.Uh)]);case 1:y.sent(),y.label=2;case 2:return[2]}})})},f.prototype.Hl=function(l){return new ei},f.prototype.Gl=function(l){var g=Yl(l.bl.U),y=new Sy(l.bl);return new id(l.credentials,y,g)},f.prototype.zl=function(l){var h,g,y,I,D,k=this;return h=this.ju,g=this.Ku,y=l.cs,I=function(V){return ud(k.fi,V,0)},D=Gs.Ln()?new Gs:new ep,new Qf(h,g,y,I,D)},f.prototype.Yl=function(l){return V=!l.persistenceSettings.jl||!l.persistenceSettings.synchronizeTabs,Z=new hl(this.ju,this.ph,this.bh,this.Sh,l.Wl,l.Dh),V&&(Z.qh=!0),Z;var V,Z},f.prototype.terminate=function(){return jh(this.ph)},f}(),A=function(){function f(l){this.observer=l,this.muted=!1}return f.prototype.next=function(l){this.observer.next&&this.Xl(this.observer.next,l)},f.prototype.error=function(l){this.observer.error?this.Xl(this.observer.error,l):console.error("Uncaught Error in snapshot listener:",l)},f.prototype.Zl=function(){this.muted=!0},f.prototype.Xl=function(l,h){var g=this;this.muted||setTimeout(function(){g.muted||l(h)},0)},f}(),w=function(f){!function(h,g,y,I){if(!(g instanceof Array)||g.length<1)throw new G(z.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+fn(1,"element")+".")}(0,f);for(var l=0;l<f.length;++l)if(un("FieldPath","string",l,f[l]),0===f[l].length)throw new G(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new Ge(f)},x=function(f){function l(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return f.call(this,h)||this}return U.__extends(l,f),l.documentId=function(){return new l(Ge.v().R())},l.prototype.isEqual=function(h){if(!(h instanceof l))throw Tn("isEqual","FieldPath",1,h);return this.t_.isEqual(h.t_)},l}(w),P=new RegExp("[~\\*/\\[\\]]"),$=function(f){this.e_=f},X=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.prototype.n_=function(h){if(2!==h.s_)throw h.i_(1===h.s_?this.e_+"() can only appear at the top level of your update data":this.e_+"() cannot be used with set() unless you pass {merge:true}");return h.We.push(h.path),null},l.prototype.isEqual=function(h){return h instanceof l},l}($);function Se(f,l,h){return new xu({s_:3,r_:l.settings.r_,methodName:f.e_,o_:h},l.U,l.serializer,l.ignoreUndefinedProperties)}var Je=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.prototype.n_=function(h){return new oa(h.path,new on)},l.prototype.isEqual=function(h){return h instanceof l},l}($),Pt=function(f){function l(h,g){var y=this;return(y=f.call(this,h)||this).a_=g,y}return U.__extends(l,f),l.prototype.n_=function(h){var g=Se(this,h,!0),y=this.a_.map(function(D){return Ql(D,g)}),I=new qr(y);return new oa(h.path,I)},l.prototype.isEqual=function(h){return this===h},l}($),Nt=function(f){function l(h,g){var y=this;return(y=f.call(this,h)||this).a_=g,y}return U.__extends(l,f),l.prototype.n_=function(h){var g=Se(this,h,!0),y=this.a_.map(function(D){return Ql(D,g)}),I=new wr(y);return new oa(h.path,I)},l.prototype.isEqual=function(h){return this===h},l}($),pn=function(f){function l(h,g){var y=this;return(y=f.call(this,h)||this).c_=g,y}return U.__extends(l,f),l.prototype.n_=function(h){var g=new _s(h.serializer,Ns(h.serializer,this.c_));return new oa(h.path,g)},l.prototype.isEqual=function(h){return this===h},l}($),Gn=function(){function f(l,h){if(ot("GeoPoint",arguments,2),un("GeoPoint","number",1,l),un("GeoPoint","number",2,h),!isFinite(l)||l<-90||l>90)throw new G(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+l);if(!isFinite(h)||h<-180||h>180)throw new G(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+h);this.u_=l,this.h_=h}return Object.defineProperty(f.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),f.prototype.isEqual=function(l){return this.u_===l.u_&&this.h_===l.h_},f.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},f.prototype.Y=function(l){return Ut(this.u_,l.u_)||Ut(this.h_,l.h_)},f}(),eo=function(f){this.l_=f},pa=/^__.*__$/,to=function(f,l,h){this.__=f,this.f_=l,this.d_=h},tp=function(){function f(l,h,g){this.data=l,this.We=h,this.fieldTransforms=g}return f.prototype.w_=function(l,h){var g=[];return g.push(null!==this.We?new Wr(l,this.data,this.We,h):new tr(l,this.data,h)),this.fieldTransforms.length>0&&g.push(new Bi(l,this.fieldTransforms)),g},f}(),Zh=function(){function f(l,h,g){this.data=l,this.We=h,this.fieldTransforms=g}return f.prototype.w_=function(l,h){var g=[new Wr(l,this.data,this.We,h)];return this.fieldTransforms.length>0&&g.push(new Bi(l,this.fieldTransforms)),g},f}();function jc(f){switch(f){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}var xu=function(){function f(l,h,g,y,I,D){this.settings=l,this.U=h,this.serializer=g,this.ignoreUndefinedProperties=y,void 0===I&&this.m_(),this.fieldTransforms=I||[],this.We=D||[]}return Object.defineProperty(f.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),f.prototype.T_=function(l){return new f(Object.assign(Object.assign({},this.settings),l),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},f.prototype.E_=function(l){var h,g=null===(h=this.path)||void 0===h?void 0:h.child(l),y=this.T_({path:g,o_:!1});return y.I_(l),y},f.prototype.A_=function(l){var h,g=null===(h=this.path)||void 0===h?void 0:h.child(l),y=this.T_({path:g,o_:!1});return y.m_(),y},f.prototype.R_=function(l){return this.T_({path:void 0,o_:!0})},f.prototype.i_=function(l){return np(l,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},f.prototype.contains=function(l){return void 0!==this.We.find(function(h){return l.T(h)})||void 0!==this.fieldTransforms.find(function(h){return l.T(h.field)})},f.prototype.m_=function(){if(this.path)for(var l=0;l<this.path.length;l++)this.I_(this.path.get(l))},f.prototype.I_=function(l){if(0===l.length)throw this.i_("Document fields must not be empty");if(jc(this.s_)&&pa.test(l))throw this.i_('Document fields cannot begin and end with "__"')},f}(),_l=function(){function f(l,h,g){this.U=l,this.ignoreUndefinedProperties=h,this.serializer=g||Yl(l)}return f.prototype.P_=function(l,h,g,y){return void 0===y&&(y=!1),new xu({s_:l,methodName:h,r_:g,path:Ge.P(),o_:!1,g_:y},this.U,this.serializer,this.ignoreUndefinedProperties)},f}();function Kh(f,l,h,g,y,I){void 0===I&&(I={});var D=f.P_(I.merge||I.mergeFields?2:0,l,h,y);ah("Data must be an object, but it was:",D,g);var k,V,Z=sh(g,D);if(I.merge)k=new Ir(D.We),V=D.fieldTransforms;else if(I.mergeFields){for(var re=[],ge=0,_e=I.mergeFields;ge<_e.length;ge++){var Pe=_e[ge],et=void 0;if(Pe instanceof w)et=Pe.t_;else{if("string"!=typeof Pe)throw ke();et=s_(l,Pe,h)}if(!D.contains(et))throw new G(z.INVALID_ARGUMENT,"Field '"+et+"' is specified in your field mask but missing from your input data.");gw(re,et)||re.push(et)}k=new Ir(re),V=D.fieldTransforms.filter(function(ht){return k.Ye(ht.field)})}else k=null,V=D.fieldTransforms;return new tp(new Pr(Z),k,V)}function oh(f,l,h,g){var y=f.P_(1,l,h);ah("Data must be an object, but it was:",y,g);var I=[],D=new Kr;nt(g,function(V,Z){var re=s_(l,V,h),ge=y.A_(re);if(Z instanceof X||Z instanceof eo&&Z.l_ instanceof X)I.push(re);else{var _e=Ql(Z,ge);null!=_e&&(I.push(re),D.set(re,_e))}});var k=new Ir(I);return new Zh(D.Xe(),k,y.fieldTransforms)}function Yh(f,l,h,g,y,I){var D=f.P_(1,l,h),k=[pd(l,g,h)],V=[y];if(I.length%2!=0)throw new G(z.INVALID_ARGUMENT,"Function "+l+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var Z=0;Z<I.length;Z+=2)k.push(pd(l,I[Z])),V.push(I[Z+1]);for(var re=[],ge=new Kr,_e=k.length-1;_e>=0;--_e)if(!gw(re,k[_e])){var Pe=k[_e],et=V[_e],ht=D.A_(Pe);if(et instanceof X||et instanceof eo&&et.l_ instanceof X)re.push(Pe);else{var an=Ql(et,ht);null!=an&&(re.push(Pe),ge.set(Pe,an))}}var Xt=new Ir(re);return new Zh(ge.Xe(),Xt,D.fieldTransforms)}function fm(f,l,h,g){return void 0===g&&(g=!1),Ql(h,f.P_(g?4:3,l))}function Ql(f,l){if(f instanceof eo&&(f=f.l_),o_(f))return ah("Unsupported field value:",l,f),sh(f,l);if(f instanceof $)return function(h,g){if(!jc(g.s_))throw g.i_(h.e_+"() can only be used with update() and set()");if(!g.path)throw g.i_(h.e_+"() is not currently supported inside arrays");var y=h.n_(g);y&&g.fieldTransforms.push(y)}(f,l),null;if(l.path&&l.We.push(l.path),f instanceof Array){if(l.settings.o_&&4!==l.s_)throw l.i_("Nested arrays are not supported");return function(h,g){for(var y=[],I=0,D=0,k=h;D<k.length;D++){var V=Ql(k[D],g.R_(I));null==V&&(V={nullValue:"NULL_VALUE"}),y.push(V),I++}return{arrayValue:{values:y}}}(f,l)}return function(h,g){if(null===h)return{nullValue:"NULL_VALUE"};if("number"==typeof h)return Ns(g.serializer,h);if("boolean"==typeof h)return{booleanValue:h};if("string"==typeof h)return{stringValue:h};if(h instanceof Date){var y=Qt.fromDate(h);return{timestampValue:ta(g.serializer,y)}}if(h instanceof Qt){var I=new Qt(h.seconds,1e3*Math.floor(h.nanoseconds/1e3));return{timestampValue:ta(g.serializer,I)}}if(h instanceof Gn)return{geoPointValue:{latitude:h.latitude,longitude:h.longitude}};if(h instanceof wi)return{bytesValue:el(g.serializer,h.q)};if(h instanceof to){var D=g.U,k=h.__;if(!k.isEqual(D))throw g.i_("Document reference is for database "+k.projectId+"/"+k.database+" but should be for database "+D.projectId+"/"+D.database);return{referenceValue:vr(h.__||g.U,h.f_.path)}}if(void 0===h&&g.ignoreUndefinedProperties)return null;throw g.i_("Unsupported field value: "+gt(h))}(f,l)}function sh(f,l){var h={};return $e(f)?l.path&&l.path.length>0&&l.We.push(l.path):nt(f,function(g,y){var I=Ql(y,l.E_(g));null!=I&&(h[g]=I)}),{mapValue:{fields:h}}}function o_(f){return!("object"!=typeof f||null===f||f instanceof Array||f instanceof Date||f instanceof Qt||f instanceof Gn||f instanceof wi||f instanceof to||f instanceof $)}function ah(f,l,h){if(!o_(h)||!ct(h)){var g=gt(h);throw l.i_("an object"===g?f+" a custom object":f+" "+g)}}function pd(f,l,h){if(l instanceof w)return l.t_;if("string"==typeof l)return s_(f,l);throw np("Field path arguments must be of type string or FieldPath.",f,!1,void 0,h)}function s_(f,l,h){try{return function(y){if(y.search(P)>=0)throw new G(z.INVALID_ARGUMENT,"Invalid field path ("+y+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(x.bind.apply(x,U.__spreadArrays([void 0],y.split("."))))}catch{throw new G(z.INVALID_ARGUMENT,"Invalid field path ("+y+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(l).t_}catch(y){throw np((g=y)instanceof Error?g.message:g.toString(),f,!1,void 0,h)}var g}function np(f,l,h,g,y){var I=g&&!g.m(),D=void 0!==y,k="Function "+l+"() called with invalid data";h&&(k+=" (via `toFirestore()`)");var V="";return(I||D)&&(V+=" (found",I&&(V+=" in field "+g),D&&(V+=" in document "+y),V+=")"),new G(z.INVALID_ARGUMENT,(k+=". ")+f+V)}function gw(f,l){return f.some(function(h){return h.isEqual(l)})}var pm=function(){function f(l){this.Ku=l,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return f.prototype.v_=function(l){return U.__awaiter(this,void 0,void 0,function(){var h,g=this;return U.__generator(this,function(y){switch(y.label){case 0:if(this.S_(),this.mutations.length>0)throw new G(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(I,D){return U.__awaiter(this,void 0,void 0,function(){var k,V,Z,re,ge,_e;return U.__generator(this,function(Pe){switch(Pe.label){case 0:return k=Ze(I),V=gs(k.serializer)+"/documents",Z={documents:D.map(function(et){return na(k.serializer,et)})},[4,k.ku("BatchGetDocuments",V,Z)];case 1:return re=Pe.sent(),ge=new Map,re.forEach(function(et){var an,Xt,ht=(an=k.serializer,"found"in(Xt=et)?function(Pn,Qn){at(!!Qn.found);var gi=Mr(Pn,Qn.found.name),bi=vo(Qn.found.updateTime),hr=new Pr({mapValue:{fields:Qn.found.fields}});return new oi(gi,bi,hr,{})}(an,Xt):"missing"in Xt?function(Pn,Qn){at(!!Qn.missing),at(!!Qn.readTime);var gi=Mr(Pn,Qn.missing),bi=vo(Qn.readTime);return new Rr(gi,bi)}(an,Xt):ke());ge.set(ht.key.toString(),ht)}),_e=[],[2,(D.forEach(function(et){var ht=ge.get(et.toString());at(!!ht),_e.push(ht)}),_e)]}})})}(this.Ku,l)];case 1:return[2,((h=y.sent()).forEach(function(I){I instanceof Rr||I instanceof oi?g.D_(I):ke()}),h)]}})})},f.prototype.set=function(l,h){this.write(h.w_(l,this.Ge(l))),this.b_.add(l.toString())},f.prototype.update=function(l,h){try{this.write(h.w_(l,this.C_(l)))}catch(g){this.p_=g}this.b_.add(l.toString())},f.prototype.delete=function(l){this.write([new xr(l,this.Ge(l))]),this.b_.add(l.toString())},f.prototype.commit=function(){return U.__awaiter(this,void 0,void 0,function(){var l,h=this;return U.__generator(this,function(g){switch(g.label){case 0:if(this.S_(),this.p_)throw this.p_;return l=this.y_,this.mutations.forEach(function(y){l.delete(y.key.toString())}),l.forEach(function(y,I){var D=Le.D(I);h.mutations.push(new nl(D,h.Ge(D)))}),[4,function(y,I){return U.__awaiter(this,void 0,void 0,function(){var D,k,V;return U.__generator(this,function(Z){switch(Z.label){case 0:return D=Ze(y),k=gs(D.serializer)+"/documents",V={writes:I.map(function(re){return Ni(D.serializer,re)})},[4,D.$u("Commit",k,V)];case 1:return Z.sent(),[2]}})})}(this.Ku,this.mutations)];case 1:return g.sent(),this.V_=!0,[2]}})})},f.prototype.D_=function(l){var h;if(l instanceof oi)h=l.version;else{if(!(l instanceof Rr))throw ke();h=zt.min()}var g=this.y_.get(l.key.toString());if(g){if(!h.isEqual(g))throw new G(z.ABORTED,"Document version changed between two reads.")}else this.y_.set(l.key.toString(),h)},f.prototype.Ge=function(l){var h=this.y_.get(l.toString());return!this.b_.has(l.toString())&&h?Fi.updateTime(h):Fi.ze()},f.prototype.C_=function(l){var h=this.y_.get(l.toString());if(!this.b_.has(l.toString())&&h){if(h.isEqual(zt.min()))throw new G(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fi.updateTime(h)}return Fi.exists(!0)},f.prototype.write=function(l){this.S_(),this.mutations=this.mutations.concat(l)},f.prototype.S_=function(){},f}(),a_=function(){function f(l,h,g,y){this.cs=l,this.Ku=h,this.updateFunction=g,this.ls=y,this.N_=5,this.ys=new Ma(this.cs,"transaction_retry")}return f.prototype.run=function(){this.F_()},f.prototype.F_=function(){var l=this;this.ys.gn(function(){return U.__awaiter(l,void 0,void 0,function(){var h,g,y=this;return U.__generator(this,function(I){return h=new pm(this.Ku),(g=this.x_(h))&&g.then(function(D){y.cs.ws(function(){return h.commit().then(function(){y.ls.resolve(D)}).catch(function(k){y.k_(k)})})}).catch(function(D){y.k_(D)}),[2]})})})},f.prototype.x_=function(l){try{var h=this.updateFunction(l);return!Te(h)&&h.catch&&h.then?h:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(g){return this.ls.reject(g),null}},f.prototype.k_=function(l){var h=this;this.N_>0&&this.M_(l)?(this.N_-=1,this.cs.ws(function(){return h.F_(),Promise.resolve()})):this.ls.reject(l)},f.prototype.M_=function(l){if("FirebaseError"===l.name){var h=l.code;return"aborted"===h||"failed-precondition"===h||!zn(h)}return!1},f}(),mm=function(){function f(l,h){this.credentials=l,this.cs=h,this.clientId=Dn.k(),this.O_=new Bo}return f.prototype.start=function(l,h,g,y){var I=this;this.L_(),this.bl=l;var D=new Bo,k=!1;return this.credentials.Hc(function(V){if(!k)return k=!0,me("FirestoreClient","Initializing. user=",V.uid),I.B_(h,g,y,V,D).then(I.O_.resolve,I.O_.reject);I.cs.Cs(function(){return function(Z,re){return U.__awaiter(this,void 0,void 0,function(){var ge,_e;return U.__generator(this,function(Pe){switch(Pe.label){case 0:return(ge=Ze(Z)).cs.xs(),me("RemoteStore","RemoteStore received new credentials"),_e=us(ge),ge.Yu.add(3),[4,$l(ge)];case 1:return Pe.sent(),_e&&ge.th.set("Unknown"),[4,ge.Gu.Jl(re)];case 2:return Pe.sent(),ge.Yu.delete(3),[4,od(ge)];case 3:return Pe.sent(),[2]}})})}(I.ph,V)})}),this.cs.ws(function(){return I.O_.promise}),D.promise},f.prototype.enableNetwork=function(){var l=this;return this.L_(),this.cs.enqueue(function(){return l.persistence.tc(!0),(g=Ze(l.ph)).Yu.delete(0),od(g);var g})},f.prototype.B_=function(l,h,g,y,I){return U.__awaiter(this,void 0,void 0,function(){var D,k,V=this;return U.__generator(this,function(Z){switch(Z.label){case 0:return Z.trys.push([0,3,,4]),[4,l.initialize(D={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:y,Dh:100,persistenceSettings:g})];case 1:return Z.sent(),[4,h.initialize(l,D)];case 2:return Z.sent(),this.persistence=l.persistence,this.Sh=l.Sh,this.ju=l.ju,this.ql=l.ql,this.Ku=h.Ku,this.ph=h.ph,this.fi=h.fi,this.q_=h.bh,this.q_.Us=ns.bind(null,this.fi),this.q_.js=sr.bind(null,this.fi),this.persistence.Za(function(){return U.__awaiter(V,void 0,void 0,function(){return U.__generator(this,function(re){switch(re.label){case 0:return[4,this.terminate()];case 1:return re.sent(),[2]}})})}),I.resolve(),[3,4];case 3:if(k=Z.sent(),I.reject(k),!this.U_(k))throw k;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+k),this.B_(new fd,new Wh,{jl:!1},y,I))];case 4:return[2]}})})},f.prototype.U_=function(l){return"FirebaseError"===l.name?l.code===z.FAILED_PRECONDITION||l.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code},f.prototype.L_=function(){if(this.cs.ps)throw new G(z.FAILED_PRECONDITION,"The client has already been terminated.")},f.prototype.disableNetwork=function(){var l=this;return this.L_(),this.cs.enqueue(function(){return l.persistence.tc(!1),function(h){return U.__awaiter(this,void 0,void 0,function(){var g;return U.__generator(this,function(y){switch(y.label){case 0:return(g=Ze(h)).Yu.add(0),[4,$l(g)];case 1:return y.sent(),g.th.set("Offline"),[2]}})})}(l.ph)})},f.prototype.terminate=function(){var l=this;this.cs.Ds();var h=new Bo;return this.cs.bs(function(){return U.__awaiter(l,void 0,void 0,function(){var g,y;return U.__generator(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,jh(this.ph)];case 1:return I.sent(),[4,this.Sh.Di()];case 2:return I.sent(),[4,this.persistence.Di()];case 3:return I.sent(),this.credentials.Yc(),h.resolve(),[3,5];case 4:return g=I.sent(),y=kt(g,"Failed to shutdown persistence"),h.reject(y),[3,5];case 5:return[2]}})})}),h.promise},f.prototype.waitForPendingWrites=function(){var l=this;this.L_();var h=new Bo;return this.cs.ws(function(){return function(g,y){return U.__awaiter(this,void 0,void 0,function(){var I,D,k,V,Z;return U.__generator(this,function(re){switch(re.label){case 0:us((I=Ze(g)).ph)||me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),re.label=1;case 1:return re.trys.push([1,3,,4]),[4,(ge=I.ju,_e=Ze(ge),_e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(Pe){return _e.Sr.qo(Pe)}))];case 2:return-1===(D=re.sent())?[2,void y.resolve()]:((k=I.Lh.get(D)||[]).push(y),I.Lh.set(D,k),[3,4]);case 3:return V=re.sent(),Z=kt(V,"Initialization of waitForPendingWrites() operation failed"),y.reject(Z),[3,4];case 4:return[2]}var ge,_e})})}(l.fi,h)}),h.promise},f.prototype.listen=function(l,h,g){var y=this;this.L_();var I=new A(g),D=new rl(l,I,h);return this.cs.ws(function(){return lr(y.q_,D)}),function(){I.Zl(),y.cs.ws(function(){return Eo(y.q_,D)})}},f.prototype.Q_=function(l){return U.__awaiter(this,void 0,void 0,function(){var h,g=this;return U.__generator(this,function(y){switch(y.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return y.sent(),h=new Bo,[2,(this.cs.ws(function(){return function(I,D,k){return U.__awaiter(this,void 0,void 0,function(){var V,Z,re;return U.__generator(this,function(ge){switch(ge.label){case 0:return ge.trys.push([0,2,,3]),[4,(_e=I,Pe=D,et=Ze(_e),et.persistence.runTransaction("read document","readonly",function(ht){return et.Cc.Cr(ht,Pe)}))];case 1:return(V=ge.sent())instanceof oi?k.resolve(V):V instanceof Rr?k.resolve(null):k.reject(new G(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return Z=ge.sent(),re=kt(Z,"Failed to get document '"+D+" from cache"),k.reject(re),[3,3];case 3:return[2]}var _e,Pe,et})})}(g.ju,l,h)}),h.promise)]}})})},f.prototype.W_=function(l,h){return void 0===h&&(h={}),U.__awaiter(this,void 0,void 0,function(){var g,y=this;return U.__generator(this,function(I){switch(I.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return I.sent(),g=new Bo,[2,(this.cs.ws(function(){return D=y.q_,k=y.cs,V=l,Z=h,re=g,ge=new A({next:function(Pe){k.ws(function(){return Eo(D,_e)});var et=Pe.docs.has(V);!et&&Pe.fromCache?re.reject(new G(z.UNAVAILABLE,"Failed to get document because the client is offline.")):et&&Pe.fromCache&&Z&&"server"===Z.source?re.reject(new G(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):re.resolve(Pe)},error:function(Pe){return re.reject(Pe)}}),_e=new rl(Sa(V.path),ge,{includeMetadataChanges:!0,Xs:!0}),lr(D,_e);var D,k,V,Z,re,ge,_e}),g.promise)]}})})},f.prototype.j_=function(l){return U.__awaiter(this,void 0,void 0,function(){var h,g=this;return U.__generator(this,function(y){switch(y.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return y.sent(),h=new Bo,[2,(this.cs.ws(function(){return function(I,D,k){return U.__awaiter(this,void 0,void 0,function(){var V,Z,re,ge,_e,Pe;return U.__generator(this,function(et){switch(et.label){case 0:return et.trys.push([0,2,,3]),[4,rr(I,D,!0)];case 1:return V=et.sent(),Z=new Na(D,V.Fc),re=Z.wh(V.documents),ge=Z.yr(re,!1),k.resolve(ge.snapshot),[3,3];case 2:return _e=et.sent(),Pe=kt(_e,"Failed to execute query '"+D+" against cache"),k.reject(Pe),[3,3];case 3:return[2]}})})}(g.ju,l,h)}),h.promise)]}})})},f.prototype.K_=function(l,h){return void 0===h&&(h={}),U.__awaiter(this,void 0,void 0,function(){var g,y=this;return U.__generator(this,function(I){switch(I.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return I.sent(),g=new Bo,[2,(this.cs.ws(function(){return D=y.q_,k=y.cs,V=l,Z=h,re=g,ge=new A({next:function(Pe){k.ws(function(){return Eo(D,_e)}),Pe.fromCache&&"server"===Z.source?re.reject(new G(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):re.resolve(Pe)},error:function(Pe){return re.reject(Pe)}}),_e=new rl(V,ge,{includeMetadataChanges:!0,Xs:!0}),lr(D,_e);var D,k,V,Z,re,ge,_e}),g.promise)]}})})},f.prototype.write=function(l){var h=this;this.L_();var g=new Bo;return this.cs.ws(function(){return function(y,I,D){return U.__awaiter(this,void 0,void 0,function(){var k,V,Z,re;return U.__generator(this,function(ge){switch(ge.label){case 0:k=Iu(y),ge.label=1;case 1:return ge.trys.push([1,5,,6]),[4,(_e=k.ju,Pe=I,ht=Ze(_e),an=Qt.now(),Xt=Pe.reduce(function(Pn,Qn){return Pn.add(Qn.key)},Qe()),ht.persistence.runTransaction("Locally write mutations","readwrite",function(Pn){return ht.Cc.kr(Pn,Xt).next(function(Qn){et=Qn;for(var gi=[],bi=0,hr=Pe;bi<hr.length;bi++){var Zs=hr[bi],zc=hu(Zs,et.get(Zs.key));null!=zc&&gi.push(new Wr(Zs.key,zc,di(zc.proto.mapValue),Fi.exists(!0)))}return ht.Sr.ko(Pn,an,gi,Pe)})}).then(function(Pn){var Qn=Pn.lr(et);return{batchId:Pn.batchId,wr:Qn}}))];case 2:return V=ge.sent(),k.Sh.xi(V.batchId),function(_e,Pe,et){var ht=_e.Oh[_e.currentUser.ti()];ht||(ht=new Hn(Ut)),ht=ht.ot(Pe,et),_e.Oh[_e.currentUser.ti()]=ht}(k,V.batchId,D),[4,oe(k,V.wr)];case 3:return ge.sent(),[4,Hs(k.ph)];case 4:return ge.sent(),[3,6];case 5:return Z=ge.sent(),re=kt(Z,"Failed to persist write"),D.reject(re),[3,6];case 6:return[2]}var _e,Pe,et,ht,an,Xt})})}(h.fi,l,g)}),g.promise},f.prototype.U=function(){return this.bl.U},f.prototype.G_=function(l){var h=this;this.L_();var g=new A(l);return this.cs.ws(function(){return U.__awaiter(h,void 0,void 0,function(){return U.__generator(this,function(y){return[2,(I=this.q_,D=g,Ze(I).qs.add(D),void D.next())];var I,D})})}),function(){g.Zl(),h.cs.ws(function(){return U.__awaiter(h,void 0,void 0,function(){return U.__generator(this,function(y){return[2,(I=this.q_,D=g,void Ze(I).qs.delete(D))];var I,D})})})}},Object.defineProperty(f.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),f.prototype.transaction=function(l){var h=this;this.L_();var g=new Bo;return this.cs.ws(function(){return new a_(h.cs,h.Ku,l,g).run(),Promise.resolve()}),g.promise},f}();function md(f){return function(l,h){if("object"!=typeof l||null===l)return!1;for(var g=l,y=0,I=["next","error","complete"];y<I.length;y++){var D=I[y];if(D in g&&"function"==typeof g[D])return!0}return!1}(f)}var ip=function(){function f(l,h,g,y,I){this.U=l,this.timestampsInSnapshots=h,this.H_=g,this.Y_=y,this.J_=I}return f.prototype.X_=function(l){switch(Yi(l)){case 0:return null;case 1:return l.booleanValue;case 2:return ni(l.integerValue||l.doubleValue);case 3:return this.Z_(l.timestampValue);case 4:return this.tf(l);case 5:return l.stringValue;case 6:return this.J_(Ai(l.bytesValue));case 7:return this.ef(l.referenceValue);case 8:return this.nf(l.geoPointValue);case 9:return this.sf(l.arrayValue);case 10:return this.if(l.mapValue);default:throw ke()}},f.prototype.if=function(l){var h=this,g={};return nt(l.fields||{},function(y,I){g[y]=h.X_(I)}),g},f.prototype.nf=function(l){return new Gn(ni(l.latitude),ni(l.longitude))},f.prototype.sf=function(l){var h=this;return(l.values||[]).map(function(g){return h.X_(g)})},f.prototype.tf=function(l){switch(this.H_){case"previous":var h=ri(l);return null==h?null:this.X_(h);case"estimate":return this.Z_(Hi(l));default:return null}},f.prototype.Z_=function(l){var h=Yo(l),g=new Qt(h.seconds,h.nanos);return this.timestampsInSnapshots?g:g.toDate()},f.prototype.ef=function(l){var h=he.g(l);at($n(h));var g=new sn(h.get(1),h.get(3)),y=new Le(h.u(5));return g.isEqual(this.U)||lt("Document "+y+" contains a document reference within a different database ("+g.projectId+"/"+g.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(y)},f}(),c_=Qr.ho,Tu=function(){function f(l){var h,g,y,I,D;if(void 0===l.host){if(void 0!==l.ssl)throw new G(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else fi("settings","non-empty string","host",l.host),this.host=l.host,De("settings","boolean","ssl",l.ssl),this.ssl=null===(h=l.ssl)||void 0===h||h;if(bt("settings",l,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),De("settings","object","credentials",l.credentials),this.credentials=l.credentials,De("settings","boolean","timestampsInSnapshots",l.timestampsInSnapshots),De("settings","boolean","ignoreUndefinedProperties",l.ignoreUndefinedProperties),!0===l.timestampsInSnapshots?lt("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===l.timestampsInSnapshots&&lt("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(g=l.timestampsInSnapshots)||void 0===g||g,this.ignoreUndefinedProperties=null!==(y=l.ignoreUndefinedProperties)&&void 0!==y&&y,De("settings","number","cacheSizeBytes",l.cacheSizeBytes),void 0===l.cacheSizeBytes)this.cacheSizeBytes=Qr._o;else{if(l.cacheSizeBytes!==c_&&l.cacheSizeBytes<Qr.lo)throw new G(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Qr.lo);this.cacheSizeBytes=l.cacheSizeBytes}De("settings","boolean","experimentalForceLongPolling",l.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(I=l.experimentalForceLongPolling)&&void 0!==I&&I,De("settings","boolean","experimentalAutoDetectLongPolling",l.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(D=l.experimentalAutoDetectLongPolling)&&void 0!==D&&D,function(k,V,Z,re){if(!0===V&&!0===re)throw new G(z.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,l.experimentalForceLongPolling,0,l.experimentalAutoDetectLongPolling)}return f.prototype.isEqual=function(l){return this.host===l.host&&this.ssl===l.ssl&&this.timestampsInSnapshots===l.timestampsInSnapshots&&this.credentials===l.credentials&&this.cacheSizeBytes===l.cacheSizeBytes&&this.experimentalForceLongPolling===l.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===l.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===l.ignoreUndefinedProperties},f}(),ch=function(){function f(l,h,g,y){var I=this;if(void 0===g&&(g=new fd),void 0===y&&(y=new Wh),this.rf=g,this.af=y,this.cf=null,this.uf=new Ye,this.INTERNAL={delete:function(){return U.__awaiter(I,void 0,void 0,function(){return U.__generator(this,function(V){switch(V.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return V.sent(),[2]}})})}},"object"==typeof l.options){var D=l;this.cf=D,this.__=f._f(D),this.ff=D.name,this.df=new or(h)}else{var k=l;if(!k.projectId)throw new G(z.INVALID_ARGUMENT,"Must provide projectId");this.__=new sn(k.projectId,k.database),this.ff="[DEFAULT]",this.df=new Nr}this.wf=new Tu({})}return Object.defineProperty(f.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new _l(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),f.prototype.settings=function(l){ot("Firestore.settings",arguments,1),un("Firestore.settings","object",1,l),l.merge&&delete(l=Object.assign(Object.assign({},this.wf),l)).merge;var h=new Tu(l);if(this.lf&&!this.wf.isEqual(h))throw new G(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=h,void 0!==h.credentials&&(this.df=function(g){if(!g)return new Nr;switch(g.type){case"gapi":var y=g.client;return at(!("object"!=typeof y||null===y||!y.auth||!y.auth.getAuthHeaderValueForFirstParty)),new Yf(y,g.sessionIndex||"0");case"provider":return g.client;default:throw new G(z.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(h.credentials))},f.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},f.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},f.prototype.enablePersistence=function(l){var h,g;if(this.lf)throw new G(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var y=!1,I=!1;if(l&&(void 0!==l.experimentalTabSynchronization&&lt("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),y=null!==(g=null!==(h=l.synchronizeTabs)&&void 0!==h?h:l.experimentalTabSynchronization)&&void 0!==g&&g,I=!!l.experimentalForceOwningTab&&l.experimentalForceOwningTab,y&&I))throw new G(z.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:y,ka:I})},f.prototype.clearPersistence=function(){return U.__awaiter(this,void 0,void 0,function(){var l,h=this;return U.__generator(this,function(g){if(void 0!==this.lf&&!this.lf.z_)throw new G(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return l=new Bo,[2,(this.uf.bs(function(){return U.__awaiter(h,void 0,void 0,function(){var y;return U.__generator(this,function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return I.sent(),l.resolve(),[3,3];case 2:return y=I.sent(),l.reject(y),[3,3];case 3:return[2]}})})}),l.promise)]})})},f.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(f.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),f.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},f.prototype.onSnapshotsInSync=function(l){return this.hf(),md(l)?this.lf.G_(l):(un("Firestore.onSnapshotsInSync","function",1,l),this.lf.G_({next:l}))},f.prototype.hf=function(){return this.lf||this.Ef(new fd,new Wh,{jl:!1}),this.lf},f.prototype.Af=function(){return new Ro(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},f.prototype.Ef=function(l,h,g){var y=this.Af();return this.lf=new mm(this.df,this.uf),this.lf.start(y,l,h,g)},f._f=function(l){if(!Object.prototype.hasOwnProperty.call(l.options,"projectId"))throw new G(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var g=l.options.projectId;if(!g||"string"!=typeof g)throw new G(z.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new sn(g)},Object.defineProperty(f.prototype,"app",{get:function(){if(!this.cf)throw new G(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),f.prototype.collection=function(l){return ot("Firestore.collection",arguments,1),un("Firestore.collection","non-empty string",1,l),this.hf(),new Xl(he.g(l),this,null)},f.prototype.doc=function(l){return ot("Firestore.doc",arguments,1),un("Firestore.doc","non-empty string",1,l),this.hf(),vl.Rf(he.g(l),this,null)},f.prototype.collectionGroup=function(l){if(ot("Firestore.collectionGroup",arguments,1),un("Firestore.collectionGroup","non-empty string",1,l),l.indexOf("/")>=0)throw new G(z.INVALID_ARGUMENT,"Invalid collection ID '"+l+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new Xh((h=l,new vs(he.P(),h)),this,null);var h},f.prototype.runTransaction=function(l){var h=this;return ot("Firestore.runTransaction",arguments,1),un("Firestore.runTransaction","function",1,l),this.hf().transaction(function(g){return l(new gm(h,g))})},f.prototype.batch=function(){return this.hf(),new _w(this)},Object.defineProperty(f,"logLevel",{get:function(){switch(Ne()){case pe.LogLevel.DEBUG:return"debug";case pe.LogLevel.ERROR:return"error";case pe.LogLevel.SILENT:return"silent";case pe.LogLevel.WARN:return"warn";case pe.LogLevel.INFO:return"info";case pe.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),f.setLogLevel=function(l){ot("Firestore.setLogLevel",arguments,1),He("setLogLevel",["debug","error","silent","warn","info","verbose"],1,l),de.setLogLevel(l)},f.prototype.gf=function(){return this.wf.timestampsInSnapshots},f.prototype.Pf=function(){return this.wf},f}(),gm=function(){function f(l,h){this.yf=l,this.Vf=h}return f.prototype.get=function(l){var h=this;ot("Transaction.get",arguments,1);var g=Au("Transaction.get",l,this.yf);return this.Vf.v_([g.f_]).then(function(y){if(!y||1!==y.length)return ke();var I=y[0];if(I instanceof Rr)return new Qh(h.yf,g.f_,null,!1,!1,g.d_);if(I instanceof oi)return new Qh(h.yf,g.f_,I,!1,!1,g.d_);throw ke()})},f.prototype.set=function(l,h,g){nn("Transaction.set",arguments,2,3);var y=Au("Transaction.set",l,this.yf);g=Jh("Transaction.set",g);var I=Ws(y.d_,h,g),D=Kh(this.yf.mf,"Transaction.set",y.f_,I,null!==y.d_,g);return this.Vf.set(y.f_,D),this},f.prototype.update=function(l,h,g){for(var y,I,D=[],k=3;k<arguments.length;k++)D[k-3]=arguments[k];return"string"==typeof h||h instanceof x?(Kt("Transaction.update",arguments,3),y=Au("Transaction.update",l,this.yf),I=Yh(this.yf.mf,"Transaction.update",y.f_,h,g,D)):(ot("Transaction.update",arguments,2),y=Au("Transaction.update",l,this.yf),I=oh(this.yf.mf,"Transaction.update",y.f_,h)),this.Vf.update(y.f_,I),this},f.prototype.delete=function(l){ot("Transaction.delete",arguments,1);var h=Au("Transaction.delete",l,this.yf);return this.Vf.delete(h.f_),this},f}(),_w=function(){function f(l){this.yf=l,this.pf=[],this.bf=!1}return f.prototype.set=function(l,h,g){nn("WriteBatch.set",arguments,2,3),this.vf();var y=Au("WriteBatch.set",l,this.yf);g=Jh("WriteBatch.set",g);var I=Ws(y.d_,h,g),D=Kh(this.yf.mf,"WriteBatch.set",y.f_,I,null!==y.d_,g);return this.pf=this.pf.concat(D.w_(y.f_,Fi.ze())),this},f.prototype.update=function(l,h,g){for(var y,I,D=[],k=3;k<arguments.length;k++)D[k-3]=arguments[k];return this.vf(),"string"==typeof h||h instanceof x?(Kt("WriteBatch.update",arguments,3),y=Au("WriteBatch.update",l,this.yf),I=Yh(this.yf.mf,"WriteBatch.update",y.f_,h,g,D)):(ot("WriteBatch.update",arguments,2),y=Au("WriteBatch.update",l,this.yf),I=oh(this.yf.mf,"WriteBatch.update",y.f_,h)),this.pf=this.pf.concat(I.w_(y.f_,Fi.exists(!0))),this},f.prototype.delete=function(l){ot("WriteBatch.delete",arguments,1),this.vf();var h=Au("WriteBatch.delete",l,this.yf);return this.pf=this.pf.concat(new xr(h.f_,Fi.ze())),this},f.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},f.prototype.vf=function(){if(this.bf)throw new G(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},f}(),vl=function(f){function l(h,g,y){var I=this;return(I=f.call(this,g.__,h,y)||this).f_=h,I.firestore=g,I.d_=y,I.lf=I.firestore.hf(),I}return U.__extends(l,f),l.Rf=function(h,g,y){if(h.length%2!=0)throw new G(z.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+h.R()+" has "+h.length);return new l(new Le(h),g,y)},Object.defineProperty(l.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){return new Xl(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),l.prototype.collection=function(h){if(ot("DocumentReference.collection",arguments,1),un("DocumentReference.collection","non-empty string",1,h),!h)throw new G(z.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var g=he.g(h);return new Xl(this.f_.path.child(g),this.firestore,null)},l.prototype.isEqual=function(h){if(!(h instanceof l))throw Tn("isEqual","DocumentReference",1,h);return this.firestore===h.firestore&&this.f_.isEqual(h.f_)&&this.d_===h.d_},l.prototype.set=function(h,g){nn("DocumentReference.set",arguments,1,2),g=Jh("DocumentReference.set",g);var y=Ws(this.d_,h,g),I=Kh(this.firestore.mf,"DocumentReference.set",this.f_,y,null!==this.d_,g);return this.lf.write(I.w_(this.f_,Fi.ze()))},l.prototype.update=function(h,g){for(var y,I=[],D=2;D<arguments.length;D++)I[D-2]=arguments[D];return"string"==typeof h||h instanceof x?(Kt("DocumentReference.update",arguments,2),y=Yh(this.firestore.mf,"DocumentReference.update",this.f_,h,g,I)):(ot("DocumentReference.update",arguments,1),y=oh(this.firestore.mf,"DocumentReference.update",this.f_,h)),this.lf.write(y.w_(this.f_,Fi.exists(!0)))},l.prototype.delete=function(){return ot("DocumentReference.delete",arguments,0),this.lf.write([new xr(this.f_,Fi.ze())])},l.prototype.onSnapshot=function(){for(var h,g,y,I=this,D=[],k=0;k<arguments.length;k++)D[k]=arguments[k];nn("DocumentReference.onSnapshot",arguments,1,4);var V={includeMetadataChanges:!1},Z=0;"object"!=typeof D[Z]||md(D[Z])||(bt("DocumentReference.onSnapshot",V=D[Z],["includeMetadataChanges"]),De("DocumentReference.onSnapshot","boolean","includeMetadataChanges",V.includeMetadataChanges),Z++);var re={includeMetadataChanges:V.includeMetadataChanges};if(md(D[Z])){var ge=D[Z];D[Z]=null===(h=ge.next)||void 0===h?void 0:h.bind(ge),D[Z+1]=null===(g=ge.error)||void 0===g?void 0:g.bind(ge),D[Z+2]=null===(y=ge.complete)||void 0===y?void 0:y.bind(ge)}else un("DocumentReference.onSnapshot","function",Z,D[Z]),rn("DocumentReference.onSnapshot","function",Z+1,D[Z+1]),rn("DocumentReference.onSnapshot","function",Z+2,D[Z+2]);var _e={next:function(Pe){D[Z]&&D[Z](I.Sf(Pe))},error:D[Z+1],complete:D[Z+2]};return this.lf.listen(Sa(this.f_.path),re,_e)},l.prototype.get=function(h){var g=this;nn("DocumentReference.get",arguments,0,1),vw("DocumentReference.get",h);var y=this.firestore.hf();return h&&"cache"===h.source?y.Q_(this.f_).then(function(I){return new Qh(g.firestore,g.f_,I,!0,I instanceof oi&&I.Je,g.d_)}):y.W_(this.f_,h).then(function(I){return g.Sf(I)})},l.prototype.withConverter=function(h){return new l(this.f_,this.firestore,h)},l.prototype.Sf=function(h){var g=h.docs.get(this.f_);return new Qh(this.firestore,this.f_,g,h.fromCache,h.hasPendingWrites,this.d_)},l}(to),Ay=function(){function f(l,h){this.hasPendingWrites=l,this.fromCache=h}return f.prototype.isEqual=function(l){return this.hasPendingWrites===l.hasPendingWrites&&this.fromCache===l.fromCache},f}(),Qh=function(){function f(l,h,g,y,I,D){this.yf=l,this.f_=h,this.Df=g,this.Cf=y,this.Nf=I,this.d_=D}return f.prototype.data=function(l){var h=this;if(nn("DocumentSnapshot.data",arguments,0,1),l=uh("DocumentSnapshot.data",l),this.Df){if(this.d_){var g=new _m(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(g,l)}return new ip(this.yf.__,this.yf.gf(),l.serverTimestamps||"none",function(y){return new vl(y,h.yf,null)},function(y){return new Vi(y)}).X_(this.Df.rn())}},f.prototype.get=function(l,h){var g=this;if(nn("DocumentSnapshot.get",arguments,1,2),h=uh("DocumentSnapshot.get",h),this.Df){var y=this.Df.data().field(pd("DocumentSnapshot.get",l,this.f_));if(null!==y)return new ip(this.yf.__,this.yf.gf(),h.serverTimestamps||"none",function(I){return new vl(I,g.yf,g.d_)},function(I){return new Vi(I)}).X_(y)}},Object.defineProperty(f.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"ref",{get:function(){return new vl(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"metadata",{get:function(){return new Ay(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),f.prototype.isEqual=function(l){if(!(l instanceof f))throw Tn("isEqual","DocumentSnapshot",1,l);return this.yf===l.yf&&this.Cf===l.Cf&&this.f_.isEqual(l.f_)&&(null===this.Df?null===l.Df:this.Df.isEqual(l.Df))&&this.d_===l.d_},f}(),_m=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.prototype.data=function(h){return f.prototype.data.call(this,h)},l}(Qh);function Du(f,l,h){if("string"==typeof h){if(""===h)throw new G(z.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!fu(l)&&-1!==h.indexOf("/"))throw new G(z.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+h+"' contains a '/' character.");var g=l.path.child(he.g(h));if(!Le.F(g))throw new G(z.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+g+"' is not because it has an odd number of segments ("+g.length+").");return _o(f,new Le(g))}if(h instanceof to)return _o(f,h.f_);throw new G(z.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+gt(h)+".")}function lh(f,l){if(!Array.isArray(f)||0===f.length)throw new G(z.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+l.toString()+"' filters.");if(f.length>10)throw new G(z.INVALID_ARGUMENT,"Invalid Query. '"+l.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===l||"array-contains-any"===l){if(f.indexOf(null)>=0)throw new G(z.INVALID_ARGUMENT,"Invalid Query. '"+l.toString()+"' filters cannot contain 'null' in the value array.");if(f.filter(function(h){return Number.isNaN(h)}).length>0)throw new G(z.INVALID_ARGUMENT,"Invalid Query. '"+l.toString()+"' filters cannot contain 'NaN' in the value array.")}}function l_(f,l,h){if(!h.isEqual(l))throw new G(z.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+l.toString()+"' and so you must also use '"+l.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+h.toString()+"' instead.")}function Su(f){if(Ja(f)&&0===f.on.length)throw new G(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xh=function(){function f(l,h,g){this.Ff=l,this.firestore=h,this.d_=g}return f.prototype.where=function(l,h,g){ot("Query.where",arguments,3),At("Query.where",3,g);var k,Z,y=He("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,h),I=pd("Query.where",l),D=function yl(f,l,h,g,y,I,D){var k;if(y.p()){if("array-contains"===I||"array-contains-any"===I)throw new G(z.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+I+"' queries on FieldPath.documentId().");if("in"===I||"not-in"===I){lh(D,I);for(var V=[],Z=0,re=D;Z<re.length;Z++)V.push(Du(g,f,re[Z]));k={arrayValue:{values:V}}}else k=Du(g,f,D)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||lh(D,I),k=fm(h,l,D,"in"===I||"not-in"===I);var _e=kr.create(y,I,k);return function(Pe,et){if(et.hn()){var ht=mi(Pe);if(null!==ht&&!ht.isEqual(et.field))throw new G(z.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+ht.toString()+"' and '"+et.field.toString()+"'");var an=Nl(Pe);null!==an&&l_(0,et.field,an)}var Xt=function(Pn,Qn){for(var gi=0,bi=Pn.filters;gi<bi.length;gi++){var hr=bi[gi];if(Qn.indexOf(hr.op)>=0)return hr.op}return null}(Pe,function(Pn){switch(Pn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(et.op));if(null!==Xt)throw new G(z.INVALID_ARGUMENT,Xt===et.op?"Invalid query. You cannot use more than one '"+et.op.toString()+"' filter.":"Invalid query. You cannot use '"+et.op.toString()+"' filters with '"+Xt.toString()+"' filters.")}(f,_e),_e}(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,I,y,g);return new f((Z=(k=this.Ff).filters.concat([D]),new vs(k.path,k.collectionGroup,k.on.slice(),Z,k.limit,k.an,k.startAt,k.endAt)),this.firestore,this.d_)},f.prototype.orderBy=function(l,h){var g;if(nn("Query.orderBy",arguments,1,2),rn("Query.orderBy","non-empty string",2,h),void 0===h||"asc"===h)g="asc";else{if("desc"!==h)throw new G(z.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+h+"', expected 'asc' or 'desc'.");g="desc"}var D,V,y=pd("Query.orderBy",l),I=function lc(f,l,h){if(null!==f.startAt)throw new G(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==f.endAt)throw new G(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var g=new ua(l,h);return function(y,I){if(null===Nl(y)){var D=mi(y);null!==D&&l_(0,D,I.field)}}(f,g),g}(this.Ff,y,g);return new f((V=(D=this.Ff).on.concat([I]),new vs(D.path,D.collectionGroup,V,D.filters.slice(),D.limit,D.an,D.startAt,D.endAt)),this.firestore,this.d_)},f.prototype.limit=function(l){return ot("Query.limit",arguments,1),un("Query.limit","number",1,l),dn("Query.limit",1,l),new f($d(this.Ff,l,"F"),this.firestore,this.d_)},f.prototype.limitToLast=function(l){return ot("Query.limitToLast",arguments,1),un("Query.limitToLast","number",1,l),dn("Query.limitToLast",1,l),new f($d(this.Ff,l,"L"),this.firestore,this.d_)},f.prototype.startAt=function(l){for(var h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];Kt("Query.startAt",arguments,1);var y=this.xf("Query.startAt",l,h,!0);return new f(ec(this.Ff,y),this.firestore,this.d_)},f.prototype.startAfter=function(l){for(var h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];Kt("Query.startAfter",arguments,1);var y=this.xf("Query.startAfter",l,h,!1);return new f(ec(this.Ff,y),this.firestore,this.d_)},f.prototype.endBefore=function(l){for(var h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];Kt("Query.endBefore",arguments,1);var y=this.xf("Query.endBefore",l,h,!0);return new f(yo(this.Ff,y),this.firestore,this.d_)},f.prototype.endAt=function(l){for(var h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];Kt("Query.endAt",arguments,1);var y=this.xf("Query.endAt",l,h,!1);return new f(yo(this.Ff,y),this.firestore,this.d_)},f.prototype.isEqual=function(l){if(!(l instanceof f))throw Tn("isEqual","Query",1,l);return this.firestore===l.firestore&&tc(this.Ff,l.Ff)&&this.d_===l.d_},f.prototype.withConverter=function(l){return new f(this.Ff,this.firestore,l)},f.prototype.xf=function(l,h,g,y){if(At(l,1,h),h instanceof Qh)return ot(l,U.__spreadArrays([h],g),1),function(D,k,V,Z,re){if(!Z)throw new G(z.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+V+"().");for(var ge=[],_e=0,Pe=Dc(D);_e<Pe.length;_e++){var et=Pe[_e];if(et.field.p())ge.push(_o(k,Z.key));else{var ht=Z.field(et.field);if(On(ht))throw new G(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+et.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ht){var an=et.field.R();throw new G(z.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+an+"' (used as the orderBy) does not exist.")}ge.push(ht)}}return new bo(ge,re)}(this.Ff,this.firestore.__,l,h.Df,y);var I=[h].concat(g);return function(D,k,V,Z,re,ge){var _e=D.on;if(re.length>_e.length)throw new G(z.INVALID_ARGUMENT,"Too many arguments provided to "+Z+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var Pe=[],et=0;et<re.length;et++){var ht=re[et];if(_e[et].field.p()){if("string"!=typeof ht)throw new G(z.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+Z+"(), but got a "+typeof ht);if(!fu(D)&&-1!==ht.indexOf("/"))throw new G(z.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+Z+"() must be a plain document ID, but '"+ht+"' contains a slash.");var an=D.path.child(he.g(ht));if(!Le.F(an))throw new G(z.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+Z+"() must result in a valid document path, but '"+an+"' is not because it contains an odd number of segments.");var Xt=new Le(an);Pe.push(_o(k,Xt))}else{var Pn=fm(V,Z,ht);Pe.push(Pn)}}return new bo(Pe,ge)}(this.Ff,this.firestore.__,this.firestore.mf,l,I,y)},f.prototype.onSnapshot=function(){for(var l,h,g,y=this,I=[],D=0;D<arguments.length;D++)I[D]=arguments[D];nn("Query.onSnapshot",arguments,1,4);var k={},V=0;if("object"!=typeof I[V]||md(I[V])||(bt("Query.onSnapshot",k=I[V],["includeMetadataChanges"]),De("Query.onSnapshot","boolean","includeMetadataChanges",k.includeMetadataChanges),V++),md(I[V])){var Z=I[V];I[V]=null===(l=Z.next)||void 0===l?void 0:l.bind(Z),I[V+1]=null===(h=Z.error)||void 0===h?void 0:h.bind(Z),I[V+2]=null===(g=Z.complete)||void 0===g?void 0:g.bind(Z)}else un("Query.onSnapshot","function",V,I[V]),rn("Query.onSnapshot","function",V+1,I[V+1]),rn("Query.onSnapshot","function",V+2,I[V+2]);var re={next:function(ge){I[V]&&I[V](new gd(y.firestore,y.Ff,ge,y.d_))},error:I[V+1],complete:I[V+2]};return Su(this.Ff),this.firestore.hf().listen(this.Ff,k,re)},f.prototype.get=function(l){var h=this;nn("Query.get",arguments,0,1),vw("Query.get",l),Su(this.Ff);var g=this.firestore.hf();return(l&&"cache"===l.source?g.j_(this.Ff):g.K_(this.Ff,l)).then(function(y){return new gd(h.firestore,h.Ff,y,h.d_)})},f}(),gd=function(){function f(l,h,g,y){this.yf=l,this.$f=h,this.kf=g,this.d_=y,this.Mf=null,this.Of=null,this.metadata=new Ay(g.hasPendingWrites,g.fromCache)}return Object.defineProperty(f.prototype,"docs",{get:function(){var l=[];return this.forEach(function(h){return l.push(h)}),l},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),f.prototype.forEach=function(l,h){var g=this;nn("QuerySnapshot.forEach",arguments,1,2),un("QuerySnapshot.forEach","function",1,l),this.kf.docs.forEach(function(y){l.call(h,g.Lf(y,g.metadata.fromCache,g.kf.Wt.has(y.key)))})},Object.defineProperty(f.prototype,"query",{get:function(){return new Xh(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),f.prototype.docChanges=function(l){l&&(bt("QuerySnapshot.docChanges",l,["includeMetadataChanges"]),De("QuerySnapshot.docChanges","boolean","includeMetadataChanges",l.includeMetadataChanges));var h=!(!l||!l.includeMetadataChanges);if(h&&this.kf.Kt)throw new G(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===h||(this.Mf=function(g,y,I){if(g.Qt.m()){var D=0;return g.docChanges.map(function(V){return{type:"added",doc:I(V.doc,g.fromCache,g.Wt.has(V.doc.key)),oldIndex:-1,newIndex:D++}})}var k=g.Qt;return g.docChanges.filter(function(V){return y||3!==V.type}).map(function(V){var Z=I(V.doc,g.fromCache,g.Wt.has(V.doc.key)),re=-1,ge=-1;return 0!==V.type&&(re=k.indexOf(V.doc.key),k=k.delete(V.doc.key)),1!==V.type&&(ge=(k=k.add(V.doc)).indexOf(V.doc.key)),{type:yw(V.type),doc:Z,oldIndex:re,newIndex:ge}})}(this.kf,h,this.Lf.bind(this)),this.Of=h),this.Mf},f.prototype.isEqual=function(l){if(!(l instanceof f))throw Tn("isEqual","QuerySnapshot",1,l);return this.yf===l.yf&&tc(this.$f,l.$f)&&this.kf.isEqual(l.kf)&&this.d_===l.d_},f.prototype.Lf=function(l,h,g){return new _m(this.yf,l.key,l,h,g,this.d_)},f}(),Xl=function(f){function l(h,g,y){var I=this;if((I=f.call(this,Sa(h),g,y)||this).Bf=h,h.length%2!=1)throw new G(z.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+h.R()+" has "+h.length);return I}return U.__extends(l,f),Object.defineProperty(l.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){var h=this.Ff.path.h();return h.m()?null:new vl(new Le(h),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),l.prototype.doc=function(h){nn("CollectionReference.doc",arguments,0,1),0===arguments.length&&(h=Dn.k()),un("CollectionReference.doc","non-empty string",1,h);var g=he.g(h);return vl.Rf(this.Ff.path.child(g),this.firestore,this.d_)},l.prototype.add=function(h){ot("CollectionReference.add",arguments,1);var g=this.d_?this.d_.toFirestore(h):h;un("CollectionReference.add","object",1,g);var y=this.doc();return new vl(y.f_,this.firestore,null).set(g).then(function(){return y})},l.prototype.withConverter=function(h){return new l(this.Bf,this.firestore,h)},l}(Xh);function Jh(f,l){if(void 0===l)return{merge:!1};if(bt(f,l,["merge","mergeFields"]),De(f,"boolean","merge",l.merge),void 0!==(I=l.mergeFields)&&function(k,V,Z,re,ge){if(!(re instanceof Array))throw new G(z.INVALID_ARGUMENT,"Function "+k+"() requires its "+V+" option to be an array, but it was: "+gt(re));for(var _e=0;_e<re.length;++_e)if(!ge(re[_e]))throw new G(z.INVALID_ARGUMENT,"Function "+k+"() requires all "+V+" elements to be a string or a FieldPath, but the value at index "+_e+" was: "+gt(re[_e]))}(f,"mergeFields",0,I,function(h){return"string"==typeof h||h instanceof x}),void 0!==l.mergeFields&&void 0!==l.merge)throw new G(z.INVALID_ARGUMENT,"Invalid options passed to function "+f+'(): You cannot specify both "merge" and "mergeFields".');var I;return l}function uh(f,l){return void 0===l?{}:(bt(f,l,["serverTimestamps"]),Ee(f,0,"serverTimestamps",l.serverTimestamps,["estimate","previous","none"]),l)}function vw(f,l){rn(f,"object",1,l),l&&(bt(f,l,["source"]),Ee(f,0,"source",l.source,["default","server","cache"]))}function Au(f,l,h){if(l instanceof to){if(l.firestore!==h)throw new G(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return l}throw Tn(f,"DocumentReference",1,l)}function yw(f){switch(f){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}function Ws(f,l,h){return f?h&&(h.merge||h.mergeFields)?f.toFirestore(l,h):f.toFirestore(l):l}var vm=function(f){function l(){return null!==f&&f.apply(this,arguments)||this}return U.__extends(l,f),l.serverTimestamp=function(){Et("FieldValue.serverTimestamp",arguments);var h=new Je("serverTimestamp");return h.e_="FieldValue.serverTimestamp",new l(h)},l.delete=function(){Et("FieldValue.delete",arguments);var h=new X("deleteField");return h.e_="FieldValue.delete",new l(h)},l.arrayUnion=function(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];Kt("FieldValue.arrayUnion",arguments,1);var y=function(){for(var I=[],D=0;D<arguments.length;D++)I[D]=arguments[D];return Kt("arrayUnion()",arguments,1),new Pt("arrayUnion",I)}.apply(void 0,h);return y.e_="FieldValue.arrayUnion",new l(y)},l.arrayRemove=function(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];Kt("FieldValue.arrayRemove",arguments,1);var y=function(){for(var I=[],D=0;D<arguments.length;D++)I[D]=arguments[D];return Kt("arrayRemove()",arguments,1),new Nt("arrayRemove",I)}.apply(void 0,h);return y.e_="FieldValue.arrayRemove",new l(y)},l.increment=function(h){un("FieldValue.increment","number",1,h),ot("FieldValue.increment",arguments,1);var g=new pn("increment",h);return g.e_="FieldValue.increment",new l(g)},l.prototype.isEqual=function(h){return this.l_.isEqual(h.l_)},l}(eo),dT={Firestore:ch,GeoPoint:Gn,Timestamp:Qt,Blob:Vi,Transaction:gm,WriteBatch:_w,DocumentReference:vl,DocumentSnapshot:Qh,Query:Xh,QueryDocumentSnapshot:_m,QuerySnapshot:gd,CollectionReference:Xl,FieldPath:x,FieldValue:vm,setLogLevel:ch.setLogLevel,CACHE_SIZE_UNLIMITED:c_};!function bw(f){f.INTERNAL.registerComponent(new Oe.Component("firestore",function(g){return y=g.getProvider("app").getImmediate(),I=g.getProvider("auth-internal"),D=new Wh,k=new r_(D),new ch(y,I,k,D);var y,I,D,k},"PUBLIC").setServiceProps(Object.assign({},dT))),f.registerVersion("@firebase/firestore","1.18.0")}(Ve.default)},8836:(en,Ae,Q)=>{function c(){for(var de=0,Ne=0,me=arguments.length;Ne<me;Ne++)de+=arguments[Ne].length;var lt=Array(de),st=0;for(Ne=0;Ne<me;Ne++)for(var mt=arguments[Ne],ke=0,at=mt.length;ke<at;ke++,st++)lt[st]=mt[ke];return lt}Q.r(Ae),Q.d(Ae,{LogLevel:()=>pe,Logger:()=>Ve,setLogLevel:()=>z,setUserLogHandler:()=>G});var U,K=[],pe=function(de){return de[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",de}(pe||{}),ce={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},Re=pe.INFO,Oe=((U={})[pe.DEBUG]="log",U[pe.VERBOSE]="log",U[pe.INFO]="info",U[pe.WARN]="warn",U[pe.ERROR]="error",U),ut=function(de,Ne){for(var me=[],lt=2;lt<arguments.length;lt++)me[lt-2]=arguments[lt];if(!(Ne<de.logLevel)){var st=(new Date).toISOString(),mt=Oe[Ne];if(!mt)throw new Error("Attempted to log a message with an invalid logType (value: "+Ne+")");console[mt].apply(console,c(["["+st+"]  "+de.name+":"],me))}},Ve=function(){function de(Ne){this.name=Ne,this._logLevel=Re,this._logHandler=ut,this._userLogHandler=null,K.push(this)}return Object.defineProperty(de.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Ne){if(!(Ne in pe))throw new TypeError('Invalid value "'+Ne+'" assigned to `logLevel`');this._logLevel=Ne},enumerable:!1,configurable:!0}),de.prototype.setLogLevel=function(Ne){this._logLevel="string"==typeof Ne?ce[Ne]:Ne},Object.defineProperty(de.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Ne){if("function"!=typeof Ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ne},enumerable:!1,configurable:!0}),Object.defineProperty(de.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Ne){this._userLogHandler=Ne},enumerable:!1,configurable:!0}),de.prototype.debug=function(){for(var Ne=[],me=0;me<arguments.length;me++)Ne[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,c([this,pe.DEBUG],Ne)),this._logHandler.apply(this,c([this,pe.DEBUG],Ne))},de.prototype.log=function(){for(var Ne=[],me=0;me<arguments.length;me++)Ne[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,c([this,pe.VERBOSE],Ne)),this._logHandler.apply(this,c([this,pe.VERBOSE],Ne))},de.prototype.info=function(){for(var Ne=[],me=0;me<arguments.length;me++)Ne[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,c([this,pe.INFO],Ne)),this._logHandler.apply(this,c([this,pe.INFO],Ne))},de.prototype.warn=function(){for(var Ne=[],me=0;me<arguments.length;me++)Ne[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,c([this,pe.WARN],Ne)),this._logHandler.apply(this,c([this,pe.WARN],Ne))},de.prototype.error=function(){for(var Ne=[],me=0;me<arguments.length;me++)Ne[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,c([this,pe.ERROR],Ne)),this._logHandler.apply(this,c([this,pe.ERROR],Ne))},de}();function z(de){K.forEach(function(Ne){Ne.setLogLevel(de)})}function G(de,Ne){for(var me=function(ke){var at=null;Ne&&Ne.level&&(at=ce[Ne.level]),ke.userLogHandler=null===de?null:function(Ze,Ce){for(var nt=[],$e=2;$e<arguments.length;$e++)nt[$e-2]=arguments[$e];var it=nt.map(function(he){if(null==he)return null;if("string"==typeof he)return he;if("number"==typeof he||"boolean"==typeof he)return he.toString();if(he instanceof Error)return he.message;try{return JSON.stringify(he)}catch{return null}}).filter(function(he){return he}).join(" ");Ce>=(at??Ze.logLevel)&&de({level:pe[Ce].toLowerCase(),message:it,args:nt,type:Ze.name})}},lt=0,st=K;lt<st.length;lt++)me(st[lt])}},3661:(en,Ae,Q)=>{Object.defineProperty(Ae,"__esModule",{value:!0});var c=Q(8005),U={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},K=function(Te,we){if(!Te)throw pe(we)},pe=function(Te){return new Error("Firebase Database ("+U.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Te)},ce=function(Te){for(var we=[],Ie=0,qe=0;qe<Te.length;qe++){var Fe=Te.charCodeAt(qe);Fe<128?we[Ie++]=Fe:Fe<2048?(we[Ie++]=Fe>>6|192,we[Ie++]=63&Fe|128):55296==(64512&Fe)&&qe+1<Te.length&&56320==(64512&Te.charCodeAt(qe+1))?(Fe=65536+((1023&Fe)<<10)+(1023&Te.charCodeAt(++qe)),we[Ie++]=Fe>>18|240,we[Ie++]=Fe>>12&63|128,we[Ie++]=Fe>>6&63|128,we[Ie++]=63&Fe|128):(we[Ie++]=Fe>>12|224,we[Ie++]=Fe>>6&63|128,we[Ie++]=63&Fe|128)}return we},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(Te,we){if(!Array.isArray(Te))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Ie=we?this.byteToCharMapWebSafe_:this.byteToCharMap_,qe=[],Fe=0;Fe<Te.length;Fe+=3){var Ct=Te[Fe],mn=Fe+1<Te.length,jt=mn?Te[Fe+1]:0,Jt=Fe+2<Te.length,Ht=Jt?Te[Fe+2]:0,zn=(15&jt)<<2|Ht>>6,ki=63&Ht;Jt||(ki=64,mn||(zn=64)),qe.push(Ie[Ct>>2],Ie[(3&Ct)<<4|jt>>4],Ie[zn],Ie[ki])}return qe.join("")},encodeString:function(Te,we){return this.HAS_NATIVE_SUPPORT&&!we?btoa(Te):this.encodeByteArray(ce(Te),we)},decodeString:function(Te,we){return this.HAS_NATIVE_SUPPORT&&!we?atob(Te):function(Te){for(var we=[],Ie=0,qe=0;Ie<Te.length;){var Fe=Te[Ie++];if(Fe<128)we[qe++]=String.fromCharCode(Fe);else if(Fe>191&&Fe<224){var Ct=Te[Ie++];we[qe++]=String.fromCharCode((31&Fe)<<6|63&Ct)}else if(Fe>239&&Fe<365){var Jt=((7&Fe)<<18|(63&(Ct=Te[Ie++]))<<12|(63&(mn=Te[Ie++]))<<6|63&Te[Ie++])-65536;we[qe++]=String.fromCharCode(55296+(Jt>>10)),we[qe++]=String.fromCharCode(56320+(1023&Jt))}else{Ct=Te[Ie++];var mn=Te[Ie++];we[qe++]=String.fromCharCode((15&Fe)<<12|(63&Ct)<<6|63&mn)}}return we.join("")}(this.decodeStringToByteArray(Te,we))},decodeStringToByteArray:function(Te,we){this.init_();for(var Ie=we?this.charToByteMapWebSafe_:this.charToByteMap_,qe=[],Fe=0;Fe<Te.length;){var Ct=Ie[Te.charAt(Fe++)],jt=Fe<Te.length?Ie[Te.charAt(Fe)]:0,Ht=++Fe<Te.length?Ie[Te.charAt(Fe)]:64,vi=++Fe<Te.length?Ie[Te.charAt(Fe)]:64;if(++Fe,null==Ct||null==jt||null==Ht||null==vi)throw Error();qe.push(Ct<<2|jt>>4),64!==Ht&&(qe.push(jt<<4&240|Ht>>2),64!==vi&&qe.push(Ht<<6&192|vi))}return qe},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Te=0;Te<this.ENCODED_VALS.length;Te++)this.byteToCharMap_[Te]=this.ENCODED_VALS.charAt(Te),this.charToByteMap_[this.byteToCharMap_[Te]]=Te,this.byteToCharMapWebSafe_[Te]=this.ENCODED_VALS_WEBSAFE.charAt(Te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Te]]=Te,Te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Te)]=Te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Te)]=Te)}}},Ve=function(Te){try{return Oe.decodeString(Te,!0)}catch(we){console.error("base64Decode failed: ",we)}return null};function G(Te,we){if(!(we instanceof Object))return we;switch(we.constructor){case Date:return new Date(we.getTime());case Object:void 0===Te&&(Te={});break;case Array:Te=[];break;default:return we}for(var qe in we)we.hasOwnProperty(qe)&&(Te[qe]=G(Te[qe],we[qe]));return Te}var de=function(){function Te(){var we=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Ie,qe){we.resolve=Ie,we.reject=qe})}return Te.prototype.wrapCallback=function(we){var Ie=this;return function(qe,Fe){qe?Ie.reject(qe):Ie.resolve(Fe),"function"==typeof we&&(Ie.promise.catch(function(){}),1===we.length?we(qe):we(qe,Fe))}},Te}();function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}var Le=function(Te){function we(Ie,qe){var Fe=Te.call(this,qe)||this;return Fe.code=Ie,Fe.name="FirebaseError",Object.setPrototypeOf(Fe,we.prototype),Error.captureStackTrace&&Error.captureStackTrace(Fe,Et.prototype.create),Fe}return c.__extends(we,Te),we}(Error),Et=function(){function Te(we,Ie,qe){this.service=we,this.serviceName=Ie,this.errors=qe}return Te.prototype.create=function(we){for(var Ie=[],qe=1;qe<arguments.length;qe++)Ie[qe-1]=arguments[qe];for(var Fe=Ie[0]||{},Ct=this.service+"/"+we,mn=this.errors[we],jt=mn?function ot(Te,we){return Te.replace(Kt,function(Ie,qe){var Fe=we[qe];return null!=Fe?String(Fe):"<"+qe+"?>"})}(mn,Fe):"Error",Ht=new Le(Ct,this.serviceName+": "+jt+" ("+Ct+")."),Ei=0,vi=Object.keys(Fe);Ei<vi.length;Ei++){var zn=vi[Ei];"_"!==zn.slice(-1)&&(zn in Ht&&console.warn('Overwriting FirebaseError base field "'+zn+'" can cause unexpected behavior.'),Ht[zn]=Fe[zn])}return Ht},Te}(),Kt=/\{\$([^}]+)}/g;function nn(Te){return JSON.parse(Te)}var rn=function(Te){var we={},Ie={},qe={},Fe="";try{var Ct=Te.split(".");we=nn(Ve(Ct[0])||""),Ie=nn(Ve(Ct[1])||""),Fe=Ct[2],qe=Ie.d||{},delete Ie.d}catch{}return{header:we,claims:Ie,data:qe,signature:Fe}},dn=function(){function Te(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var we=1;we<this.blockSize;++we)this.pad_[we]=0;this.reset()}return Te.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Te.prototype.compress_=function(we,Ie){Ie||(Ie=0);var qe=this.W_;if("string"==typeof we)for(var Fe=0;Fe<16;Fe++)qe[Fe]=we.charCodeAt(Ie)<<24|we.charCodeAt(Ie+1)<<16|we.charCodeAt(Ie+2)<<8|we.charCodeAt(Ie+3),Ie+=4;else for(Fe=0;Fe<16;Fe++)qe[Fe]=we[Ie]<<24|we[Ie+1]<<16|we[Ie+2]<<8|we[Ie+3],Ie+=4;for(Fe=16;Fe<80;Fe++)qe[Fe]=4294967295&((Ct=qe[Fe-3]^qe[Fe-8]^qe[Fe-14]^qe[Fe-16])<<1|Ct>>>31);var vi,zn,mn=this.chain_[0],jt=this.chain_[1],Jt=this.chain_[2],Ht=this.chain_[3],Ei=this.chain_[4];for(Fe=0;Fe<80;Fe++){Fe<40?Fe<20?(vi=Ht^jt&(Jt^Ht),zn=1518500249):(vi=jt^Jt^Ht,zn=1859775393):Fe<60?(vi=jt&Jt|Ht&(jt|Jt),zn=2400959708):(vi=jt^Jt^Ht,zn=3395469782);var Ct=(mn<<5|mn>>>27)+vi+Ei+zn+qe[Fe]&4294967295;Ei=Ht,Ht=Jt,Jt=4294967295&(jt<<30|jt>>>2),jt=mn,mn=Ct}this.chain_[0]=this.chain_[0]+mn&4294967295,this.chain_[1]=this.chain_[1]+jt&4294967295,this.chain_[2]=this.chain_[2]+Jt&4294967295,this.chain_[3]=this.chain_[3]+Ht&4294967295,this.chain_[4]=this.chain_[4]+Ei&4294967295},Te.prototype.update=function(we,Ie){if(null!=we){void 0===Ie&&(Ie=we.length);for(var qe=Ie-this.blockSize,Fe=0,Ct=this.buf_,mn=this.inbuf_;Fe<Ie;){if(0===mn)for(;Fe<=qe;)this.compress_(we,Fe),Fe+=this.blockSize;if("string"==typeof we){for(;Fe<Ie;)if(Ct[mn]=we.charCodeAt(Fe),++Fe,++mn===this.blockSize){this.compress_(Ct),mn=0;break}}else for(;Fe<Ie;)if(Ct[mn]=we[Fe],++Fe,++mn===this.blockSize){this.compress_(Ct),mn=0;break}}this.inbuf_=mn,this.total_+=Ie}},Te.prototype.digest=function(){var we=[],Ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var qe=this.blockSize-1;qe>=56;qe--)this.buf_[qe]=255&Ie,Ie/=256;this.compress_(this.buf_);var Fe=0;for(qe=0;qe<5;qe++)for(var Ct=24;Ct>=0;Ct-=8)we[Fe]=this.chain_[qe]>>Ct&255,++Fe;return we},Te}(),fn=function(){function Te(we,Ie){var qe=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ie,this.task.then(function(){we(qe)}).catch(function(Fe){qe.error(Fe)})}return Te.prototype.next=function(we){this.forEachObserver(function(Ie){Ie.next(we)})},Te.prototype.error=function(we){this.forEachObserver(function(Ie){Ie.error(we)}),this.close(we)},Te.prototype.complete=function(){this.forEachObserver(function(we){we.complete()}),this.close()},Te.prototype.subscribe=function(we,Ie,qe){var Ct,Fe=this;if(void 0===we&&void 0===Ie&&void 0===qe)throw new Error("Missing Observer.");Ct=function Dn(Te,we){if("object"!=typeof Te||null===Te)return!1;for(var Ie=0,qe=we;Ie<qe.length;Ie++){var Fe=qe[Ie];if(Fe in Te&&"function"==typeof Te[Fe])return!0}return!1}(we,["next","error","complete"])?we:{next:we,error:Ie,complete:qe},void 0===Ct.next&&(Ct.next=Ut),void 0===Ct.error&&(Ct.error=Ut),void 0===Ct.complete&&(Ct.complete=Ut);var mn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Fe.finalError?Ct.error(Fe.finalError):Ct.complete()}catch{}}),this.observers.push(Ct),mn},Te.prototype.unsubscribeOne=function(we){void 0===this.observers||void 0===this.observers[we]||(delete this.observers[we],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Te.prototype.forEachObserver=function(we){if(!this.finalized)for(var Ie=0;Ie<this.observers.length;Ie++)this.sendOne(Ie,we)},Te.prototype.sendOne=function(we,Ie){var qe=this;this.task.then(function(){if(void 0!==qe.observers&&void 0!==qe.observers[we])try{Ie(qe.observers[we])}catch(Fe){typeof console<"u"&&console.error&&console.error(Fe)}})},Te.prototype.close=function(we){var Ie=this;this.finalized||(this.finalized=!0,void 0!==we&&(this.finalError=we),this.task.then(function(){Ie.observers=void 0,Ie.onNoObservers=void 0}))},Te}();function Ut(){}function Fn(Te,we,Ie){var qe="";switch(we){case 1:qe=Ie?"first":"First";break;case 2:qe=Ie?"second":"Second";break;case 3:qe=Ie?"third":"Third";break;case 4:qe=Ie?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return Te+" failed: "+(qe+" argument ")}Ae.CONSTANTS=U,Ae.Deferred=de,Ae.ErrorFactory=Et,Ae.FirebaseError=Le,Ae.MAX_VALUE_MILLIS=144e5,Ae.RANDOM_FACTOR=.5,Ae.Sha1=dn,Ae.areCookiesEnabled=function ue(){return!(!navigator||!navigator.cookieEnabled)},Ae.assert=K,Ae.assertionError=pe,Ae.async=function tn(Te,we){return function(){for(var Ie=[],qe=0;qe<arguments.length;qe++)Ie[qe]=arguments[qe];Promise.resolve(!0).then(function(){Te.apply(void 0,Ie)}).catch(function(Fe){we&&we(Fe)})}},Ae.base64=Oe,Ae.base64Decode=Ve,Ae.base64Encode=function(Te){var we=ce(Te);return Oe.encodeByteArray(we,!0)},Ae.calculateBackoffMillis=function zt(Te,we,Ie){void 0===we&&(we=1e3),void 0===Ie&&(Ie=2);var qe=we*Math.pow(Ie,Te),Fe=Math.round(.5*qe*(Math.random()-.5)*2);return Math.min(144e5,qe+Fe)},Ae.contains=function je(Te,we){return Object.prototype.hasOwnProperty.call(Te,we)},Ae.createSubscribe=function Nn(Te,we){var Ie=new fn(Te,we);return Ie.subscribe.bind(Ie)},Ae.decode=rn,Ae.deepCopy=function z(Te){return G(void 0,Te)},Ae.deepExtend=G,Ae.errorPrefix=Fn,Ae.getUA=Ne,Ae.isAdmin=function(Te){var we=rn(Te).claims;return"object"==typeof we&&!0===we.admin},Ae.isBrowser=function st(){return"object"==typeof self&&self.self===self},Ae.isBrowserExtension=function mt(){var Te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Te&&void 0!==Te.id},Ae.isElectron=function at(){return Ne().indexOf("Electron/")>=0},Ae.isEmpty=function gt(Te){for(var we in Te)if(Object.prototype.hasOwnProperty.call(Te,we))return!1;return!0},Ae.isIE=function Ze(){var Te=Ne();return Te.indexOf("MSIE ")>=0||Te.indexOf("Trident/")>=0},Ae.isIndexedDBAvailable=function it(){return"indexedDB"in self&&null!=indexedDB},Ae.isMobileCordova=function me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())},Ae.isNode=lt,Ae.isNodeSdk=function nt(){return!0===U.NODE_CLIENT||!0===U.NODE_ADMIN},Ae.isReactNative=function ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product},Ae.isSafari=function $e(){return!lt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},Ae.isUWP=function Ce(){return Ne().indexOf("MSAppHost/")>=0},Ae.isValidFormat=function(Te){var Ie=rn(Te).claims;return!!Ie&&"object"==typeof Ie&&Ie.hasOwnProperty("iat")},Ae.isValidTimestamp=function(Te){var we=rn(Te).claims,Ie=Math.floor((new Date).getTime()/1e3),qe=0,Fe=0;return"object"==typeof we&&(we.hasOwnProperty("nbf")?qe=we.nbf:we.hasOwnProperty("iat")&&(qe=we.iat),Fe=we.hasOwnProperty("exp")?we.exp:qe+86400),!!Ie&&!!qe&&!!Fe&&Ie>=qe&&Ie<=Fe},Ae.issuedAtTime=function(Te){var we=rn(Te).claims;return"object"==typeof we&&we.hasOwnProperty("iat")?we.iat:null},Ae.jsonEval=nn,Ae.map=function At(Te,we,Ie){var qe={};for(var Fe in Te)Object.prototype.hasOwnProperty.call(Te,Fe)&&(qe[Fe]=we.call(Ie,Te[Fe],Fe,Te));return qe},Ae.querystring=function bt(Te){for(var we=[],Ie=function(Jt,Ht){Array.isArray(Ht)?Ht.forEach(function(Ei){we.push(encodeURIComponent(Jt)+"="+encodeURIComponent(Ei))}):we.push(encodeURIComponent(Jt)+"="+encodeURIComponent(Ht))},qe=0,Fe=Object.entries(Te);qe<Fe.length;qe++){var Ct=Fe[qe];Ie(Ct[0],Ct[1])}return we.length?"&"+we.join("&"):""},Ae.querystringDecode=function Tn(Te){var we={};return Te.replace(/^\?/,"").split("&").forEach(function(qe){if(qe){var Fe=qe.split("=");we[Fe[0]]=Fe[1]}}),we},Ae.safeGet=function ct(Te,we){if(Object.prototype.hasOwnProperty.call(Te,we))return Te[we]},Ae.stringLength=function(Te){for(var we=0,Ie=0;Ie<Te.length;Ie++){var qe=Te.charCodeAt(Ie);qe<128?we++:qe<2048?we+=2:qe>=55296&&qe<=56319?(we+=4,Ie++):we+=3}return we},Ae.stringToByteArray=function(Te){for(var we=[],Ie=0,qe=0;qe<Te.length;qe++){var Fe=Te.charCodeAt(qe);if(Fe>=55296&&Fe<=56319){var Ct=Fe-55296;qe++,K(qe<Te.length,"Surrogate pair missing trail surrogate."),Fe=65536+(Ct<<10)+(Te.charCodeAt(qe)-56320)}Fe<128?we[Ie++]=Fe:Fe<2048?(we[Ie++]=Fe>>6|192,we[Ie++]=63&Fe|128):Fe<65536?(we[Ie++]=Fe>>12|224,we[Ie++]=Fe>>6&63|128,we[Ie++]=63&Fe|128):(we[Ie++]=Fe>>18|240,we[Ie++]=Fe>>12&63|128,we[Ie++]=Fe>>6&63|128,we[Ie++]=63&Fe|128)}return we},Ae.stringify=function un(Te){return JSON.stringify(Te)},Ae.validateArgCount=function(Te,we,Ie,qe){var Fe;if(qe<we?Fe="at least "+we:qe>Ie&&(Fe=0===Ie?"none":"no more than "+Ie),Fe)throw new Error(Te+" failed: Was called with "+qe+(1===qe?" argument.":" arguments.")+" Expects "+Fe+".")},Ae.validateCallback=function wi(Te,we,Ie,qe){if((!qe||Ie)&&"function"!=typeof Ie)throw new Error(Fn(Te,we,qe)+"must be a valid function.")},Ae.validateContextObject=function Si(Te,we,Ie,qe){if((!qe||Ie)&&("object"!=typeof Ie||null===Ie))throw new Error(Fn(Te,we,qe)+"must be a valid context object.")},Ae.validateIndexedDBOpenable=function he(){return new Promise(function(Te,we){try{var Ie=!0,qe="validate-browser-context-for-indexeddb-analytics-module",Fe=window.indexedDB.open(qe);Fe.onsuccess=function(){Fe.result.close(),Ie||window.indexedDB.deleteDatabase(qe),Te(!0)},Fe.onupgradeneeded=function(){Ie=!1},Fe.onerror=function(){var Ct;we((null===(Ct=Fe.error)||void 0===Ct?void 0:Ct.message)||"")}}catch(Ct){we(Ct)}})},Ae.validateNamespace=function Un(Te,we,Ie,qe){if((!qe||Ie)&&"string"!=typeof Ie)throw new Error(Fn(Te,we,qe)+"must be a valid firebase namespace.")}},8602:(en,Ae,Q)=>{Q.r(Ae),Q.d(Ae,{ErrorCode:()=>Mc,EventType:()=>wo,WebChannel:()=>Bs,XhrIo:()=>Oc,createWebChannelTransport:()=>Jo,default:()=>Oa});var c=function(E,N){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,ee){j.__proto__=ee}||function(j,ee){for(var ve in ee)Object.prototype.hasOwnProperty.call(ee,ve)&&(j[ve]=ee[ve])})(E,N)};function K(E){var N="function"==typeof Symbol&&Symbol.iterator,j=N&&E[N],ee=0;if(j)return j.call(E);if(E&&"number"==typeof E.length)return{next:function(){return E&&ee>=E.length&&(E=void 0),{value:E&&E[ee++],done:!E}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}var ce,pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Re=Re||{},Oe=pe||self;function ut(){}function Ve(E){var N=typeof E;return"object"!=N?N:E?Array.isArray(E)?"array":N:"null"}function z(E){var N=Ve(E);return"array"==N||"object"==N&&"number"==typeof E.length}function G(E){var N=typeof E;return"object"==N&&null!=E||"function"==N}var Ne="closure_uid_"+(1e9*Math.random()>>>0),me=0;function lt(E,N,j){return E.call.apply(E.bind,arguments)}function st(E,N,j){if(!E)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var ve=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ve,ee),E.apply(N,ve)}}return function(){return E.apply(N,arguments)}}function mt(E,N,j){return(mt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lt:st).apply(null,arguments)}function ke(E,N){var j=Array.prototype.slice.call(arguments,1);return function(){var ee=j.slice();return ee.push.apply(ee,arguments),E.apply(this,ee)}}var at=Date.now;function Ze(E,N){function j(){}j.prototype=N.prototype,E.S=N.prototype,E.prototype=new j,E.prototype.constructor=E}function Ce(){this.j=this.j,this.i=this.i}Ce.prototype.j=!1,Ce.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function de(E){Object.prototype.hasOwnProperty.call(E,Ne)&&E[Ne]||(E[Ne]=++me)}(this)},Ce.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var $e=Array.prototype.indexOf?function(E,N){return Array.prototype.indexOf.call(E,N,void 0)}:function(E,N){if("string"==typeof E)return"string"!=typeof N||1!=N.length?-1:E.indexOf(N,0);for(var j=0;j<E.length;j++)if(j in E&&E[j]===N)return j;return-1},it=Array.prototype.forEach?function(E,N,j){Array.prototype.forEach.call(E,N,j)}:function(E,N,j){for(var ee=E.length,ve="string"==typeof E?E.split(""):E,Ye=0;Ye<ee;Ye++)Ye in ve&&N.call(j,ve[Ye],Ye,E)};function ue(E){return Array.prototype.concat.apply([],arguments)}function Ge(E){var N=E.length;if(0<N){for(var j=Array(N),ee=0;ee<N;ee++)j[ee]=E[ee];return j}return[]}function Le(E){return/^[\s\xa0]*$/.test(E)}var nn,Et=String.prototype.trim?function(E){return E.trim()}:function(E){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(E)[1]};function ot(E,N){return-1!=E.indexOf(N)}function Kt(E,N){return E<N?-1:E>N?1:0}e:{var un=Oe.navigator;if(un){var rn=un.userAgent;if(rn){nn=rn;break e}}nn=""}function fi(E,N,j){for(var ee in E)N.call(j,E[ee],ee,E)}function De(E){var N={};for(var j in E)N[j]=E[j];return N}var Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(E,N){for(var j,ee,ve=1;ve<arguments.length;ve++){for(j in ee=arguments[ve])E[j]=ee[j];for(var Ye=0;Ye<Ee.length;Ye++)j=Ee[Ye],Object.prototype.hasOwnProperty.call(ee,j)&&(E[j]=ee[j])}}function je(E){return je[" "](E),E}je[" "]=ut;var tn,E,gt=ot(nn,"Opera"),At=ot(nn,"Trident")||ot(nn,"MSIE"),bt=ot(nn,"Edge"),Tn=bt||At,dn=ot(nn,"Gecko")&&!(ot(nn.toLowerCase(),"webkit")&&!ot(nn,"Edge"))&&!(ot(nn,"Trident")||ot(nn,"MSIE"))&&!ot(nn,"Edge"),Nn=ot(nn.toLowerCase(),"webkit")&&!ot(nn,"Edge");function fn(){var E=Oe.document;return E?E.documentMode:void 0}e:{var Dn="",Ut=(E=nn,dn?/rv:([^\);]+)(\)|;)/.exec(E):bt?/Edge\/([\d\.]+)/.exec(E):At?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(E):Nn?/WebKit\/(\S+)/.exec(E):gt?/(?:Version)[ \/]?(\S+)/.exec(E):void 0);if(Ut&&(Dn=Ut?Ut[1]:""),At){var cn=fn();if(null!=cn&&cn>parseFloat(Dn)){tn=String(cn);break e}}tn=Dn}var Fn={};function Un(E){return function ct(E,N){var j=Fn;return Object.prototype.hasOwnProperty.call(j,E)?j[E]:j[E]=N(E)}(E,function(){for(var N=0,j=Et(String(tn)).split("."),ee=Et(String(E)).split("."),ve=Math.max(j.length,ee.length),Ye=0;0==N&&Ye<ve;Ye++){var kt=j[Ye]||"",qn=ee[Ye]||"";do{if(kt=/(\d*)(\D*)(.*)/.exec(kt)||["","","",""],qn=/(\d*)(\D*)(.*)/.exec(qn)||["","","",""],0==kt[0].length&&0==qn[0].length)break;N=Kt(0==kt[1].length?0:parseInt(kt[1],10),0==qn[1].length?0:parseInt(qn[1],10))||Kt(0==kt[2].length,0==qn[2].length)||Kt(kt[2],qn[2]),kt=kt[3],qn=qn[3]}while(0==N)}return 0<=N})}var ti=Oe.document&&At&&(fn()||parseInt(tn,10))||void 0,Vi=!At||9<=Number(ti),Ro=At&&!Un("9"),sn=function(){if(!Oe.addEventListener||!Object.defineProperty)return!1;var E=!1,N=Object.defineProperty({},"passive",{get:function(){E=!0}});try{Oe.addEventListener("test",ut,N),Oe.removeEventListener("test",ut,N)}catch{}return E}();function Yt(E,N){this.type=E,this.a=this.target=N,this.defaultPrevented=!1}function Qt(E,N){if(Yt.call(this,E?E.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,E){var j=this.type=E.type,ee=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;if(this.target=E.target||E.srcElement,this.a=N,N=E.relatedTarget){if(dn){e:{try{je(N.nodeName);var ve=!0;break e}catch{}ve=!1}ve||(N=null)}}else"mouseover"==j?N=E.fromElement:"mouseout"==j&&(N=E.toElement);this.relatedTarget=N,ee?(this.clientX=void 0!==ee.clientX?ee.clientX:ee.pageX,this.clientY=void 0!==ee.clientY?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=void 0!==E.clientX?E.clientX:E.pageX,this.clientY=void 0!==E.clientY?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType="string"==typeof E.pointerType?E.pointerType:zt[E.pointerType]||"",this.c=E,E.defaultPrevented&&this.b()}}Yt.prototype.b=function(){this.defaultPrevented=!0},Ze(Qt,Yt);var zt={2:"touch",3:"pen",4:"mouse"};Qt.prototype.b=function(){Qt.S.b.call(this);var E=this.c;if(E.preventDefault)E.preventDefault();else if(E.returnValue=!1,Ro)try{(E.ctrlKey||112<=E.keyCode&&123>=E.keyCode)&&(E.keyCode=-1)}catch{}};var Te="closure_listenable_"+(1e6*Math.random()|0),we=0;function Ie(E,N,j,ee,ve){this.listener=E,this.proxy=null,this.src=N,this.type=j,this.capture=!!ee,this.ca=ve,this.key=++we,this.Y=this.Z=!1}function qe(E){E.Y=!0,E.listener=null,E.proxy=null,E.src=null,E.ca=null}function Fe(E){this.src=E,this.a={},this.b=0}function Ct(E,N){var j=N.type;if(j in E.a){var Ye,ee=E.a[j],ve=$e(ee,N);(Ye=0<=ve)&&Array.prototype.splice.call(ee,ve,1),Ye&&(qe(N),0==E.a[j].length&&(delete E.a[j],E.b--))}}function mn(E,N,j,ee){for(var ve=0;ve<E.length;++ve){var Ye=E[ve];if(!Ye.Y&&Ye.listener==N&&Ye.capture==!!j&&Ye.ca==ee)return ve}return-1}Fe.prototype.add=function(E,N,j,ee,ve){var Ye=E.toString();(E=this.a[Ye])||(E=this.a[Ye]=[],this.b++);var kt=mn(E,N,ee,ve);return-1<kt?(N=E[kt],j||(N.Z=!1)):((N=new Ie(N,this.src,Ye,!!ee,ve)).Z=j,E.push(N)),N};var jt="closure_lm_"+(1e6*Math.random()|0),Jt={};function Ht(E,N,j,ee,ve){if(ee&&ee.once)return zn(E,N,j,ee,ve);if(Array.isArray(N)){for(var Ye=0;Ye<N.length;Ye++)Ht(E,N[Ye],j,ee,ve);return null}return j=fe(j),E&&E[Te]?E.va(N,j,G(ee)?!!ee.capture:!!ee,ve):Ei(E,N,j,!1,ee,ve)}function Ei(E,N,j,ee,ve,Ye){if(!N)throw Error("Invalid event type");var kt=G(ve)?!!ve.capture:!!ve;if(kt&&!Vi)return null;var qn=gr(E);if(qn||(E[jt]=qn=new Fe(E)),(j=qn.add(N,j,ee,kt,Ye)).proxy)return j;if(ee=function vi(){var E=Ci,N=Vi?function(j){return E.call(N.src,N.listener,j)}:function(j){if(!(j=E.call(N.src,N.listener,j)))return j};return N}(),j.proxy=ee,ee.src=E,ee.listener=j,E.addEventListener)sn||(ve=kt),void 0===ve&&(ve=!1),E.addEventListener(N.toString(),ee,ve);else if(E.attachEvent)E.attachEvent(mr(N.toString()),ee);else{if(!E.addListener||!E.removeListener)throw Error("addEventListener and attachEvent are unavailable.");E.addListener(ee)}return j}function zn(E,N,j,ee,ve){if(Array.isArray(N)){for(var Ye=0;Ye<N.length;Ye++)zn(E,N[Ye],j,ee,ve);return null}return j=fe(j),E&&E[Te]?E.wa(N,j,G(ee)?!!ee.capture:!!ee,ve):Ei(E,N,j,!0,ee,ve)}function ki(E,N,j,ee,ve){if(Array.isArray(N))for(var Ye=0;Ye<N.length;Ye++)ki(E,N[Ye],j,ee,ve);else ee=G(ee)?!!ee.capture:!!ee,j=fe(j),E&&E[Te]?(E=E.c,(N=String(N).toString())in E.a&&-1<(j=mn(Ye=E.a[N],j,ee,ve))&&(qe(Ye[j]),Array.prototype.splice.call(Ye,j,1),0==Ye.length&&(delete E.a[N],E.b--))):E&&(E=gr(E))&&(N=E.a[N.toString()],E=-1,N&&(E=mn(N,j,ee,ve)),(j=-1<E?N[E]:null)&&Hn(j))}function Hn(E){if("number"!=typeof E&&E&&!E.Y){var N=E.src;if(N&&N[Te])Ct(N.c,E);else{var j=E.type,ee=E.proxy;N.removeEventListener?N.removeEventListener(j,ee,E.capture):N.detachEvent?N.detachEvent(mr(j),ee):N.addListener&&N.removeListener&&N.removeListener(ee),(j=gr(N))?(Ct(j,E),0==j.b&&(j.src=null,N[jt]=null)):qe(E)}}}function mr(E){return E in Jt?Jt[E]:Jt[E]="on"+E}function pi(E,N){var j=E.listener,ee=E.ca||E.src;return E.Z&&Hn(E),j.call(ee,N)}function Ci(E,N){if(E.Y)return!0;if(!Vi){if(!N)e:{N=["window","event"];for(var j=Oe,ee=0;ee<N.length;ee++)if(null==(j=j[N[ee]])){N=null;break e}N=j}return pi(E,N=new Qt(N,this))}return pi(E,new Qt(N,this))}function gr(E){return(E=E[jt])instanceof Fe?E:null}var mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(E){return"function"==Ve(E)?E:(E[mo]||(E[mo]=function(N){return E.handleEvent(N)}),E[mo])}function le(){Ce.call(this),this.c=new Fe(this),this.J=this,this.C=null}function J(E,N,j,ee){if(!(N=E.c.a[String(N)]))return!0;N=N.concat();for(var ve=!0,Ye=0;Ye<N.length;++Ye){var kt=N[Ye];if(kt&&!kt.Y&&kt.capture==j){var qn=kt.listener,ei=kt.ca||kt.src;kt.Z&&Ct(E.c,kt),ve=!1!==qn.call(ei,ee)&&ve}}return ve&&!ee.defaultPrevented}Ze(le,Ce),le.prototype[Te]=!0,(ce=le.prototype).addEventListener=function(E,N,j,ee){Ht(this,E,N,j,ee)},ce.removeEventListener=function(E,N,j,ee){ki(this,E,N,j,ee)},ce.dispatchEvent=function(E){var N,j=this.C;if(j)for(N=[];j;j=j.C)N.push(j);j=this.J;var ee=E.type||E;if("string"==typeof E)E=new Yt(E,j);else if(E instanceof Yt)E.target=E.target||j;else{var ve=E;He(E=new Yt(ee,j),ve)}if(ve=!0,N)for(var Ye=N.length-1;0<=Ye;Ye--){var kt=E.a=N[Ye];ve=J(kt,ee,!0,E)&&ve}if(ve=J(kt=E.a=j,ee,!0,E)&&ve,ve=J(kt,ee,!1,E)&&ve,N)for(Ye=0;Ye<N.length;Ye++)ve=J(kt=E.a=N[Ye],ee,!1,E)&&ve;return ve},ce.G=function(){if(le.S.G.call(this),this.c){var N,E=this.c;for(N in E.a){for(var j=E.a[N],ee=0;ee<j.length;ee++)qe(j[ee]);delete E.a[N],E.b--}}this.C=null},ce.va=function(E,N,j,ee){return this.c.add(String(E),N,!1,j,ee)},ce.wa=function(E,N,j,ee){return this.c.add(String(E),N,!0,j,ee)};var te=Oe.JSON.stringify;function Y(){this.b=this.a=null}var Xn,Me=new(function(){function E(N,j,ee){this.f=ee,this.c=N,this.g=j,this.b=0,this.a=null}return E.prototype.get=function(){var N;return 0<this.b?(this.b--,this.a=(N=this.a).next,N.next=null):N=this.c(),N},E}())(function(){return new St},function(E){E.reset()},100);function Qe(){var E=kn,N=null;return E.a&&(N=E.a,E.a=E.a.next,E.a||(E.b=null),N.next=null),N}function St(){this.next=this.b=this.a=null}function yn(E){Oe.setTimeout(function(){throw E},0)}function Vt(E,N){Xn||function En(){var E=Oe.Promise.resolve(void 0);Xn=function(){E.then(_r)}}(),ai||(Xn(),ai=!0),kn.add(E,N)}Y.prototype.add=function(E,N){var j=Me.get();j.set(E,N),this.b?this.b.next=j:this.a=j,this.b=j},St.prototype.set=function(E,N){this.a=E,this.b=N,this.next=null},St.prototype.reset=function(){this.next=this.b=this.a=null};var ai=!1,kn=new Y;function _r(){for(var E;E=Qe();){try{E.a.call(E.b)}catch(j){yn(j)}var N=Me;N.g(E),N.b<N.f&&(N.b++,E.next=N.a,N.a=E)}ai=!1}function Zo(E,N){le.call(this),this.b=E||1,this.a=N||Oe,this.f=mt(this.Ya,this),this.g=at()}function Xe(E){E.aa=!1,E.M&&(E.a.clearTimeout(E.M),E.M=null)}function ze(E,N,j){if("function"==Ve(E))j&&(E=mt(E,j));else{if(!E||"function"!=typeof E.handleEvent)throw Error("Invalid listener argument");E=mt(E.handleEvent,E)}return 2147483647<Number(N)?-1:Oe.setTimeout(E,N||0)}function _t(E){E.a=ze(function(){E.a=null,E.c&&(E.c=!1,_t(E))},E.h);var N=E.b;E.b=null,E.g.apply(null,N)}Ze(Zo,le),(ce=Zo.prototype).aa=!1,ce.M=null,ce.Ya=function(){if(this.aa){var E=at()-this.g;0<E&&E<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-E):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Xe(this),this.start()))}},ce.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=at())},ce.G=function(){Zo.S.G.call(this),Xe(this),delete this.a};var Zt=function(E){function N(j,ee,ve){var Ye=E.call(this)||this;return Ye.g=null!=ve?j.bind(ve):j,Ye.h=ee,Ye.b=null,Ye.c=!1,Ye.a=null,Ye}return function U(E,N){function j(){this.constructor=E}c(E,N),E.prototype=null===N?Object.create(N):(j.prototype=N.prototype,new j)}(N,E),N.prototype.f=function(j){this.b=arguments,this.a?this.c=!0:_t(this)},N.prototype.G=function(){E.prototype.G.call(this),this.a&&(Oe.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},N}(Ce);function Rt(E){Ce.call(this),this.b=E,this.a={}}Ze(Rt,Ce);var On=[];function ri(E,N,j,ee){Array.isArray(j)||(j&&(On[0]=j.toString()),j=On);for(var ve=0;ve<j.length;ve++){var Ye=Ht(N,j[ve],ee||E.handleEvent,!1,E.b||E);if(!Ye)break;E.a[Ye.key]=Ye}}function Hi(E){fi(E.a,function(N,j){this.a.hasOwnProperty(j)&&Hn(N)},E),E.a={}}function qi(){this.a=!0}function go(E,N,j,ee){E.info(function(){return"XMLHTTP TEXT ("+N+"): "+function Ko(E,N){if(!E.a)return N;if(!N)return null;try{var j=JSON.parse(N);if(j)for(E=0;E<j.length;E++)if(Array.isArray(j[E])){var ee=j[E];if(!(2>ee.length)){var ve=ee[1];if(Array.isArray(ve)&&!(1>ve.length)){var Ye=ve[0];if("noop"!=Ye&&"stop"!=Ye&&"close"!=Ye)for(var kt=1;kt<ve.length;kt++)ve[kt]=""}}}return te(j)}catch{return N}}(E,j)+(ee?" "+ee:"")})}Rt.prototype.G=function(){Rt.S.G.call(this),Hi(this)},Rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qi.prototype.info=function(){};var cs=null;function ms(){return cs=cs||new le}function Yo(E){Yt.call(this,"serverreachability",E)}function ni(E){var N=ms();N.dispatchEvent(new Yo(N,E))}function Ai(E){Yt.call(this,"statevent",E)}function _o(E){var N=ms();N.dispatchEvent(new Ai(N,E))}function Qi(E){Yt.call(this,"timingevent",E)}function _c(E,N){if("function"!=Ve(E))throw Error("Fn must not be null and must be a function");return Oe.setTimeout(function(){E()},N)}Ze(Yo,Yt),Ze(Ai,Yt),Ze(Qi,Yt);var Ka={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},$r={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ks(){}function Zu(){}ks.prototype.a=null;var Ns,ea={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function vc(){Yt.call(this,"d")}function yc(){Yt.call(this,"c")}function ta(){}function el(E,N,j,ee){this.g=E,this.c=N,this.f=j,this.T=ee||1,this.J=new Rt(this),this.P=ko,this.R=new Zo(E=Tn?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}Ze(vc,Yt),Ze(yc,Yt),Ze(ta,ks),Ns=new ta;var ko=45e3,vo={},vr={};function Qa(E,N,j){E.H=1,E.i=Qo(It(N)),E.j=j,E.I=!0,na(E,null)}function na(E,N){E.u=at(),ia(E),E.l=It(E.i);var j=E.l,ee=E.T;Array.isArray(ee)||(ee=[String(ee)]),Fi(j.b,"t",ee),E.D=0,E.a=Vs(E.g,E.g.C?N:null),0<E.O&&(E.F=new Zt(mt(E.Ca,E,E.a),E.O)),ri(E.J,E.a,"readystatechange",E.Wa),N=E.B?De(E.B):{},E.j?(E.m||(E.m="POST"),N["Content-Type"]="application/x-www-form-urlencoded",E.a.ba(E.l,E.m,E.j,N)):(E.m="GET",E.a.ba(E.l,E.m,null,N)),ni(1),function Yi(E,N,j,ee,ve,Ye){E.info(function(){if(E.a)if(Ye)for(var kt="",qn=Ye.split("&"),ei=0;ei<qn.length;ei++){var lr=qn[ei].split("=");if(1<lr.length){var Eo=lr[0];lr=lr[1];var es=Eo.split("_");kt=2<=es.length&&"type"==es[1]?kt+(Eo+"=")+lr+"&":kt+(Eo+"=redacted&")}}else kt=null;else kt=Ye;return"XMLHTTP REQ ("+ee+") [attempt "+ve+"]: "+N+"\n"+j+"\n"+kt})}(E.c,E.m,E.l,E.f,E.T,E.j)}function Mr(E,N,j){for(var ee=!0;!E.A&&E.D<j.length;){var ve=bc(E,j);if(ve==vr){4==N&&(E.h=4,_o(14),ee=!1),go(E.c,E.f,null,"[Incomplete Response]");break}if(ve==vo){E.h=4,_o(15),go(E.c,E.f,j,"[Invalid Chunk]"),ee=!1;break}go(E.c,E.f,ve,null),yr(E,ve)}4==N&&0==j.length&&(E.h=1,_o(16),ee=!1),E.b=E.b&&ee,ee?0<j.length&&!E.W&&(E.W=!0,(N=E.g).a==E&&N.V&&!N.F&&(N.c.info("Great, no buffering proxy detected. Bytes received: "+j.length),Vo(N),N.F=!0)):(go(E.c,E.f,j,"[Invalid Chunked Response]"),Ni(E),Bn(E))}function bc(E,N){var j=E.D,ee=N.indexOf("\n",j);return-1==ee?vr:(j=Number(N.substring(j,ee)),isNaN(j)?vo:(ee+=1)+j>N.length?vr:(N=N.substr(ee,j),E.D=ee+j,N))}function ia(E){E.U=at()+E.P,gs(E,E.P)}function gs(E,N){if(null!=E.o)throw Error("WatchDog timer not null");E.o=_c(mt(E.Ua,E),N)}function Xa(E){E.o&&(Oe.clearTimeout(E.o),E.o=null)}function Bn(E){0==E.g.v||E.A||Yr(E.g,E)}function Ni(E){Xa(E);var N=E.F;N&&"function"==typeof N.ja&&N.ja(),E.F=null,Xe(E.R),Hi(E.J),E.a&&(N=E.a,E.a=null,N.abort(),N.ja())}function yr(E,N){try{var j=E.g;if(0!=j.v&&(j.a==E||tr(j.b,E)))if(j.I=E.N,!E.C&&tr(j.b,E)&&3==j.v){try{var ee=j.ka.a.parse(N)}catch{ee=null}if(Array.isArray(ee)&&3==ee.length){var ve=ee;if(0==ve[0]){e:if(!j.j){if(j.a){if(!(j.a.u+3e3<E.u))break e;Aa(j),yo(j)}Sc(j),_o(18)}}else j.oa=ve[1],0<j.oa-j.P&&37500>ve[2]&&j.H&&0==j.o&&!j.m&&(j.m=_c(mt(j.Ra,j),6e3));if(1>=Or(j.b)&&j.ea){try{j.ea()}catch{}j.ea=void 0}}else bo(j,11)}else if((E.C||j.a==E)&&Aa(j),!Le(N))for(N=ee=j.ka.a.parse(N),ee=0;ee<N.length;ee++)if(j.P=(ve=N[ee])[0],ve=ve[1],2==j.v)if("c"==ve[0]){j.J=ve[1],j.ga=ve[2];var Ye=ve[3];null!=Ye&&(j.ha=Ye,j.c.info("VER="+j.ha));var kt=ve[4];null!=kt&&(j.pa=kt,j.c.info("SVER="+j.pa));var qn=ve[5];if(null!=qn&&"number"==typeof qn&&0<qn){var ei=1.5*qn;j.D=ei,j.c.info("backChannelRequestTimeoutMs_="+ei)}ei=j;var lr=E.a;if(lr){var Eo=lr.a?lr.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eo){var es=ei.b;!es.a&&(ot(Eo,"spdy")||ot(Eo,"quic")||ot(Eo,"h2"))&&(es.f=es.g,es.a=new Set,es.b&&(Wr(es,es.b),es.b=null))}if(ei.A){var Pc=lr.a?lr.a.getResponseHeader("X-HTTP-Session-Id"):null;Pc&&(ei.na=Pc,$n(ei.B,ei.A,Pc))}}j.v=3,j.f&&j.f.ta(),j.V&&(j.N=at()-E.u,j.c.info("Handshake RTT: "+j.N+"ms"));var js=E;if((ei=j).la=Ll(ei,ei.C?ei.ga:null,ei.fa),js.C){sa(ei.b,js);var rl=js,Co=ei.D;Co&&rl.setTimeout(Co),rl.o&&(Xa(rl),ia(rl)),ei.a=js}else la(ei);0<j.g.length&&ys(j)}else"stop"!=ve[0]&&"close"!=ve[0]||bo(j,7);else 3==j.v&&("stop"==ve[0]||"close"==ve[0]?"stop"==ve[0]?bo(j,7):ec(j):"noop"!=ve[0]&&j.f&&j.f.sa(ve),j.o=0);ni(4)}catch{}}function br(E,N){if(E.forEach&&"function"==typeof E.forEach)E.forEach(N,void 0);else if(z(E)||"string"==typeof E)it(E,N,void 0);else{if(E.L&&"function"==typeof E.L)var j=E.L();else if(E.K&&"function"==typeof E.K)j=void 0;else if(z(E)||"string"==typeof E){j=[];for(var ee=E.length,ve=0;ve<ee;ve++)j.push(ve)}else for(ve in j=[],ee=0,E)j[ee++]=ve;ee=function xa(E){if(E.K&&"function"==typeof E.K)return E.K();if("string"==typeof E)return E.split("");if(z(E)){for(var N=[],j=E.length,ee=0;ee<j;ee++)N.push(E[ee]);return N}for(ee in N=[],j=0,E)N[j++]=E[ee];return N}(E),ve=ee.length;for(var Ye=0;Ye<ve;Ye++)N.call(void 0,ee[Ye],j&&j[Ye],E)}}function wc(E,N){this.b={},this.a=[],this.c=0;var j=arguments.length;if(1<j){if(j%2)throw Error("Uneven number of arguments");for(var ee=0;ee<j;ee+=2)this.set(arguments[ee],arguments[ee+1])}else if(E)if(E instanceof wc)for(j=E.L(),ee=0;ee<j.length;ee++)this.set(j[ee],E.get(j[ee]));else for(ee in E)this.set(ee,E[ee])}function Ec(E){if(E.c!=E.a.length){for(var N=0,j=0;N<E.a.length;){var ee=E.a[N];No(E.b,ee)&&(E.a[j++]=ee),N++}E.a.length=j}if(E.c!=E.a.length){var ve={};for(j=N=0;N<E.a.length;)No(ve,ee=E.a[N])||(E.a[j++]=ee,ve[ee]=1),N++;E.a.length=j}}function No(E,N){return Object.prototype.hasOwnProperty.call(E,N)}(ce=el.prototype).setTimeout=function(E){this.P=E},ce.Wa=function(E){E=E.target;var N=this.F;N&&3==mi(E)?N.f():this.Ca(E)},ce.Ca=function(E){try{if(E==this.a)e:{var N=mi(this.a),j=this.a.ua(),ee=this.a.X();if(!(3>N||3==N&&!Tn&&!this.a.$())){this.A||4!=N||7==j||ni(8==j||0>=ee?3:2),Xa(this);var ve=this.a.X();this.N=ve;var Ye=this.a.$();if(this.b=200==ve,function Ur(E,N,j,ee,ve,Ye,kt){E.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+ve+"]: "+N+"\n"+j+"\n"+Ye+" "+kt})}(this.c,this.m,this.l,this.f,this.T,N,ve),this.b){if(this.V&&!this.C){t:{if(this.a){var kt,qn=this.a;if((kt=qn.a?qn.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Le(kt)){var ei=kt;break t}}ei=null}if(!ei){this.b=!1,this.h=3,_o(12),Ni(this),Bn(this);break e}go(this.c,this.f,ei,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,yr(this,ei)}this.I?(Mr(this,N,Ye),Tn&&this.b&&3==N&&(ri(this.J,this.R,"tick",this.Va),this.R.start())):(go(this.c,this.f,Ye,null),yr(this,Ye)),4==N&&Ni(this),this.b&&!this.A&&(4==N?Yr(this.g,this):(this.b=!1,ia(this)))}else 400==ve&&0<Ye.indexOf("Unknown SID")?(this.h=3,_o(12)):(this.h=0,_o(13)),Ni(this),Bn(this)}}}catch{}},ce.Va=function(){if(this.a){var E=mi(this.a),N=this.a.$();this.D<N.length&&(Xa(this),Mr(this,E,N),this.b&&4!=E&&ia(this))}},ce.cancel=function(){this.A=!0,Ni(this)},ce.Ua=function(){this.o=null;var E=at();0<=E-this.U?(function Ia(E,N){E.info(function(){return"TIMEOUT: "+N})}(this.c,this.l),2!=this.H&&(ni(3),_o(17)),Ni(this),this.h=2,Bn(this)):gs(this,this.U-E)},(ce=wc.prototype).K=function(){Ec(this);for(var E=[],N=0;N<this.a.length;N++)E.push(this.b[this.a[N]]);return E},ce.L=function(){return Ec(this),this.a.concat()},ce.get=function(E,N){return No(this.b,E)?this.b[E]:N},ce.set=function(E,N){No(this.b,E)||(this.c++,this.a.push(E)),this.b[E]=N},ce.forEach=function(E,N){for(var j=this.L(),ee=0;ee<j.length;ee++){var ve=j[ee],Ye=this.get(ve);E.call(N,Ye,ve,this)}};var Fs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mi(E,N){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,E instanceof Mi){this.a=void 0!==N?N:E.a,Cn(this,E.f),this.j=E.j,Ii(this,E.c),so(this,E.h),this.g=E.g,N=E.b;var j=new Cr;j.c=N.c,N.a&&(j.a=new wc(N.a),j.b=N.b),Ls(this,j),this.i=E.i}else E&&(j=String(E).match(Fs))?(this.a=!!N,Cn(this,j[1]||"",!0),this.j=Xo(j[2]||""),Ii(this,j[3]||"",!0),so(this,j[4]),this.g=Xo(j[5]||"",!0),Ls(this,j[6]||"",!0),this.i=Xo(j[7]||"")):(this.a=!!N,this.b=new Cr(null,this.a))}function It(E){return new Mi(E)}function Cn(E,N,j){E.f=j?Xo(N,!0):N,E.f&&(E.f=E.f.replace(/:$/,""))}function Ii(E,N,j){E.c=j?Xo(N,!0):N}function so(E,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);E.h=N}else E.h=null}function Ls(E,N,j){N instanceof Cr?(E.b=N,function Gr(E,N){N&&!E.f&&(Ir(E),E.c=null,E.a.forEach(function(j,ee){var ve=ee.toLowerCase();ee!=ve&&(oa(this,ee),Fi(this,ve,j))},E)),E.f=N}(E.b,E.a)):(j||(N=on(N,_s)),E.b=new Cr(N,E.a))}function $n(E,N,j){E.b.set(N,j)}function Qo(E){return $n(E,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^at()).toString(36)),E}function Xo(E,N){return E?N?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function on(E,N,j){return"string"==typeof E?(E=encodeURI(E).replace(N,qr),j&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function qr(E){return"%"+((E=E.charCodeAt(0))>>4&15).toString(16)+(15&E).toString(16)}Mi.prototype.toString=function(){var E=[],N=this.f;N&&E.push(on(N,Rl,!0),":");var j=this.c;return(j||"file"==N)&&(E.push("//"),(N=this.j)&&E.push(on(N,Rl,!0),"@"),E.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(j=this.h)&&E.push(":",String(j))),(j=this.g)&&(this.c&&"/"!=j.charAt(0)&&E.push("/"),E.push(on(j,"/"==j.charAt(0)?Er:wr,!0))),(j=this.b.toString())&&E.push("?",j),(j=this.i)&&E.push("#",on(j,Fo)),E.join("")};var Rl=/[#\/\?@]/g,wr=/[#\?:]/g,Er=/[#\?]/g,_s=/[#\?@]/g,Fo=/#/g;function Cr(E,N){this.b=this.a=null,this.c=E||null,this.f=!!N}function Ir(E){E.a||(E.a=new wc,E.b=0,E.c&&function Cc(E,N){if(E){E=E.split("&");for(var j=0;j<E.length;j++){var ee=E[j].indexOf("="),ve=null;if(0<=ee){var Ye=E[j].substring(0,ee);ve=E[j].substring(ee+1)}else Ye=E[j];N(Ye,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}(E.c,function(N,j){E.add(decodeURIComponent(N.replace(/\+/g," ")),j)}))}function oa(E,N){Ir(E),N=Lo(E,N),No(E.a.b,N)&&(E.c=null,E.b-=E.a.get(N).length,No((E=E.a).b,N)&&(delete E.b[N],E.c--,E.a.length>2*E.c&&Ec(E)))}function Ta(E,N){return Ir(E),N=Lo(E,N),No(E.a.b,N)}function Fi(E,N,j){oa(E,N),0<j.length&&(E.c=null,E.a.set(Lo(E,N),Ge(j)),E.b+=j.length)}function Lo(E,N){return N=String(N),E.f&&(N=N.toLowerCase()),N}function Jn(E,N){this.b=E,this.a=N}function Ic(E){this.g=E||hu,E=Oe.PerformanceNavigationTiming?0<(E=Oe.performance.getEntriesByType("navigation")).length&&("hq"==E[0].nextHopProtocol||"h2"==E[0].nextHopProtocol):!!(Oe.ia&&Oe.ia.ya&&Oe.ia.ya()&&Oe.ia.ya().qb),this.f=E?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(ce=Cr.prototype).add=function(E,N){Ir(this),this.c=null,E=Lo(this,E);var j=this.a.get(E);return j||this.a.set(E,j=[]),j.push(N),this.b+=1,this},ce.forEach=function(E,N){Ir(this),this.a.forEach(function(j,ee){it(j,function(ve){E.call(N,ve,ee,this)},this)},this)},ce.L=function(){Ir(this);for(var E=this.a.K(),N=this.a.L(),j=[],ee=0;ee<N.length;ee++)for(var ve=E[ee],Ye=0;Ye<ve.length;Ye++)j.push(N[ee]);return j},ce.K=function(E){Ir(this);var N=[];if("string"==typeof E)Ta(this,E)&&(N=ue(N,this.a.get(Lo(this,E))));else{E=this.a.K();for(var j=0;j<E.length;j++)N=ue(N,E[j])}return N},ce.set=function(E,N){return Ir(this),this.c=null,Ta(this,E=Lo(this,E))&&(this.b-=this.a.get(E).length),this.a.set(E,[N]),this.b+=1,this},ce.get=function(E,N){return E&&0<(E=this.K(E)).length?String(E[0]):N},ce.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var E=[],N=this.a.L(),j=0;j<N.length;j++){var ee=N[j],ve=encodeURIComponent(String(ee));ee=this.K(ee);for(var Ye=0;Ye<ee.length;Ye++){var kt=ve;""!==ee[Ye]&&(kt+="="+encodeURIComponent(String(ee[Ye]))),E.push(kt)}}return this.c=E.join("&")};var hu=10;function Da(E){return!!E.b||!!E.a&&E.a.size>=E.f}function Or(E){return E.b?1:E.a?E.a.size:0}function tr(E,N){return E.b?E.b==N:!!E.a&&E.a.has(N)}function Wr(E,N){E.a?E.a.add(N):E.b=N}function sa(E,N){E.b&&E.b==N?E.b=null:E.a&&E.a.has(N)&&E.a.delete(N)}function Bi(E){var N,j;if(null!=E.b)return E.c.concat(E.b.s);if(null!=E.a&&0!==E.a.size){var ee=E.c;try{for(var ve=K(E.a.values()),Ye=ve.next();!Ye.done;Ye=ve.next())ee=ee.concat(Ye.value.s)}catch(qn){N={error:qn}}finally{try{Ye&&!Ye.done&&(j=ve.return)&&j.call(ve)}finally{if(N)throw N.error}}return ee}return Ge(E.c)}function tl(){}function Zr(){this.a=new tl}function xr(E,N,j){var ee=j||"";try{br(E,function(ve,Ye){var kt=ve;G(ve)&&(kt=te(ve)),N.push(ee+Ye+"="+encodeURIComponent(kt))})}catch(ve){throw N.push(ee+"type="+encodeURIComponent("_badmap")),ve}}function Pr(E,N,j,ee,ve){try{N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null,ve(ee)}catch{}}Ic.prototype.cancel=function(){var E,N;if(this.c=Bi(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var j=K(this.a.values()),ee=j.next();!ee.done;ee=j.next())ee.value.cancel()}catch(Ye){E={error:Ye}}finally{try{ee&&!ee.done&&(N=j.return)&&N.call(j)}finally{if(E)throw E.error}}this.a.clear()}},tl.prototype.stringify=function(E){return Oe.JSON.stringify(E,void 0)},tl.prototype.parse=function(E){return Oe.JSON.parse(E,void 0)};var Kr=Oe.JSON.parse;function di(E){le.call(this),this.headers=new wc,this.H=E||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=aa,this.D=this.F=!1}Ze(di,le);var aa="",oi=/^https?$/i,Rr=["POST","PUT"];function vs(E){return"content-type"==E.toLowerCase()}function xc(E,N){E.b=!1,E.a&&(E.g=!0,E.a.abort(),E.g=!1),E.f=N,E.h=5,Sa(E),Ja(E)}function Sa(E){E.u||(E.u=!0,E.dispatchEvent("complete"),E.dispatchEvent("error"))}function Tc(E){if(E.b&&typeof Re<"u"&&(!E.s[1]||4!=mi(E)||2!=E.X()))if(E.l&&4==mi(E))ze(E.za,0,E);else if(E.dispatchEvent("readystatechange"),4==mi(E)){E.b=!1;try{var ee,N=E.X();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}if(!(ee=j)){var ve;if(ve=0===N){var Ye=String(E.B).match(Fs)[1]||null;if(!Ye&&Oe.self&&Oe.self.location){var kt=Oe.self.location.protocol;Ye=kt.substr(0,kt.length-1)}ve=!oi.test(Ye?Ye.toLowerCase():"")}ee=ve}if(ee)E.dispatchEvent("complete"),E.dispatchEvent("success");else{E.h=6;try{var qn=2<mi(E)?E.a.statusText:""}catch{qn=""}E.f=qn+" ["+E.X()+"]",Sa(E)}}finally{Ja(E)}}}function Ja(E,N){if(E.a){Nl(E);var j=E.a,ee=E.s[0]?ut:null;E.a=null,E.s=null,N||E.dispatchEvent("ready");try{j.onreadystatechange=ee}catch{}}}function Nl(E){E.a&&E.D&&(E.a.ontimeout=null),E.m&&(Oe.clearTimeout(E.m),E.m=null)}function mi(E){return E.a?E.a.readyState:0}function Dc(E,N,j){e:{for(ee in j){var ee=!1;break e}ee=!0}ee||(j=function fu(E){var N="";return fi(E,function(j,ee){N+=ee,N+=":",N+=j,N+="\r\n"}),N}(j),"string"==typeof E?null!=j&&encodeURIComponent(String(j)):$n(E,N,j))}function Uo(E,N,j){return j&&j.internalChannelParams&&j.internalChannelParams[E]||N}function $d(E){this.pa=0,this.g=[],this.c=new qi,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Uo("failFast",!1,E),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Uo("baseRetryDelayMs",5e3,E),this.Ma=Uo("retryDelaySeedMs",1e4,E),this.Ja=Uo("forwardChannelMaxRetries",2,E),this.ma=Uo("forwardChannelRequestTimeoutMs",2e4,E),this.Ka=E&&E.g||void 0,this.D=void 0,this.C=E&&E.supportsCrossDomainXhr||!1,this.J="",this.b=new Ic(E&&E.concurrentRequestLimit),this.ka=new Zr,this.da=E&&E.fastHandshake||!1,this.Ga=E&&E.b||!1,E&&E.f&&(this.c.a=!1),E&&E.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&E&&E.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function ec(E){if(tc(E),3==E.v){var N=E.R++,j=It(E.B);$n(j,"SID",E.J),$n(j,"RID",N),$n(j,"TYPE","terminate"),kr(E,j),(N=new el(E,E.c,N,void 0)).H=2,N.i=Qo(It(j)),j=!1,Oe.navigator&&Oe.navigator.sendBeacon&&(j=Oe.navigator.sendBeacon(N.i.toString(),"")),!j&&Oe.Image&&((new Image).src=N.i,j=!0),j||(N.a=Vs(N.g,null),N.a.ba(N.i)),N.u=at(),ia(N)}nc(E)}function yo(E){E.a&&(Vo(E),E.a.cancel(),E.a=null)}function tc(E){yo(E),E.j&&(Oe.clearTimeout(E.j),E.j=null),Aa(E),E.b.cancel(),E.h&&("number"==typeof E.h&&Oe.clearTimeout(E.h),E.h=null)}function ca(E,N){E.g.push(new Jn(E.La++,N)),3==E.v&&ys(E)}function ys(E){Da(E.b)||E.h||(E.h=!0,Vt(E.Ba,E),E.u=0)}function pu(E,N){var j;j=N?N.f:E.R++;var ee=It(E.B);$n(ee,"SID",E.J),$n(ee,"RID",j),$n(ee,"AID",E.P),kr(E,ee),E.i&&E.l&&Dc(ee,E.i,E.l),j=new el(E,E.c,j,E.u+1),null===E.i&&(j.B=E.l),N&&(E.g=N.s.concat(E.g)),N=Us(E,j,1e3),j.setTimeout(Math.round(.5*E.ma)+Math.round(.5*E.ma*Math.random())),Wr(E.b,j),Qa(j,ee,N)}function kr(E,N){E.f&&br({},function(j,ee){$n(N,ee,j)})}function Us(E,N,j){j=Math.min(E.g.length,j);var ee=E.f?mt(E.f.Ha,E.f,E):null;e:for(var ve=E.g,Ye=-1;;){var kt=["count="+j];-1==Ye?0<j?kt.push("ofs="+(Ye=ve[0].b)):Ye=0:kt.push("ofs="+Ye);for(var qn=!0,ei=0;ei<j;ei++){var lr=ve[ei].b,Eo=ve[ei].a;if(0>(lr-=Ye))Ye=Math.max(0,ve[ei].b-100),qn=!1;else try{xr(Eo,kt,"req"+lr+"_")}catch{ee&&ee(Eo)}}if(qn){ee=kt.join("&");break e}}return E=E.g.splice(0,j),N.s=E,ee}function la(E){E.a||E.j||(E.U=1,Vt(E.Aa,E),E.o=0)}function Sc(E){return!(E.a||E.j||3<=E.o||(E.U++,E.j=_c(mt(E.Aa,E),Ac(E,E.o)),E.o++,0))}function Vo(E){null!=E.s&&(Oe.clearTimeout(E.s),E.s=null)}function cr(E){E.a=new el(E,E.c,"rpc",E.U),null===E.i&&(E.a.B=E.l),E.a.O=0;var N=It(E.la);$n(N,"RID","rpc"),$n(N,"SID",E.J),$n(N,"CI",E.H?"0":"1"),$n(N,"AID",E.P),kr(E,N),$n(N,"TYPE","xmlhttp"),E.i&&E.l&&Dc(N,E.i,E.l),E.D&&E.a.setTimeout(E.D);var j=E.a;E=E.ga,j.H=1,j.i=Qo(It(N)),j.j=null,j.I=!0,na(j,E)}function Aa(E){null!=E.m&&(Oe.clearTimeout(E.m),E.m=null)}function Yr(E,N){var j=null;if(E.a==N){Aa(E),Vo(E),E.a=null;var ee=2}else{if(!tr(E.b,N))return;j=N.s,sa(E.b,N),ee=1}if(E.I=N.N,0!=E.v)if(N.b)if(1==ee){j=N.j?N.j.length:0,N=at()-N.u;var ve=E.u;(ee=ms()).dispatchEvent(new Qi(ee,j,N,ve)),ys(E)}else la(E);else if(3==(ve=N.h)||0==ve&&0<E.I||!(1==ee&&function Fl(E,N){return!(Or(E.b)>=E.b.f-(E.h?1:0)||(E.h?(E.g=N.s.concat(E.g),0):1==E.v||2==E.v||E.u>=(E.Ia?0:E.Ja)||(E.h=_c(mt(E.Ba,E,N),Ac(E,E.u)),E.u++,0)))}(E,N)||2==ee&&Sc(E)))switch(j&&0<j.length&&(N=E.b,N.c=N.c.concat(j)),ve){case 1:bo(E,5);break;case 4:bo(E,10);break;case 3:bo(E,6);break;default:bo(E,2)}}function Ac(E,N){var j=E.Fa+Math.floor(Math.random()*E.Ma);return E.f||(j*=2),j*N}function bo(E,N){if(E.c.info("Error code "+N),2==N){var j=null;E.f&&(j=null);var ee=mt(E.Xa,E);j||(j=new Mi("//www.google.com/images/cleardot.gif"),Oe.location&&"http"==Oe.location.protocol||Cn(j,"https"),Qo(j)),function nl(E,N){var j=new qi;if(Oe.Image){var ee=new Image;ee.onload=ke(Pr,j,ee,"TestLoadImage: loaded",!0,N),ee.onerror=ke(Pr,j,ee,"TestLoadImage: error",!1,N),ee.onabort=ke(Pr,j,ee,"TestLoadImage: abort",!1,N),ee.ontimeout=ke(Pr,j,ee,"TestLoadImage: timeout",!1,N),Oe.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=E}else N(!1)}(j.toString(),ee)}else _o(2);E.v=0,E.f&&E.f.ra(N),nc(E),tc(E)}function nc(E){E.v=0,E.I=-1,E.f&&((0!=Bi(E.b).length||0!=E.g.length)&&(E.b.c.length=0,Ge(E.g),E.g.length=0),E.f.qa())}function Ll(E,N,j){var ee=function Oi(E){return E instanceof Mi?It(E):new Mi(E,void 0)}(j);if(""!=ee.c)N&&Ii(ee,N+"."+ee.c),so(ee,ee.h);else{var ve=Oe.location;ee=function ra(E,N,j,ee){var ve=new Mi(null,void 0);return E&&Cn(ve,E),N&&Ii(ve,N),j&&so(ve,j),ee&&(ve.g=ee),ve}(ve.protocol,N?N+"."+ve.hostname:ve.hostname,+ve.port,j)}return E.W&&fi(E.W,function(Ye,kt){$n(ee,kt,Ye)}),j=E.na,(N=E.A)&&j&&$n(ee,N,j),$n(ee,"VER",E.ha),kr(E,ee),ee}function Vs(E,N){if(N&&!E.C)throw Error("Can't create secondary domain capable XhrIo object.");return(N=new di(E.Ka)).F=E.C,N}function ua(){}function il(){if(At&&!(10<=Number(ti)))throw Error("Environmental error: no available transport.")}function yi(E,N){le.call(this),this.a=new $d(N),this.l=E,this.b=N&&N.messageUrlParams||null,E=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.a.l=E,E=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(E?E["X-WebChannel-Content-Type"]=N.messageContentType:E={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.a&&(E?E["X-WebChannel-Client-Profile"]=N.a:E={"X-WebChannel-Client-Profile":N.a}),this.a.O=E,(E=N&&N.httpHeadersOverwriteParam)&&!Le(E)&&(this.a.i=E),this.h=N&&N.supportsCrossDomainXhr||!1,this.g=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!Le(N)&&(this.a.A=N,null!==(E=this.b)&&N in E&&N in(E=this.b)&&delete E[N]),this.f=new xt(this)}function Bo(E){vc.call(this);var N=E.__sm__;if(N){e:{for(var j in N){E=j;break e}E=void 0}(this.c=E)?(E=this.c,this.data=null!==N&&E in N?N[E]:void 0):this.data=N}else this.data=E}function Ma(){yc.call(this),this.status=1}function xt(E){this.a=E}(ce=di.prototype).ba=function(E,N,j,ee){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+E);N=N?N.toUpperCase():"GET",this.B=E,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function Ya(E){var N;return(N=E.a)||(N=E.a={}),N}(this.H?this.H:Ns),this.a.onreadystatechange=mt(this.za,this);try{this.A=!0,this.a.open(N,String(E),!0),this.A=!1}catch(Ye){return void xc(this,Ye)}E=j||"";var ve=new wc(this.headers);ee&&br(ee,function(Ye,kt){ve.set(kt,Ye)}),ee=function he(E){e:{for(var N=vs,j=E.length,ee="string"==typeof E?E.split(""):E,ve=0;ve<j;ve++)if(ve in ee&&N.call(void 0,ee[ve],ve,E)){N=ve;break e}N=-1}return 0>N?null:"string"==typeof E?E.charAt(N):E[N]}(ve.L()),j=Oe.FormData&&E instanceof Oe.FormData,!(0<=$e(Rr,N))||ee||j||ve.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),ve.forEach(function(Ye,kt){this.a.setRequestHeader(kt,Ye)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Nl(this),0<this.o&&((this.D=function kl(E){return At&&Un(9)&&"number"==typeof E.timeout&&void 0!==E.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=mt(this.xa,this)):this.m=ze(this.xa,this.o,this)),this.l=!0,this.a.send(E),this.l=!1}catch(Ye){xc(this,Ye)}},ce.xa=function(){typeof Re<"u"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},ce.abort=function(E){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=E||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ja(this))},ce.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ja(this,!0)),di.S.G.call(this)},ce.za=function(){this.j||(this.A||this.l||this.g?Tc(this):this.Ta())},ce.Ta=function(){Tc(this)},ce.X=function(){try{return 2<mi(this)?this.a.status:-1}catch{return-1}},ce.$=function(){try{return this.a?this.a.responseText:""}catch{return""}},ce.Na=function(E){if(this.a){var N=this.a.responseText;return E&&0==N.indexOf(E)&&(N=N.substring(E.length)),Kr(N)}},ce.ua=function(){return this.h},ce.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ce=$d.prototype).ha=8,ce.v=1,ce.Ba=function(E){if(this.h)if(this.h=null,1==this.v){if(!E){this.R=Math.floor(1e5*Math.random()),E=this.R++;var ee,N=new el(this,this.c,E,void 0),j=this.l;if(this.O&&(j?He(j=De(j),this.O):j=this.O),null===this.i&&(N.B=j),this.da)e:{for(var ve=ee=0;ve<this.g.length;ve++){var Ye=this.g[ve];if(void 0===(Ye="__data__"in Ye.a&&"string"==typeof(Ye=Ye.a.__data__)?Ye.length:void 0))break;if(4096<(ee+=Ye)){ee=ve;break e}if(4096===ee||ve===this.g.length-1){ee=ve+1;break e}}ee=1e3}else ee=1e3;ee=Us(this,N,ee),$n(ve=It(this.B),"RID",E),$n(ve,"CVER",22),this.A&&$n(ve,"X-HTTP-Session-Id",this.A),kr(this,ve),this.i&&j&&Dc(ve,this.i,j),Wr(this.b,N),this.Ga&&$n(ve,"TYPE","init"),this.da?($n(ve,"$req",ee),$n(ve,"SID","null"),N.V=!0,Qa(N,ve,null)):Qa(N,ve,ee),this.v=2}}else 3==this.v&&(E?pu(this,E):0==this.g.length||Da(this.b)||pu(this))},ce.Aa=function(){if(this.j=null,cr(this),this.V&&!(this.F||null==this.a||0>=this.N)){var E=2*this.N;this.c.info("BP detection timer enabled: "+E),this.s=_c(mt(this.Sa,this),E)}},ce.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,yo(this),cr(this))},ce.Ra=function(){null!=this.m&&(this.m=null,yo(this),Sc(this),_o(19))},ce.Xa=function(E){E?(this.c.info("Successfully pinged google.com"),_o(2)):(this.c.info("Failed to ping google.com"),_o(1))},(ce=ua.prototype).ta=function(){},ce.sa=function(){},ce.ra=function(){},ce.qa=function(){},ce.Ha=function(){},il.prototype.a=function(E,N){return new yi(E,N)},Ze(yi,le),(ce=yi.prototype).addEventListener=function(E,N,j,ee){yi.S.addEventListener.call(this,E,N,j,ee)},ce.removeEventListener=function(E,N,j,ee){yi.S.removeEventListener.call(this,E,N,j,ee)},ce.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var E=this.a,N=this.l,j=this.b||void 0;_o(0),E.fa=N,E.W=j||{},E.H=E.T,E.B=Ll(E,null,E.fa),ys(E)},ce.close=function(){ec(this.a)},ce.Pa=function(E){if("string"==typeof E){var N={};N.__data__=E,ca(this.a,N)}else this.g?((N={}).__data__=te(E),ca(this.a,N)):ca(this.a,E)},ce.G=function(){this.a.f=null,delete this.f,ec(this.a),delete this.a,yi.S.G.call(this)},Ze(Bo,vc),Ze(Ma,yc),Ze(xt,ua),xt.prototype.ta=function(){this.a.dispatchEvent("a")},xt.prototype.sa=function(E){this.a.dispatchEvent(new Bo(E))},xt.prototype.ra=function(E){this.a.dispatchEvent(new Ma(E))},xt.prototype.qa=function(){this.a.dispatchEvent("b")},il.prototype.createWebChannel=il.prototype.a,yi.prototype.send=yi.prototype.Pa,yi.prototype.open=yi.prototype.Oa,yi.prototype.close=yi.prototype.close,Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,$r.COMPLETE="complete",Zu.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",le.prototype.listen=le.prototype.va,di.prototype.listenOnce=di.prototype.wa,di.prototype.getLastError=di.prototype.Qa,di.prototype.getLastErrorCode=di.prototype.ua,di.prototype.getStatus=di.prototype.X,di.prototype.getResponseJson=di.prototype.Na,di.prototype.getResponseText=di.prototype.$,di.prototype.send=di.prototype.ba;var Jo=function(){return new il},Mc=Ka,wo=$r,Bs=Zu,Oc=di;const Oa={createWebChannelTransport:Jo,ErrorCode:Ka,EventType:$r,WebChannel:Zu,XhrIo:di}},5619:(en,Ae,Q)=>{Q.d(Ae,{X:()=>U});var c=Q(8645);class U extends c.x{constructor(pe){super(),this._value=pe}get value(){return this.getValue()}_subscribe(pe){const ce=super._subscribe(pe);return!ce.closed&&pe.next(this._value),ce}getValue(){const{hasError:pe,thrownError:ce,_value:Re}=this;if(pe)throw ce;return this._throwIfClosed(),Re}next(pe){super.next(this._value=pe)}}},5592:(en,Ae,Q)=>{Q.d(Ae,{y:()=>ut});var c=Q(305),U=Q(7394),K=Q(4850),pe=Q(8407),ce=Q(2653),Re=Q(4674),Oe=Q(1441);let ut=(()=>{class de{constructor(me){me&&(this._subscribe=me)}lift(me){const lt=new de;return lt.source=this,lt.operator=me,lt}subscribe(me,lt,st){const mt=function G(de){return de&&de instanceof c.Lv||function z(de){return de&&(0,Re.m)(de.next)&&(0,Re.m)(de.error)&&(0,Re.m)(de.complete)}(de)&&(0,U.Nn)(de)}(me)?me:new c.Hp(me,lt,st);return(0,Oe.x)(()=>{const{operator:ke,source:at}=this;mt.add(ke?ke.call(mt,at):at?this._subscribe(mt):this._trySubscribe(mt))}),mt}_trySubscribe(me){try{return this._subscribe(me)}catch(lt){me.error(lt)}}forEach(me,lt){return new(lt=Ve(lt))((st,mt)=>{const ke=new c.Hp({next:at=>{try{me(at)}catch(Ze){mt(Ze),ke.unsubscribe()}},error:mt,complete:st});this.subscribe(ke)})}_subscribe(me){var lt;return null===(lt=this.source)||void 0===lt?void 0:lt.subscribe(me)}[K.L](){return this}pipe(...me){return(0,pe.U)(me)(this)}toPromise(me){return new(me=Ve(me))((lt,st)=>{let mt;this.subscribe(ke=>mt=ke,ke=>st(ke),()=>lt(mt))})}}return de.create=Ne=>new de(Ne),de})();function Ve(de){var Ne;return null!==(Ne=de??ce.config.Promise)&&void 0!==Ne?Ne:Promise}},8645:(en,Ae,Q)=>{Q.d(Ae,{x:()=>Oe});var c=Q(5592),U=Q(7394);const pe=(0,Q(2306).d)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=Q(9039),Re=Q(1441);let Oe=(()=>{class Ve extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const de=new ut(this,this);return de.operator=G,de}_throwIfClosed(){if(this.closed)throw new pe}next(G){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const de of this.currentObservers)de.next(G)}})}error(G){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:de}=this;for(;de.length;)de.shift().error(G)}})}complete(){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:de,isStopped:Ne,observers:me}=this;return de||Ne?U.Lc:(this.currentObservers=null,me.push(G),new U.w0(()=>{this.currentObservers=null,(0,ce.P)(me,G)}))}_checkFinalizedStatuses(G){const{hasError:de,thrownError:Ne,isStopped:me}=this;de?G.error(Ne):me&&G.complete()}asObservable(){const G=new c.y;return G.source=this,G}}return Ve.create=(z,G)=>new ut(z,G),Ve})();class ut extends Oe{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,de;null===(de=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===de||de.call(G,z)}error(z){var G,de;null===(de=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===de||de.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,de;return null!==(de=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==de?de:U.Lc}}},305:(en,Ae,Q)=>{Q.d(Ae,{Hp:()=>st,Lv:()=>de});var c=Q(4674),U=Q(7394),K=Q(2653),pe=Q(3894),ce=Q(2420);const Re=Ve("C",void 0,void 0);function Ve(Ce,nt,$e){return{kind:Ce,value:nt,error:$e}}var z=Q(7599),G=Q(1441);class de extends U.w0{constructor(nt){super(),this.isStopped=!1,nt?(this.destination=nt,(0,U.Nn)(nt)&&nt.add(this)):this.destination=Ze}static create(nt,$e,it){return new st(nt,$e,it)}next(nt){this.isStopped?at(function ut(Ce){return Ve("N",Ce,void 0)}(nt),this):this._next(nt)}error(nt){this.isStopped?at(function Oe(Ce){return Ve("E",void 0,Ce)}(nt),this):(this.isStopped=!0,this._error(nt))}complete(){this.isStopped?at(Re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(nt){this.destination.next(nt)}_error(nt){try{this.destination.error(nt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ne=Function.prototype.bind;function me(Ce,nt){return Ne.call(Ce,nt)}class lt{constructor(nt){this.partialObserver=nt}next(nt){const{partialObserver:$e}=this;if($e.next)try{$e.next(nt)}catch(it){mt(it)}}error(nt){const{partialObserver:$e}=this;if($e.error)try{$e.error(nt)}catch(it){mt(it)}else mt(nt)}complete(){const{partialObserver:nt}=this;if(nt.complete)try{nt.complete()}catch($e){mt($e)}}}class st extends de{constructor(nt,$e,it){let he;if(super(),(0,c.m)(nt)||!nt)he={next:nt??void 0,error:$e??void 0,complete:it??void 0};else{let ue;this&&K.config.useDeprecatedNextContext?(ue=Object.create(nt),ue.unsubscribe=()=>this.unsubscribe(),he={next:nt.next&&me(nt.next,ue),error:nt.error&&me(nt.error,ue),complete:nt.complete&&me(nt.complete,ue)}):he=nt}this.destination=new lt(he)}}function mt(Ce){K.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ce):(0,pe.h)(Ce)}function at(Ce,nt){const{onStoppedNotification:$e}=K.config;$e&&z.z.setTimeout(()=>$e(Ce,nt))}const Ze={closed:!0,next:ce.Z,error:function ke(Ce){throw Ce},complete:ce.Z}},7394:(en,Ae,Q)=>{Q.d(Ae,{Lc:()=>Re,w0:()=>ce,Nn:()=>Oe});var c=Q(4674);const K=(0,Q(2306).d)(Ve=>function(G){Ve(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((de,Ne)=>`${Ne+1}) ${de.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var pe=Q(9039);class ce{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const me of G)me.remove(this);else G.remove(this);const{initialTeardown:de}=this;if((0,c.m)(de))try{de()}catch(me){z=me instanceof K?me.errors:[me]}const{_finalizers:Ne}=this;if(Ne){this._finalizers=null;for(const me of Ne)try{ut(me)}catch(lt){z=z??[],lt instanceof K?z=[...z,...lt.errors]:z.push(lt)}}if(z)throw new K(z)}}add(z){var G;if(z&&z!==this)if(this.closed)ut(z);else{if(z instanceof ce){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,pe.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,pe.P)(G,z),z instanceof ce&&z._removeParent(this)}}ce.EMPTY=(()=>{const Ve=new ce;return Ve.closed=!0,Ve})();const Re=ce.EMPTY;function Oe(Ve){return Ve instanceof ce||Ve&&"closed"in Ve&&(0,c.m)(Ve.remove)&&(0,c.m)(Ve.add)&&(0,c.m)(Ve.unsubscribe)}function ut(Ve){(0,c.m)(Ve)?Ve():Ve.unsubscribe()}},2653:(en,Ae,Q)=>{Q.d(Ae,{config:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(en,Ae,Q)=>{Q.d(Ae,{E:()=>U});const U=new(Q(5592).y)(ce=>ce.complete())},2459:(en,Ae,Q)=>{Q.d(Ae,{D:()=>nt});var c=Q(4829),U=Q(3093),K=Q(5137),Re=Q(5592),ut=Q(4971),Ve=Q(4674),z=Q(7103);function de($e,it){if(!$e)throw new Error("Iterable cannot be null");return new Re.y(he=>{(0,z.f)(he,it,()=>{const ue=$e[Symbol.asyncIterator]();(0,z.f)(he,it,()=>{ue.next().then(Ge=>{Ge.done?he.complete():he.next(Ge.value)})},0,!0)})})}var Ne=Q(8382),me=Q(4026),lt=Q(4266),st=Q(3664),mt=Q(5726),ke=Q(9853),at=Q(541);function nt($e,it){return it?function Ce($e,it){if(null!=$e){if((0,Ne.c)($e))return function pe($e,it){return(0,c.Xf)($e).pipe((0,K.R)(it),(0,U.Q)(it))}($e,it);if((0,lt.z)($e))return function Oe($e,it){return new Re.y(he=>{let ue=0;return it.schedule(function(){ue===$e.length?he.complete():(he.next($e[ue++]),he.closed||this.schedule())})})}($e,it);if((0,me.t)($e))return function ce($e,it){return(0,c.Xf)($e).pipe((0,K.R)(it),(0,U.Q)(it))}($e,it);if((0,mt.D)($e))return de($e,it);if((0,st.T)($e))return function G($e,it){return new Re.y(he=>{let ue;return(0,z.f)(he,it,()=>{ue=$e[ut.h](),(0,z.f)(he,it,()=>{let Ge,Le;try{({value:Ge,done:Le}=ue.next())}catch(Et){return void he.error(Et)}Le?he.complete():he.next(Ge)},0,!0)}),()=>(0,Ve.m)(ue?.return)&&ue.return()})}($e,it);if((0,at.L)($e))return function Ze($e,it){return de((0,at.Q)($e),it)}($e,it)}throw(0,ke.z)($e)}($e,it):(0,c.Xf)($e)}},4829:(en,Ae,Q)=>{Q.d(Ae,{Xf:()=>Ne});var c=Q(7582),U=Q(4266),K=Q(4026),pe=Q(5592),ce=Q(8382),Re=Q(5726),Oe=Q(9853),ut=Q(3664),Ve=Q(541),z=Q(4674),G=Q(3894),de=Q(4850);function Ne(Ce){if(Ce instanceof pe.y)return Ce;if(null!=Ce){if((0,ce.c)(Ce))return function me(Ce){return new pe.y(nt=>{const $e=Ce[de.L]();if((0,z.m)($e.subscribe))return $e.subscribe(nt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,U.z)(Ce))return function lt(Ce){return new pe.y(nt=>{for(let $e=0;$e<Ce.length&&!nt.closed;$e++)nt.next(Ce[$e]);nt.complete()})}(Ce);if((0,K.t)(Ce))return function st(Ce){return new pe.y(nt=>{Ce.then($e=>{nt.closed||(nt.next($e),nt.complete())},$e=>nt.error($e)).then(null,G.h)})}(Ce);if((0,Re.D)(Ce))return ke(Ce);if((0,ut.T)(Ce))return function mt(Ce){return new pe.y(nt=>{for(const $e of Ce)if(nt.next($e),nt.closed)return;nt.complete()})}(Ce);if((0,Ve.L)(Ce))return function at(Ce){return ke((0,Ve.Q)(Ce))}(Ce)}throw(0,Oe.z)(Ce)}function ke(Ce){return new pe.y(nt=>{(function Ze(Ce,nt){var $e,it,he,ue;return(0,c.mG)(this,void 0,void 0,function*(){try{for($e=(0,c.KL)(Ce);!(it=yield $e.next()).done;)if(nt.next(it.value),nt.closed)return}catch(Ge){he={error:Ge}}finally{try{it&&!it.done&&(ue=$e.return)&&(yield ue.call($e))}finally{if(he)throw he.error}}nt.complete()})})(Ce,nt).catch($e=>nt.error($e))})}},3019:(en,Ae,Q)=>{Q.d(Ae,{T:()=>Re});var c=Q(7537),U=Q(4829),K=Q(6232),pe=Q(9940),ce=Q(2459);function Re(...Oe){const ut=(0,pe.yG)(Oe),Ve=(0,pe._6)(Oe,1/0),z=Oe;return z.length?1===z.length?(0,U.Xf)(z[0]):(0,c.J)(Ve)((0,ce.D)(z,ut)):K.E}},2096:(en,Ae,Q)=>{Q.d(Ae,{of:()=>K});var c=Q(9940),U=Q(2459);function K(...pe){const ce=(0,c.yG)(pe);return(0,U.D)(pe,ce)}},8251:(en,Ae,Q)=>{Q.d(Ae,{x:()=>U});var c=Q(305);function U(pe,ce,Re,Oe,ut){return new K(pe,ce,Re,Oe,ut)}class K extends c.Lv{constructor(ce,Re,Oe,ut,Ve,z){super(ce),this.onFinalize=Ve,this.shouldUnsubscribe=z,this._next=Re?function(G){try{Re(G)}catch(de){ce.error(de)}}:super._next,this._error=ut?function(G){try{ut(G)}catch(de){ce.error(de)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(G){ce.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Re}=this;super.unsubscribe(),!Re&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},3997:(en,Ae,Q)=>{Q.d(Ae,{x:()=>pe});var c=Q(2737),U=Q(9360),K=Q(8251);function pe(Re,Oe=c.y){return Re=Re??ce,(0,U.e)((ut,Ve)=>{let z,G=!0;ut.subscribe((0,K.x)(Ve,de=>{const Ne=Oe(de);(G||!Re(z,Ne))&&(G=!1,z=Ne,Ve.next(de))}))})}function ce(Re,Oe){return Re===Oe}},7398:(en,Ae,Q)=>{Q.d(Ae,{U:()=>K});var c=Q(9360),U=Q(8251);function K(pe,ce){return(0,c.e)((Re,Oe)=>{let ut=0;Re.subscribe((0,U.x)(Oe,Ve=>{Oe.next(pe.call(ce,Ve,ut++))}))})}},7537:(en,Ae,Q)=>{Q.d(Ae,{J:()=>K});var c=Q(1631),U=Q(2737);function K(pe=1/0){return(0,c.z)(U.y,pe)}},1631:(en,Ae,Q)=>{Q.d(Ae,{z:()=>ut});var c=Q(7398),U=Q(4829),K=Q(9360),pe=Q(7103),ce=Q(8251),Oe=Q(4674);function ut(Ve,z,G=1/0){return(0,Oe.m)(z)?ut((de,Ne)=>(0,c.U)((me,lt)=>z(de,me,Ne,lt))((0,U.Xf)(Ve(de,Ne))),G):("number"==typeof z&&(G=z),(0,K.e)((de,Ne)=>function Re(Ve,z,G,de,Ne,me,lt,st){const mt=[];let ke=0,at=0,Ze=!1;const Ce=()=>{Ze&&!mt.length&&!ke&&z.complete()},nt=it=>ke<de?$e(it):mt.push(it),$e=it=>{me&&z.next(it),ke++;let he=!1;(0,U.Xf)(G(it,at++)).subscribe((0,ce.x)(z,ue=>{Ne?.(ue),me?nt(ue):z.next(ue)},()=>{he=!0},void 0,()=>{if(he)try{for(ke--;mt.length&&ke<de;){const ue=mt.shift();lt?(0,pe.f)(z,lt,()=>$e(ue)):$e(ue)}Ce()}catch(ue){z.error(ue)}}))};return Ve.subscribe((0,ce.x)(z,nt,()=>{Ze=!0,Ce()})),()=>{st?.()}}(de,Ne,Ve,G)))}},3093:(en,Ae,Q)=>{Q.d(Ae,{Q:()=>pe});var c=Q(7103),U=Q(9360),K=Q(8251);function pe(ce,Re=0){return(0,U.e)((Oe,ut)=>{Oe.subscribe((0,K.x)(ut,Ve=>(0,c.f)(ut,ce,()=>ut.next(Ve),Re),()=>(0,c.f)(ut,ce,()=>ut.complete(),Re),Ve=>(0,c.f)(ut,ce,()=>ut.error(Ve),Re)))})}},3020:(en,Ae,Q)=>{Q.d(Ae,{B:()=>ce});var c=Q(4829),U=Q(8645),K=Q(305),pe=Q(9360);function ce(Oe={}){const{connector:ut=(()=>new U.x),resetOnError:Ve=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=Oe;return de=>{let Ne,me,lt,st=0,mt=!1,ke=!1;const at=()=>{me?.unsubscribe(),me=void 0},Ze=()=>{at(),Ne=lt=void 0,mt=ke=!1},Ce=()=>{const nt=Ne;Ze(),nt?.unsubscribe()};return(0,pe.e)((nt,$e)=>{st++,!ke&&!mt&&at();const it=lt=lt??ut();$e.add(()=>{st--,0===st&&!ke&&!mt&&(me=Re(Ce,G))}),it.subscribe($e),!Ne&&st>0&&(Ne=new K.Hp({next:he=>it.next(he),error:he=>{ke=!0,at(),me=Re(Ze,Ve,he),it.error(he)},complete:()=>{mt=!0,at(),me=Re(Ze,z),it.complete()}}),(0,c.Xf)(nt).subscribe(Ne))})(de)}}function Re(Oe,ut,...Ve){if(!0===ut)return void Oe();if(!1===ut)return;const z=new K.Hp({next:()=>{z.unsubscribe(),Oe()}});return(0,c.Xf)(ut(...Ve)).subscribe(z)}},5137:(en,Ae,Q)=>{Q.d(Ae,{R:()=>U});var c=Q(9360);function U(K,pe=0){return(0,c.e)((ce,Re)=>{Re.add(K.schedule(()=>ce.subscribe(Re),pe))})}},4664:(en,Ae,Q)=>{Q.d(Ae,{w:()=>pe});var c=Q(4829),U=Q(9360),K=Q(8251);function pe(ce,Re){return(0,U.e)((Oe,ut)=>{let Ve=null,z=0,G=!1;const de=()=>G&&!Ve&&ut.complete();Oe.subscribe((0,K.x)(ut,Ne=>{Ve?.unsubscribe();let me=0;const lt=z++;(0,c.Xf)(ce(Ne,lt)).subscribe(Ve=(0,K.x)(ut,st=>ut.next(Re?Re(Ne,st,lt,me++):st),()=>{Ve=null,de()}))},()=>{G=!0,de()}))})}},9397:(en,Ae,Q)=>{Q.d(Ae,{b:()=>ce});var c=Q(4674),U=Q(9360),K=Q(8251),pe=Q(2737);function ce(Re,Oe,ut){const Ve=(0,c.m)(Re)||Oe||ut?{next:Re,error:Oe,complete:ut}:Re;return Ve?(0,U.e)((z,G)=>{var de;null===(de=Ve.subscribe)||void 0===de||de.call(Ve);let Ne=!0;z.subscribe((0,K.x)(G,me=>{var lt;null===(lt=Ve.next)||void 0===lt||lt.call(Ve,me),G.next(me)},()=>{var me;Ne=!1,null===(me=Ve.complete)||void 0===me||me.call(Ve),G.complete()},me=>{var lt;Ne=!1,null===(lt=Ve.error)||void 0===lt||lt.call(Ve,me),G.error(me)},()=>{var me,lt;Ne&&(null===(me=Ve.unsubscribe)||void 0===me||me.call(Ve)),null===(lt=Ve.finalize)||void 0===lt||lt.call(Ve)}))}):pe.y}},1954:(en,Ae,Q)=>{Q.d(Ae,{o:()=>ce});var c=Q(7394);class U extends c.w0{constructor(Oe,ut){super()}schedule(Oe,ut=0){return this}}const K={setInterval(Re,Oe,...ut){const{delegate:Ve}=K;return Ve?.setInterval?Ve.setInterval(Re,Oe,...ut):setInterval(Re,Oe,...ut)},clearInterval(Re){const{delegate:Oe}=K;return(Oe?.clearInterval||clearInterval)(Re)},delegate:void 0};var pe=Q(9039);class ce extends U{constructor(Oe,ut){super(Oe,ut),this.scheduler=Oe,this.work=ut,this.pending=!1}schedule(Oe,ut=0){var Ve;if(this.closed)return this;this.state=Oe;const z=this.id,G=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(G,z,ut)),this.pending=!0,this.delay=ut,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(G,this.id,ut),this}requestAsyncId(Oe,ut,Ve=0){return K.setInterval(Oe.flush.bind(Oe,this),Ve)}recycleAsyncId(Oe,ut,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return ut;null!=ut&&K.clearInterval(ut)}execute(Oe,ut){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute(Oe,ut);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,ut){let z,Ve=!1;try{this.work(Oe)}catch(G){Ve=!0,z=G||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:ut}=this,{actions:Ve}=ut;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(Ve,this),null!=Oe&&(this.id=this.recycleAsyncId(ut,Oe,null)),this.delay=null,super.unsubscribe()}}}},2631:(en,Ae,Q)=>{Q.d(Ae,{v:()=>K});var c=Q(4552);class U{constructor(ce,Re=U.now){this.schedulerActionCtor=ce,this.now=Re}schedule(ce,Re=0,Oe){return new this.schedulerActionCtor(this,ce).schedule(Oe,Re)}}U.now=c.l.now;class K extends U{constructor(ce,Re=U.now){super(ce,Re),this.actions=[],this._active=!1}flush(ce){const{actions:Re}=this;if(this._active)return void Re.push(ce);let Oe;this._active=!0;do{if(Oe=ce.execute(ce.state,ce.delay))break}while(ce=Re.shift());if(this._active=!1,Oe){for(;ce=Re.shift();)ce.unsubscribe();throw Oe}}}},6321:(en,Ae,Q)=>{Q.d(Ae,{P:()=>pe,z:()=>K});var c=Q(1954);const K=new(Q(2631).v)(c.o),pe=K},4552:(en,Ae,Q)=>{Q.d(Ae,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},7599:(en,Ae,Q)=>{Q.d(Ae,{z:()=>c});const c={setTimeout(U,K,...pe){const{delegate:ce}=c;return ce?.setTimeout?ce.setTimeout(U,K,...pe):setTimeout(U,K,...pe)},clearTimeout(U){const{delegate:K}=c;return(K?.clearTimeout||clearTimeout)(U)},delegate:void 0}},4971:(en,Ae,Q)=>{Q.d(Ae,{h:()=>U});const U=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(en,Ae,Q)=>{Q.d(Ae,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(en,Ae,Q)=>{Q.d(Ae,{_6:()=>Re,jO:()=>pe,yG:()=>ce});var c=Q(4674),U=Q(671);function K(Oe){return Oe[Oe.length-1]}function pe(Oe){return(0,c.m)(K(Oe))?Oe.pop():void 0}function ce(Oe){return(0,U.K)(K(Oe))?Oe.pop():void 0}function Re(Oe,ut){return"number"==typeof K(Oe)?Oe.pop():ut}},9039:(en,Ae,Q)=>{function c(U,K){if(U){const pe=U.indexOf(K);0<=pe&&U.splice(pe,1)}}Q.d(Ae,{P:()=>c})},2306:(en,Ae,Q)=>{function c(U){const pe=U(ce=>{Error.call(ce),ce.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}Q.d(Ae,{d:()=>c})},1441:(en,Ae,Q)=>{Q.d(Ae,{O:()=>pe,x:()=>K});var c=Q(2653);let U=null;function K(ce){if(c.config.useDeprecatedSynchronousErrorHandling){const Re=!U;if(Re&&(U={errorThrown:!1,error:null}),ce(),Re){const{errorThrown:Oe,error:ut}=U;if(U=null,Oe)throw ut}}else ce()}function pe(ce){c.config.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=ce)}},7103:(en,Ae,Q)=>{function c(U,K,pe,ce=0,Re=!1){const Oe=K.schedule(function(){pe(),Re?U.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(U.add(Oe),!Re)return Oe}Q.d(Ae,{f:()=>c})},2737:(en,Ae,Q)=>{function c(U){return U}Q.d(Ae,{y:()=>c})},4266:(en,Ae,Q)=>{Q.d(Ae,{z:()=>c});const c=U=>U&&"number"==typeof U.length&&"function"!=typeof U},5726:(en,Ae,Q)=>{Q.d(Ae,{D:()=>U});var c=Q(4674);function U(K){return Symbol.asyncIterator&&(0,c.m)(K?.[Symbol.asyncIterator])}},4674:(en,Ae,Q)=>{function c(U){return"function"==typeof U}Q.d(Ae,{m:()=>c})},8382:(en,Ae,Q)=>{Q.d(Ae,{c:()=>K});var c=Q(4850),U=Q(4674);function K(pe){return(0,U.m)(pe[c.L])}},3664:(en,Ae,Q)=>{Q.d(Ae,{T:()=>K});var c=Q(4971),U=Q(4674);function K(pe){return(0,U.m)(pe?.[c.h])}},4026:(en,Ae,Q)=>{Q.d(Ae,{t:()=>U});var c=Q(4674);function U(K){return(0,c.m)(K?.then)}},541:(en,Ae,Q)=>{Q.d(Ae,{L:()=>pe,Q:()=>K});var c=Q(7582),U=Q(4674);function K(ce){return(0,c.FC)(this,arguments,function*(){const Oe=ce.getReader();try{for(;;){const{value:ut,done:Ve}=yield(0,c.qq)(Oe.read());if(Ve)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ut)}}finally{Oe.releaseLock()}})}function pe(ce){return(0,U.m)(ce?.getReader)}},671:(en,Ae,Q)=>{Q.d(Ae,{K:()=>U});var c=Q(4674);function U(K){return K&&(0,c.m)(K.schedule)}},9360:(en,Ae,Q)=>{Q.d(Ae,{A:()=>U,e:()=>K});var c=Q(4674);function U(pe){return(0,c.m)(pe?.lift)}function K(pe){return ce=>{if(U(ce))return ce.lift(function(Re){try{return pe(Re,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(en,Ae,Q)=>{function c(){}Q.d(Ae,{Z:()=>c})},8407:(en,Ae,Q)=>{Q.d(Ae,{U:()=>K,z:()=>U});var c=Q(2737);function U(...pe){return K(pe)}function K(pe){return 0===pe.length?c.y:1===pe.length?pe[0]:function(Re){return pe.reduce((Oe,ut)=>ut(Oe),Re)}}},3894:(en,Ae,Q)=>{Q.d(Ae,{h:()=>K});var c=Q(2653),U=Q(7599);function K(pe){U.z.setTimeout(()=>{const{onUnhandledError:ce}=c.config;if(!ce)throw pe;ce(pe)})}},9853:(en,Ae,Q)=>{function c(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Q.d(Ae,{z:()=>c})},8005:(en,Ae,Q)=>{Q.r(Ae),Q.d(Ae,{__assign:()=>K,__asyncDelegator:()=>ke,__asyncGenerator:()=>mt,__asyncValues:()=>at,__await:()=>st,__awaiter:()=>ut,__classPrivateFieldGet:()=>$e,__classPrivateFieldSet:()=>it,__createBinding:()=>z,__decorate:()=>ce,__exportStar:()=>G,__extends:()=>U,__generator:()=>Ve,__importDefault:()=>nt,__importStar:()=>Ce,__makeTemplateObject:()=>Ze,__metadata:()=>Oe,__param:()=>Re,__read:()=>Ne,__rest:()=>pe,__spread:()=>me,__spreadArrays:()=>lt,__values:()=>de});var c=function(he,ue){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ge,Le){Ge.__proto__=Le}||function(Ge,Le){for(var Et in Le)Le.hasOwnProperty(Et)&&(Ge[Et]=Le[Et])})(he,ue)};function U(he,ue){function Ge(){this.constructor=he}c(he,ue),he.prototype=null===ue?Object.create(ue):(Ge.prototype=ue.prototype,new Ge)}var K=function(){return K=Object.assign||function(ue){for(var Ge,Le=1,Et=arguments.length;Le<Et;Le++)for(var ot in Ge=arguments[Le])Object.prototype.hasOwnProperty.call(Ge,ot)&&(ue[ot]=Ge[ot]);return ue},K.apply(this,arguments)};function pe(he,ue){var Ge={};for(var Le in he)Object.prototype.hasOwnProperty.call(he,Le)&&ue.indexOf(Le)<0&&(Ge[Le]=he[Le]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Et=0;for(Le=Object.getOwnPropertySymbols(he);Et<Le.length;Et++)ue.indexOf(Le[Et])<0&&Object.prototype.propertyIsEnumerable.call(he,Le[Et])&&(Ge[Le[Et]]=he[Le[Et]])}return Ge}function ce(he,ue,Ge,Le){var Kt,Et=arguments.length,ot=Et<3?ue:null===Le?Le=Object.getOwnPropertyDescriptor(ue,Ge):Le;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ot=Reflect.decorate(he,ue,Ge,Le);else for(var nn=he.length-1;nn>=0;nn--)(Kt=he[nn])&&(ot=(Et<3?Kt(ot):Et>3?Kt(ue,Ge,ot):Kt(ue,Ge))||ot);return Et>3&&ot&&Object.defineProperty(ue,Ge,ot),ot}function Re(he,ue){return function(Ge,Le){ue(Ge,Le,he)}}function Oe(he,ue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(he,ue)}function ut(he,ue,Ge,Le){return new(Ge||(Ge=Promise))(function(ot,Kt){function nn(fi){try{rn(Le.next(fi))}catch(De){Kt(De)}}function un(fi){try{rn(Le.throw(fi))}catch(De){Kt(De)}}function rn(fi){fi.done?ot(fi.value):function Et(ot){return ot instanceof Ge?ot:new Ge(function(Kt){Kt(ot)})}(fi.value).then(nn,un)}rn((Le=Le.apply(he,ue||[])).next())})}function Ve(he,ue){var Le,Et,ot,Kt,Ge={label:0,sent:function(){if(1&ot[0])throw ot[1];return ot[1]},trys:[],ops:[]};return Kt={next:nn(0),throw:nn(1),return:nn(2)},"function"==typeof Symbol&&(Kt[Symbol.iterator]=function(){return this}),Kt;function nn(rn){return function(fi){return function un(rn){if(Le)throw new TypeError("Generator is already executing.");for(;Ge;)try{if(Le=1,Et&&(ot=2&rn[0]?Et.return:rn[0]?Et.throw||((ot=Et.return)&&ot.call(Et),0):Et.next)&&!(ot=ot.call(Et,rn[1])).done)return ot;switch(Et=0,ot&&(rn=[2&rn[0],ot.value]),rn[0]){case 0:case 1:ot=rn;break;case 4:return Ge.label++,{value:rn[1],done:!1};case 5:Ge.label++,Et=rn[1],rn=[0];continue;case 7:rn=Ge.ops.pop(),Ge.trys.pop();continue;default:if(!(ot=(ot=Ge.trys).length>0&&ot[ot.length-1])&&(6===rn[0]||2===rn[0])){Ge=0;continue}if(3===rn[0]&&(!ot||rn[1]>ot[0]&&rn[1]<ot[3])){Ge.label=rn[1];break}if(6===rn[0]&&Ge.label<ot[1]){Ge.label=ot[1],ot=rn;break}if(ot&&Ge.label<ot[2]){Ge.label=ot[2],Ge.ops.push(rn);break}ot[2]&&Ge.ops.pop(),Ge.trys.pop();continue}rn=ue.call(he,Ge)}catch(fi){rn=[6,fi],Et=0}finally{Le=ot=0}if(5&rn[0])throw rn[1];return{value:rn[0]?rn[1]:void 0,done:!0}}([rn,fi])}}}function z(he,ue,Ge,Le){void 0===Le&&(Le=Ge),he[Le]=ue[Ge]}function G(he,ue){for(var Ge in he)"default"!==Ge&&!ue.hasOwnProperty(Ge)&&(ue[Ge]=he[Ge])}function de(he){var ue="function"==typeof Symbol&&Symbol.iterator,Ge=ue&&he[ue],Le=0;if(Ge)return Ge.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Le>=he.length&&(he=void 0),{value:he&&he[Le++],done:!he}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ne(he,ue){var Ge="function"==typeof Symbol&&he[Symbol.iterator];if(!Ge)return he;var Et,Kt,Le=Ge.call(he),ot=[];try{for(;(void 0===ue||ue-- >0)&&!(Et=Le.next()).done;)ot.push(Et.value)}catch(nn){Kt={error:nn}}finally{try{Et&&!Et.done&&(Ge=Le.return)&&Ge.call(Le)}finally{if(Kt)throw Kt.error}}return ot}function me(){for(var he=[],ue=0;ue<arguments.length;ue++)he=he.concat(Ne(arguments[ue]));return he}function lt(){for(var he=0,ue=0,Ge=arguments.length;ue<Ge;ue++)he+=arguments[ue].length;var Le=Array(he),Et=0;for(ue=0;ue<Ge;ue++)for(var ot=arguments[ue],Kt=0,nn=ot.length;Kt<nn;Kt++,Et++)Le[Et]=ot[Kt];return Le}function st(he){return this instanceof st?(this.v=he,this):new st(he)}function mt(he,ue,Ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Et,Le=Ge.apply(he,ue||[]),ot=[];return Et={},Kt("next"),Kt("throw"),Kt("return"),Et[Symbol.asyncIterator]=function(){return this},Et;function Kt(Ee){Le[Ee]&&(Et[Ee]=function(He){return new Promise(function(je,ct){ot.push([Ee,He,je,ct])>1||nn(Ee,He)})})}function nn(Ee,He){try{!function un(Ee){Ee.value instanceof st?Promise.resolve(Ee.value.v).then(rn,fi):De(ot[0][2],Ee)}(Le[Ee](He))}catch(je){De(ot[0][3],je)}}function rn(Ee){nn("next",Ee)}function fi(Ee){nn("throw",Ee)}function De(Ee,He){Ee(He),ot.shift(),ot.length&&nn(ot[0][0],ot[0][1])}}function ke(he){var ue,Ge;return ue={},Le("next"),Le("throw",function(Et){throw Et}),Le("return"),ue[Symbol.iterator]=function(){return this},ue;function Le(Et,ot){ue[Et]=he[Et]?function(Kt){return(Ge=!Ge)?{value:st(he[Et](Kt)),done:"return"===Et}:ot?ot(Kt):Kt}:ot}}function at(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,ue=he[Symbol.asyncIterator];return ue?ue.call(he):(he=de(he),Ge={},Le("next"),Le("throw"),Le("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge);function Le(ot){Ge[ot]=he[ot]&&function(Kt){return new Promise(function(nn,un){!function Et(ot,Kt,nn,un){Promise.resolve(un).then(function(rn){ot({value:rn,done:nn})},Kt)}(nn,un,(Kt=he[ot](Kt)).done,Kt.value)})}}}function Ze(he,ue){return Object.defineProperty?Object.defineProperty(he,"raw",{value:ue}):he.raw=ue,he}function Ce(he){if(he&&he.__esModule)return he;var ue={};if(null!=he)for(var Ge in he)Object.hasOwnProperty.call(he,Ge)&&(ue[Ge]=he[Ge]);return ue.default=he,ue}function nt(he){return he&&he.__esModule?he:{default:he}}function $e(he,ue){if(!ue.has(he))throw new TypeError("attempted to get private field on non-instance");return ue.get(he)}function it(he,ue,Ge){if(!ue.has(he))throw new TypeError("attempted to set private field on non-instance");return ue.set(he,Ge),Ge}},5879:(en,Ae,Q)=>{Q.d(Ae,{$8M:()=>qs,$WT:()=>xa,$Z:()=>xP,AFp:()=>WT,ALo:()=>kC,AaK:()=>de,AsE:()=>Fb,BQk:()=>Dp,CHM:()=>Cs,CRH:()=>QS,DdM:()=>OC,EEQ:()=>y,EJc:()=>Fv,EiD:()=>FT,EpF:()=>FE,F$t:()=>VE,F4k:()=>$m,FYo:()=>Yw,FiY:()=>Je,Gf:()=>Vp,GfV:()=>nb,GkF:()=>Db,Gpc:()=>lt,GuJ:()=>Hi,HDt:()=>iI,Hsn:()=>BE,Ikx:()=>Dd,JOm:()=>uh,JVY:()=>MO,JZr:()=>Ze,Jf7:()=>uP,KtG:()=>yu,L6k:()=>MT,LAX:()=>PO,LFG:()=>St,LSH:()=>tu,Lbi:()=>jw,Lck:()=>AS,MAs:()=>kE,MMx:()=>bv,NdJ:()=>Sb,O4$:()=>fa,Ojb:()=>Hw,OlP:()=>Ji,Oqu:()=>nC,P3R:()=>Mo,PXZ:()=>Lv,Q6J:()=>xp,QGY:()=>J_,QbO:()=>zw,Qsj:()=>Qw,R0b:()=>Qs,RDi:()=>xT,Rgc:()=>ig,SBq:()=>Tm,Sil:()=>d0,Suo:()=>WC,TTD:()=>Ul,TgZ:()=>no,Tol:()=>lv,Udp:()=>QE,VKq:()=>ng,VuI:()=>XA,W1O:()=>c0,WLB:()=>LS,X6Q:()=>hI,XFs:()=>sn,Xpm:()=>vo,Xq5:()=>IE,Xts:()=>v_,Y36:()=>Dm,YKP:()=>DC,YNc:()=>VD,Yjl:()=>Xa,Yz7:()=>fn,Z0I:()=>cn,ZZ4:()=>Hv,_Bn:()=>yv,_UZ:()=>NE,_Vd:()=>tb,_c5:()=>EI,_uU:()=>tC,aQg:()=>bI,c2e:()=>nI,cJS:()=>Dn,cg1:()=>dc,dDg:()=>GR,dqk:()=>Ie,eBb:()=>OO,eFA:()=>PA,eJc:()=>Bp,ekj:()=>XE,eoX:()=>MA,f3M:()=>Vt,g9A:()=>Gy,h0i:()=>Od,hGG:()=>x0,hij:()=>Nb,iGM:()=>s0,ifc:()=>_t,ip1:()=>kv,jDz:()=>bf,kL8:()=>Zm,lG2:()=>gs,lcZ:()=>NC,lqb:()=>Ou,lri:()=>p0,mCW:()=>__,n5z:()=>ud,n_E:()=>Up,oAB:()=>Mr,oJD:()=>dt,oxw:()=>UE,pB0:()=>RO,q3G:()=>Em,q4F:()=>eP,qFp:()=>dk,qLn:()=>wd,qOj:()=>bp,qZA:()=>Q_,qzn:()=>fh,rWj:()=>Ps,rg0:()=>Co,s9C:()=>nv,sBO:()=>Bv,s_b:()=>Dv,soG:()=>$p,tb:()=>mg,tp0:()=>Nt,uIk:()=>Nm,vHH:()=>Ce,vpe:()=>Ed,wAp:()=>Km,xi3:()=>FC,xp6:()=>CP,ynx:()=>X_,z2F:()=>Hu,z3N:()=>yd,zSh:()=>Fw,zs3:()=>nu});var c=Q(8645),U=Q(7394),K=Q(5592),pe=Q(3019),ce=Q(5619),Re=Q(2096),Oe=Q(3020),ut=Q(4664),Ve=Q(3997);function z(o){for(let a in o)if(o[a]===z)return a;throw Error("Could not find renamed property on target object.")}function G(o,a){for(const d in a)a.hasOwnProperty(d)&&!o.hasOwnProperty(d)&&(o[d]=a[d])}function de(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(de).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const d=a.indexOf("\n");return-1===d?a:a.substring(0,d)}function Ne(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const me=z({__forward_ref__:z});function lt(o){return o.__forward_ref__=lt,o.toString=function(){return de(this())},o}function st(o){return mt(o)?o():o}function mt(o){return"function"==typeof o&&o.hasOwnProperty(me)&&o.__forward_ref__===lt}function ke(o){return o&&!!o.\u0275providers}const Ze="https://g.co/ng/security#xss";class Ce extends Error{constructor(a,d){super(function nt(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,d)),this.code=a}}function $e(o){return"string"==typeof o?o:null==o?"":String(o)}function Le(o,a){throw new Ce(-201,!1)}function At(o,a){null==o&&function bt(o,a,d,p){throw new Error(`ASSERTION ERROR: ${o}`+(null==p?"":` [Expected=> ${d} ${p} ${a} <=Actual]`))}(a,o,null,"!=")}function fn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Dn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ut(o){return Fn(o,Si)||Fn(o,Vi)}function cn(o){return null!==Ut(o)}function Fn(o,a){return o.hasOwnProperty(a)?o[a]:null}function wi(o){return o&&(o.hasOwnProperty(ti)||o.hasOwnProperty(Ro))?o[ti]:null}const Si=z({\u0275prov:z}),ti=z({\u0275inj:z}),Vi=z({ngInjectableDef:z}),Ro=z({ngInjectorDef:z});var sn=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(sn||{});let Yt;function zt(o){const a=Yt;return Yt=o,a}function Te(o,a,d){const p=Ut(o);return p&&"root"==p.providedIn?void 0===p.value?p.value=p.factory():p.value:d&sn.Optional?null:void 0!==a?a:void Le(de(o))}const Ie=globalThis,pi={},Ci="__NG_DI_FLAG__",gr="ngTempTokenPath",fe=/\n/gm,J="__source";let te;function Me(o){const a=te;return te=o,a}function Qe(o,a=sn.Default){if(void 0===te)throw new Ce(-203,!1);return null===te?Te(o,void 0,a):te.get(o,a&sn.Optional?null:void 0,a)}function St(o,a=sn.Default){return(function Qt(){return Yt}()||Qe)(st(o),a)}function Vt(o,a=sn.Default){return St(o,Xn(a))}function Xn(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function En(o){const a=[];for(let d=0;d<o.length;d++){const p=st(o[d]);if(Array.isArray(p)){if(0===p.length)throw new Ce(900,!1);let _,b=sn.Default;for(let T=0;T<p.length;T++){const S=p[T],R=kn(S);"number"==typeof R?-1===R?_=S.token:b|=R:_=S}a.push(St(_,b))}else a.push(St(p))}return a}function ai(o,a){return o[Ci]=a,o.prototype[Ci]=a,o}function kn(o){return o[Ci]}function Xe(o){return{toString:o}.toString()}var ze=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(ze||{}),_t=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(_t||{});const Zt={},Rt=[],On=z({\u0275cmp:z}),ri=z({\u0275dir:z}),Hi=z({\u0275pipe:z}),qi=z({\u0275mod:z}),Yi=z({\u0275fac:z}),Ur=z({__NG_ELEMENT_ID__:z}),go=z({__NG_ENV_ID__:z});function Ia(o,a,d){let p=o.length;for(;;){const _=o.indexOf(a,d);if(-1===_)return _;if(0===_||o.charCodeAt(_-1)<=32){const b=a.length;if(_+b===p||o.charCodeAt(_+b)<=32)return _}d=_+1}}function Ko(o,a,d){let p=0;for(;p<d.length;){const _=d[p];if("number"==typeof _){if(0!==_)break;p++;const b=d[p++],T=d[p++],S=d[p++];o.setAttribute(a,T,S,b)}else{const b=_,T=d[++p];ms(b)?o.setProperty(a,b,T):o.setAttribute(a,b,T),p++}}return p}function cs(o){return 3===o||4===o||6===o}function ms(o){return 64===o.charCodeAt(0)}function Yo(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let d=-1;for(let p=0;p<a.length;p++){const _=a[p];"number"==typeof _?d=_:0===d||ni(o,d,_,null,-1===d||2===d?a[++p]:null)}}return o}function ni(o,a,d,p,_){let b=0,T=o.length;if(-1===a)T=-1;else for(;b<o.length;){const S=o[b++];if("number"==typeof S){if(S===a){T=-1;break}if(S>a){T=b-1;break}}}for(;b<o.length;){const S=o[b];if("number"==typeof S)break;if(S===d){if(null===p)return void(null!==_&&(o[b+1]=_));if(p===o[b+1])return void(o[b+2]=_)}b++,null!==p&&b++,null!==_&&b++}-1!==T&&(o.splice(T,0,a),b=T+1),o.splice(b++,0,d),null!==p&&o.splice(b++,0,p),null!==_&&o.splice(b++,0,_)}const Ai="ng-template";function _o(o,a,d){let p=0,_=!0;for(;p<o.length;){let b=o[p++];if("string"==typeof b&&_){const T=o[p++];if(d&&"class"===b&&-1!==Ia(T.toLowerCase(),a,0))return!0}else{if(1===b){for(;p<o.length&&"string"==typeof(b=o[p++]);)if(b.toLowerCase()===a)return!0;return!1}"number"==typeof b&&(_=!1)}}return!1}function Qi(o){return 4===o.type&&o.value!==Ai}function _c(o,a,d){return a===(4!==o.type||d?o.value:Ai)}function Ka(o,a,d){let p=4;const _=o.attrs||[],b=function ea(o){for(let a=0;a<o.length;a++)if(cs(o[a]))return a;return o.length}(_);let T=!1;for(let S=0;S<a.length;S++){const R=a[S];if("number"!=typeof R){if(!T)if(4&p){if(p=2|1&p,""!==R&&!_c(o,R,d)||""===R&&1===a.length){if($r(p))return!1;T=!0}}else{const B=8&p?R:a[++S];if(8&p&&null!==o.attrs){if(!_o(o.attrs,B,d)){if($r(p))return!1;T=!0}continue}const se=ks(8&p?"class":R,_,Qi(o),d);if(-1===se){if($r(p))return!1;T=!0;continue}if(""!==B){let xe;xe=se>b?"":_[se+1].toLowerCase();const Be=8&p?xe:null;if(Be&&-1!==Ia(Be,B,0)||2&p&&B!==xe){if($r(p))return!1;T=!0}}}}else{if(!T&&!$r(p)&&!$r(R))return!1;if(T&&$r(R))continue;T=!1,p=R|1&p}}return $r(p)||T}function $r(o){return 0==(1&o)}function ks(o,a,d,p){if(null===a)return-1;let _=0;if(p||!d){let b=!1;for(;_<a.length;){const T=a[_];if(T===o)return _;if(3===T||6===T)b=!0;else{if(1===T||2===T){let S=a[++_];for(;"string"==typeof S;)S=a[++_];continue}if(4===T)break;if(0===T){_+=4;continue}}_+=b?1:2}return-1}return function vc(o,a){let d=o.indexOf(4);if(d>-1)for(d++;d<o.length;){const p=o[d];if("number"==typeof p)return-1;if(p===a)return d;d++}return-1}(a,o)}function Ya(o,a,d=!1){for(let p=0;p<a.length;p++)if(Ka(o,a[p],d))return!0;return!1}function yc(o,a){e:for(let d=0;d<a.length;d++){const p=a[d];if(o.length===p.length){for(let _=0;_<o.length;_++)if(o[_]!==p[_])continue e;return!0}}return!1}function Ns(o,a){return o?":not("+a.trim()+")":a}function ta(o){let a=o[0],d=1,p=2,_="",b=!1;for(;d<o.length;){let T=o[d];if("string"==typeof T)if(2&p){const S=o[++d];_+="["+T+(S.length>0?'="'+S+'"':"")+"]"}else 8&p?_+="."+T:4&p&&(_+=" "+T);else""!==_&&!$r(T)&&(a+=Ns(b,_),_=""),p=T,b=b||!$r(p);d++}return""!==_&&(a+=Ns(b,_)),a}function vo(o){return Xe(()=>{const a=wc(o),d={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===ze.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||_t.Emulated,styles:o.styles||Rt,_:null,schemas:o.schemas||null,tView:null,id:""};Ec(d);const p=o.dependencies;return d.directiveDefs=No(p,!1),d.pipeDefs=No(p,!0),d.id=function Cc(o){let a=0;const d=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const _ of d)a=Math.imul(31,a)+_.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(d),d})}function Qa(o){return Bn(o)||Ni(o)}function na(o){return null!==o}function Mr(o){return Xe(()=>({type:o.type,bootstrap:o.bootstrap||Rt,declarations:o.declarations||Rt,imports:o.imports||Rt,exports:o.exports||Rt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function ia(o,a){if(null==o)return Zt;const d={};for(const p in o)if(o.hasOwnProperty(p)){let _=o[p],b=_;Array.isArray(_)&&(b=_[1],_=_[0]),d[_]=p,a&&(a[_]=b)}return d}function gs(o){return Xe(()=>{const a=wc(o);return Ec(a),a})}function Xa(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function Bn(o){return o[On]||null}function Ni(o){return o[ri]||null}function yr(o){return o[Hi]||null}function xa(o){const a=Bn(o)||Ni(o)||yr(o);return null!==a&&a.standalone}function br(o,a){const d=o[qi]||null;if(!d&&!0===a)throw new Error(`Type ${de(o)} does not have '\u0275mod' property.`);return d}function wc(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:o.inputs||Zt,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||Rt,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ia(o.inputs,a),outputs:ia(o.outputs)}}function Ec(o){o.features?.forEach(a=>a(o))}function No(o,a){if(!o)return null;const d=a?yr:Qa;return()=>("function"==typeof o?o():o).map(p=>d(p)).filter(na)}const Mi=0,It=1,Cn=2,Ii=3,so=4,Ls=5,$n=6,Qo=7,Oi=8,ra=9,Xo=10,on=11,qr=12,Rl=13,wr=14,Er=15,_s=16,Fo=17,Cr=18,Ir=19,oa=20,Ta=21,Fi=22,Lo=23,Gr=24,Jn=25,hu=1,Da=2,Or=7,Wr=9,Bi=11;function Zr(o){return Array.isArray(o)&&"object"==typeof o[hu]}function xr(o){return Array.isArray(o)&&!0===o[hu]}function nl(o){return 0!=(4&o.flags)}function Pr(o){return o.componentOffset>-1}function Kr(o){return 1==(1&o.flags)}function di(o){return!!o.template}function aa(o){return 0!=(512&o[Cn])}function Us(o,a){return o.hasOwnProperty(Yi)?o[Yi]:null}let cr=null,Aa=!1;function Yr(o){const a=cr;return cr=o,a}const Ac={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function nc(o){if(!Mc(o)||o.dirty){if(!o.producerMustRecompute(o)&&!Bo(o))return void(o.dirty=!1);o.producerRecomputeValue(o),o.dirty=!1}}function ua(o){o.dirty=!0,function Ll(o){if(void 0===o.liveConsumerNode)return;const a=Aa;Aa=!0;try{for(const d of o.liveConsumerNode)d.dirty||ua(d)}finally{Aa=a}}(o),o.consumerMarkedDirty?.(o)}function il(o){return o&&(o.nextProducerIndex=0),Yr(o)}function yi(o,a){if(Yr(a),o&&void 0!==o.producerNode&&void 0!==o.producerIndexOfThis&&void 0!==o.producerLastReadVersion){if(Mc(o))for(let d=o.nextProducerIndex;d<o.producerNode.length;d++)Jo(o.producerNode[d],o.producerIndexOfThis[d]);for(;o.producerNode.length>o.nextProducerIndex;)o.producerNode.pop(),o.producerLastReadVersion.pop(),o.producerIndexOfThis.pop()}}function Bo(o){wo(o);for(let a=0;a<o.producerNode.length;a++){const d=o.producerNode[a],p=o.producerLastReadVersion[a];if(p!==d.version||(nc(d),p!==d.version))return!0}return!1}function Ma(o){if(wo(o),Mc(o))for(let a=0;a<o.producerNode.length;a++)Jo(o.producerNode[a],o.producerIndexOfThis[a]);o.producerNode.length=o.producerLastReadVersion.length=o.producerIndexOfThis.length=0,o.liveConsumerNode&&(o.liveConsumerNode.length=o.liveConsumerIndexOfThis.length=0)}function Jo(o,a){if(function Bs(o){o.liveConsumerNode??=[],o.liveConsumerIndexOfThis??=[]}(o),wo(o),1===o.liveConsumerNode.length)for(let p=0;p<o.producerNode.length;p++)Jo(o.producerNode[p],o.producerIndexOfThis[p]);const d=o.liveConsumerNode.length-1;if(o.liveConsumerNode[a]=o.liveConsumerNode[d],o.liveConsumerIndexOfThis[a]=o.liveConsumerIndexOfThis[d],o.liveConsumerNode.length--,o.liveConsumerIndexOfThis.length--,a<o.liveConsumerNode.length){const p=o.liveConsumerIndexOfThis[a],_=o.liveConsumerNode[a];wo(_),_.producerIndexOfThis[p]=a}}function Mc(o){return o.consumerIsAlwaysLive||(o?.liveConsumerNode?.length??0)>0}function wo(o){o.producerNode??=[],o.producerIndexOfThis??=[],o.producerLastReadVersion??=[]}let ee=null;function Co(o){const a=Yr(null);try{return o()}finally{Yr(a)}}const Yu=()=>{},Fh=(()=>({...Ac,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:o=>{o.schedule(o.ref)},hasRun:!1,cleanupFn:Yu}))();class Lh{constructor(a,d,p){this.previousValue=a,this.currentValue=d,this.firstChange=p}isFirstChange(){return this.firstChange}}function Ul(){return Vl}function Vl(o){return o.type.prototype.ngOnChanges&&(o.setInput=bs),Qu}function Qu(){const o=ol(this),a=o?.current;if(a){const d=o.previous;if(d===Zt)o.previous=a;else for(let p in a)d[p]=a[p];o.current=null,this.ngOnChanges(a)}}function bs(o,a,d,p){const _=this.declaredInputs[d],b=ol(o)||function Xu(o,a){return o[Rc]=a}(o,{previous:Zt,current:null}),T=b.current||(b.current={}),S=b.previous,R=S[_];T[_]=new Lh(R&&R.currentValue,a,S===Zt),o[p]=a}Ul.ngInherit=!0;const Rc="__ngSimpleChanges__";function ol(o){return o[Rc]||null}const ws=function(o,a,d){},qd="svg";function xi(o){for(;Array.isArray(o);)o=o[Mi];return o}function Pa(o,a){return xi(a[o])}function jo(o,a){return xi(a[o.index])}function Gd(o,a){return o.data[a]}function al(o,a){return o[a]}function Gi(o,a){const d=a[o];return Zr(d)?d:d[Mi]}function cl(o,a){return null==a?null:o[a]}function Kd(o){o[Fo]=0}function kc(o){1024&o[Cn]||(o[Cn]|=1024,Vr(o,1))}function Uh(o){1024&o[Cn]&&(o[Cn]&=-1025,Vr(o,-1))}function Vr(o,a){let d=o[Ii];if(null===d)return;d[Ls]+=a;let p=d;for(d=d[Ii];null!==d&&(1===a&&1===p[Ls]||-1===a&&0===p[Ls]);)d[Ls]+=a,p=d,d=d[Ii]}const In={lFrame:ls(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function $i(){return In.bindingsEnabled}function Es(){return null!==In.skipHydrationRootTNode}function pt(){return In.lFrame.lView}function ii(){return In.lFrame.tView}function Cs(o){return In.lFrame.contextLView=o,o[Oi]}function yu(o){return In.lFrame.contextLView=null,o}function xo(){let o=ed();for(;null!==o&&64===o.type;)o=o.parent;return o}function ed(){return In.lFrame.currentTNode}function Do(o,a){const d=In.lFrame;d.currentTNode=o,d.isParent=a}function Wi(){return In.lFrame.isParent}function ao(){In.lFrame.isParent=!1}function Zi(){const o=In.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Xr(){return In.lFrame.bindingIndex++}function Jr(o){const a=In.lFrame,d=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,d}function td(o,a){const d=In.lFrame;d.bindingIndex=d.bindingRootIndex=o,bu(a)}function bu(o){In.lFrame.currentDirectiveIndex=o}function Xd(){return In.lFrame.currentQueryIndex}function ll(o){In.lFrame.currentQueryIndex=o}function Jd(o){const a=o[It];return 2===a.type?a.declTNode:1===a.type?o[$n]:null}function Ra(o,a,d){if(d&sn.SkipSelf){let _=a,b=o;for(;!(_=_.parent,null!==_||d&sn.Host||(_=Jd(b),null===_||(b=b[wr],10&_.type))););if(null===_)return!1;a=_,o=b}const p=In.lFrame=wu();return p.currentTNode=a,p.lView=o,!0}function jl(o){const a=wu(),d=o[It];In.lFrame=a,a.currentTNode=d.firstChild,a.lView=o,a.tView=d,a.contextLView=o,a.bindingIndex=d.bindingStartIndex,a.inI18n=!1}function wu(){const o=In.lFrame,a=null===o?null:o.child;return null===a?ls(o):a}function ls(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function ul(){const o=In.lFrame;return In.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const oc=ul;function sc(){const o=ul();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ts(){return In.lFrame.selectedIndex}function ha(o){In.lFrame.selectedIndex=o}function ir(){const o=In.lFrame;return Gd(o.tView,o.selectedIndex)}function fa(){In.lFrame.currentNamespace=qd}let So=!0;function Hl(){return So}function cc(o){So=o}function ka(o,a){for(let d=a.directiveStart,p=a.directiveEnd;d<p;d++){const b=o.data[d].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:S,ngAfterViewInit:R,ngAfterViewChecked:B,ngOnDestroy:W}=b;T&&(o.contentHooks??=[]).push(-d,T),S&&((o.contentHooks??=[]).push(d,S),(o.contentCheckHooks??=[]).push(d,S)),R&&(o.viewHooks??=[]).push(-d,R),B&&((o.viewHooks??=[]).push(d,B),(o.viewCheckHooks??=[]).push(d,B)),null!=W&&(o.destroyHooks??=[]).push(d,W)}}function jr(o,a,d){or(o,a,3,d)}function Lc(o,a,d,p){(3&o[Cn])===d&&or(o,a,d,p)}function Nr(o,a){let d=o[Cn];(3&d)===a&&(d&=8191,d+=1,o[Cn]=d)}function or(o,a,d,p){const b=p??-1,T=a.length-1;let S=0;for(let R=void 0!==p?65535&o[Fo]:0;R<T;R++)if("number"==typeof a[R+1]){if(S=a[R],null!=p&&S>=p)break}else a[R]<0&&(o[Fo]+=65536),(S<b||-1==b)&&(Yf(o,d,a,R),o[Fo]=(4294901760&o[Fo])+R+2),R++}function Xi(o,a){ws(4,o,a);const d=Yr(null);try{a.call(o)}finally{Yr(d),ws(5,o,a)}}function Yf(o,a,d,p){const _=d[p]<0,b=d[p+1],S=o[_?-d[p]:d[p]];_?o[Cn]>>13<o[Fo]>>16&&(3&o[Cn])===a&&(o[Cn]+=8192,Xi(S,b)):Xi(S,b)}const xs=-1;class nd{constructor(a,d,p){this.factory=a,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=p}}function Uc(o){return o!==xs}function Vc(o){return 32767&o}function dl(o,a){let d=function sd(o){return o>>16}(o),p=a;for(;d>0;)p=p[wr],d--;return p}let Eu=!0;function us(o){const a=Eu;return Eu=o,a}const Hh=255,nh=5;let $h=0;const zo={};function Hs(o,a){const d=Cu(o,a);if(-1!==d)return d;const p=a[It];p.firstCreatePass&&(o.injectorIndex=a.length,ql(p.data,o),ql(a,null),ql(p.blueprint,null));const _=Gl(o,a),b=o.injectorIndex;if(Uc(_)){const T=Vc(_),S=dl(_,a),R=S[It].data;for(let B=0;B<8;B++)a[b+B]=S[T+B]|R[T+B]}return a[b+8]=_,b}function ql(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Cu(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Gl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let d=0,p=null,_=a;for(;null!==_;){if(p=Jf(_),null===p)return xs;if(d++,_=_[wr],-1!==p.injectorIndex)return p.injectorIndex|d<<16}return xs}function Wl(o,a,d){!function ad(o,a,d){let p;"string"==typeof d?p=d.charCodeAt(0)||0:d.hasOwnProperty(Ur)&&(p=d[Ur]),null==p&&(p=d[Ur]=$h++);const _=p&Hh;a.data[o+(_>>nh)]|=1<<_}(o,a,d)}function Zl(o,a,d){if(d&sn.Optional||void 0!==o)return o;Le()}function Kl(o,a,d,p){if(d&sn.Optional&&void 0===p&&(p=null),!(d&(sn.Self|sn.Host))){const _=o[ra],b=zt(void 0);try{return _?_.get(a,p,d&sn.Optional):Te(a,p,d&sn.Optional)}finally{zt(b)}}return Zl(p,0,d)}function $s(o,a,d,p=sn.Default,_){if(null!==o){if(2048&a[Cn]&&!(p&sn.Self)){const T=function qh(o,a,d,p,_){let b=o,T=a;for(;null!==b&&null!==T&&2048&T[Cn]&&!(512&T[Cn]);){const S=Ts(b,T,d,p|sn.Self,zo);if(S!==zo)return S;let R=b.parent;if(!R){const B=T[oa];if(B){const W=B.get(d,zo,p);if(W!==zo)return W}R=Jf(T),T=T[wr]}b=R}return _}(o,a,d,p,zo);if(T!==zo)return T}const b=Ts(o,a,d,p,zo);if(b!==zo)return b}return Kl(a,d,p,_)}function Ts(o,a,d,p,_){const b=function ih(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Ur)?o[Ur]:void 0;return"number"==typeof a?a>=0?a&Hh:pl:a}(d);if("function"==typeof b){if(!Ra(a,o,p))return p&sn.Host?Zl(_,0,p):Kl(a,d,p,_);try{let T;if(T=b(p),null!=T||p&sn.Optional)return T;Le()}finally{oc()}}else if("number"==typeof b){let T=null,S=Cu(o,a),R=xs,B=p&sn.Host?a[Er][$n]:null;for((-1===S||p&sn.SkipSelf)&&(R=-1===S?Gl(o,a):a[S+8],R!==xs&&hl(p,!1)?(T=a[It],S=Vc(R),a=dl(R,a)):S=-1);-1!==S;){const W=a[It];if(rh(b,S,W.data)){const se=Xf(S,a,d,T,p,B);if(se!==zo)return se}R=a[S+8],R!==xs&&hl(p,a[It].data[S+8]===B)&&rh(b,S,a)?(T=W,S=Vc(R),a=dl(R,a)):S=-1}}return _}function Xf(o,a,d,p,_,b){const T=a[It],S=T.data[o+8],W=ld(S,T,d,null==p?Pr(S)&&Eu:p!=T&&0!=(3&S.type),_&sn.Host&&b===S);return null!==W?Na(a,T,W,S):zo}function ld(o,a,d,p,_){const b=o.providerIndexes,T=a.data,S=1048575&b,R=o.directiveStart,W=b>>20,xe=_?S+W:o.directiveEnd;for(let Be=p?S:S+W;Be<xe;Be++){const ft=T[Be];if(Be<R&&d===ft||Be>=R&&ft.type===d)return Be}if(_){const Be=T[R];if(Be&&di(Be)&&Be.type===d)return R}return null}function Na(o,a,d,p){let _=o[d];const b=a.data;if(function dm(o){return o instanceof nd}(_)){const T=_;T.resolving&&function he(o,a){const d=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${o}${d}`)}(function it(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():$e(o)}(b[d]));const S=us(T.canSeeViewProviders);T.resolving=!0;const B=T.injectImpl?zt(T.injectImpl):null;Ra(o,p,sn.Default);try{_=o[d]=T.factory(void 0,b,o,p),a.firstCreatePass&&d>=p.directiveStart&&function ci(o,a,d){const{ngOnChanges:p,ngOnInit:_,ngDoCheck:b}=a.type.prototype;if(p){const T=Vl(a);(d.preOrderHooks??=[]).push(o,T),(d.preOrderCheckHooks??=[]).push(o,T)}_&&(d.preOrderHooks??=[]).push(0-o,_),b&&((d.preOrderHooks??=[]).push(o,b),(d.preOrderCheckHooks??=[]).push(o,b))}(d,b[d],a)}finally{null!==B&&zt(B),us(S),T.resolving=!1,oc()}}return _}function rh(o,a,d){return!!(d[a+(o>>nh)]&1<<o)}function hl(o,a){return!(o&sn.Self||o&sn.Host&&a)}class sr{constructor(a,d){this._tNode=a,this._lView=d}get(a,d,p){return $s(this._tNode,this._lView,a,Xn(p),d)}}function pl(){return new sr(xo(),pt())}function ud(o){return Xe(()=>{const a=o.prototype.constructor,d=a[Yi]||dr(a),p=Object.prototype;let _=Object.getPrototypeOf(o.prototype).constructor;for(;_&&_!==p;){const b=_[Yi]||dr(_);if(b&&b!==d)return b;_=Object.getPrototypeOf(_)}return b=>new b})}function dr(o){return mt(o)?()=>{const a=dr(st(o));return a&&a()}:Us(o)}function Jf(o){const a=o[It],d=a.type;return 2===d?a.declTNode:1===d?o[$n]:null}function qs(o){return function cd(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const d=o.attrs;if(d){const p=d.length;let _=0;for(;_<p;){const b=d[_];if(cs(b))break;if(0===b)_+=2;else if("number"==typeof b)for(_++;_<p&&"string"==typeof d[_];)_++;else{if(b===a)return d[_+1];_+=2}}}return null}(xo(),o)}const Fa="__parameters__";function H(o,a,d){return Xe(()=>{const p=function F(o){return function(...d){if(o){const p=o(...d);for(const _ in p)this[_]=p[_]}}}(a);function _(...b){if(this instanceof _)return p.apply(this,b),this;const T=new _(...b);return S.annotation=T,S;function S(R,B,W){const se=R.hasOwnProperty(Fa)?R[Fa]:Object.defineProperty(R,Fa,{value:[]})[Fa];for(;se.length<=W;)se.push(null);return(se[W]=se[W]||[]).push(T),R}}return d&&(_.prototype=Object.create(d.prototype)),_.prototype.ngMetadataName=o,_.annotationCls=_,_})}function gl(o,a){o.forEach(d=>Array.isArray(d)?gl(d,a):a(d))}function t_(o,a,d){a>=o.length?o.push(d):o.splice(a,0,d)}function dd(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function hd(o,a){const d=[];for(let p=0;p<o;p++)d.push(a);return d}function Gs(o,a,d){let p=Yl(o,a);return p>=0?o[1|p]=d:(p=~p,function hm(o,a,d,p){let _=o.length;if(_==a)o.push(d,p);else if(1===_)o.push(p,o[0]),o[0]=d;else{for(_--,o.push(o[_-1],o[_]);_>a;)o[_]=o[_-2],_--;o[a]=d,o[a+1]=p}}(o,p,a,d)),p}function ep(o,a){const d=Yl(o,a);if(d>=0)return o[1|d]}function Yl(o,a){return function fd(o,a,d){let p=0,_=o.length>>d;for(;_!==p;){const b=p+(_-p>>1),T=o[b<<d];if(a===T)return b<<d;T>a?_=b:p=b+1}return~(_<<d)}(o,a,1)}const Je=ai(H("Optional"),8),Nt=ai(H("SkipSelf"),4);function Xl(o){return 128==(128&o.flags)}var uh=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(uh||{});const vw=/^>|^->|<!--|-->|--!>|<!-$/g,Au=/(<|>)/g,yw="\u200b$1\u200b";const vm=new Map;let dT=0;function l(o){return vm.get(o)||null}class g{get lView(){return l(this.lViewId)}constructor(a,d,p){this.lViewId=a,this.nodeIndex=d,this.native=p}}function y(o){let a=Z(o);if(a){if(Zr(a)){const d=a;let p,_,b;if(ge(o)){if(p=function ht(o,a){const d=o[It].components;if(d)for(let p=0;p<d.length;p++){const _=d[p];if(Gi(_,o)[Oi]===a)return _}else if(Gi(Jn,o)[Oi]===a)return Jn;return-1}(d,o),-1==p)throw new Error("The provided component was not found in the application");_=o}else if(function _e(o){return o&&o.constructor&&o.constructor.\u0275dir}(o)){if(p=function an(o,a){let d=o[It].firstChild;for(;d;){const _=d.directiveEnd;for(let b=d.directiveStart;b<_;b++)if(o[b]===a)return d.index;d=et(d)}return-1}(d,o),-1==p)throw new Error("The provided directive was not found in the application");b=function Xt(o,a){const d=a[It].data[o];if(0===d.directiveStart)return Rt;const p=[];for(let _=d.directiveStart;_<d.directiveEnd;_++){const b=a[_];ge(b)||p.push(b)}return p}(p,d)}else if(p=Pe(d,o),-1==p)return null;const T=xi(d[p]),S=Z(T),R=S&&!Array.isArray(S)?S:I(d,p,T);if(_&&void 0===R.component&&(R.component=_,V(R.component,R)),b&&void 0===R.directives){R.directives=b;for(let B=0;B<b.length;B++)V(b[B],R)}V(R.native,R),a=R}}else{const d=o;let p=d;for(;p=p.parentNode;){const _=Z(p);if(_){const b=Array.isArray(_)?_:_.lView;if(!b)return null;const T=Pe(b,d);if(T>=0){const S=xi(b[T]),R=I(b,T,S);V(S,R),a=R;break}}}}return a||null}function I(o,a,d){return new g(o[Ir],a,d)}const k="__ngContext__";function V(o,a){Zr(a)?(o[k]=a[Ir],function f(o){vm.set(o[Ir],o)}(a)):o[k]=a}function Z(o){const a=o[k];return"number"==typeof a?l(a):a||null}function ge(o){return o&&o.constructor&&o.constructor.\u0275cmp}function Pe(o,a){const d=o[It];for(let p=Jn;p<d.bindingStartIndex;p++)if(xi(o[p])===a)return p;return-1}function et(o){if(o.child)return o.child;if(o.next)return o.next;for(;o.parent&&!o.parent.next;)o=o.parent;return o.parent&&o.parent.next}let gi;function bi(o,a){return gi(o,a)}function Zs(o){const a=o[Ii];return xr(a)?a[Ii]:a}function rp(o){return dh(o[qr])}function tf(o){return dh(o[so])}function dh(o){for(;null!==o&&!xr(o);)o=o[so];return o}function _d(o,a,d,p,_){if(null!=p){let b,T=!1;xr(p)?b=p:Zr(p)&&(T=!0,p=p[Mi]);const S=xi(p);0===o&&null!==d?null==_?gT(a,d,S):op(a,d,S,_||null,!0):1===o&&null!==d?op(a,d,S,_||null,!0):2===o?function Fy(o,a,d){const p=u_(o,a);p&&function wO(o,a,d,p){o.removeChild(a,d,p)}(o,p,a,d)}(a,S,T):3===o&&a.destroyNode(S),null!=b&&function CO(o,a,d,p,_){const b=d[Or];b!==xi(d)&&_d(a,o,p,b,_);for(let S=Bi;S<d.length;S++){const R=d[S];hh(R[It],R,o,a,p,b)}}(a,o,b,d,_)}}function Ks(o,a){return o.createComment(function Ws(o){return o.replace(vw,a=>a.replace(Au,yw))}(a))}function uc(o,a,d){return o.createElement(a,d)}function bO(o,a){const d=o[Wr],p=d.indexOf(a);Uh(a),d.splice(p,1)}function Py(o,a){if(o.length<=Bi)return;const d=Bi+a,p=o[d];if(p){const _=p[_s];null!==_&&_!==o&&bO(_,p),a>0&&(o[d-1][so]=p[so]);const b=dd(o,Bi+a);!function Oy(o,a){hh(o,a,a[on],2,null,null),a[Mi]=null,a[$n]=null}(p[It],p);const T=b[Cr];null!==T&&T.detachView(b[It]),p[Ii]=null,p[so]=null,p[Cn]&=-129}return p}function Ew(o,a){if(!(256&a[Cn])){const d=a[on];a[Lo]&&Ma(a[Lo]),a[Gr]&&Ma(a[Gr]),d.destroyNode&&hh(o,a,d,3,null,null),function yO(o){let a=o[qr];if(!a)return Ry(o[It],o);for(;a;){let d=null;if(Zr(a))d=a[qr];else{const p=a[Bi];p&&(d=p)}if(!d){for(;a&&!a[so]&&a!==o;)Zr(a)&&Ry(a[It],a),a=a[Ii];null===a&&(a=o),Zr(a)&&Ry(a[It],a),d=a&&a[so]}a=d}}(a)}}function Ry(o,a){if(!(256&a[Cn])){a[Cn]&=-129,a[Cn]|=256,function fT(o,a){let d;if(null!=o&&null!=(d=o.destroyHooks))for(let p=0;p<d.length;p+=2){const _=a[d[p]];if(!(_ instanceof nd)){const b=d[p+1];if(Array.isArray(b))for(let T=0;T<b.length;T+=2){const S=_[b[T]],R=b[T+1];ws(4,S,R);try{R.call(S)}finally{ws(5,S,R)}}else{ws(4,_,b);try{b.call(_)}finally{ws(5,_,b)}}}}}(o,a),function Cw(o,a){const d=o.cleanup,p=a[Qo];if(null!==d)for(let b=0;b<d.length-1;b+=2)if("string"==typeof d[b]){const T=d[b+3];T>=0?p[T]():p[-T].unsubscribe(),b+=2}else d[b].call(p[d[b+1]]);null!==p&&(a[Qo]=null);const _=a[Ta];if(null!==_){a[Ta]=null;for(let b=0;b<_.length;b++)(0,_[b])()}}(o,a),1===a[It].type&&a[on].destroy();const d=a[_s];if(null!==d&&xr(a[Ii])){d!==a[Ii]&&bO(d,a);const p=a[Cr];null!==p&&p.detachView(o)}!function h(o){vm.delete(o[Ir])}(a)}}function pT(o,a,d){return function mT(o,a,d){let p=a;for(;null!==p&&40&p.type;)p=(a=p).parent;if(null===p)return d[Mi];{const{componentOffset:_}=p;if(_>-1){const{encapsulation:b}=o.data[p.directiveStart+_];if(b===_t.None||b===_t.Emulated)return null}return jo(p,d)}}(o,a.parent,d)}function op(o,a,d,p,_){o.insertBefore(a,d,p,_)}function gT(o,a,d){o.appendChild(a,d)}function _T(o,a,d,p,_){null!==p?op(o,a,d,p,_):gT(o,a,d)}function u_(o,a){return o.parentNode(a)}function vT(o,a,d){return yT(o,a,d)}let d_,Ly,Dw,g_,yT=function Iw(o,a,d){return 40&o.type?jo(o,d):null};function ky(o,a,d,p){const _=pT(o,p,a),b=a[on],S=vT(p.parent||a[$n],p,a);if(null!=_)if(Array.isArray(d))for(let R=0;R<d.length;R++)_T(b,_,d[R],S,!1);else _T(b,_,d,S,!1);void 0!==d_&&d_(b,p,a,d,_)}function h_(o,a){if(null!==a){const d=a.type;if(3&d)return jo(a,o);if(4&d)return Ny(-1,o[a.index]);if(8&d){const p=a.child;if(null!==p)return h_(o,p);{const _=o[a.index];return xr(_)?Ny(-1,_):xi(_)}}if(32&d)return bi(a,o)()||xi(o[a.index]);{const p=wT(o,a);return null!==p?Array.isArray(p)?p[0]:h_(Zs(o[Er]),p):h_(o,a.next)}}return null}function wT(o,a){return null!==a?o[Er][$n].projection[a.projection]:null}function Ny(o,a){const d=Bi+o+1;if(d<a.length){const p=a[d],_=p[It].firstChild;if(null!==_)return h_(p,_)}return a[Or]}function f_(o,a,d,p,_,b,T){for(;null!=d;){const S=p[d.index],R=d.type;if(T&&0===a&&(S&&V(xi(S),p),d.flags|=2),32!=(32&d.flags))if(8&R)f_(o,a,d.child,p,_,b,!1),_d(a,o,_,S,b);else if(32&R){const B=bi(d,p);let W;for(;W=B();)_d(a,o,_,W,b);_d(a,o,_,S,b)}else 16&R?ET(o,a,p,d,_,b):_d(a,o,_,S,b);d=T?d.projectionNext:d.next}}function hh(o,a,d,p,_,b){f_(d,p,o.firstChild,a,_,b,!1)}function ET(o,a,d,p,_,b){const T=d[Er],R=T[$n].projection[p.projection];if(Array.isArray(R))for(let B=0;B<R.length;B++)_d(a,o,_,R[B],b);else{let B=R;const W=T[Ii];Xl(p)&&(B.flags|=128),f_(o,a,B,W,_,b,!0)}}function CT(o,a,d){""===d?o.removeAttribute(a,"class"):o.setAttribute(a,"class",d)}function p_(o,a,d){const{mergedAttrs:p,classes:_,styles:b}=d;null!==p&&Ko(o,a,p),null!==_&&CT(o,a,_),null!==b&&function IO(o,a,d){o.setAttribute(a,"style",d)}(o,a,b)}function sp(o){return function Uy(){if(void 0===Ly&&(Ly=null,Ie.trustedTypes))try{Ly=Ie.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Ly}()?.createHTML(o)||o}function xT(o){Dw=o}function ym(){if(void 0!==Dw)return Dw;if(typeof document<"u")return document;throw new Ce(210,!1)}function bm(){if(void 0===g_&&(g_=null,Ie.trustedTypes))try{g_=Ie.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return g_}function TT(o){return bm()?.createHTML(o)||o}function Vy(o){return bm()?.createScriptURL(o)||o}class ap{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ze})`}}class ST extends ap{getTypeName(){return"HTML"}}class TO extends ap{getTypeName(){return"Style"}}class DO extends ap{getTypeName(){return"Script"}}class SO extends ap{getTypeName(){return"URL"}}class AO extends ap{getTypeName(){return"ResourceURL"}}function yd(o){return o instanceof ap?o.changingThisBreaksApplicationSecurity:o}function fh(o,a){const d=function AT(o){return o instanceof ap&&o.getTypeName()||null}(o);if(null!=d&&d!==a){if("ResourceURL"===d&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${d} (see ${Ze})`)}return d===a}function MO(o){return new ST(o)}function MT(o){return new TO(o)}function OO(o){return new DO(o)}function PO(o){return new SO(o)}function RO(o){return new AO(o)}class kO{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const d=(new window.DOMParser).parseFromString(sp(a),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(a):(d.removeChild(d.firstChild),d)}catch{return null}}}class NO{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const d=this.inertDocument.createElement("template");return d.innerHTML=sp(a),d}}const Sw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function __(o){return(o=String(o)).match(Sw)?o:"unsafe:"+o}function ph(o){const a={};for(const d of o.split(","))a[d]=!0;return a}function By(...o){const a={};for(const d of o)for(const p in d)d.hasOwnProperty(p)&&(a[p]=!0);return a}const FO=ph("area,br,col,hr,img,wbr"),LO=ph("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bd=ph("rp,rt"),RT=By(FO,By(LO,ph("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),By(bd,ph("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),By(bd,LO)),Mw=ph("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),NT=By(Mw,ph("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ph("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),UO=ph("script,style,template");class VO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let d=a.firstChild,p=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?p=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,p&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let _=this.checkClobberedElement(d,d.nextSibling);if(_){d=_;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(a){const d=a.nodeName.toLowerCase();if(!RT.hasOwnProperty(d))return this.sanitizedSomething=!0,!UO.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const p=a.attributes;for(let _=0;_<p.length;_++){const b=p.item(_),T=b.name,S=T.toLowerCase();if(!NT.hasOwnProperty(S)){this.sanitizedSomething=!0;continue}let R=b.value;Mw[S]&&(R=__(R)),this.buf.push(" ",T,'="',jO(R),'"')}return this.buf.push(">"),!0}endElement(a){const d=a.nodeName.toLowerCase();RT.hasOwnProperty(d)&&!FO.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(a){this.buf.push(jO(a))}checkClobberedElement(a,d){if(d&&(a.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return d}}const BO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y2=/([^\#-~ |!])/g;function jO(o){return o.replace(/&/g,"&amp;").replace(BO,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(y2,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ow;function FT(o,a){let d=null;try{Ow=Ow||function OT(o){const a=new NO(o);return function PT(){try{return!!(new window.DOMParser).parseFromString(sp(""),"text/html")}catch{return!1}}()?new kO(a):a}(o);let p=a?String(a):"";d=Ow.getInertBodyElement(p);let _=5,b=p;do{if(0===_)throw new Error("Failed to sanitize html because the input is unstable");_--,p=b,b=d.innerHTML,d=Ow.getInertBodyElement(p)}while(p!==b);return sp((new VO).sanitizeChildren(LT(d)||d))}finally{if(d){const p=LT(d)||d;for(;p.firstChild;)p.removeChild(p.firstChild)}}}function LT(o){return"content"in o&&function b2(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Em=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(Em||{});function dt(o){const a=cp();return a?TT(a.sanitize(Em.HTML,o)||""):fh(o,"HTML")?TT(yd(o)):FT(ym(),$e(o))}function tu(o){const a=cp();return a?a.sanitize(Em.URL,o)||"":fh(o,"URL")?yd(o):__($e(o))}function ie(o){const a=cp();if(a)return Vy(a.sanitize(Em.RESOURCE_URL,o)||"");if(fh(o,"ResourceURL"))return Vy(yd(o));throw new Ce(904,!1)}function Mo(o,a,d){return function zO(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?ie:tu}(a,d)(o)}function cp(){const o=pt();return o&&o[Xo].sanitizer}class Ji{constructor(a,d){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=fn({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const v_=new Ji("ENVIRONMENT_INITIALIZER"),VT=new Ji("INJECTOR",-1),kw=new Ji("INJECTOR_DEF_TYPES");class Nw{get(a,d=pi){if(d===pi){const p=new Error(`NullInjectorError: No provider for ${de(a)}!`);throw p.name="NullInjectorError",p}return d}}function HO(...o){return{\u0275providers:jT(0,o),\u0275fromNgModule:!0}}function jT(o,...a){const d=[],p=new Set;let _;const b=T=>{d.push(T)};return gl(a,T=>{const S=T;lp(S,b,[],p)&&(_||=[],_.push(S))}),void 0!==_&&Ys(_,b),d}function Ys(o,a){for(let d=0;d<o.length;d++){const{ngModule:p,providers:_}=o[d];y_(_,b=>{a(b,p)})}}function lp(o,a,d,p){if(!(o=st(o)))return!1;let _=null,b=wi(o);const T=!b&&Bn(o);if(b||T){if(T&&!T.standalone)return!1;_=o}else{const R=o.ngModule;if(b=wi(R),!b)return!1;_=R}const S=p.has(_);if(T){if(S)return!1;if(p.add(_),T.dependencies){const R="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const B of R)lp(B,a,d,p)}}else{if(!b)return!1;{if(null!=b.imports&&!S){let B;p.add(_);try{gl(b.imports,W=>{lp(W,a,d,p)&&(B||=[],B.push(W))})}finally{}void 0!==B&&Ys(B,a)}if(!S){const B=Us(_)||(()=>new _);a({provide:_,useFactory:B,deps:Rt},_),a({provide:kw,useValue:_,multi:!0},_),a({provide:v_,useValue:()=>St(_),multi:!0},_)}const R=b.providers;if(null!=R&&!S){const B=o;y_(R,W=>{a(W,B)})}}}return _!==o&&void 0!==o.providers}function y_(o,a){for(let d of o)ke(d)&&(d=d.\u0275providers),Array.isArray(d)?y_(d,a):a(d)}const jy=z({provide:String,useValue:z});function Cm(o){return null!==o&&"object"==typeof o&&jy in o}function up(o){return"function"==typeof o}const Fw=new Ji("Set Injector scope."),Hy={},b_={};let $y;function dp(){return void 0===$y&&($y=new Nw),$y}class Ou{}class qy extends Ou{get destroyed(){return this._destroyed}constructor(a,d,p,_){super(),this.parent=d,this.source=p,this.scopes=_,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,hp(a,T=>this.processProvider(T)),this.records.set(VT,nf(void 0,this)),_.has("environment")&&this.records.set(Ou,nf(void 0,this));const b=this.records.get(Fw);null!=b&&"string"==typeof b.value&&this.scopes.add(b.value),this.injectorDefTypes=new Set(this.get(kw.multi,Rt,sn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const d of this._ngOnDestroyHooks)d.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const d of a)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const d=Me(this),p=zt(void 0);try{return a()}finally{Me(d),zt(p)}}get(a,d=pi,p=sn.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(go))return a[go](this);p=Xn(p);const b=Me(this),T=zt(void 0);try{if(!(p&sn.SkipSelf)){let R=this.records.get(a);if(void 0===R){const B=function GT(o){return"function"==typeof o||"object"==typeof o&&o instanceof Ji}(a)&&Ut(a);R=B&&this.injectableDefInScope(B)?nf(Lw(a),Hy):null,this.records.set(a,R)}if(null!=R)return this.hydrate(a,R)}return(p&sn.Self?dp():this.parent).get(a,d=p&sn.Optional&&d===pi?null:d)}catch(S){if("NullInjectorError"===S.name){if((S[gr]=S[gr]||[]).unshift(de(a)),b)throw S;return function _r(o,a,d,p){const _=o[gr];throw a[J]&&_.unshift(a[J]),o.message=function Zo(o,a,d,p=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let _=de(a);if(Array.isArray(a))_=a.map(de).join(" -> ");else if("object"==typeof a){let b=[];for(let T in a)if(a.hasOwnProperty(T)){let S=a[T];b.push(T+":"+("string"==typeof S?JSON.stringify(S):de(S)))}_=`{${b.join(", ")}}`}return`${d}${p?"("+p+")":""}[${_}]: ${o.replace(fe,"\n  ")}`}("\n"+o.message,_,d,p),o.ngTokenPath=_,o[gr]=null,o}(S,a,"R3InjectorError",this.source)}throw S}finally{zt(T),Me(b)}}resolveInjectorInitializers(){const a=Me(this),d=zt(void 0);try{const _=this.get(v_.multi,Rt,sn.Self);for(const b of _)b()}finally{Me(a),zt(d)}}toString(){const a=[],d=this.records;for(const p of d.keys())a.push(de(p));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(a){let d=up(a=st(a))?a:st(a&&a.provide);const p=function qO(o){return Cm(o)?nf(void 0,o.useValue):nf(Uw(o),Hy)}(a);if(up(a)||!0!==a.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=nf(void 0,Hy,!0),_.factory=()=>En(_.multi),this.records.set(d,_)),d=a,_.multi.push(a)}this.records.set(d,p)}hydrate(a,d){return d.value===Hy&&(d.value=b_,d.value=d.factory()),"object"==typeof d.value&&d.value&&function Vw(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(a){if(!a.providedIn)return!1;const d=st(a.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}removeOnDestroy(a){const d=this._onDestroyHooks.indexOf(a);-1!==d&&this._onDestroyHooks.splice(d,1)}}function Lw(o){const a=Ut(o),d=null!==a?a.factory:Us(o);if(null!==d)return d;if(o instanceof Ji)throw new Ce(204,!1);if(o instanceof Function)return function $O(o){const a=o.length;if(a>0)throw hd(a,"?"),new Ce(204,!1);const d=function Un(o){return o&&(o[Si]||o[Vi])||null}(o);return null!==d?()=>d.factory(o):()=>new o}(o);throw new Ce(204,!1)}function Uw(o,a,d){let p;if(up(o)){const _=st(o);return Us(_)||Lw(_)}if(Cm(o))p=()=>st(o.useValue);else if(function HT(o){return!(!o||!o.useFactory)}(o))p=()=>o.useFactory(...En(o.deps||[]));else if(function zy(o){return!(!o||!o.useExisting)}(o))p=()=>St(st(o.useExisting));else{const _=st(o&&(o.useClass||o.provide));if(!function qT(o){return!!o.deps}(o))return Us(_)||Lw(_);p=()=>new _(...En(o.deps))}return p}function nf(o,a,d=!1){return{factory:o,value:a,multi:d?[]:void 0}}function hp(o,a){for(const d of o)Array.isArray(d)?hp(d,a):d&&ke(d)?hp(d.\u0275providers,a):a(d)}const WT=new Ji("AppId",{providedIn:"root",factory:()=>Bw}),Bw="ng",Gy=new Ji("Platform Initializer"),jw=new Ji("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zw=new Ji("AnimationModuleType"),Hw=new Ji("CSP nonce",{providedIn:"root",factory:()=>ym().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let KT=(o,a,d)=>null;function Gw(o,a,d=!1){return KT(o,a,d)}class eD{}class YO{}class Kw{resolveComponentFactory(a){throw function QO(o){const a=Error(`No component factory found for ${de(o)}.`);return a.ngComponent=o,a}(a)}}let tb=(()=>{class o{static#e=this.NULL=new Kw}return o})();function x2(){return xm(xo(),pt())}function xm(o,a){return new Tm(jo(o,a))}let Tm=(()=>{class o{constructor(d){this.nativeElement=d}static#e=this.__NG_ELEMENT_ID__=x2}return o})();function JO(o){return o instanceof Tm?o.nativeElement:o}class Yw{}let Qw=(()=>{class o{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function pp(){const o=pt(),d=Gi(xo().index,o);return(Zr(d)?d:o)[on]}()}return o})(),T2=(()=>{class o{static#e=this.\u0275prov=fn({token:o,providedIn:"root",factory:()=>null})}return o})();class nb{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const eP=new nb("16.2.7"),Xw={};function mp(o,a=null,d=null,p){const _=iD(o,a,d,p);return _.resolveInjectorInitializers(),_}function iD(o,a=null,d=null,p,_=new Set){const b=[d||Rt,HO(o)];return p=p||("object"==typeof o?void 0:de(o)),new qy(b,a||dp(),p||null,_)}let nu=(()=>{class o{static#e=this.THROW_IF_NOT_FOUND=pi;static#t=this.NULL=new Nw;static create(d,p){if(Array.isArray(d))return mp({name:""},p,d,"");{const _=d.name??"";return mp({name:_},d.parent,d.providers,_)}}static#n=this.\u0275prov=fn({token:o,providedIn:"any",factory:()=>St(VT)});static#i=this.__NG_ELEMENT_ID__=-1}return o})();function gp(o){return o.ngOriginalError}class wd{constructor(){this._console=console}handleError(a){const d=this._findOriginalError(a);this._console.error("ERROR",a),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(a){let d=a&&gp(a);for(;d&&gp(d);)d=gp(d);return d||null}}function tE(o){return a=>{setTimeout(o,void 0,a)}}const Ed=class rP extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,d,p){let _=a,b=d||(()=>null),T=p;if(a&&"object"==typeof a){const R=a;_=R.next?.bind(R),b=R.error?.bind(R),T=R.complete?.bind(R)}this.__isAsync&&(b=tE(b),_&&(_=tE(_)),T&&(T=tE(T)));const S=super.subscribe({next:_,error:b,complete:T});return a instanceof U.w0&&a.add(S),S}};function oD(...o){}class Qs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:p=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ed(!1),this.onMicrotaskEmpty=new Ed(!1),this.onStable=new Ed(!1),this.onError=new Ed(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const _=this;_._nesting=0,_._outer=_._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!p&&d,_.shouldCoalesceRunChangeDetection=p,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function oP(){const o="function"==typeof Ie.requestAnimationFrame;let a=Ie[o?"requestAnimationFrame":"setTimeout"],d=Ie[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&d){const p=a[Zone.__symbol__("OriginalDelegate")];p&&(a=p);const _=d[Zone.__symbol__("OriginalDelegate")];_&&(d=_)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function F2(o){const a=()=>{!function N2(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Ie,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,aD(o),o.isCheckStableRunning=!0,sD(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),aD(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,p,_,b,T,S)=>{if(function lP(o){return!(!Array.isArray(o)||1!==o.length)&&!0===o[0].data?.__ignore_ng_zone__}(S))return d.invokeTask(_,b,T,S);try{return sP(o),d.invokeTask(_,b,T,S)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||o.shouldCoalesceRunChangeDetection)&&a(),cD(o)}},onInvoke:(d,p,_,b,T,S,R)=>{try{return sP(o),d.invoke(_,b,T,S,R)}finally{o.shouldCoalesceRunChangeDetection&&a(),cD(o)}},onHasTask:(d,p,_,b)=>{d.hasTask(_,b),p===_&&("microTask"==b.change?(o._hasPendingMicrotasks=b.microTask,aD(o),sD(o)):"macroTask"==b.change&&(o.hasPendingMacrotasks=b.macroTask))},onHandleError:(d,p,_,b)=>(d.handleError(_,b),o.runOutsideAngular(()=>o.onError.emit(b)),!1)})}(_)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qs.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(Qs.isInAngularZone())throw new Ce(909,!1)}run(a,d,p){return this._inner.run(a,d,p)}runTask(a,d,p,_){const b=this._inner,T=b.scheduleEventTask("NgZoneEvent: "+_,a,k2,oD,oD);try{return b.runTask(T,d,p)}finally{b.cancelTask(T)}}runGuarded(a,d,p){return this._inner.runGuarded(a,d,p)}runOutsideAngular(a){return this._outer.run(a)}}const k2={};function sD(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function aD(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function sP(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function cD(o){o._nesting--,sD(o)}class L2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ed,this.onMicrotaskEmpty=new Ed,this.onStable=new Ed,this.onError=new Ed}run(a,d,p){return a.apply(d,p)}runGuarded(a,d,p){return a.apply(d,p)}runOutsideAngular(a){return a()}runTask(a,d,p,_){return a.apply(d,p)}}const aP=new Ji("",{providedIn:"root",factory:cP});function cP(){const o=Vt(Qs);let a=!0;const d=new K.y(_=>{a=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{_.next(a),_.complete()})}),p=new K.y(_=>{let b;o.runOutsideAngular(()=>{b=o.onStable.subscribe(()=>{Qs.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(a=!0,_.next(!0))})})});const T=o.onUnstable.subscribe(()=>{Qs.assertInAngularZone(),a&&(a=!1,o.runOutsideAngular(()=>{_.next(!1)}))});return()=>{b.unsubscribe(),T.unsubscribe()}});return(0,pe.T)(d,p.pipe((0,Oe.B)()))}function uP(o){return o.ownerDocument.defaultView}function af(o){return o instanceof Function?o():o}let lD=(()=>{class o{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=fn({token:o,providedIn:"root",factory:()=>new o})}return o})();function ib(o){for(;o;){o[Cn]|=64;const a=Zs(o);if(aa(o)&&!a)return o;o=a}return null}const mP=new Ji("",{providedIn:"root",factory:()=>!1});let iE=null;function yP(o,a){return o[a]??EP()}function bP(o,a){const d=EP();d.producerNode?.length&&(o[a]=iE,d.lView=o,iE=wP())}const W2={...Ac,consumerIsAlwaysLive:!0,consumerMarkedDirty:o=>{ib(o.lView)},lView:null};function wP(){return Object.create(W2)}function EP(){return iE??=wP(),iE}const si={};function CP(o){IP(ii(),pt(),ts()+o,!1)}function IP(o,a,d,p){if(!p)if(3==(3&a[Cn])){const b=o.preOrderCheckHooks;null!==b&&jr(a,b,d)}else{const b=o.preOrderHooks;null!==b&&Lc(a,b,0,d)}ha(d)}function Dm(o,a=sn.Default){const d=pt();return null===d?St(o,a):$s(xo(),d,st(o),a)}function xP(){throw new Error("invalid")}function rE(o,a,d,p,_,b,T,S,R,B,W){const se=a.blueprint.slice();return se[Mi]=_,se[Cn]=140|p,(null!==B||o&&2048&o[Cn])&&(se[Cn]|=2048),Kd(se),se[Ii]=se[wr]=o,se[Oi]=d,se[Xo]=T||o&&o[Xo],se[on]=S||o&&o[on],se[ra]=R||o&&o[ra]||null,se[$n]=b,se[Ir]=function bw(){return dT++}(),se[Fi]=W,se[oa]=B,se[Er]=2==a.type?o[Er]:se,se}function Sm(o,a,d,p,_){let b=o.data[a];if(null===b)b=function bl(o,a,d,p,_){const b=ed(),T=Wi(),R=o.data[a]=function AP(o,a,d,p,_,b){let T=a?a.injectorIndex:-1,S=0;return Es()&&(S|=128),{type:d,index:p,insertBeforeIndex:null,injectorIndex:T,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:S,providerIndexes:0,value:_,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?b:b&&b.parent,d,a,p,_);return null===o.firstChild&&(o.firstChild=R),null!==b&&(T?null==b.child&&null!==R.parent&&(b.child=R):null===b.next&&(b.next=R,R.prev=b)),R}(o,a,d,p,_),function Bh(){return In.lFrame.inI18n}()&&(b.flags|=32);else if(64&b.type){b.type=d,b.value=p,b.attrs=_;const T=function To(){const o=In.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();b.injectorIndex=null===T?-1:T.injectorIndex}return Do(b,!0),b}function $t(o,a,d,p){if(0===d)return-1;const _=a.length;for(let b=0;b<d;b++)a.push(p),o.blueprint.push(p),o.data.push(null);return _}function rb(o,a,d,p,_){const b=yP(a,Lo),T=ts(),S=2&p;try{ha(-1),S&&a.length>Jn&&IP(o,a,Jn,!1),ws(S?2:0,_);const B=S?b:null,W=il(B);try{null!==B&&(B.dirty=!1),d(p,_)}finally{yi(B,W)}}finally{S&&null===a[Lo]&&bP(a,Lo),ha(T),ws(S?3:1,_)}}function Wn(o,a,d){if(nl(a)){const p=Yr(null);try{const b=a.directiveEnd;for(let T=a.directiveStart;T<b;T++){const S=o.data[T];S.contentQueries&&S.contentQueries(1,d[T],T)}}finally{Yr(p)}}}function Am(o,a,d){$i()&&(function fD(o,a,d,p){const _=d.directiveStart,b=d.directiveEnd;Pr(d)&&function uE(o,a,d){const p=jo(a,o),_=uD(d);let T=16;d.signals?T=4096:d.onPush&&(T=64);const S=vp(o,rE(o,_,null,T,p,a,null,o[Xo].rendererFactory.createRenderer(p,d),null,null,null));o[a.index]=S}(a,d,o.data[_+d.componentOffset]),o.firstCreatePass||Hs(d,a),V(p,a);const T=d.initialInputs;for(let S=_;S<b;S++){const R=o.data[S],B=Na(a,o,S,d);V(B,a),null!==T&&P_(0,S-_,B,R,0,T),di(R)&&(Gi(d.index,a)[Oi]=Na(a,o,S,d))}}(o,a,d,jo(d,a)),64==(64&d.flags)&&cb(o,a,d))}function _p(o,a,d=jo){const p=a.localNames;if(null!==p){let _=a.index+1;for(let b=0;b<p.length;b+=2){const T=p[b+1],S=-1===T?d(a,o):o[T];o[_++]=S}}}function uD(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=A_(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):a}function A_(o,a,d,p,_,b,T,S,R,B,W){const se=Jn+p,xe=se+_,Be=function TP(o,a){const d=[];for(let p=0;p<a;p++)d.push(p<o?null:si);return d}(se,xe),ft="function"==typeof B?B():B;return Be[It]={type:o,blueprint:Be,template:d,queries:null,viewQuery:S,declTNode:a,data:Be.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:xe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:R,consts:ft,incompleteFirstPass:!1,ssrId:W}}let ma=o=>null;function oE(o,a,d,p){for(let _ in o)if(o.hasOwnProperty(_)){d=null===d?{}:d;const b=o[_];null===p?sb(d,a,_,b):p.hasOwnProperty(_)&&sb(d,a,p[_],b)}return d}function sb(o,a,d,p){o.hasOwnProperty(d)?o[d].push(a,p):o[d]=[a,p]}function wl(o,a,d,p,_,b,T,S){const R=jo(a,d);let W,B=a.inputs;!S&&null!=B&&(W=B[p])?(F_(o,d,W,p,_),Pr(a)&&function M_(o,a){const d=Gi(a,o);16&d[Cn]||(d[Cn]|=64)}(d,a.index)):3&a.type&&(p=function Va(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(p),_=null!=T?T(_,a.value||"",p):_,b.setProperty(R,p,_))}function O_(o,a,d,p){if($i()){const _=null===p?null:{"":-1},b=function OP(o,a){const d=o.directiveRegistry;let p=null,_=null;if(d)for(let b=0;b<d.length;b++){const T=d[b];if(Ya(a,T.selectors,!1))if(p||(p=[]),di(T))if(null!==T.findHostDirectiveDefs){const S=[];_=_||new Map,T.findHostDirectiveDefs(T,S,_),p.unshift(...S,T),lb(o,a,S.length)}else p.unshift(T),lb(o,a,0);else _=_||new Map,T.findHostDirectiveDefs?.(T,p,_),p.push(T)}return null===p?null:[p,_]}(o,d);let T,S;null===b?T=S=null:[T,S]=b,null!==T&&hD(o,a,d,T,_,S),_&&function sE(o,a,d){if(a){const p=o.localNames=[];for(let _=0;_<a.length;_+=2){const b=d[a[_+1]];if(null==b)throw new Ce(-301,!1);p.push(a[_],b)}}}(d,p,_)}d.mergedAttrs=Yo(d.mergedAttrs,d.attrs)}function hD(o,a,d,p,_,b){for(let B=0;B<p.length;B++)Wl(Hs(d,a),o,p[B].type);!function cE(o,a,d){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+d,o.providerIndexes=a}(d,o.data.length,p.length);for(let B=0;B<p.length;B++){const W=p[B];W.providersResolver&&W.providersResolver(W)}let T=!1,S=!1,R=$t(o,a,p.length,null);for(let B=0;B<p.length;B++){const W=p[B];d.mergedAttrs=Yo(d.mergedAttrs,W.hostAttrs),lE(o,d,a,R,W),aE(R,W,_),null!==W.contentQueries&&(d.flags|=4),(null!==W.hostBindings||null!==W.hostAttrs||0!==W.hostVars)&&(d.flags|=64);const se=W.type.prototype;!T&&(se.ngOnChanges||se.ngOnInit||se.ngDoCheck)&&((o.preOrderHooks??=[]).push(d.index),T=!0),!S&&(se.ngOnChanges||se.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(d.index),S=!0),R++}!function dD(o,a,d){const _=a.directiveEnd,b=o.data,T=a.attrs,S=[];let R=null,B=null;for(let W=a.directiveStart;W<_;W++){const se=b[W],xe=d?d.get(se):null,ft=xe?xe.outputs:null;R=oE(se.inputs,W,R,xe?xe.inputs:null),B=oE(se.outputs,W,B,ft);const Dt=null===R||null===T||Qi(a)?null:R_(R,W,T);S.push(Dt)}null!==R&&(R.hasOwnProperty("class")&&(a.flags|=8),R.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=S,a.inputs=R,a.outputs=B}(o,d,b)}function cb(o,a,d){const p=d.directiveStart,_=d.directiveEnd,b=d.index,T=function um(){return In.lFrame.currentDirectiveIndex}();try{ha(b);for(let S=p;S<_;S++){const R=o.data[S],B=a[S];bu(S),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&pD(R,B)}}finally{ha(-1),bu(T)}}function pD(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function lb(o,a,d){a.componentOffset=d,(o.components??=[]).push(a.index)}function aE(o,a,d){if(d){if(a.exportAs)for(let p=0;p<a.exportAs.length;p++)d[a.exportAs[p]]=o;di(a)&&(d[""]=o)}}function lE(o,a,d,p,_){o.data[p]=_;const b=_.factory||(_.factory=Us(_.type)),T=new nd(b,di(_),Dm);o.blueprint[p]=T,d[p]=T,function MP(o,a,d,p,_){const b=_.hostBindings;if(b){let T=o.hostBindingOpCodes;null===T&&(T=o.hostBindingOpCodes=[]);const S=~a.index;(function Mm(o){let a=o.length;for(;a>0;){const d=o[--a];if("number"==typeof d&&d<0)return d}return 0})(T)!=S&&T.push(S),T.push(d,p,b)}}(o,a,p,$t(o,d,_.hostVars,si),_)}function Pu(o,a,d,p,_,b){const T=jo(o,a);!function dE(o,a,d,p,_,b,T){if(null==b)o.removeAttribute(a,_,d);else{const S=null==T?$e(b):T(b,p||"",_);o.setAttribute(a,_,S,d)}}(a[on],T,b,o.value,d,p,_)}function P_(o,a,d,p,_,b){const T=b[a];if(null!==T)for(let S=0;S<T.length;)mD(p,d,T[S++],T[S++],T[S++])}function mD(o,a,d,p,_){const b=Yr(null);try{const T=o.inputTransforms;null!==T&&T.hasOwnProperty(p)&&(_=T[p].call(a,_)),null!==o.setInput?o.setInput(a,_,d,p):a[p]=_}finally{Yr(b)}}function R_(o,a,d){let p=null,_=0;for(;_<d.length;){const b=d[_];if(0!==b)if(5!==b){if("number"==typeof b)break;if(o.hasOwnProperty(b)){null===p&&(p=[]);const T=o[b];for(let S=0;S<T.length;S+=2)if(T[S]===a){p.push(b,T[S+1],d[_+1]);break}}_+=2}else _+=2;else _+=4}return p}function gD(o,a,d,p){return[o,!0,!1,a,null,0,p,d,null,null,null]}function _D(o,a){const d=o.contentQueries;if(null!==d)for(let p=0;p<d.length;p+=2){const b=d[p+1];if(-1!==b){const T=o.data[b];ll(d[p]),T.contentQueries(2,a[b],b)}}}function vp(o,a){return o[qr]?o[Rl][so]=a:o[qr]=a,o[Rl]=a,a}function k_(o,a,d){ll(0);const p=Yr(null);try{a(o,d)}finally{Yr(p)}}function hE(o){return o[Qo]||(o[Qo]=[])}function fE(o){return o.cleanup||(o.cleanup=[])}function N_(o,a){const d=o[ra],p=d?d.get(wd,null):null;p&&p.handleError(a)}function F_(o,a,d,p,_){for(let b=0;b<d.length;){const T=d[b++],S=d[b++];mD(o.data[T],a[T],p,S,_)}}function Ru(o,a,d){const p=Pa(a,o);!function My(o,a,d){o.setValue(a,d)}(o[on],p,d)}function mE(o,a){const d=Gi(a,o),p=d[It];!function gE(o,a){for(let d=a.length;d<o.blueprint.length;d++)a.push(o.blueprint[d])}(p,d);const _=d[Mi];null!==_&&null===d[Fi]&&(d[Fi]=Gw(_,d[ra])),ub(p,d,d[Oi])}function ub(o,a,d){jl(a);try{const p=o.viewQuery;null!==p&&k_(1,p,d);const _=o.template;null!==_&&rb(o,a,_,1,d),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&_D(o,a),o.staticViewQueries&&k_(2,o.viewQuery,d);const b=o.components;null!==b&&function vD(o,a){for(let d=0;d<a.length;d++)mE(o,a[d])}(a,b)}catch(p){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),p}finally{a[Cn]&=-5,sc()}}let yD=(()=>{class o{constructor(){this.all=new Set,this.queue=new Map}create(d,p,_){const b=typeof Zone>"u"?null:Zone.current,T=function Io(o,a,d){const p=Object.create(Fh);d&&(p.consumerAllowSignalWrites=!0),p.fn=o,p.schedule=a;const _=T=>{p.cleanupFn=T};return p.ref={notify:()=>ua(p),run:()=>{if(p.dirty=!1,p.hasRun&&!Bo(p))return;p.hasRun=!0;const T=il(p);try{p.cleanupFn(),p.cleanupFn=Yu,p.fn(_)}finally{yi(p,T)}},cleanup:()=>p.cleanupFn()},p.ref}(d,B=>{this.all.has(B)&&this.queue.set(B,b)},_);let S;this.all.add(T),T.notify();const R=()=>{T.cleanup(),S?.(),this.all.delete(T),this.queue.delete(T)};return S=p?.onDestroy(R),{destroy:R}}flush(){if(0!==this.queue.size)for(const[d,p]of this.queue)this.queue.delete(d),p?p.run(()=>d.run()):d.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=fn({token:o,providedIn:"root",factory:()=>new o})}return o})();function L_(o,a,d){let p=d?o.styles:null,_=d?o.classes:null,b=0;if(null!==a)for(let T=0;T<a.length;T++){const S=a[T];"number"==typeof S?b=S:1==b?_=Ne(_,S):2==b&&(p=Ne(p,S+": "+a[++T]+";"))}d?o.styles=p:o.stylesWithoutHost=p,d?o.classes=_:o.classesWithoutHost=_}function yp(o,a,d,p,_=!1){for(;null!==d;){const b=a[d.index];null!==b&&p.push(xi(b)),xr(b)&&_E(b,p);const T=d.type;if(8&T)yp(o,a,d.child,p);else if(32&T){const S=bi(d,a);let R;for(;R=S();)p.push(R)}else if(16&T){const S=wT(a,d);if(Array.isArray(S))p.push(...S);else{const R=Zs(a[Er]);yp(R[It],R,S,p,!0)}}d=_?d.projectionNext:d.next}return p}function _E(o,a){for(let d=Bi;d<o.length;d++){const p=o[d],_=p[It].firstChild;null!==_&&yp(p[It],p,_,a)}o[Or]!==o[Mi]&&a.push(o[Or])}function db(o,a,d,p=!0){const _=a[Xo],b=_.rendererFactory,T=_.afterRenderEventManager;b.begin?.(),T?.begin();try{hb(o,a,o.template,d)}catch(R){throw p&&N_(a,R),R}finally{b.end?.(),_.effectManager?.flush(),T?.end()}}function hb(o,a,d,p){const _=a[Cn];if(256!=(256&_)){a[Xo].effectManager?.flush(),jl(a);try{Kd(a),function co(o){return In.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==d&&rb(o,a,d,2,p);const T=3==(3&_);if(T){const B=o.preOrderCheckHooks;null!==B&&jr(a,B,null)}else{const B=o.preOrderHooks;null!==B&&Lc(a,B,0,null),Nr(a,0)}if(function ga(o){for(let a=rp(o);null!==a;a=tf(a)){if(!a[Da])continue;const d=a[Wr];for(let p=0;p<d.length;p++){kc(d[p])}}}(a),Ss(a,2),null!==o.contentQueries&&_D(o,a),T){const B=o.contentCheckHooks;null!==B&&jr(a,B)}else{const B=o.contentHooks;null!==B&&Lc(a,B,1),Nr(a,1)}!function Z2(o,a){const d=o.hostBindingOpCodes;if(null===d)return;const p=yP(a,Gr);try{for(let _=0;_<d.length;_++){const b=d[_];if(b<0)ha(~b);else{const T=b,S=d[++_],R=d[++_];td(S,T),p.dirty=!1;const B=il(p);try{R(2,a[T])}finally{yi(p,B)}}}}finally{null===a[Gr]&&bP(a,Gr),ha(-1)}}(o,a);const S=o.components;null!==S&&ED(a,S,0);const R=o.viewQuery;if(null!==R&&k_(2,R,p),T){const B=o.viewCheckHooks;null!==B&&jr(a,B)}else{const B=o.viewHooks;null!==B&&Lc(a,B,2),Nr(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[Cn]&=-73,Uh(a)}finally{sc()}}}function Ss(o,a){for(let d=rp(o);null!==d;d=tf(d))for(let p=Bi;p<d.length;p++)pb(d[p],a)}function fb(o,a,d){pb(Gi(a,o),d)}function pb(o,a){if(!function Zd(o){return 128==(128&o[Cn])}(o))return;const d=o[It],p=o[Cn];if(80&p&&0===a||1024&p||2===a)hb(d,o,d.template,o[Oi]);else if(o[Ls]>0){Ss(o,1);const _=d.components;null!==_&&ED(o,_,1)}}function ED(o,a,d){for(let p=0;p<a.length;p++)fb(o,a[p],d)}class U_{get rootNodes(){const a=this._lView,d=a[It];return yp(d,a,d.firstChild,[])}constructor(a,d){this._lView=a,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Oi]}set context(a){this._lView[Oi]=a}get destroyed(){return 256==(256&this._lView[Cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Ii];if(xr(a)){const d=a[8],p=d?d.indexOf(this):-1;p>-1&&(Py(a,p),dd(d,p))}this._attachedToViewContainer=!1}Ew(this._lView[It],this._lView)}onDestroy(a){!function ic(o,a){if(256==(256&o[Cn]))throw new Ce(911,!1);null===o[Ta]&&(o[Ta]=[]),o[Ta].push(a)}(this._lView,a)}markForCheck(){ib(this._cdRefInjectingView||this._lView)}detach(){this._lView[Cn]&=-129}reattach(){this._lView[Cn]|=128}detectChanges(){db(this._lView[It],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hT(o,a){hh(o,a,a[on],2,null,null)}(this._lView[It],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=a}}class PP extends U_{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;db(a[It],a,a[Oi],!1)}checkNoChanges(){}get context(){return null}}class yE extends tb{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const d=Bn(a);return new gh(d,this.ngModule)}}function CD(o){const a=[];for(let d in o)o.hasOwnProperty(d)&&a.push({propName:o[d],templateName:d});return a}class kP{constructor(a,d){this.injector=a,this.parentInjector=d}get(a,d,p){p=Xn(p);const _=this.injector.get(a,Xw,p);return _!==Xw||d===Xw?_:this.parentInjector.get(a,d,p)}}class gh extends YO{get inputs(){const a=this.componentDef,d=a.inputTransforms,p=CD(a.inputs);if(null!==d)for(const _ of p)d.hasOwnProperty(_.propName)&&(_.transform=d[_.propName]);return p}get outputs(){return CD(this.componentDef.outputs)}constructor(a,d){super(),this.componentDef=a,this.ngModule=d,this.componentType=a.type,this.selector=function el(o){return o.map(ta).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!d}create(a,d,p,_){let b=(_=_||this.ngModule)instanceof Ou?_:_?.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const T=b?new kP(a,b):a,S=T.get(Yw,null);if(null===S)throw new Ce(407,!1);const se={rendererFactory:S,sanitizer:T.get(T2,null),effectManager:T.get(yD,null),afterRenderEventManager:T.get(lD,null)},xe=S.createRenderer(null,this.componentDef),Be=this.componentDef.selectors[0][0]||"div",ft=p?function DP(o,a,d,p){const b=p.get(mP,!1)||d===_t.ShadowDom,T=o.selectRootElement(a,b);return function SP(o){ma(o)}(T),T}(xe,p,this.componentDef.encapsulation,T):uc(xe,Be,function RP(o){const a=o.toLowerCase();return"svg"===a?qd:"math"===a?"math":null}(Be)),vn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let yt=null;null!==ft&&(yt=Gw(ft,T,!0));const Kn=A_(0,null,null,1,0,null,null,null,null,null,null),ui=rE(null,Kn,null,vn,null,null,se,xe,T,null,yt);let pr,Ha;jl(ui);try{const Dh=this.componentDef;let Pf,AI=null;Dh.findHostDirectiveDefs?(Pf=[],AI=new Map,Dh.findHostDirectiveDefs(Dh,Pf,AI),Pf.push(Dh)):Pf=[Dh];const MI=function bE(o,a){const d=o[It],p=Jn;return o[p]=a,Sm(d,p,2,"#host",null)}(ui,ft),OI=function ID(o,a,d,p,_,b,T){const S=_[It];!function NP(o,a,d,p){for(const _ of o)a.mergedAttrs=Yo(a.mergedAttrs,_.hostAttrs);null!==a.mergedAttrs&&(L_(a,a.mergedAttrs,!0),null!==d&&p_(p,d,a))}(p,o,a,T);let R=null;null!==a&&(R=Gw(a,_[ra]));const B=b.rendererFactory.createRenderer(a,d);let W=16;d.signals?W=4096:d.onPush&&(W=64);const se=rE(_,uD(d),null,W,_[o.index],o,b,B,null,null,R);return S.firstCreatePass&&lb(S,o,p.length-1),vp(_,se),_[o.index]=se}(MI,ft,Dh,Pf,ui,se,xe);Ha=Gd(Kn,Jn),ft&&function wE(o,a,d,p){if(p)Ko(o,d,["ng-version",eP.full]);else{const{attrs:_,classes:b}=function ko(o){const a=[],d=[];let p=1,_=2;for(;p<o.length;){let b=o[p];if("string"==typeof b)2===_?""!==b&&a.push(b,o[++p]):8===_&&d.push(b);else{if(!$r(_))break;_=b}p++}return{attrs:a,classes:d}}(a.selectors[0]);_&&Ko(o,d,_),b&&b.length>0&&CT(o,d,b.join(" "))}}(xe,Dh,ft,p),void 0!==d&&function EE(o,a,d){const p=o.projection=[];for(let _=0;_<a.length;_++){const b=d[_];p.push(null!=b?Array.from(b):null)}}(Ha,this.ngContentSelectors,d),pr=function mb(o,a,d,p,_,b){const T=xo(),S=_[It],R=jo(T,_);hD(S,_,T,d,null,p);for(let W=0;W<d.length;W++)V(Na(_,S,T.directiveStart+W,T),_);cb(S,_,T),R&&V(R,_);const B=Na(_,S,T.directiveStart+T.componentOffset,T);if(o[Oi]=_[Oi]=B,null!==b)for(const W of b)W(B,a);return Wn(S,T,o),B}(OI,Dh,Pf,AI,ui,[xD]),ub(Kn,ui,null)}finally{sc()}return new V_(this.componentType,pr,xm(Ha,ui),ui,Ha)}}class V_ extends eD{constructor(a,d,p,_,b){super(),this.location=p,this._rootLView=_,this._tNode=b,this.previousInputValues=null,this.instance=d,this.hostView=this.changeDetectorRef=new PP(_),this.componentType=a}setInput(a,d){const p=this._tNode.inputs;let _;if(null!==p&&(_=p[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),d))return;const b=this._rootLView;F_(b[It],b,_,a,d),this.previousInputValues.set(a,d),ib(Gi(this._tNode.index,b))}}get injector(){return new sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function xD(){const o=xo();ka(pt()[It],o)}function bp(o){let a=function TD(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),d=!0;const p=[o];for(;a;){let _;if(di(o))_=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ce(903,!1);_=a.\u0275dir}if(_){if(d){p.push(_);const T=o;T.inputs=B_(o.inputs),T.inputTransforms=B_(o.inputTransforms),T.declaredInputs=B_(o.declaredInputs),T.outputs=B_(o.outputs);const S=_.hostBindings;S&&FP(o,S);const R=_.viewQuery,B=_.contentQueries;if(R&&SD(o,R),B&&gb(o,B),G(o.inputs,_.inputs),G(o.declaredInputs,_.declaredInputs),G(o.outputs,_.outputs),null!==_.inputTransforms&&(null===T.inputTransforms&&(T.inputTransforms={}),G(T.inputTransforms,_.inputTransforms)),di(_)&&_.data.animation){const W=o.data;W.animation=(W.animation||[]).concat(_.data.animation)}}const b=_.features;if(b)for(let T=0;T<b.length;T++){const S=b[T];S&&S.ngInherit&&S(o),S===bp&&(d=!1)}}a=Object.getPrototypeOf(a)}!function DD(o){let a=0,d=null;for(let p=o.length-1;p>=0;p--){const _=o[p];_.hostVars=a+=_.hostVars,_.hostAttrs=Yo(_.hostAttrs,d=Yo(d,_.hostAttrs))}}(p)}function B_(o){return o===Zt?{}:o===Rt?[]:o}function SD(o,a){const d=o.viewQuery;o.viewQuery=d?(p,_)=>{a(p,_),d(p,_)}:a}function gb(o,a){const d=o.contentQueries;o.contentQueries=d?(p,_,b)=>{a(p,_,b),d(p,_,b)}:a}function FP(o,a){const d=o.hostBindings;o.hostBindings=d?(p,_)=>{a(p,_),d(p,_)}:a}function IE(o){const a=o.inputConfig,d={};for(const p in a)if(a.hasOwnProperty(p)){const _=a[p];Array.isArray(_)&&_[2]&&(d[p]=_[2])}o.inputTransforms=d}function j_(o){return!!yb(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function yb(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ku(o,a,d){return o[a]=d}function hs(o,a,d){return!Object.is(o[a],d)&&(o[a]=d,!0)}function _h(o,a,d,p){const _=hs(o,a,d);return hs(o,a+1,p)||_}function Nm(o,a,d,p){const _=pt();return hs(_,Xr(),a)&&(ii(),Pu(ir(),_,o,a,d,p)),Nm}function wp(o,a,d,p){return hs(o,Xr(),d)?a+$e(d)+p:si}function Fm(o,a,d,p,_,b){const S=_h(o,function ur(){return In.lFrame.bindingIndex}(),d,_);return Jr(2),S?a+$e(d)+p+$e(_)+b:si}function VD(o,a,d,p,_,b,T,S){const R=pt(),B=ii(),W=o+Jn,se=B.firstCreatePass?function $P(o,a,d,p,_,b,T,S,R){const B=a.consts,W=Sm(a,o,4,T||null,cl(B,S));O_(a,d,W,cl(B,R)),ka(a,W);const se=W.tView=A_(2,W,p,_,b,a.directiveRegistry,a.pipeRegistry,null,a.schemas,B,null);return null!==a.queries&&(a.queries.template(a,W),se.queries=a.queries.embeddedTView(W)),W}(W,B,R,a,d,p,_,b,T):B.data[W];Do(se,!1);const xe=BD(B,R,se,o);Hl()&&ky(B,R,xe,se),V(xe,R),vp(R,R[W]=gD(xe,R,xe,se)),Kr(se)&&Am(B,R,se),null!=T&&_p(R,se,S)}let BD=function K_(o,a,d,p){return cc(!0),a[on].createComment("")};function kE(o){return al(function Kf(){return In.lFrame.contextLView}(),Jn+o)}function xp(o,a,d){const p=pt();return hs(p,Xr(),a)&&wl(ii(),ir(),p,o,a,p[on],d,!1),xp}function Tp(o,a,d,p,_){const T=_?"class":"style";F_(o,d,a.inputs[T],T,p)}function no(o,a,d,p){const _=pt(),b=ii(),T=Jn+o,S=_[on],R=b.firstCreatePass?function qP(o,a,d,p,_,b){const T=a.consts,R=Sm(a,o,2,p,cl(T,_));return O_(a,d,R,cl(T,b)),null!==R.attrs&&L_(R,R.attrs,!1),null!==R.mergedAttrs&&L_(R,R.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,R),R}(T,b,_,a,d,p):b.data[T],B=jD(b,_,R,S,a,o);_[T]=B;const W=Kr(R);return Do(R,!0),p_(S,B,R),32!=(32&R.flags)&&Hl()&&ky(b,_,B,R),0===function Ju(){return In.lFrame.elementDepthCount}()&&V(B,_),function Br(){In.lFrame.elementDepthCount++}(),W&&(Am(b,_,R),Wn(b,R,_)),null!==p&&_p(_,R),no}function Q_(){let o=xo();Wi()?ao():(o=o.parent,Do(o,!1));const a=o;(function Fc(o){return In.skipHydrationRootTNode===o})(a)&&function rc(){In.skipHydrationRootTNode=null}(),function Vh(){In.lFrame.elementDepthCount--}();const d=ii();return d.firstCreatePass&&(ka(d,o),nl(o)&&d.queries.elementEnd(o)),null!=a.classesWithoutHost&&function od(o){return 0!=(8&o.flags)}(a)&&Tp(d,a,pt(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function $l(o){return 0!=(16&o.flags)}(a)&&Tp(d,a,pt(),a.stylesWithoutHost,!1),Q_}function NE(o,a,d,p){return no(o,a,d,p),Q_(),NE}let jD=(o,a,d,p,_,b)=>(cc(!0),uc(p,_,function rr(){return In.lFrame.currentNamespace}()));function X_(o,a,d){const p=pt(),_=ii(),b=o+Jn,T=_.firstCreatePass?function HD(o,a,d,p,_){const b=a.consts,T=cl(b,p),S=Sm(a,o,8,"ng-container",T);return null!==T&&L_(S,T,!0),O_(a,d,S,cl(b,_)),null!==a.queries&&a.queries.elementStart(a,S),S}(b,_,p,a,d):_.data[b];Do(T,!0);const S=Nu(_,p,T,o);return p[b]=S,Hl()&&ky(_,p,S,T),V(S,p),Kr(T)&&(Am(_,p,T),Wn(_,T,p)),null!=d&&_p(p,T),X_}function Dp(){let o=xo();const a=ii();return Wi()?ao():(o=o.parent,Do(o,!1)),a.firstCreatePass&&(ka(a,o),nl(o)&&a.queries.elementEnd(o)),Dp}function Db(o,a,d){return X_(o,a,d),Dp(),Db}let Nu=(o,a,d,p)=>(cc(!0),Ks(a[on],""));function FE(){return pt()}function J_(o){return!!o&&"function"==typeof o.then}function $m(o){return!!o&&"function"==typeof o.subscribe}function Sb(o,a,d,p){const _=pt(),b=ii(),T=xo();return function LE(o,a,d,p,_,b,T){const S=Kr(p),B=o.firstCreatePass&&fE(o),W=a[Oi],se=hE(a);let xe=!0;if(3&p.type||T){const Dt=jo(p,a),Wt=T?T(Dt):Dt,vn=se.length,yt=T?ui=>T(xi(ui[p.index])):p.index;let Kn=null;if(!T&&S&&(Kn=function Mb(o,a,d,p){const _=o.cleanup;if(null!=_)for(let b=0;b<_.length-1;b+=2){const T=_[b];if(T===d&&_[b+1]===p){const S=a[Qo],R=_[b+2];return S.length>R?S[R]:null}"string"==typeof T&&(b+=2)}return null}(o,a,_,p.index)),null!==Kn)(Kn.__ngLastListenerFn__||Kn).__ngNextListenerFn__=b,Kn.__ngLastListenerFn__=b,xe=!1;else{b=qD(p,a,W,b,!1);const ui=d.listen(Wt,_,b);se.push(b,ui),B&&B.push(_,yt,vn,vn+1)}}else b=qD(p,a,W,b,!1);const Be=p.outputs;let ft;if(xe&&null!==Be&&(ft=Be[_])){const Dt=ft.length;if(Dt)for(let Wt=0;Wt<Dt;Wt+=2){const pr=a[ft[Wt]][ft[Wt+1]].subscribe(b),Ha=se.length;se.push(b,pr),B&&B.push(_,p.index,Ha,-(Ha+1))}}}(b,_,_[on],T,o,a,p),Sb}function ev(o,a,d,p){try{return ws(6,a,d),!1!==d(p)}catch(_){return N_(o,_),!1}finally{ws(7,a,d)}}function qD(o,a,d,p,_){return function b(T){if(T===Function)return p;ib(o.componentOffset>-1?Gi(o.index,a):a);let R=ev(a,d,p,T),B=b.__ngNextListenerFn__;for(;B;)R=ev(a,d,B,T)&&R,B=B.__ngNextListenerFn__;return _&&!1===R&&T.preventDefault(),R}}function UE(o=1){return function ac(o){return(In.lFrame.contextLView=function zl(o,a){for(;o>0;)a=a[wr],o--;return a}(o,In.lFrame.contextLView))[Oi]}(o)}function tv(o,a){let d=null;const p=function Zu(o){const a=o.attrs;if(null!=a){const d=a.indexOf(5);if(!(1&d))return a[d+1]}return null}(o);for(let _=0;_<a.length;_++){const b=a[_];if("*"!==b){if(null===p?Ya(o,b,!0):yc(p,b))return _}else d=_}return d}function VE(o){const a=pt()[Er][$n];if(!a.projection){const p=a.projection=hd(o?o.length:1,null),_=p.slice();let b=a.child;for(;null!==b;){const T=o?tv(b,o):0;null!==T&&(_[T]?_[T].projectionNext=b:p[T]=b,_[T]=b),b=b.next}}}function BE(o,a=0,d){const p=pt(),_=ii(),b=Sm(_,Jn+o,16,null,d||null);null===b.projection&&(b.projection=a),ao(),(!p[Fi]||Es())&&32!=(32&b.flags)&&function xw(o,a,d){ET(a[on],0,a,d,pT(o,d,a),vT(d.parent||a[$n],d,a))}(_,p,b)}function nv(o,a,d){return iv(o,"",a,"",d),nv}function iv(o,a,d,p,_){const b=pt(),T=wp(b,a,d,p);return T!==si&&wl(ii(),ir(),b,o,T,b[on],_,!1),iv}function ov(o,a){return o<<17|a<<2}function Fu(o){return o>>17&32767}function Ob(o){return 2|o}function iu(o){return(131068&o)>>2}function WE(o,a){return-131069&o|a<<2}function sv(o){return 1|o}function KE(o,a,d,p,_){const b=o[d+1],T=null===a;let S=p?Fu(b):iu(b),R=!1;for(;0!==S&&(!1===R||T);){const W=o[S+1];YE(o[S],a)&&(R=!0,o[S+1]=p?sv(W):Ob(W)),S=p?Fu(W):iu(W)}R&&(o[d+1]=p?Ob(b):sv(b))}function YE(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Yl(o,a)>=0}const uo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pb(o){return o.substring(uo.key,uo.keyEnd)}function Cl(o,a){const d=uo.textEnd;return d===a?-1:(a=uo.keyEnd=function Rb(o,a,d){for(;a<d&&o.charCodeAt(a)>32;)a++;return a}(o,uo.key=a,d),xd(o,a,d))}function xd(o,a,d){for(;a<d&&o.charCodeAt(a)<=32;)a++;return a}function QE(o,a,d){return Vu(o,a,d,!1),QE}function XE(o,a){return Vu(o,a,null,!0),XE}function lv(o){!function Ba(o,a,d,p){const _=ii(),b=Jr(2);_.firstUpdatePass&&As(_,null,b,p);const T=pt();if(d!==si&&hs(T,b,d)){const S=_.data[ts()];if(fs(S,p)&&!JE(_,b)){let R=p?S.classesWithoutHost:S.stylesWithoutHost;null!==R&&(d=Ne(R,d||"")),Tp(_,S,T,d,p)}else!function bn(o,a,d,p,_,b,T,S){_===si&&(_=Rt);let R=0,B=0,W=0<_.length?_[0]:null,se=0<b.length?b[0]:null;for(;null!==W||null!==se;){const xe=R<_.length?_[R+1]:void 0,Be=B<b.length?b[B+1]:void 0;let Dt,ft=null;W===se?(R+=2,B+=2,xe!==Be&&(ft=se,Dt=Be)):null===se||null!==W&&W<se?(R+=2,ft=W):(B+=2,ft=se,Dt=Be),null!==ft&&QD(o,a,d,p,ft,Dt,T,S),W=R<_.length?_[R]:null,se=B<b.length?b[B]:null}}(_,S,T,T[on],T[b+1],T[b+1]=function ru(o,a,d){if(null==d||""===d)return Rt;const p=[],_=yd(d);if(Array.isArray(_))for(let b=0;b<_.length;b++)o(p,_[b],!0);else if("object"==typeof _)for(const b in _)_.hasOwnProperty(b)&&o(p,b,_[b]);else"string"==typeof _&&a(p,_);return p}(o,a,d),p,b)}}(ln,Td,o,!0)}function Td(o,a){for(let d=function bh(o){return function cv(o){uo.key=0,uo.keyEnd=0,uo.value=0,uo.valueEnd=0,uo.textEnd=o.length}(o),Cl(o,xd(o,0,uo.textEnd))}(a);d>=0;d=Cl(a,d))Gs(o,Pb(a),!0)}function Vu(o,a,d,p){const _=pt(),b=ii(),T=Jr(2);b.firstUpdatePass&&As(b,o,T,p),a!==si&&hs(_,T,a)&&QD(b,b.data[ts()],_,_[on],o,_[T+1]=function vt(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=de(yd(o)))),o}(a,d),p,T)}function JE(o,a){return a>=o.expandoStartIndex}function As(o,a,d,p){const _=o.data;if(null===_[d+1]){const b=_[ts()],T=JE(o,d);fs(b,p)&&null===a&&!T&&(a=!1),a=function qm(o,a,d,p){const _=function Bl(o){const a=In.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let b=p?a.residualClasses:a.residualStyles;if(null===_)0===(p?a.classBindings:a.styleBindings)&&(d=io(d=Tt(null,o,a,d,p),a.attrs,p),b=null);else{const T=a.directiveStylingLast;if(-1===T||o[T]!==_)if(d=Tt(_,o,a,d,p),null===b){let R=function mf(o,a,d){const p=d?a.classBindings:a.styleBindings;if(0!==iu(p))return o[Fu(p)]}(o,a,p);void 0!==R&&Array.isArray(R)&&(R=Tt(null,o,a,R[1],p),R=io(R,a.attrs,p),function eC(o,a,d,p){o[Fu(d?a.classBindings:a.styleBindings)]=p}(o,a,p,R))}else b=function YP(o,a,d){let p;const _=a.directiveEnd;for(let b=1+a.directiveStylingLast;b<_;b++)p=io(p,o[b].hostAttrs,d);return io(p,a.attrs,d)}(o,a,p)}return void 0!==b&&(p?a.residualClasses=b:a.residualStyles=b),d}(_,b,a,p),function ZE(o,a,d,p,_,b){let T=b?a.classBindings:a.styleBindings,S=Fu(T),R=iu(T);o[p]=d;let W,B=!1;if(Array.isArray(d)?(W=d[1],(null===W||Yl(d,W)>0)&&(B=!0)):W=d,_)if(0!==R){const xe=Fu(o[S+1]);o[p+1]=ov(xe,S),0!==xe&&(o[xe+1]=WE(o[xe+1],p)),o[S+1]=function GD(o,a){return 131071&o|a<<17}(o[S+1],p)}else o[p+1]=ov(S,0),0!==S&&(o[S+1]=WE(o[S+1],p)),S=p;else o[p+1]=ov(R,0),0===S?S=p:o[R+1]=WE(o[R+1],p),R=p;B&&(o[p+1]=Ob(o[p+1])),KE(o,W,p,!0),KE(o,W,p,!1),function Id(o,a,d,p,_){const b=_?o.residualClasses:o.residualStyles;null!=b&&"string"==typeof a&&Yl(b,a)>=0&&(d[p+1]=sv(d[p+1]))}(a,W,o,p,b),T=ov(S,R),b?a.classBindings=T:a.styleBindings=T}(_,b,a,d,T,p)}}function Tt(o,a,d,p,_){let b=null;const T=d.directiveEnd;let S=d.directiveStylingLast;for(-1===S?S=d.directiveStart:S++;S<T&&(b=a[S],p=io(p,b.hostAttrs,_),b!==o);)S++;return null!==o&&(d.directiveStylingLast=S),p}function io(o,a,d){const p=d?1:2;let _=-1;if(null!==a)for(let b=0;b<a.length;b++){const T=a[b];"number"==typeof T?_=T:_===p&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Gs(o,T,!!d||a[++b]))}return void 0===o?null:o}function ln(o,a,d){const p=String(a);""!==p&&!p.includes(" ")&&Gs(o,p,d)}function QD(o,a,d,p,_,b,T,S){if(!(3&a.type))return;const R=o.data,B=R[S+1],W=function Lu(o){return 1==(1&o)}(B)?Gt(R,a,d,_,iu(B),T):void 0;tt(W)||(tt(b)||function El(o){return 2==(2&o)}(B)&&(b=Gt(R,null,d,_,S,T)),function Tw(o,a,d,p,_){if(a)_?o.addClass(d,p):o.removeClass(d,p);else{let b=-1===p.indexOf("-")?void 0:uh.DashCase;null==_?o.removeStyle(d,p,b):("string"==typeof _&&_.endsWith("!important")&&(_=_.slice(0,-10),b|=uh.Important),o.setStyle(d,p,_,b))}}(p,T,Pa(ts(),d),_,b))}function Gt(o,a,d,p,_,b){const T=null===a;let S;for(;_>0;){const R=o[_],B=Array.isArray(R),W=B?R[1]:R,se=null===W;let xe=d[_+1];xe===si&&(xe=se?Rt:void 0);let Be=se?ep(xe,p):W===p?xe:void 0;if(B&&!tt(Be)&&(Be=ep(R,p)),tt(Be)&&(S=Be,T))return S;const ft=o[_+1];_=T?Fu(ft):iu(ft)}if(null!==a){let R=b?a.residualClasses:a.residualStyles;null!=R&&(S=ep(R,p))}return S}function tt(o){return void 0!==o}function fs(o,a){return 0!=(o.flags&(a?8:16))}function tC(o,a=""){const d=pt(),p=ii(),_=o+Jn,b=p.firstCreatePass?Sm(p,_,1,a,null):p.data[_],T=XD(p,d,b,a,o);d[_]=T,Hl()&&ky(p,d,T,b),Do(b,!1)}let XD=(o,a,d,p,_)=>(cc(!0),function vd(o,a){return o.createText(a)}(a[on],p));function nC(o){return Nb("",o,""),nC}function Nb(o,a,d){const p=pt(),_=wp(p,o,a,d);return _!==si&&Ru(p,ts(),_),Nb}function Fb(o,a,d,p,_){const b=pt(),T=Fm(b,o,a,d,p,_);return T!==si&&Ru(b,ts(),T),Fb}function Dd(o,a,d){const p=pt();return hs(p,Xr(),a)&&wl(ii(),ir(),p,o,a,p[on],d,!0),Dd}const xl=void 0;var lC=["en",[["a","p"],["AM","PM"],xl],[["AM","PM"],xl,xl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xl,"{1} 'at' {0}",xl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oS(o){const d=Math.floor(Math.abs(o)),p=o.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===p?1:5}];let Wm={};function dc(o){const a=function sS(o){return o.toLowerCase().replace(/_/g,"-")}(o);let d=uC(a);if(d)return d;const p=a.split("-")[0];if(d=uC(p),d)return d;if("en"===p)return lC;throw new Ce(701,!1)}function Zm(o){return dc(o)[Km.PluralCase]}function uC(o){return o in Wm||(Wm[o]=Ie.ng&&Ie.ng.common&&Ie.ng.common.locales&&Ie.ng.common.locales[o]),Wm[o]}var Km=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(Km||{});const Eh="en-US";let lS=Eh;function IC(o,a,d,p,_){if(o=st(o),Array.isArray(o))for(let b=0;b<o.length;b++)IC(o[b],a,d,p,_);else{const b=ii(),T=pt(),S=xo();let R=up(o)?o:st(o.provide);const B=Uw(o),W=1048575&S.providerIndexes,se=S.directiveStart,xe=S.providerIndexes>>20;if(up(o)||!o.multi){const Be=new nd(B,_,Dm),ft=xC(R,a,_?W:W+xe,se);-1===ft?(Wl(Hs(S,T),b,R),Kb(b,o,a.length),a.push(R),S.directiveStart++,S.directiveEnd++,_&&(S.providerIndexes+=1048576),d.push(Be),T.push(Be)):(d[ft]=Be,T[ft]=Be)}else{const Be=xC(R,a,W+xe,se),ft=xC(R,a,W,W+xe),Wt=ft>=0&&d[ft];if(_&&!Wt||!_&&!(Be>=0&&d[Be])){Wl(Hs(S,T),b,R);const vn=function vv(o,a,d,p,_){const b=new nd(o,d,Dm);return b.multi=[],b.index=a,b.componentProviders=0,SS(b,_,p&&!d),b}(_?TC:mR,d.length,_,p,B);!_&&Wt&&(d[ft].providerFactory=vn),Kb(b,o,a.length,0),a.push(R),S.directiveStart++,S.directiveEnd++,_&&(S.providerIndexes+=1048576),d.push(vn),T.push(vn)}else Kb(b,o,Be>-1?Be:ft,SS(d[_?ft:Be],B,!_&&p));!_&&p&&Wt&&d[ft].componentProviders++}}}function Kb(o,a,d,p){const _=up(a),b=function $T(o){return!!o.useClass}(a);if(_||b){const R=(b?st(a.useClass):a).prototype.ngOnDestroy;if(R){const B=o.destroyHooks||(o.destroyHooks=[]);if(!_&&a.multi){const W=B.indexOf(d);-1===W?B.push(d,[p,R]):B[W+1].push(p,R)}else B.push(d,R)}}}function SS(o,a,d){return d&&o.componentProviders++,o.multi.push(a)-1}function xC(o,a,d,p){for(let _=d;_<p;_++)if(a[_]===o)return _;return-1}function mR(o,a,d,p){return Ih(this.multi,[])}function TC(o,a,d,p){const _=this.multi;let b;if(this.providerFactory){const T=this.providerFactory.componentProviders,S=Na(d,d[It],this.providerFactory.index,p);b=S.slice(0,T),Ih(_,b);for(let R=T;R<S.length;R++)b.push(S[R])}else b=[],Ih(_,b);return b}function Ih(o,a){for(let d=0;d<o.length;d++)a.push((0,o[d])());return a}function yv(o,a=[]){return d=>{d.providersResolver=(p,_)=>function DS(o,a,d){const p=ii();if(p.firstCreatePass){const _=di(o);IC(d,p.data,p.blueprint,_,!0),IC(a,p.data,p.blueprint,_,!1)}}(p,_?_(o):o,a)}}class Od{}class DC{}function AS(o,a){return new Yb(o,a??null,[])}class Yb extends Od{constructor(a,d,p){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yE(this);const _=br(a);this._bootstrapComponents=af(_.bootstrap),this._r3Injector=iD(a,d,[{provide:Od,useValue:this},{provide:tb,useValue:this.componentFactoryResolver},...p],de(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class yf extends DC{constructor(a){super(),this.moduleType=a}create(a){return new Yb(this.moduleType,a,[])}}class Qb extends Od{constructor(a){super(),this.componentFactoryResolver=new yE(this),this.instance=null;const d=new qy([...a.providers,{provide:Od,useValue:this},{provide:tb,useValue:this.componentFactoryResolver}],a.parent||dp(),a.debugName,new Set(["environment"]));this.injector=d,a.runEnvironmentInitializers&&d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function bv(o,a,d=null){return new Qb({providers:o,parent:a,debugName:d,runEnvironmentInitializers:!0}).injector}let SC=(()=>{class o{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d)){const p=jT(0,d.type),_=p.length>0?bv([p],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d,_)}return this.cachedInjectors.get(d)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=fn({token:o,providedIn:"environment",factory:()=>new o(St(Ou))})}return o})();function bf(o){o.getStandaloneInjector=a=>a.get(SC).getOrCreateStandaloneInjector(o)}function OC(o,a,d){const p=Zi()+o,_=pt();return _[p]===si?ku(_,p,d?a.call(d):a()):function Rm(o,a){return o[a]}(_,p)}function ng(o,a,d,p){return jS(pt(),Zi(),o,a,d,p)}function LS(o,a,d,p,_){return zS(pt(),Zi(),o,a,d,p,_)}function Ef(o,a){const d=o[a];return d===si?void 0:d}function jS(o,a,d,p,_,b){const T=a+d;return hs(o,T,_)?ku(o,T+1,b?p.call(b,_):p(_)):Ef(o,T+1)}function zS(o,a,d,p,_,b,T){const S=a+d;return _h(o,S,_,b)?ku(o,S+2,T?p.call(T,_,b):p(_,b)):Ef(o,S+2)}function kC(o,a){const d=ii();let p;const _=o+Jn;d.firstCreatePass?(p=function Lp(o,a){if(a)for(let d=a.length-1;d>=0;d--){const p=a[d];if(o===p.name)return p}}(a,d.pipeRegistry),d.data[_]=p,p.onDestroy&&(d.destroyHooks??=[]).push(_,p.onDestroy)):p=d.data[_];const b=p.factory||(p.factory=Us(p.type)),S=zt(Dm);try{const R=us(!1),B=b();return us(R),function RE(o,a,d,p){d>=o.data.length&&(o.data[d]=null,o.blueprint[d]=null),a[d]=p}(d,pt(),_,B),B}finally{zt(S)}}function NC(o,a,d){const p=o+Jn,_=pt(),b=al(_,p);return Dr(_,p)?jS(_,Zi(),a,b.transform,d,b):b.transform(d)}function FC(o,a,d,p){const _=o+Jn,b=pt(),T=al(b,_);return Dr(b,_)?zS(b,Zi(),a,T.transform,d,p,T):T.transform(d,p)}function Dr(o,a){return o[It].data[a].pure}function e0(){return this._results[Symbol.iterator]()}class Up{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ed)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=Up.prototype;d[Symbol.iterator]||(d[Symbol.iterator]=e0)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,d){return this._results.reduce(a,d)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,d){const p=this;p.dirty=!1;const _=function Fr(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Ua(o,a,d){if(o.length!==a.length)return!1;for(let p=0;p<o.length;p++){let _=o[p],b=a[p];if(d&&(_=d(_),b=d(b)),b!==_)return!1}return!0}(p._results,_,d))&&(p._results=_,p.length=_.length,p.last=_[this.length-1],p.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function xv(o,a,d,p=!0){const _=a[It];if(function g2(o,a,d,p){const _=Bi+p,b=d.length;p>0&&(d[_-1][so]=a),p<b-Bi?(a[so]=d[_],t_(d,Bi+p,a)):(d.push(a),a[so]=null),a[Ii]=d;const T=a[_s];null!==T&&d!==T&&function ww(o,a){const d=o[Wr];a[Er]!==a[Ii][Ii][Er]&&(o[Da]=!0),null===d?o[Wr]=[a]:d.push(a)}(T,a);const S=a[Cr];null!==S&&S.insertView(o),a[Cn]|=128}(_,a,o,d),p){const b=Ny(d,o),T=a[on],S=u_(T,o[Or]);null!==S&&function vO(o,a,d,p,_,b){p[Mi]=_,p[$n]=a,hh(o,p,d,1,_,b)}(_,o[$n],T,a,S,b)}}let ig=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=$S}return o})();const rg=ig,xh=class extends rg{constructor(a,d,p){super(),this._declarationLView=a,this._declarationTContainer=d,this.elementRef=p}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,d){return this.createEmbeddedViewImpl(a,d)}createEmbeddedViewImpl(a,d,p){const _=function HS(o,a,d,p){const _=a.tView,S=rE(o,_,d,4096&o[Cn]?4096:16,null,a,null,null,null,p?.injector??null,p?.hydrationInfo??null);S[_s]=o[a.index];const B=o[Cr];return null!==B&&(S[Cr]=B.createEmbeddedView(_)),ub(_,S,d),S}(this._declarationLView,this._declarationTContainer,a,{injector:d,hydrationInfo:p});return new U_(_)}};function $S(){return Tv(xo(),pt())}function Tv(o,a){return 4&o.type?new xh(a,o,xm(o,a)):null}let Dv=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=GS}return o})();function GS(){return HC(xo(),pt())}const BC=Dv,Sv=class extends BC{constructor(a,d,p){super(),this._lContainer=a,this._hostTNode=d,this._hostLView=p}get element(){return xm(this._hostTNode,this._hostLView)}get injector(){return new sr(this._hostTNode,this._hostLView)}get parentInjector(){const a=Gl(this._hostTNode,this._hostLView);if(Uc(a)){const d=dl(a,this._hostLView),p=Vc(a);return new sr(d[It].data[p+8],d)}return new sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const d=jC(this._lContainer);return null!==d&&d[a]||null}get length(){return this._lContainer.length-Bi}createEmbeddedView(a,d,p){let _,b;"number"==typeof p?_=p:null!=p&&(_=p.index,b=p.injector);const S=a.createEmbeddedViewImpl(d||{},b,null);return this.insertImpl(S,_,false),S}createComponent(a,d,p,_,b){const T=a&&!function La(o){return"function"==typeof o}(a);let S;if(T)S=d;else{const Dt=d||{};S=Dt.index,p=Dt.injector,_=Dt.projectableNodes,b=Dt.environmentInjector||Dt.ngModuleRef}const R=T?a:new gh(Bn(a)),B=p||this.parentInjector;if(!b&&null==R.ngModule){const Wt=(T?B:this.parentInjector).get(Ou,null);Wt&&(b=Wt)}Bn(R.componentType??{});const Be=R.create(B,_,null,b);return this.insertImpl(Be.hostView,S,false),Be}insert(a,d){return this.insertImpl(a,d,!1)}insertImpl(a,d,p){const _=a._lView;if(function zs(o){return xr(o[Ii])}(_)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const B=_[Ii],W=new Sv(B,B[$n],B[Ii]);W.detach(W.indexOf(a))}}const T=this._adjustIndex(d),S=this._lContainer;return xv(S,_,T,!p),a.attachToViewContainerRef(),t_(zC(S),T,a),a}move(a,d){return this.insert(a,d)}indexOf(a){const d=jC(this._lContainer);return null!==d?d.indexOf(a):-1}remove(a){const d=this._adjustIndex(a,-1),p=Py(this._lContainer,d);p&&(dd(zC(this._lContainer),d),Ew(p[It],p))}detach(a){const d=this._adjustIndex(a,-1),p=Py(this._lContainer,d);return p&&null!=dd(zC(this._lContainer),d)?new U_(p):null}_adjustIndex(a,d=0){return a??this.length+d}};function jC(o){return o[8]}function zC(o){return o[8]||(o[8]=[])}function HC(o,a){let d;const p=a[o.index];return xr(p)?d=p:(d=gD(p,a,null,o),a[o.index]=d,vp(a,d)),n0(d,a,o,p),new Sv(d,o,a)}let n0=function ag(o,a,d,p){if(o[Or])return;let _;_=8&d.type?xi(p):function WS(o,a){const d=o[on],p=d.createComment(""),_=jo(a,o);return op(d,u_(d,_),p,function EO(o,a){return o.nextSibling(a)}(d,_),!1),p}(a,d),o[Or]=_};class cg{constructor(a){this.queryList=a,this.matches=null}clone(){return new cg(this.queryList)}setDirty(){this.queryList.setDirty()}}class r0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const d=a.queries;if(null!==d){const p=null!==a.contentQueries?a.contentQueries[0]:d.length,_=[];for(let b=0;b<p;b++){const T=d.getByIndex(b);_.push(this.queries[T.indexInDeclarationView].clone())}return new r0(_)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let d=0;d<this.queries.length;d++)null!==ju(a,d).matches&&this.queries[d].setDirty()}}class $C{constructor(a,d,p=null){this.predicate=a,this.flags=d,this.read=p}}class o0{constructor(a=[]){this.queries=a}elementStart(a,d){for(let p=0;p<this.queries.length;p++)this.queries[p].elementStart(a,d)}elementEnd(a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(a)}embeddedTView(a){let d=null;for(let p=0;p<this.length;p++){const _=null!==d?d.length:0,b=this.getByIndex(p).embeddedTView(a,_);b&&(b.indexInDeclarationView=p,null!==d?d.push(b):d=[b])}return null!==d?new o0(d):null}template(a,d){for(let p=0;p<this.queries.length;p++)this.queries[p].template(a,d)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class qC{constructor(a,d=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(a,d){this.isApplyingToNode(d)&&this.matchTNode(a,d)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,d){this.elementStart(a,d)}embeddedTView(a,d){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,d),new qC(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let p=a.parent;for(;null!==p&&8&p.type&&p.index!==d;)p=p.parent;return d===(null!==p?p.index:-1)}return this._appliesToNextNode}matchTNode(a,d){const p=this.metadata.predicate;if(Array.isArray(p))for(let _=0;_<p.length;_++){const b=p[_];this.matchTNodeWithReadOption(a,d,ZS(d,b)),this.matchTNodeWithReadOption(a,d,ld(d,a,b,!1,!1))}else p===ig?4&d.type&&this.matchTNodeWithReadOption(a,d,-1):this.matchTNodeWithReadOption(a,d,ld(d,a,p,!1,!1))}matchTNodeWithReadOption(a,d,p){if(null!==p){const _=this.metadata.read;if(null!==_)if(_===Tm||_===Dv||_===ig&&4&d.type)this.addMatch(d.index,-2);else{const b=ld(d,a,_,!1,!1);null!==b&&this.addMatch(d.index,b)}else this.addMatch(d.index,p)}}addMatch(a,d){null===this.matches?this.matches=[a,d]:this.matches.push(a,d)}}function ZS(o,a){const d=o.localNames;if(null!==d)for(let p=0;p<d.length;p+=2)if(d[p]===a)return d[p+1];return null}function ER(o,a,d,p){return-1===d?function KS(o,a){return 11&o.type?xm(o,a):4&o.type?Tv(o,a):null}(a,o):-2===d?function CR(o,a,d){return d===Tm?xm(a,o):d===ig?Tv(a,o):d===Dv?HC(a,o):void 0}(o,a,p):Na(o,o[It],d,a)}function YS(o,a,d,p){const _=a[Cr].queries[p];if(null===_.matches){const b=o.data,T=d.matches,S=[];for(let R=0;R<T.length;R+=2){const B=T[R];S.push(B<0?null:ER(a,b[B],T[R+1],d.metadata.read))}_.matches=S}return _.matches}function GC(o,a,d,p){const _=o.queries.getByIndex(d),b=_.matches;if(null!==b){const T=YS(o,a,_,d);for(let S=0;S<b.length;S+=2){const R=b[S];if(R>0)p.push(T[S/2]);else{const B=b[S+1],W=a[-R];for(let se=Bi;se<W.length;se++){const xe=W[se];xe[_s]===xe[Ii]&&GC(xe[It],xe,B,p)}if(null!==W[Wr]){const se=W[Wr];for(let xe=0;xe<se.length;xe++){const Be=se[xe];GC(Be[It],Be,B,p)}}}}}return p}function s0(o){const a=pt(),d=ii(),p=Xd();ll(p+1);const _=ju(d,p);if(o.dirty&&function Wd(o){return 4==(4&o[Cn])}(a)===(2==(2&_.metadata.flags))){if(null===_.matches)o.reset([]);else{const b=_.crossesNgTemplate?GC(d,a,p,[]):YS(d,a,_,p);o.reset(b,JO),o.notifyOnChanges()}return!0}return!1}function Vp(o,a,d){const p=ii();p.firstCreatePass&&(ZC(p,new $C(o,a,d),-1),2==(2&a)&&(p.staticViewQueries=!0)),a0(p,pt(),a)}function WC(o,a,d,p){const _=ii();if(_.firstCreatePass){const b=xo();ZC(_,new $C(a,d,p),b.index),function Ov(o,a){const d=o.contentQueries||(o.contentQueries=[]);a!==(d.length?d[d.length-1]:-1)&&d.push(o.queries.length-1,a)}(_,o),2==(2&d)&&(_.staticContentQueries=!0)}a0(_,pt(),d)}function QS(){return function rs(o,a){return o[Cr].queries[a].queryList}(pt(),Xd())}function a0(o,a,d){const p=new Up(4==(4&d));(function cf(o,a,d,p){const _=hE(a);_.push(d),o.firstCreatePass&&fE(o).push(p,_.length-1)})(o,a,p,p.destroy),null===a[Cr]&&(a[Cr]=new r0),a[Cr].queries.push(new cg(p))}function ZC(o,a,d){null===o.queries&&(o.queries=new o0),o.queries.track(new qC(a,d))}function ju(o,a){return o.queries.getByIndex(a)}function c0(o,a){return Tv(o,a)}function Bp(o){return!!br(o)}const kv=new Ji("Application Initializer");let tI=(()=>{class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p}),this.appInits=Vt(kv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const d=[];for(const _ of this.appInits){const b=_();if(J_(b))d.push(b);else if($m(b)){const T=new Promise((S,R)=>{b.subscribe({complete:S,error:R})});d.push(T)}}const p=()=>{this.done=!0,this.resolve()};Promise.all(d).then(()=>{p()}).catch(_=>{this.reject(_)}),0===d.length&&p(),this.initialized=!0}static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),nI=(()=>{class o{log(d){console.log(d)}warn(d){console.warn(d)}static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();const $p=new Ji("LocaleId",{providedIn:"root",factory:()=>Vt($p,sn.Optional|sn.SkipSelf)||function Nv(){return typeof $localize<"u"&&$localize.locale||Eh}()}),Fv=new Ji("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let iI=(()=>{class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ce.X(!1)}add(){this.hasPendingTasks.next(!0);const d=this.taskId++;return this.pendingTasks.add(d),d}remove(d){this.pendingTasks.delete(d),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();class u0{constructor(a,d){this.ngModuleFactory=a,this.componentFactories=d}}let d0=(()=>{class o{compileModuleSync(d){return new yf(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const p=this.compileModuleSync(d),b=af(br(d).declarations).reduce((T,S)=>{const R=Bn(S);return R&&T.push(new gh(R)),T},[]);return new u0(p,b)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const p0=new Ji(""),Ps=new Ji("");let oI,GR=(()=>{class o{constructor(d,p,_){this._ngZone=d,this.registry=p,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,oI||(function WR(o){oI=o}(_),_.addToWindow(p)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(p=>!p.updateCb||!p.updateCb(d)||(clearTimeout(p.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,p,_){let b=-1;p&&p>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==b),d(this._didWork,this.getPendingTasks())},p)),this._callbacks.push({doneCb:d,timeoutId:b,updateCb:_})}whenStable(d,p,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,p,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,p,_){return[]}static#e=this.\u0275fac=function(p){return new(p||o)(St(Qs),St(MA),St(Ps))};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac})}return o})(),MA=(()=>{class o{constructor(){this._applications=new Map}registerApplication(d,p){this._applications.set(d,p)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,p=!0){return oI?.findTestabilityInTree(this,d,p)??null}static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})(),Nd=null;const OA=new Ji("AllowMultipleToken"),pg=new Ji("PlatformDestroyListeners"),mg=new Ji("appBootstrapListener");class Lv{constructor(a,d){this.name=a,this.token=d}}function PA(o,a,d=[]){const p=`Platform: ${a}`,_=new Ji(p);return(b=[])=>{let T=lI();if(!T||T.injector.get(OA,!1)){const S=[...d,...b,{provide:_,useValue:!0}];o?o(S):function g0(o){if(Nd&&!Nd.get(OA,!1))throw new Ce(400,!1);(function m0(){!function Ye(o){ee=o}(()=>{throw new Ce(600,!1)})})(),Nd=o;const a=o.get(uI);(function _0(o){o.get(Gy,null)?.forEach(d=>d())})(o)}(function cI(o=[],a){return nu.create({name:a,providers:[{provide:Fw,useValue:"platform"},{provide:pg,useValue:new Set([()=>Nd=null])},...o]})}(S,p))}return function RA(o){const a=lI();if(!a)throw new Ce(401,!1);return a}()}}function lI(){return Nd?.get(uI)??null}let uI=(()=>{class o{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,p){const _=function FA(o="zone.js",a){return"noop"===o?new L2:"zone.js"===o?new Qs(a):o}(p?.ngZone,function NA(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:p?.ngZoneEventCoalescing,runCoalescing:p?.ngZoneRunCoalescing}));return _.run(()=>{const b=function MS(o,a,d){return new Yb(o,a,d)}(d.moduleType,this.injector,function v0(o){return[{provide:Qs,useFactory:o},{provide:v_,multi:!0,useFactory:()=>{const a=Vt(VA,{optional:!0});return()=>a.initialize()}},{provide:dI,useFactory:UA},{provide:aP,useFactory:cP}]}(()=>_)),T=b.injector.get(wd,null);return _.runOutsideAngular(()=>{const S=_.onError.subscribe({next:R=>{T.handleError(R)}});b.onDestroy(()=>{gg(this._modules,b),S.unsubscribe()})}),function LA(o,a,d){try{const p=d();return J_(p)?p.catch(_=>{throw a.runOutsideAngular(()=>o.handleError(_)),_}):p}catch(p){throw a.runOutsideAngular(()=>o.handleError(p)),p}}(T,_,()=>{const S=b.injector.get(tI);return S.runInitializers(),S.donePromise.then(()=>(function uS(o){At(o,"Expected localeId to be defined"),"string"==typeof o&&(lS=o.toLowerCase().replace(/_/g,"-"))}(b.injector.get($p,Eh)||Eh),this._moduleDoBootstrap(b),b))})})}bootstrapModule(d,p=[]){const _=Wp({},p);return function ZR(o,a,d){const p=new yf(d);return Promise.resolve(p)}(0,0,d).then(b=>this.bootstrapModuleFactory(b,_))}_moduleDoBootstrap(d){const p=d.injector.get(Hu);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(_=>p.bootstrap(_));else{if(!d.instance.ngDoBootstrap)throw new Ce(-403,!1);d.instance.ngDoBootstrap(p)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(p=>p.destroy()),this._destroyListeners.forEach(p=>p());const d=this._injector.get(pg,null);d&&(d.forEach(p=>p()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(p){return new(p||o)(St(nu))};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"platform"})}return o})();function Wp(o,a){return Array.isArray(a)?a.reduce(Wp,o):{...o,...a}}let Hu=(()=>{class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Vt(dI),this.zoneIsStable=Vt(aP),this.componentTypes=[],this.components=[],this.isStable=Vt(iI).hasPendingTasks.pipe((0,ut.w)(d=>d?(0,Re.of)(!1):this.zoneIsStable),(0,Ve.x)(),(0,Oe.B)()),this._injector=Vt(Ou)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(d,p){const _=d instanceof YO;if(!this._injector.get(tI).done)throw!_&&xa(d),new Ce(405,!1);let T;T=_?d:this._injector.get(tb).resolveComponentFactory(d),this.componentTypes.push(T.componentType);const S=function sI(o){return o.isBoundToModule}(T)?void 0:this._injector.get(Od),B=T.create(nu.NULL,[],p||T.selector,S),W=B.location.nativeElement,se=B.injector.get(p0,null);return se?.registerApplication(W),B.onDestroy(()=>{this.detachView(B.hostView),gg(this.components,B),se?.unregisterApplication(W)}),this._loadComponent(B),B}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this.internalErrorHandler(d)}finally{this._runningTick=!1}}attachView(d){const p=d;this._views.push(p),p.attachToAppRef(this)}detachView(d){const p=d;gg(this._views,p),p.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d);const p=this._injector.get(mg,[]);p.push(...this._bootstrapListeners),p.forEach(_=>_(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>gg(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new Ce(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function gg(o,a){const d=o.indexOf(a);d>-1&&o.splice(d,1)}const dI=new Ji("",{providedIn:"root",factory:()=>Vt(wd).handleError.bind(void 0)});function UA(){const o=Vt(Qs),a=Vt(wd);return d=>o.runOutsideAngular(()=>a.handleError(d))}let VA=(()=>{class o{constructor(){this.zone=Vt(Qs),this.applicationRef=Vt(Hu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(p){return new(p||o)};static#t=this.\u0275prov=fn({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function hI(){return!1}let Bv=(()=>{class o{static#e=this.__NG_ELEMENT_ID__=y0}return o})();function y0(o){return function fI(o,a,d){if(Pr(o)&&!d){const p=Gi(o.index,a);return new U_(p,p)}return 47&o.type?new U_(a[Er],a):null}(xo(),pt(),16==(16&o))}class $A{constructor(){}supports(a){return j_(a)}create(a){return new jv(a)}}const rk=(o,a)=>a;class jv{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||rk}forEachItem(a){let d;for(d=this._itHead;null!==d;d=d._next)a(d)}forEachOperation(a){let d=this._itHead,p=this._removalsHead,_=0,b=null;for(;d||p;){const T=!p||d&&d.currentIndex<zv(p,_,b)?d:p,S=zv(T,_,b),R=T.currentIndex;if(T===p)_--,p=p._nextRemoved;else if(d=d._next,null==T.previousIndex)_++;else{b||(b=[]);const B=S-_,W=R-_;if(B!=W){for(let xe=0;xe<B;xe++){const Be=xe<b.length?b[xe]:b[xe]=0,ft=Be+xe;W<=ft&&ft<B&&(b[xe]=Be+1)}b[T.previousIndex]=W-B}}S!==R&&a(T,S,R)}}forEachPreviousItem(a){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)a(d)}forEachAddedItem(a){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)a(d)}forEachMovedItem(a){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)a(d)}forEachRemovedItem(a){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)a(d)}forEachIdentityChange(a){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)a(d)}diff(a){if(null==a&&(a=[]),!j_(a))throw new Ce(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let _,b,T,d=this._itHead,p=!1;if(Array.isArray(a)){this.length=a.length;for(let S=0;S<this.length;S++)b=a[S],T=this._trackByFn(S,b),null!==d&&Object.is(d.trackById,T)?(p&&(d=this._verifyReinsertion(d,b,T,S)),Object.is(d.item,b)||this._addIdentityChange(d,b)):(d=this._mismatch(d,b,T,S),p=!0),d=d._next}else _=0,function vb(o,a){if(Array.isArray(o))for(let d=0;d<o.length;d++)a(o[d]);else{const d=o[Symbol.iterator]();let p;for(;!(p=d.next()).done;)a(p.value)}}(a,S=>{T=this._trackByFn(_,S),null!==d&&Object.is(d.trackById,T)?(p&&(d=this._verifyReinsertion(d,S,T,_)),Object.is(d.item,S)||this._addIdentityChange(d,S)):(d=this._mismatch(d,S,T,_),p=!0),d=d._next,_++}),this.length=_;return this._truncate(d),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,d,p,_){let b;return null===a?b=this._itTail:(b=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null))?(Object.is(a.item,d)||this._addIdentityChange(a,d),this._reinsertAfter(a,b,_)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(p,_))?(Object.is(a.item,d)||this._addIdentityChange(a,d),this._moveAfter(a,b,_)):a=this._addAfter(new _I(d,p),b,_),a}_verifyReinsertion(a,d,p,_){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(p,null);return null!==b?a=this._reinsertAfter(b,a._prev,_):a.currentIndex!=_&&(a.currentIndex=_,this._addToMoves(a,_)),a}_truncate(a){for(;null!==a;){const d=a._next;this._addToRemovals(this._unlink(a)),a=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,d,p){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const _=a._prevRemoved,b=a._nextRemoved;return null===_?this._removalsHead=b:_._nextRemoved=b,null===b?this._removalsTail=_:b._prevRemoved=_,this._insertAfter(a,d,p),this._addToMoves(a,p),a}_moveAfter(a,d,p){return this._unlink(a),this._insertAfter(a,d,p),this._addToMoves(a,p),a}_addAfter(a,d,p){return this._insertAfter(a,d,p),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,d,p){const _=null===d?this._itHead:d._next;return a._next=_,a._prev=d,null===_?this._itTail=a:_._prev=a,null===d?this._itHead=a:d._next=a,null===this._linkedRecords&&(this._linkedRecords=new C0),this._linkedRecords.put(a),a.currentIndex=p,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const d=a._prev,p=a._next;return null===d?this._itHead=p:d._next=p,null===p?this._itTail=d:p._prev=d,a}_addToMoves(a,d){return a.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new C0),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,d){return a.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class _I{constructor(a,d){this.item=a,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yg{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,d){let p;for(p=this._head;null!==p;p=p._nextDup)if((null===d||d<=p.currentIndex)&&Object.is(p.trackById,a))return p;return null}remove(a){const d=a._prevDup,p=a._nextDup;return null===d?this._head=p:d._nextDup=p,null===p?this._tail=d:p._prevDup=d,null===this._head}}class C0{constructor(){this.map=new Map}put(a){const d=a.trackById;let p=this.map.get(d);p||(p=new yg,this.map.set(d,p)),p.add(a)}get(a,d){const _=this.map.get(a);return _?_.get(a,d):null}remove(a){const d=a.trackById;return this.map.get(d).remove(a)&&this.map.delete(d),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zv(o,a,d){const p=o.previousIndex;if(null===p)return p;let _=0;return d&&p<d.length&&(_=d[p]),p+a+_}class bg{constructor(){}supports(a){return a instanceof Map||yb(a)}create(){return new vI}}class vI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let d;for(d=this._mapHead;null!==d;d=d._next)a(d)}forEachPreviousItem(a){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)a(d)}forEachChangedItem(a){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)a(d)}forEachAddedItem(a){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)a(d)}forEachRemovedItem(a){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)a(d)}diff(a){if(a){if(!(a instanceof Map||yb(a)))throw new Ce(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(a,(p,_)=>{if(d&&d.key===_)this._maybeAddToChanges(d,p),this._appendAfter=d,d=d._next;else{const b=this._getOrCreateRecordForKey(_,p);d=this._insertBeforeOrAppend(d,b)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let p=d;null!==p;p=p._nextRemoved)p===this._mapHead&&(this._mapHead=null),this._records.delete(p.key),p._nextRemoved=p._next,p.previousValue=p.currentValue,p.currentValue=null,p._prev=null,p._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,d){if(a){const p=a._prev;return d._next=a,d._prev=p,a._prev=d,p&&(p._next=d),a===this._mapHead&&(this._mapHead=d),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(a,d){if(this._records.has(a)){const _=this._records.get(a);this._maybeAddToChanges(_,d);const b=_._prev,T=_._next;return b&&(b._next=T),T&&(T._prev=b),_._next=null,_._prev=null,_}const p=new qA(a);return this._records.set(a,p),p.currentValue=d,this._addToAdditions(p),p}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,d){Object.is(d,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=d,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,d){a instanceof Map?a.forEach(d):Object.keys(a).forEach(p=>d(a[p],p))}}class qA{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function I0(){return new Hv([new $A])}let Hv=(()=>{class o{static#e=this.\u0275prov=fn({token:o,providedIn:"root",factory:I0});constructor(d){this.factories=d}static create(d,p){if(null!=p){const _=p.factories.slice();d=d.concat(_)}return new o(d)}static extend(d){return{provide:o,useFactory:p=>o.create(d,p||I0()),deps:[[o,new Nt,new Je]]}}find(d){const p=this.factories.find(_=>_.supports(d));if(null!=p)return p;throw new Ce(901,!1)}}return o})();function yI(){return new bI([new bg])}let bI=(()=>{class o{static#e=this.\u0275prov=fn({token:o,providedIn:"root",factory:yI});constructor(d){this.factories=d}static create(d,p){if(p){const _=p.factories.slice();d=d.concat(_)}return new o(d)}static extend(d){return{provide:o,useFactory:p=>o.create(d,p||yI()),deps:[[o,new Nt,new Je]]}}find(d){const p=this.factories.find(_=>_.supports(d));if(p)return p;throw new Ce(901,!1)}}return o})();const EI=PA(null,"core",[]);let x0=(()=>{class o{constructor(d){}static#e=this.\u0275fac=function(p){return new(p||o)(St(Hu))};static#t=this.\u0275mod=Mr({type:o});static#n=this.\u0275inj=Dn({})}return o})();function XA(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function dk(o){const a=Bn(o);if(!a)return null;const d=new gh(a);return{get selector(){return d.selector},get type(){return d.componentType},get inputs(){return d.inputs},get outputs(){return d.outputs},get ngContentSelectors(){return d.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},4097:(en,Ae,Q)=>{Q.d(Ae,{C6:()=>c.getApps,KN:()=>c.registerVersion,Mq:()=>c.getApp,ZF:()=>c.initializeApp});var c=Q(534);(0,c.registerVersion)("firebase","9.23.0","app")},120:(en,Ae,Q)=>{Q.d(Ae,{Z:()=>c.Z});var c=Q(3106);c.Z.registerVersion("firebase","9.23.0","app-compat")},8661:(en,Ae,Q)=>{Q.r(Ae);var c=Q(5861),U=Q(3106),K=Q(6710),pe=Q(9058),Oe=(Q(534),Q(7879),Q(4537));function ut(){return window}function G(){return G=(0,c.Z)(function*(J,te,Y){var Me;const{BuildInfo:Qe}=ut();(0,K.as)(te.sessionId,"AuthEvent did not contain a session ID");const St=yield function ke(J){return at.apply(this,arguments)}(te.sessionId),yn={};return(0,K.at)()?yn.ibi=Qe.packageName:(0,K.au)()?yn.apn=Qe.packageName:(0,K.av)(J,"operation-not-supported-in-this-environment"),Qe.displayName&&(yn.appDisplayName=Qe.displayName),yn.sessionId=St,(0,K.aw)(J,Y,te.type,void 0,null!==(Me=te.eventId)&&void 0!==Me?Me:void 0,yn)}),G.apply(this,arguments)}function Ne(){return(Ne=(0,c.Z)(function*(J){const{BuildInfo:te}=ut(),Y={};(0,K.at)()?Y.iosBundleId=te.packageName:(0,K.au)()?Y.androidPackageName=te.packageName:(0,K.av)(J,"operation-not-supported-in-this-environment"),yield(0,K.ax)(J,Y)})).apply(this,arguments)}function st(){return(st=(0,c.Z)(function*(J,te,Y){const{cordova:Me}=ut();let Qe=()=>{};try{yield new Promise((St,yn)=>{let Vt=null;function Xn(){var kn;St();const _r=null===(kn=Me.plugins.browsertab)||void 0===kn?void 0:kn.close;"function"==typeof _r&&_r(),"function"==typeof Y?.close&&Y.close()}function En(){Vt||(Vt=window.setTimeout(()=>{yn((0,K.az)(J,"redirect-cancelled-by-user"))},2e3))}function ai(){"visible"===document?.visibilityState&&En()}te.addPassiveListener(Xn),document.addEventListener("resume",En,!1),(0,K.au)()&&document.addEventListener("visibilitychange",ai,!1),Qe=()=>{te.removePassiveListener(Xn),document.removeEventListener("resume",En,!1),document.removeEventListener("visibilitychange",ai,!1),Vt&&window.clearTimeout(Vt)}})}finally{Qe()}})).apply(this,arguments)}function at(){return(at=(0,c.Z)(function*(J){const te=function Ze(J){if((0,K.as)(/[0-9a-zA-Z]+/.test(J),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(J);const te=new ArrayBuffer(J.length),Y=new Uint8Array(te);for(let Me=0;Me<J.length;Me++)Y[Me]=J.charCodeAt(Me);return Y}(J),Y=yield crypto.subtle.digest("SHA-256",te);return Array.from(new Uint8Array(Y)).map(Qe=>Qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class nt extends K.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(te=>{this.resolveInialized=te})}addPassiveListener(te){this.passiveListeners.add(te)}removePassiveListener(te){this.passiveListeners.delete(te)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(te){return this.resolveInialized(),this.passiveListeners.forEach(Y=>Y(te)),super.onEvent(te)}initialized(){var te=this;return(0,c.Z)(function*(){yield te.initPromise})()}}function he(J){return ue.apply(this,arguments)}function ue(){return(ue=(0,c.Z)(function*(J){const te=yield Et()._get(ot(J));return te&&(yield Et()._remove(ot(J))),te})).apply(this,arguments)}function Le(){const J=[];for(let Y=0;Y<20;Y++){const Me=Math.floor(62*Math.random());J.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Me))}return J.join("")}function Et(){return(0,K.aC)(K.b)}function ot(J){return(0,K.aD)("authEvent",J.config.apiKey,J.name)}function un(J){if(!J?.includes("?"))return{};const[te,...Y]=J.split("?");return(0,pe.zd)(Y.join("?"))}const De=class fi{constructor(){this._redirectPersistence=K.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=K.aE,this._overrideRedirectResult=K.aF}_initialize(te){var Y=this;return(0,c.Z)(function*(){const Me=te._key();let Qe=Y.eventManagers.get(Me);return Qe||(Qe=new nt(te),Y.eventManagers.set(Me,Qe),Y.attachCallbackListeners(te,Qe)),Qe})()}_openPopup(te){(0,K.av)(te,"operation-not-supported-in-this-environment")}_openRedirect(te,Y,Me,Qe){var St=this;return(0,c.Z)(function*(){!function mt(J){var te,Y,Me,Qe,St,yn,Vt,Xn,En,ai;const kn=ut();(0,K.aA)("function"==typeof(null===(te=kn?.universalLinks)||void 0===te?void 0:te.subscribe),J,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,K.aA)(typeof(null===(Y=kn?.BuildInfo)||void 0===Y?void 0:Y.packageName)<"u",J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,K.aA)("function"==typeof(null===(St=null===(Qe=null===(Me=kn?.cordova)||void 0===Me?void 0:Me.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===St?void 0:St.openUrl),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,K.aA)("function"==typeof(null===(Xn=null===(Vt=null===(yn=kn?.cordova)||void 0===yn?void 0:yn.plugins)||void 0===Vt?void 0:Vt.browsertab)||void 0===Xn?void 0:Xn.isAvailable),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,K.aA)("function"==typeof(null===(ai=null===(En=kn?.cordova)||void 0===En?void 0:En.InAppBrowser)||void 0===ai?void 0:ai.open),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(te);const yn=yield St._initialize(te);yield yn.initialized(),yn.resetRedirect(),(0,K.aG)(),yield St._originValidation(te);const Vt=function $e(J,te,Y=null){return{type:te,eventId:Y,urlResponse:null,sessionId:Le(),postBody:null,tenantId:J.tenantId,error:(0,K.az)(J,"no-auth-event")}}(te,Me,Qe);yield function it(J,te){return Et()._set(ot(J),te)}(te,Vt);const Xn=yield function z(J,te,Y){return G.apply(this,arguments)}(te,Vt,Y),En=yield function me(J){const{cordova:te}=ut();return new Promise(Y=>{te.plugins.browsertab.isAvailable(Me=>{let Qe=null;Me?te.plugins.browsertab.openUrl(J):Qe=te.InAppBrowser.open(J,(0,K.ay)()?"_blank":"_system","location=yes"),Y(Qe)})})}(Xn);return function lt(J,te,Y){return st.apply(this,arguments)}(te,yn,En)})()}_isIframeWebStorageSupported(te,Y){throw new Error("Method not implemented.")}_originValidation(te){const Y=te._key();return this.originValidationPromises[Y]||(this.originValidationPromises[Y]=function de(J){return Ne.apply(this,arguments)}(te)),this.originValidationPromises[Y]}attachCallbackListeners(te,Y){const{universalLinks:Me,handleOpenURL:Qe,BuildInfo:St}=ut(),yn=setTimeout((0,c.Z)(function*(){yield he(te),Y.onEvent(Ee())}),500),Vt=function(){var ai=(0,c.Z)(function*(kn){clearTimeout(yn);const _r=yield he(te);let Zo=null;_r&&kn?.url&&(Zo=function Ge(J,te){var Y,Me;const Qe=function nn(J){const te=un(J),Y=te.link?decodeURIComponent(te.link):void 0,Me=un(Y).link,Qe=te.deep_link_id?decodeURIComponent(te.deep_link_id):void 0;return un(Qe).link||Qe||Me||Y||J}(te);if(Qe.includes("/__/auth/callback")){const St=un(Qe),yn=St.firebaseError?function Kt(J){try{return JSON.parse(J)}catch{return null}}(decodeURIComponent(St.firebaseError)):null,Vt=null===(Me=null===(Y=yn?.code)||void 0===Y?void 0:Y.split("auth/"))||void 0===Me?void 0:Me[1],Xn=Vt?(0,K.az)(Vt):null;return Xn?{type:J.type,eventId:J.eventId,tenantId:J.tenantId,error:Xn,urlResponse:null,sessionId:null,postBody:null}:{type:J.type,eventId:J.eventId,tenantId:J.tenantId,sessionId:J.sessionId,urlResponse:Qe,postBody:null}}return null}(_r,kn.url)),Y.onEvent(Zo||Ee())});return function(_r){return ai.apply(this,arguments)}}();typeof Me<"u"&&"function"==typeof Me.subscribe&&Me.subscribe(null,Vt);const Xn=Qe,En=`${St.packageName.toLowerCase()}://`;ut().handleOpenURL=function(){var ai=(0,c.Z)(function*(kn){if(kn.toLowerCase().startsWith(En)&&Vt({url:kn}),"function"==typeof Xn)try{Xn(kn)}catch(_r){console.error(_r)}});return function(kn){return ai.apply(this,arguments)}}()}};function Ee(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,K.az)("no-auth-event")}}function At(){var J;return(null===(J=self?.location)||void 0===J?void 0:J.protocol)||null}function Tn(J=(0,pe.z$)()){return!("file:"!==At()&&"ionic:"!==At()&&"capacitor:"!==At()||!J.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dn(){try{const J=self.localStorage,te=K.aL();if(J)return J.setItem(te,"1"),J.removeItem(te),!function tn(J=(0,pe.z$)()){return function Nn(){return(0,pe.w1)()&&11===document?.documentMode}()||function fn(J=(0,pe.z$)()){return/Edge\/\d+/.test(J)}(J)}()||(0,pe.hl)()}catch{return Ut()&&(0,pe.hl)()}return!1}function Ut(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function cn(){return(function bt(){return"http:"===At()||"https:"===At()}()||(0,pe.ru)()||Tn())&&!function dn(){return(0,pe.b$)()||(0,pe.UG)()}()&&Dn()&&!Ut()}function Fn(){return Tn()&&typeof document<"u"}function wi(){return(wi=(0,c.Z)(function*(){return!!Fn()&&new Promise(J=>{const te=setTimeout(()=>{J(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(te),J(!0)})})})).apply(this,arguments)}const ti={LOCAL:"local",NONE:"none",SESSION:"session"},Vi=K.aA,Ro="persistence";function Yt(J){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,c.Z)(function*(J){yield J._initializationPromise;const te=Te(),Y=K.aD(Ro,J.config.apiKey,J.name);te&&te.setItem(Y,J._getPersistence())})).apply(this,arguments)}function Te(){var J;try{return(null===(J=function Si(){return typeof window<"u"?window:null}())||void 0===J?void 0:J.sessionStorage)||null}catch{return null}}const we=K.aA;class Ie{constructor(){this.browserResolver=K.aC(K.k),this.cordovaResolver=K.aC(De),this.underlyingResolver=null,this._redirectPersistence=K.a,this._completeRedirectFn=K.aE,this._overrideRedirectResult=K.aF}_initialize(te){var Y=this;return(0,c.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._initialize(te)})()}_openPopup(te,Y,Me,Qe){var St=this;return(0,c.Z)(function*(){return yield St.selectUnderlyingResolver(),St.assertedUnderlyingResolver._openPopup(te,Y,Me,Qe)})()}_openRedirect(te,Y,Me,Qe){var St=this;return(0,c.Z)(function*(){return yield St.selectUnderlyingResolver(),St.assertedUnderlyingResolver._openRedirect(te,Y,Me,Qe)})()}_isIframeWebStorageSupported(te,Y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(te,Y)}_originValidation(te){return this.assertedUnderlyingResolver._originValidation(te)}get _shouldInitProactively(){return Fn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return we(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var te=this;return(0,c.Z)(function*(){if(te.underlyingResolver)return;const Y=yield function Un(){return wi.apply(this,arguments)}();te.underlyingResolver=Y?te.cordovaResolver:te.browserResolver})()}}function qe(J){return J.unwrap()}function Ct(J){return jt(J)}function jt(J){const{_tokenResponse:te}=J instanceof pe.ZR?J.customData:J;if(!te)return null;if(!(J instanceof pe.ZR)&&"temporaryProof"in te&&"phoneNumber"in te)return K.P.credentialFromResult(J);const Y=te.providerId;if(!Y||Y===K.p.PASSWORD)return null;let Me;switch(Y){case K.p.GOOGLE:Me=K.V;break;case K.p.FACEBOOK:Me=K.U;break;case K.p.GITHUB:Me=K.W;break;case K.p.TWITTER:Me=K.Z;break;default:const{oauthIdToken:Qe,oauthAccessToken:St,oauthTokenSecret:yn,pendingToken:Vt,nonce:Xn}=te;return St||yn||Qe||Vt?Vt?Y.startsWith("saml.")?K.aO._create(Y,Vt):K.L._fromParams({providerId:Y,signInMethod:Y,pendingToken:Vt,idToken:Qe,accessToken:St}):new K.X(Y).credential({idToken:Qe,accessToken:St,rawNonce:Xn}):null}return J instanceof pe.ZR?Me.credentialFromError(J):Me.credentialFromResult(J)}function Jt(J,te){return te.catch(Y=>{throw Y instanceof pe.ZR&&function mn(J,te){var Y;const Me=null===(Y=te.customData)||void 0===Y?void 0:Y._tokenResponse;if("auth/multi-factor-auth-required"===te?.code)te.resolver=new vi(J,K.aq(J,te));else if(Me){const Qe=jt(te),St=te;Qe&&(St.credential=Qe,St.tenantId=Me.tenantId||void 0,St.email=Me.email||void 0,St.phoneNumber=Me.phoneNumber||void 0)}}(J,Y),Y}).then(Y=>{const Qe=Y.user;return{operationType:Y.operationType,credential:Ct(Y),additionalUserInfo:K.ao(Y),user:zn.getOrCreate(Qe)}})}function Ht(J,te){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,c.Z)(function*(J,te){const Y=yield te;return{verificationId:Y.verificationId,confirm:Me=>Jt(J,Y.confirm(Me))}})).apply(this,arguments)}class vi{constructor(te,Y){this.resolver=Y,this.auth=function Fe(J){return J.wrapped()}(te)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(te){return Jt(qe(this.auth),this.resolver.resolveSignIn(te))}}class zn{constructor(te){this._delegate=te,this.multiFactor=K.ar(te)}static getOrCreate(te){return zn.USER_MAP.has(te)||zn.USER_MAP.set(te,new zn(te)),zn.USER_MAP.get(te)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(te){return this._delegate.getIdTokenResult(te)}getIdToken(te){return this._delegate.getIdToken(te)}linkAndRetrieveDataWithCredential(te){return this.linkWithCredential(te)}linkWithCredential(te){var Y=this;return(0,c.Z)(function*(){return Jt(Y.auth,K.a0(Y._delegate,te))})()}linkWithPhoneNumber(te,Y){var Me=this;return(0,c.Z)(function*(){return Ht(Me.auth,K.l(Me._delegate,te,Y))})()}linkWithPopup(te){var Y=this;return(0,c.Z)(function*(){return Jt(Y.auth,K.d(Y._delegate,te,Ie))})()}linkWithRedirect(te){var Y=this;return(0,c.Z)(function*(){return yield Yt(K.aH(Y.auth)),K.g(Y._delegate,te,Ie)})()}reauthenticateAndRetrieveDataWithCredential(te){return this.reauthenticateWithCredential(te)}reauthenticateWithCredential(te){var Y=this;return(0,c.Z)(function*(){return Jt(Y.auth,K.a1(Y._delegate,te))})()}reauthenticateWithPhoneNumber(te,Y){return Ht(this.auth,K.r(this._delegate,te,Y))}reauthenticateWithPopup(te){return Jt(this.auth,K.e(this._delegate,te,Ie))}reauthenticateWithRedirect(te){var Y=this;return(0,c.Z)(function*(){return yield Yt(K.aH(Y.auth)),K.h(Y._delegate,te,Ie)})()}sendEmailVerification(te){return K.ae(this._delegate,te)}unlink(te){var Y=this;return(0,c.Z)(function*(){return yield K.an(Y._delegate,te),Y})()}updateEmail(te){return K.aj(this._delegate,te)}updatePassword(te){return K.ak(this._delegate,te)}updatePhoneNumber(te){return K.u(this._delegate,te)}updateProfile(te){return K.ai(this._delegate,te)}verifyBeforeUpdateEmail(te,Y){return K.af(this._delegate,te,Y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zn.USER_MAP=new WeakMap;const ki=K.aA;let Hn=(()=>{class J{constructor(Y,Me){if(this.app=Y,Me.isInitialized())return this._delegate=Me.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Qe}=Y.options;ki(Qe,"invalid-api-key",{appName:Y.name}),ki(Qe,"invalid-api-key",{appName:Y.name});const St=typeof window<"u"?Ie:void 0;this._delegate=Me.initialize({options:{persistence:pi(Qe,Y.name),popupRedirectResolver:St}}),this._delegate._updateErrorMap(K.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Y){this._delegate.languageCode=Y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Y){this._delegate.tenantId=Y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Y,Me){K.I(this._delegate,Y,Me)}applyActionCode(Y){return K.a5(this._delegate,Y)}checkActionCode(Y){return K.a6(this._delegate,Y)}confirmPasswordReset(Y,Me){return K.a4(this._delegate,Y,Me)}createUserWithEmailAndPassword(Y,Me){var Qe=this;return(0,c.Z)(function*(){return Jt(Qe._delegate,K.a8(Qe._delegate,Y,Me))})()}fetchProvidersForEmail(Y){return this.fetchSignInMethodsForEmail(Y)}fetchSignInMethodsForEmail(Y){return K.ad(this._delegate,Y)}isSignInWithEmailLink(Y){return K.ab(this._delegate,Y)}getRedirectResult(){var Y=this;return(0,c.Z)(function*(){ki(cn(),Y._delegate,"operation-not-supported-in-this-environment");const Me=yield K.j(Y._delegate,Ie);return Me?Jt(Y._delegate,Promise.resolve(Me)):{credential:null,user:null}})()}addFrameworkForLogging(Y){!function He(J,te){(0,K.aH)(J)._logFramework(te)}(this._delegate,Y)}onAuthStateChanged(Y,Me,Qe){const{next:St,error:yn,complete:Vt}=mr(Y,Me,Qe);return this._delegate.onAuthStateChanged(St,yn,Vt)}onIdTokenChanged(Y,Me,Qe){const{next:St,error:yn,complete:Vt}=mr(Y,Me,Qe);return this._delegate.onIdTokenChanged(St,yn,Vt)}sendSignInLinkToEmail(Y,Me){return K.aa(this._delegate,Y,Me)}sendPasswordResetEmail(Y,Me){return K.a3(this._delegate,Y,Me||void 0)}setPersistence(Y){var Me=this;return(0,c.Z)(function*(){let Qe;switch(function sn(J,te){Vi(Object.values(ti).includes(te),J,"invalid-persistence-type"),(0,pe.b$)()?Vi(te!==ti.SESSION,J,"unsupported-persistence-type"):(0,pe.UG)()?Vi(te===ti.NONE,J,"unsupported-persistence-type"):Ut()?Vi(te===ti.NONE||te===ti.LOCAL&&(0,pe.hl)(),J,"unsupported-persistence-type"):Vi(te===ti.NONE||Dn(),J,"unsupported-persistence-type")}(Me._delegate,Y),Y){case ti.SESSION:Qe=K.a;break;case ti.LOCAL:Qe=(yield K.aC(K.i)._isAvailable())?K.i:K.b;break;case ti.NONE:Qe=K.N;break;default:return K.av("argument-error",{appName:Me._delegate.name})}return Me._delegate.setPersistence(Qe)})()}signInAndRetrieveDataWithCredential(Y){return this.signInWithCredential(Y)}signInAnonymously(){return Jt(this._delegate,K._(this._delegate))}signInWithCredential(Y){return Jt(this._delegate,K.$(this._delegate,Y))}signInWithCustomToken(Y){return Jt(this._delegate,K.a2(this._delegate,Y))}signInWithEmailAndPassword(Y,Me){return Jt(this._delegate,K.a9(this._delegate,Y,Me))}signInWithEmailLink(Y,Me){return Jt(this._delegate,K.ac(this._delegate,Y,Me))}signInWithPhoneNumber(Y,Me){return Ht(this._delegate,K.s(this._delegate,Y,Me))}signInWithPopup(Y){var Me=this;return(0,c.Z)(function*(){return ki(cn(),Me._delegate,"operation-not-supported-in-this-environment"),Jt(Me._delegate,K.c(Me._delegate,Y,Ie))})()}signInWithRedirect(Y){var Me=this;return(0,c.Z)(function*(){return ki(cn(),Me._delegate,"operation-not-supported-in-this-environment"),yield Yt(Me._delegate),K.f(Me._delegate,Y,Ie)})()}updateCurrentUser(Y){return this._delegate.updateCurrentUser(Y)}verifyPasswordResetCode(Y){return K.a7(this._delegate,Y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return J.Persistence=ti,J})();function mr(J,te,Y){let Me=J;"function"!=typeof J&&({next:Me,error:te,complete:Y}=J);const Qe=Me;return{next:yn=>Qe(yn&&zn.getOrCreate(yn)),error:te,complete:Y}}function pi(J,te){const Y=function zt(J,te){const Y=Te();if(!Y)return[];const Me=K.aD(Ro,J,te);switch(Y.getItem(Me)){case ti.NONE:return[K.N];case ti.LOCAL:return[K.i,K.a];case ti.SESSION:return[K.a];default:return[]}}(J,te);if(typeof self<"u"&&!Y.includes(K.i)&&Y.push(K.i),typeof window<"u")for(const Me of[K.b,K.a])Y.includes(Me)||Y.push(Me);return Y.includes(K.N)||Y.push(K.N),Y}class Ci{constructor(){this.providerId="phone",this._delegate=new K.P(qe(U.Z.auth()))}static credential(te,Y){return K.P.credential(te,Y)}verifyPhoneNumber(te,Y){return this._delegate.verifyPhoneNumber(te,Y)}unwrap(){return this._delegate}}Ci.PHONE_SIGN_IN_METHOD=K.P.PHONE_SIGN_IN_METHOD,Ci.PROVIDER_ID=K.P.PROVIDER_ID;const gr=K.aA;class mo{constructor(te,Y,Me=U.Z.app()){var Qe;gr(null===(Qe=Me.options)||void 0===Qe?void 0:Qe.apiKey,"invalid-api-key",{appName:Me.name}),this._delegate=new K.R(te,Y,Me.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function le(J){J.INTERNAL.registerComponent(new Oe.wA("auth-compat",te=>{const Y=te.getProvider("app-compat").getImmediate(),Me=te.getProvider("auth");return new Hn(Y,Me)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K.A.EMAIL_SIGNIN,PASSWORD_RESET:K.A.PASSWORD_RESET,RECOVER_EMAIL:K.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K.A.VERIFY_EMAIL}},EmailAuthProvider:K.Q,FacebookAuthProvider:K.U,GithubAuthProvider:K.W,GoogleAuthProvider:K.V,OAuthProvider:K.X,SAMLAuthProvider:K.Y,PhoneAuthProvider:Ci,PhoneMultiFactorGenerator:K.m,RecaptchaVerifier:mo,TwitterAuthProvider:K.Z,Auth:Hn,AuthCredential:K.J,Error:pe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.4.2")}(U.Z)},3106:(en,Ae,Q)=>{Q.d(Ae,{Z:()=>lt});var c=Q(9058),U=Q(4537),K=Q(534),pe=Q(7879);class ce{constructor(mt,ke){this._delegate=mt,this.firebase=ke,(0,K._addComponent)(mt,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=mt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this._delegate.automaticDataCollectionEnabled=mt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(mt=>{this._delegate.checkDestroyed(),mt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,K.deleteApp)(this._delegate)))}_getService(mt,ke=K._DEFAULT_ENTRY_NAME){var at;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(mt);return!Ze.isInitialized()&&"EXPLICIT"===(null===(at=Ze.getComponent())||void 0===at?void 0:at.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:ke})}_removeServiceInstance(mt,ke=K._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(mt).clearInstance(ke)}_addComponent(mt){(0,K._addComponent)(this._delegate,mt)}_addOrOverwriteComponent(mt){(0,K._addOrOverwriteComponent)(this._delegate,mt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function Ve(){const st=function ut(st){const mt={},ke={__esModule:!0,initializeApp:function Ce(he,ue={}){const Ge=K.initializeApp(he,ue);if((0,c.r3)(mt,Ge.name))return mt[Ge.name];const Le=new st(Ge,ke);return mt[Ge.name]=Le,Le},app:Ze,registerVersion:K.registerVersion,setLogLevel:K.setLogLevel,onLog:K.onLog,apps:null,SDK_VERSION:K.SDK_VERSION,INTERNAL:{registerComponent:function $e(he){const ue=he.name,Ge=ue.replace("-compat","");if(K._registerComponent(he)&&"PUBLIC"===he.type){const Le=(Et=Ze())=>{if("function"!=typeof Et[Ge])throw Oe.create("invalid-app-argument",{appName:ue});return Et[Ge]()};void 0!==he.serviceProps&&(0,c.ZB)(Le,he.serviceProps),ke[Ge]=Le,st.prototype[Ge]=function(...Et){return this._getService.bind(this,ue).apply(this,he.multipleInstances?Et:[])}}return"PUBLIC"===he.type?ke[Ge]:null},removeApp:function at(he){delete mt[he]},useAsService:function it(he,ue){return"serverAuth"===ue?null:ue},modularAPIs:K}};function Ze(he){if(!(0,c.r3)(mt,he=he||K._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:he});return mt[he]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function nt(){return Object.keys(mt).map(he=>mt[he])}}),Ze.App=st,ke}(ce);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:Ve,extendNamespace:function mt(ke){(0,c.ZB)(st,ke)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),st}(),G=new pe.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const lt=z;!function me(st){(0,K.registerVersion)("@firebase/app-compat","0.2.13",st)}()},534:(en,Ae,Q)=>{Q.r(Ae),Q.d(Ae,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>Ht,_DEFAULT_ENTRY_NAME:()=>sn,_addComponent:()=>Te,_addOrOverwriteComponent:()=>we,_apps:()=>Qt,_clearComponents:()=>Ct,_components:()=>zt,_getProvider:()=>qe,_registerComponent:()=>Ie,_removeServiceInstance:()=>Fe,deleteApp:()=>ki,getApp:()=>vi,getApps:()=>zn,initializeApp:()=>Ei,onLog:()=>pi,registerVersion:()=>mr,setLogLevel:()=>Ci});var c=Q(5861),U=Q(4537),K=Q(7879),pe=Q(9058);const ce=(Xe,ze)=>ze.some(_t=>Xe instanceof _t);let Re,Oe;const z=new WeakMap,G=new WeakMap,de=new WeakMap,Ne=new WeakMap,me=new WeakMap;let mt={get(Xe,ze,_t){if(Xe instanceof IDBTransaction){if("done"===ze)return G.get(Xe);if("objectStoreNames"===ze)return Xe.objectStoreNames||de.get(Xe);if("store"===ze)return _t.objectStoreNames[1]?void 0:_t.objectStore(_t.objectStoreNames[0])}return Ce(Xe[ze])},set:(Xe,ze,_t)=>(Xe[ze]=_t,!0),has:(Xe,ze)=>Xe instanceof IDBTransaction&&("done"===ze||"store"===ze)||ze in Xe};function Ze(Xe){return"function"==typeof Xe?function at(Xe){return Xe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ve(){return Oe||(Oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Xe)?function(...ze){return Xe.apply(nt(this),ze),Ce(z.get(this))}:function(...ze){return Ce(Xe.apply(nt(this),ze))}:function(ze,..._t){const Zt=Xe.call(nt(this),ze,..._t);return de.set(Zt,ze.sort?ze.sort():[ze]),Ce(Zt)}}(Xe):(Xe instanceof IDBTransaction&&function st(Xe){if(G.has(Xe))return;const ze=new Promise((_t,Zt)=>{const Rt=()=>{Xe.removeEventListener("complete",On),Xe.removeEventListener("error",ri),Xe.removeEventListener("abort",ri)},On=()=>{_t(),Rt()},ri=()=>{Zt(Xe.error||new DOMException("AbortError","AbortError")),Rt()};Xe.addEventListener("complete",On),Xe.addEventListener("error",ri),Xe.addEventListener("abort",ri)});G.set(Xe,ze)}(Xe),ce(Xe,function ut(){return Re||(Re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Xe,mt):Xe)}function Ce(Xe){if(Xe instanceof IDBRequest)return function lt(Xe){const ze=new Promise((_t,Zt)=>{const Rt=()=>{Xe.removeEventListener("success",On),Xe.removeEventListener("error",ri)},On=()=>{_t(Ce(Xe.result)),Rt()},ri=()=>{Zt(Xe.error),Rt()};Xe.addEventListener("success",On),Xe.addEventListener("error",ri)});return ze.then(_t=>{_t instanceof IDBCursor&&z.set(_t,Xe)}).catch(()=>{}),me.set(ze,Xe),ze}(Xe);if(Ne.has(Xe))return Ne.get(Xe);const ze=Ze(Xe);return ze!==Xe&&(Ne.set(Xe,ze),me.set(ze,Xe)),ze}const nt=Xe=>me.get(Xe),he=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Ge=new Map;function Le(Xe,ze){if(!(Xe instanceof IDBDatabase)||ze in Xe||"string"!=typeof ze)return;if(Ge.get(ze))return Ge.get(ze);const _t=ze.replace(/FromIndex$/,""),Zt=ze!==_t,Rt=ue.includes(_t);if(!(_t in(Zt?IDBIndex:IDBObjectStore).prototype)||!Rt&&!he.includes(_t))return;const On=function(){var ri=(0,c.Z)(function*(Hi,...qi){const Yi=this.transaction(Hi,Rt?"readwrite":"readonly");let Ur=Yi.store;return Zt&&(Ur=Ur.index(qi.shift())),(yield Promise.all([Ur[_t](...qi),Rt&&Yi.done]))[0]});return function(qi){return ri.apply(this,arguments)}}();return Ge.set(ze,On),On}!function ke(Xe){mt=Xe(mt)}(Xe=>({...Xe,get:(ze,_t,Zt)=>Le(ze,_t)||Xe.get(ze,_t,Zt),has:(ze,_t)=>!!Le(ze,_t)||Xe.has(ze,_t)}));class Et{constructor(ze){this.container=ze}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(function ot(Xe){const ze=Xe.getComponent();return"VERSION"===ze?.type}(_t)){const Zt=_t.getImmediate();return`${Zt.library}/${Zt.version}`}return null}).filter(_t=>_t).join(" ")}}const Kt="@firebase/app",un=new K.Yd("@firebase/app"),sn="[DEFAULT]",Yt={[Kt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qt=new Map,zt=new Map;function Te(Xe,ze){try{Xe.container.addComponent(ze)}catch(_t){un.debug(`Component ${ze.name} failed to register with FirebaseApp ${Xe.name}`,_t)}}function we(Xe,ze){Xe.container.addOrOverwriteComponent(ze)}function Ie(Xe){const ze=Xe.name;if(zt.has(ze))return un.debug(`There were multiple attempts to register component ${ze}.`),!1;zt.set(ze,Xe);for(const _t of Qt.values())Te(_t,Xe);return!0}function qe(Xe,ze){const _t=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),Xe.container.getProvider(ze)}function Fe(Xe,ze,_t=sn){qe(Xe,ze).clearInstance(_t)}function Ct(){zt.clear()}const jt=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Jt{constructor(ze,_t,Zt){this._isDeleted=!1,this._options=Object.assign({},ze),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=Zt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ze){this._isDeleted=ze}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}const Ht="9.23.0";function Ei(Xe,ze={}){let _t=Xe;"object"!=typeof ze&&(ze={name:ze});const Zt=Object.assign({name:sn,automaticDataCollectionEnabled:!1},ze),Rt=Zt.name;if("string"!=typeof Rt||!Rt)throw jt.create("bad-app-name",{appName:String(Rt)});if(_t||(_t=(0,pe.aH)()),!_t)throw jt.create("no-options");const On=Qt.get(Rt);if(On){if((0,pe.vZ)(_t,On.options)&&(0,pe.vZ)(Zt,On.config))return On;throw jt.create("duplicate-app",{appName:Rt})}const ri=new U.H0(Rt);for(const qi of zt.values())ri.addComponent(qi);const Hi=new Jt(_t,Zt,ri);return Qt.set(Rt,Hi),Hi}function vi(Xe=sn){const ze=Qt.get(Xe);if(!ze&&Xe===sn&&(0,pe.aH)())return Ei();if(!ze)throw jt.create("no-app",{appName:Xe});return ze}function zn(){return Array.from(Qt.values())}function ki(Xe){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,c.Z)(function*(Xe){const ze=Xe.name;Qt.has(ze)&&(Qt.delete(ze),yield Promise.all(Xe.container.getProviders().map(_t=>_t.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function mr(Xe,ze,_t){var Zt;let Rt=null!==(Zt=Yt[Xe])&&void 0!==Zt?Zt:Xe;_t&&(Rt+=`-${_t}`);const On=Rt.match(/\s|\//),ri=ze.match(/\s|\//);if(On||ri){const Hi=[`Unable to register library "${Rt}" with version "${ze}":`];return On&&Hi.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),On&&ri&&Hi.push("and"),ri&&Hi.push(`version name "${ze}" contains illegal characters (whitespace or "/")`),void un.warn(Hi.join(" "))}Ie(new U.wA(`${Rt}-version`,()=>({library:Rt,version:ze}),"VERSION"))}function pi(Xe,ze){if(null!==Xe&&"function"!=typeof Xe)throw jt.create("invalid-log-argument");(0,K.Am)(Xe,ze)}function Ci(Xe){(0,K.Ub)(Xe)}const gr="firebase-heartbeat-database",mo=1,fe="firebase-heartbeat-store";let le=null;function J(){return le||(le=function $e(Xe,ze,{blocked:_t,upgrade:Zt,blocking:Rt,terminated:On}={}){const ri=indexedDB.open(Xe,ze),Hi=Ce(ri);return Zt&&ri.addEventListener("upgradeneeded",qi=>{Zt(Ce(ri.result),qi.oldVersion,qi.newVersion,Ce(ri.transaction),qi)}),_t&&ri.addEventListener("blocked",qi=>_t(qi.oldVersion,qi.newVersion,qi)),Hi.then(qi=>{On&&qi.addEventListener("close",()=>On()),Rt&&qi.addEventListener("versionchange",Yi=>Rt(Yi.oldVersion,Yi.newVersion,Yi))}).catch(()=>{}),Hi}(gr,mo,{upgrade:(Xe,ze)=>{0===ze&&Xe.createObjectStore(fe)}}).catch(Xe=>{throw jt.create("idb-open",{originalErrorMessage:Xe.message})})),le}function Y(){return(Y=(0,c.Z)(function*(Xe){try{return yield(yield J()).transaction(fe).objectStore(fe).get(St(Xe))}catch(ze){if(ze instanceof pe.ZR)un.warn(ze.message);else{const _t=jt.create("idb-get",{originalErrorMessage:ze?.message});un.warn(_t.message)}}})).apply(this,arguments)}function Me(Xe,ze){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,c.Z)(function*(Xe,ze){try{const Zt=(yield J()).transaction(fe,"readwrite");yield Zt.objectStore(fe).put(ze,St(Xe)),yield Zt.done}catch(_t){if(_t instanceof pe.ZR)un.warn(_t.message);else{const Zt=jt.create("idb-set",{originalErrorMessage:_t?.message});un.warn(Zt.message)}}})).apply(this,arguments)}function St(Xe){return`${Xe.name}!${Xe.options.appId}`}class Xn{constructor(ze){this.container=ze,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new kn(_t),this._heartbeatsCachePromise=this._storage.read().then(Zt=>(this._heartbeatsCache=Zt,Zt))}triggerHeartbeat(){var ze=this;return(0,c.Z)(function*(){const Zt=ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=En();if(null===ze._heartbeatsCache&&(ze._heartbeatsCache=yield ze._heartbeatsCachePromise),ze._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!ze._heartbeatsCache.heartbeats.some(On=>On.date===Rt))return ze._heartbeatsCache.heartbeats.push({date:Rt,agent:Zt}),ze._heartbeatsCache.heartbeats=ze._heartbeatsCache.heartbeats.filter(On=>{const ri=new Date(On.date).valueOf();return Date.now()-ri<=2592e6}),ze._storage.overwrite(ze._heartbeatsCache)})()}getHeartbeatsHeader(){var ze=this;return(0,c.Z)(function*(){if(null===ze._heartbeatsCache&&(yield ze._heartbeatsCachePromise),null===ze._heartbeatsCache||0===ze._heartbeatsCache.heartbeats.length)return"";const _t=En(),{heartbeatsToSend:Zt,unsentEntries:Rt}=function ai(Xe,ze=1024){const _t=[];let Zt=Xe.slice();for(const Rt of Xe){const On=_t.find(ri=>ri.agent===Rt.agent);if(On){if(On.dates.push(Rt.date),_r(_t)>ze){On.dates.pop();break}}else if(_t.push({agent:Rt.agent,dates:[Rt.date]}),_r(_t)>ze){_t.pop();break}Zt=Zt.slice(1)}return{heartbeatsToSend:_t,unsentEntries:Zt}}(ze._heartbeatsCache.heartbeats),On=(0,pe.L)(JSON.stringify({version:2,heartbeats:Zt}));return ze._heartbeatsCache.lastSentHeartbeatDate=_t,Rt.length>0?(ze._heartbeatsCache.heartbeats=Rt,yield ze._storage.overwrite(ze._heartbeatsCache)):(ze._heartbeatsCache.heartbeats=[],ze._storage.overwrite(ze._heartbeatsCache)),On})()}}function En(){return(new Date).toISOString().substring(0,10)}class kn{constructor(ze){this.app=ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ze=this;return(0,c.Z)(function*(){return(yield ze._canUseIndexedDBPromise)&&(yield function te(Xe){return Y.apply(this,arguments)}(ze.app))||{heartbeats:[]}})()}overwrite(ze){var _t=this;return(0,c.Z)(function*(){var Zt;if(yield _t._canUseIndexedDBPromise){const On=yield _t.read();return Me(_t.app,{lastSentHeartbeatDate:null!==(Zt=ze.lastSentHeartbeatDate)&&void 0!==Zt?Zt:On.lastSentHeartbeatDate,heartbeats:ze.heartbeats})}})()}add(ze){var _t=this;return(0,c.Z)(function*(){var Zt;if(yield _t._canUseIndexedDBPromise){const On=yield _t.read();return Me(_t.app,{lastSentHeartbeatDate:null!==(Zt=ze.lastSentHeartbeatDate)&&void 0!==Zt?Zt:On.lastSentHeartbeatDate,heartbeats:[...On.heartbeats,...ze.heartbeats]})}})()}}function _r(Xe){return(0,pe.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function Zo(Xe){Ie(new U.wA("platform-logger",ze=>new Et(ze),"PRIVATE")),Ie(new U.wA("heartbeat",ze=>new Xn(ze),"PRIVATE")),mr(Kt,"0.9.13",Xe),mr(Kt,"0.9.13","esm2017"),mr("fire-js","")}("")},4537:(en,Ae,Q)=>{Q.d(Ae,{H0:()=>ut,wA:()=>K,zt:()=>ce});var c=Q(5861),U=Q(9058);class K{constructor(z,G,de){this.name=z,this.instanceFactory=G,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const pe="[DEFAULT]";class ce{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const de=new U.BH;if(this.instancesDeferred.set(G,de),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ne=this.getOrInitializeService({instanceIdentifier:G});Ne&&de.resolve(Ne)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const de=this.normalizeInstanceIdentifier(z?.identifier),Ne=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(Ne)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(me){if(Ne)return null;throw me}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function Oe(Ve){return"EAGER"===Ve.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:pe})}catch{}for(const[G,de]of this.instancesDeferred.entries()){const Ne=this.normalizeInstanceIdentifier(G);try{const me=this.getOrInitializeService({instanceIdentifier:Ne});de.resolve(me)}catch{}}}}clearInstance(z=pe){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,c.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...G.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=pe){return this.instances.has(z)}getOptions(z=pe){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,de=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ne=this.getOrInitializeService({instanceIdentifier:de,options:G});for(const[me,lt]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(me)&&lt.resolve(Ne);return Ne}onInit(z,G){var de;const Ne=this.normalizeInstanceIdentifier(G),me=null!==(de=this.onInitCallbacks.get(Ne))&&void 0!==de?de:new Set;me.add(z),this.onInitCallbacks.set(Ne,me);const lt=this.instances.get(Ne);return lt&&z(lt,Ne),()=>{me.delete(z)}}invokeOnInitCallbacks(z,G){const de=this.onInitCallbacks.get(G);if(de)for(const Ne of de)try{Ne(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let de=this.instances.get(z);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(Ve=z,Ve===pe?void 0:Ve),options:G}),this.instances.set(z,de),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(de,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,de)}catch{}var Ve;return de||null}normalizeInstanceIdentifier(z=pe){return this.component?this.component.multipleInstances?z:pe:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new ce(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(en,Ae,Q)=>{Q.d(Ae,{Am:()=>Ve,Ub:()=>ut,Yd:()=>Oe,in:()=>U});const c=[];var U=function(z){return z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",z}(U||{});const K={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},pe=U.INFO,ce={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Re=(z,G,...de)=>{if(G<z.logLevel)return;const Ne=(new Date).toISOString(),me=ce[G];if(!me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[me](`[${Ne}]  ${z.name}:`,...de)};class Oe{constructor(G){this.name=G,this._logLevel=pe,this._logHandler=Re,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in U))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?K[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...G),this._logHandler(this,U.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...G),this._logHandler(this,U.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,U.INFO,...G),this._logHandler(this,U.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,U.WARN,...G),this._logHandler(this,U.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...G),this._logHandler(this,U.ERROR,...G)}}function ut(z){c.forEach(G=>{G.setLogLevel(z)})}function Ve(z,G){for(const de of c){let Ne=null;G&&G.level&&(Ne=K[G.level]),de.userLogHandler=null===z?null:(me,lt,...st)=>{const mt=st.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch{return null}}).filter(ke=>ke).join(" ");lt>=(Ne??me.logLevel)&&z({level:U[lt].toLowerCase(),message:mt,args:st,type:me.name})}}}},5861:(en,Ae,Q)=>{function c(K,pe,ce,Re,Oe,ut,Ve){try{var z=K[ut](Ve),G=z.value}catch(de){return void ce(de)}z.done?pe(G):Promise.resolve(G).then(Re,Oe)}function U(K){return function(){var pe=this,ce=arguments;return new Promise(function(Re,Oe){var ut=K.apply(pe,ce);function Ve(G){c(ut,Re,Oe,Ve,z,"next",G)}function z(G){c(ut,Re,Oe,Ve,z,"throw",G)}Ve(void 0)})}}Q.d(Ae,{Z:()=>U})},7582:(en,Ae,Q)=>{function pe(De,Ee){var He={};for(var je in De)Object.prototype.hasOwnProperty.call(De,je)&&Ee.indexOf(je)<0&&(He[je]=De[je]);if(null!=De&&"function"==typeof Object.getOwnPropertySymbols){var ct=0;for(je=Object.getOwnPropertySymbols(De);ct<je.length;ct++)Ee.indexOf(je[ct])<0&&Object.prototype.propertyIsEnumerable.call(De,je[ct])&&(He[je[ct]]=De[je[ct]])}return He}function ce(De,Ee,He,je){var At,ct=arguments.length,gt=ct<3?Ee:null===je?je=Object.getOwnPropertyDescriptor(Ee,He):je;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)gt=Reflect.decorate(De,Ee,He,je);else for(var bt=De.length-1;bt>=0;bt--)(At=De[bt])&&(gt=(ct<3?At(gt):ct>3?At(Ee,He,gt):At(Ee,He))||gt);return ct>3&&gt&&Object.defineProperty(Ee,He,gt),gt}function de(De,Ee,He,je){return new(He||(He=Promise))(function(gt,At){function bt(Nn){try{dn(je.next(Nn))}catch(fn){At(fn)}}function Tn(Nn){try{dn(je.throw(Nn))}catch(fn){At(fn)}}function dn(Nn){Nn.done?gt(Nn.value):function ct(gt){return gt instanceof He?gt:new He(function(At){At(gt)})}(Nn.value).then(bt,Tn)}dn((je=je.apply(De,Ee||[])).next())})}function Ce(De){return this instanceof Ce?(this.v=De,this):new Ce(De)}function nt(De,Ee,He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,je=He.apply(De,Ee||[]),gt=[];return ct={},At("next"),At("throw"),At("return"),ct[Symbol.asyncIterator]=function(){return this},ct;function At(tn){je[tn]&&(ct[tn]=function(Dn){return new Promise(function(Ut,cn){gt.push([tn,Dn,Ut,cn])>1||bt(tn,Dn)})})}function bt(tn,Dn){try{!function Tn(tn){tn.value instanceof Ce?Promise.resolve(tn.value.v).then(dn,Nn):fn(gt[0][2],tn)}(je[tn](Dn))}catch(Ut){fn(gt[0][3],Ut)}}function dn(tn){bt("next",tn)}function Nn(tn){bt("throw",tn)}function fn(tn,Dn){tn(Dn),gt.shift(),gt.length&&bt(gt[0][0],gt[0][1])}}function it(De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Ee=De[Symbol.asyncIterator];return Ee?Ee.call(De):(De=function st(De){var Ee="function"==typeof Symbol&&Symbol.iterator,He=Ee&&De[Ee],je=0;if(He)return He.call(De);if(De&&"number"==typeof De.length)return{next:function(){return De&&je>=De.length&&(De=void 0),{value:De&&De[je++],done:!De}}};throw new TypeError(Ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(De),He={},je("next"),je("throw"),je("return"),He[Symbol.asyncIterator]=function(){return this},He);function je(gt){He[gt]=De[gt]&&function(At){return new Promise(function(bt,Tn){!function ct(gt,At,bt,Tn){Promise.resolve(Tn).then(function(dn){gt({value:dn,done:bt})},At)}(bt,Tn,(At=De[gt](At)).done,At.value)})}}}Q.d(Ae,{FC:()=>nt,KL:()=>it,_T:()=>pe,gn:()=>ce,mG:()=>de,qq:()=>Ce}),"function"==typeof SuppressedError&&SuppressedError}},en=>{en(en.s=3375)}]);